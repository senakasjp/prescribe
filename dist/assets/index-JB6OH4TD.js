var L_=Object.defineProperty;var C_=(n,e,t)=>e in n?L_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var mt=(n,e,t)=>C_(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function dt(){}function Sb(n){return n()}function Hp(){return Object.create(null)}function an(n){n.forEach(Sb)}function Ys(n){return typeof n=="function"}function Zn(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function T_(n){return Object.keys(n).length===0}function D_(n,...e){if(n==null){for(const i of e)i(void 0);return dt}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function x_(n,e,t){n.$$.on_destroy.push(D_(e,t))}function u(n,e){n.appendChild(e)}function ue(n,e,t){n.insertBefore(e,t||null)}function ce(n){n.parentNode&&n.parentNode.removeChild(n)}function On(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function m(n){return document.createElement(n)}function le(n){return document.createTextNode(n)}function D(){return le(" ")}function gi(){return le("")}function Ee(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Pf(n){return function(e){return e.preventDefault(),n.call(this,e)}}function d(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Uo(n){return n===""?null:+n}function E_(n){return Array.from(n.childNodes)}function Se(n,e){e=""+e,n.data!==e&&(n.data=e)}function je(n,e){n.value=e??""}function $n(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function as(n,e,t){for(let i=0;i<n.options.length;i+=1){const s=n.options[i];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Ha(n){const e=n.querySelector(":checked");return e&&e.__value}function M_(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}let Cc;function fc(n){Cc=n}function Nf(){if(!Cc)throw new Error("Function called outside component initialization");return Cc}function Go(n){Nf().$$.on_mount.push(n)}function oh(n){Nf().$$.on_destroy.push(n)}function $i(){const n=Nf();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const r=M_(e,t,{cancelable:i});return s.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}const _l=[],Bd=[];let Al=[];const jd=[],O_=Promise.resolve();let Ud=!1;function R_(){Ud||(Ud=!0,O_.then(kb))}function mr(n){Al.push(n)}function F_(n){jd.push(n)}const sd=new Set;let fl=0;function kb(){if(fl!==0)return;const n=Cc;do{try{for(;fl<_l.length;){const e=_l[fl];fl++,fc(e),B_(e.$$)}}catch(e){throw _l.length=0,fl=0,e}for(fc(null),_l.length=0,fl=0;Bd.length;)Bd.pop()();for(let e=0;e<Al.length;e+=1){const t=Al[e];sd.has(t)||(sd.add(t),t())}Al.length=0}while(_l.length);for(;jd.length;)jd.pop()();Ud=!1,sd.clear(),fc(n)}function B_(n){if(n.fragment!==null){n.update(),an(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(mr)}}function j_(n){const e=[],t=[];Al.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Al=e}const Wu=new Set;let Aa;function Mi(){Aa={r:0,c:[],p:Aa}}function Oi(){Aa.r||an(Aa.c),Aa=Aa.p}function Pt(n,e){n&&n.i&&(Wu.delete(n),n.i(e))}function Ot(n,e,t,i){if(n&&n.o){if(Wu.has(n))return;Wu.add(n),Aa.c.push(()=>{Wu.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function Et(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Pb(n,e){n.d(1),e.delete(n.key)}function U_(n,e){Ot(n,1,1,()=>{e.delete(n.key)})}function If(n,e,t,i,s,r,o,a,l,c,h,f){let g=n.length,p=r.length,_=g;const y={};for(;_--;)y[n[_].key]=_;const S=[],w=new Map,P=new Map,x=[];for(_=p;_--;){const L=f(s,r,_),k=t(L);let E=o.get(k);E?x.push(()=>E.p(L,e)):(E=c(k,L),E.c()),w.set(k,S[_]=E),k in y&&P.set(k,Math.abs(_-y[k]))}const F=new Set,U=new Set;function H(L){Pt(L,1),L.m(a,h),o.set(L.key,L),h=L.first,p--}for(;g&&p;){const L=S[p-1],k=n[g-1],E=L.key,R=k.key;L===k?(h=L.first,g--,p--):w.has(R)?!o.has(E)||F.has(E)?H(L):U.has(R)?g--:P.get(E)>P.get(R)?(U.add(E),H(L)):(F.add(R),g--):(l(k,o),g--)}for(;g--;){const L=n[g];w.has(L.key)||l(L,o)}for(;p;)H(S[p-1]);return an(x),S}function z_(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function Gn(n){n&&n.c()}function zn(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),mr(()=>{const r=n.$$.on_mount.map(Sb).filter(Ys);n.$$.on_destroy?n.$$.on_destroy.push(...r):an(r),n.$$.on_mount=[]}),s.forEach(mr)}function Hn(n,e){const t=n.$$;t.fragment!==null&&(j_(t.after_update),an(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function H_(n,e){n.$$.dirty[0]===-1&&(_l.push(n),R_(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ni(n,e,t,i,s,r,o=null,a=[-1]){const l=Cc;fc(n);const c=n.$$={fragment:null,ctx:[],props:r,update:dt,not_equal:s,bound:Hp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Hp(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=t?t(n,e.props||{},(f,g,...p)=>{const _=p.length?p[0]:g;return c.ctx&&s(c.ctx[f],c.ctx[f]=_)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](_),h&&H_(n,f)),g}):[],c.update(),h=!0,an(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=E_(e.target);c.fragment&&c.fragment.l(f),f.forEach(ce)}else c.fragment&&c.fragment.c();e.intro&&Pt(n.$$.fragment),zn(n,e.target,e.anchor),kb()}fc(l)}class ii{constructor(){mt(this,"$$");mt(this,"$$set")}$destroy(){Hn(this,1),this.$destroy=dt}$on(e,t){if(!Ys(t))return dt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!T_(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const q_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(q_);class V_{constructor(){this.storageKey="prescribe-data",this.data=this.loadData()}loadData(){try{const e=localStorage.getItem(this.storageKey),t=e?JSON.parse(e):{doctors:[],pharmacists:[],patients:[],illnesses:[],medications:[],prescriptions:[],symptoms:[]};return t.prescriptions||(t.prescriptions=[]),t.medications||(t.medications=[]),t.pharmacistPrescriptions||(t.pharmacistPrescriptions={}),t.doctors&&t.doctors.forEach(i=>{i.connectedPharmacists||(i.connectedPharmacists=[])}),t.pharmacists&&t.pharmacists.forEach(i=>{i.connectedDoctors||(i.connectedDoctors=[])}),t.doctors||(t.doctors=[]),t.pharmacists||(t.pharmacists=[]),t.patients||(t.patients=[]),t.illnesses||(t.illnesses=[]),t.symptoms||(t.symptoms=[]),t.patients=t.patients.filter(i=>i&&i.firstName&&i.lastName&&i.email&&i.idNumber),t}catch(e){return console.error("Error loading data from localStorage:",e),{doctors:[],patients:[],illnesses:[],medications:[],prescriptions:[],symptoms:[]}}}saveData(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch(e){console.error("Error saving data to localStorage:",e)}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}async createDoctor(e){const t={id:this.generateId(),...e,connectedPharmacists:[],createdAt:new Date().toISOString()};return this.data.doctors.push(t),this.saveData(),t}getDoctorByEmail(e){return this.data.doctors.find(t=>t.email===e)}async getDoctorById(e){return this.data.doctors.find(t=>t.id===e)}async updateDoctor(e){console.log("Updating doctor with data:",e),console.log("Available doctors:",this.data.doctors.map(i=>({id:i.id,email:i.email})));let t=this.data.doctors.findIndex(i=>i.id===e.id);if(t===-1&&e.email&&(t=this.data.doctors.findIndex(i=>i.email===e.email),console.log("Found doctor by email at index:",t)),t!==-1)return this.data.doctors[t]={...this.data.doctors[t],...e},this.saveData(),console.log("Successfully updated doctor:",this.data.doctors[t]),this.data.doctors[t];throw console.error("Doctor not found. Searched by ID:",e.id,"and email:",e.email),new Error("Doctor not found")}async createPharmacist(e){const t={id:this.generateId(),email:e.email,password:e.password,role:e.role,businessName:e.businessName,pharmacistNumber:e.pharmacistNumber,createdAt:e.createdAt,connectedDoctors:[]};return this.data.pharmacists.push(t),this.saveData(),t}async getPharmacistByEmail(e){return this.data.pharmacists.find(t=>t.email===e)}async getPharmacistById(e){return this.data.pharmacists.find(t=>t.id===e)}async getPharmacistByNumber(e){return this.data.pharmacists.find(t=>t.pharmacistNumber===e)}async updatePharmacist(e){const t=this.data.pharmacists.findIndex(i=>i.id===e.id);if(t!==-1)return this.data.pharmacists[t]={...this.data.pharmacists[t],...e},this.saveData(),this.data.pharmacists[t];throw new Error("Pharmacist not found")}async getAllPharmacists(){return this.data.pharmacists}async connectPharmacistToDoctor(e,t){const i=await this.getPharmacistByNumber(e);if(!i)throw new Error("Pharmacist not found");let s=await this.getDoctorById(t);if(s||(s=await this.getDoctorByEmail(t)),!s)throw new Error("Doctor not found");return s.connectedPharmacists||(s.connectedPharmacists=[]),s.connectedPharmacists.includes(i.id)||s.connectedPharmacists.push(i.id),i.connectedDoctors||(i.connectedDoctors=[]),i.connectedDoctors.includes(s.id)||i.connectedDoctors.push(s.id),this.saveData(),i}async getPharmacistPrescriptions(e){var i;return((i=this.loadData().pharmacistPrescriptions)==null?void 0:i[e])||[]}async savePharmacistPrescriptions(e,t){const i=this.loadData();i.pharmacistPrescriptions||(i.pharmacistPrescriptions={}),i.pharmacistPrescriptions[e]=t,this.saveData()}async createPatient(e){var i,s,r,o,a,l,c,h;if(!e.firstName||!e.firstName.trim())throw new Error("First name is required");if(!e.age||!e.age.toString().trim())throw new Error("Age is required");const t={id:this.generateId(),firstName:e.firstName.trim(),lastName:e.lastName.trim(),email:e.email.trim(),phone:((i=e.phone)==null?void 0:i.trim())||"",dateOfBirth:e.dateOfBirth,age:((s=e.age)==null?void 0:s.trim())||"",weight:((r=e.weight)==null?void 0:r.trim())||"",bloodGroup:((o=e.bloodGroup)==null?void 0:o.trim())||"",idNumber:e.idNumber.trim(),address:((a=e.address)==null?void 0:a.trim())||"",allergies:((l=e.allergies)==null?void 0:l.trim())||"",emergencyContact:((c=e.emergencyContact)==null?void 0:c.trim())||"",emergencyPhone:((h=e.emergencyPhone)==null?void 0:h.trim())||"",doctorId:e.doctorId,createdAt:new Date().toISOString()};return this.data.patients.push(t),this.saveData(),t}getPatients(){return this.data.patients.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))}getPatientsByDoctorId(e){return this.data.patients.filter(t=>t.doctorId===e).sort((t,i)=>new Date(i.createdAt)-new Date(t.createdAt))}getPatientById(e){return this.data.patients.find(t=>t.id===e)}async updatePatient(e,t){var r,o,a,l,c,h,f,g;const i=this.data.patients.findIndex(p=>p.id===e);if(i===-1)throw new Error("Patient not found");if(!t.firstName||!t.firstName.trim())throw new Error("First name is required");if(!t.age||!t.age.toString().trim())throw new Error("Age is required");const s={...this.data.patients[i],firstName:t.firstName.trim(),lastName:t.lastName.trim(),email:t.email.trim(),phone:((r=t.phone)==null?void 0:r.trim())||"",dateOfBirth:t.dateOfBirth,age:((o=t.age)==null?void 0:o.trim())||"",weight:((a=t.weight)==null?void 0:a.trim())||"",bloodGroup:((l=t.bloodGroup)==null?void 0:l.trim())||"",idNumber:t.idNumber.trim(),address:((c=t.address)==null?void 0:c.trim())||"",allergies:((h=t.allergies)==null?void 0:h.trim())||"",emergencyContact:((f=t.emergencyContact)==null?void 0:f.trim())||"",emergencyPhone:((g=t.emergencyPhone)==null?void 0:g.trim())||"",updatedAt:new Date().toISOString()};return this.data.patients[i]=s,this.saveData(),s}async createIllness(e){const t={id:this.generateId(),...e,createdAt:new Date().toISOString()};return this.data.illnesses.push(t),this.saveData(),t}getIllnessesByPatientId(e){return this.data.illnesses.filter(t=>t.patientId===e).sort((t,i)=>new Date(i.createdAt)-new Date(t.createdAt))}async createPrescription(e){const t={id:this.generateId(),...e,medications:[],createdAt:new Date().toISOString()};return this.data.prescriptions.push(t),this.saveData(),t}async addMedicationToPrescription(e,t){const i=this.data.prescriptions.find(r=>r.id===e);if(!i)throw new Error("Prescription not found");const s={id:this.generateId(),...t,createdAt:new Date().toISOString()};return i.medications.push(s),i.updatedAt=new Date().toISOString(),this.saveData(),s}getPrescription(e){return this.data.prescriptions.find(t=>t.id===e)}getPrescriptionsByPatientId(e){return this.data.prescriptions.filter(t=>t.patientId===e).sort((t,i)=>new Date(i.createdAt)-new Date(t.createdAt))}getMedicationsByPatientId(e){const t=this.getPrescriptionsByPatientId(e),i=[];return t.forEach(s=>{s.medications.forEach(r=>{i.push({...r,prescriptionId:s.id,prescriptionDate:s.createdAt})})}),i.sort((s,r)=>new Date(r.createdAt)-new Date(s.createdAt))}async createMedication(e){const t=await this.createPrescription({patientId:e.patientId,doctorId:e.doctorId,notes:e.notes||""});return await this.addMedicationToPrescription(t.id,e)}async deletePrescription(e){const t=this.data.prescriptions.findIndex(i=>i.id===e);return t!==-1?(this.data.prescriptions.splice(t,1),this.saveData(),!0):!1}async deleteOldPrescriptions(e={}){throw new Error("Delete operations are disabled in production")}async deleteAllPrescriptions(e=!1){throw new Error("Delete operations are disabled in production")}async deleteMedication(e){const t=this.data.medications.findIndex(i=>i.id===e);return t!==-1?(this.data.medications.splice(t,1),this.saveData(),!0):!1}async updateMedication(e,t){const i=this.data.medications.findIndex(s=>s.id===e);return i!==-1?(this.data.medications[i]={...this.data.medications[i],...t,updatedAt:new Date().toISOString()},this.saveData(),this.data.medications[i]):null}async updatePrescription(e,t){return this.updateMedication(e,t)}async createSymptoms(e){const t={id:this.generateId(),...e,createdAt:new Date().toISOString()};return this.data.symptoms.push(t),this.saveData(),t}getSymptomsByPatientId(e){return this.data.symptoms.filter(t=>t.patientId===e).sort((t,i)=>new Date(i.createdAt)-new Date(t.createdAt))}exportData(){return JSON.stringify(this.data,null,2)}importData(e){try{return this.data=JSON.parse(e),this.saveData(),!0}catch(t){return console.error("Error importing data:",t),!1}}clearAllData(){this.data={doctors:[],patients:[],illnesses:[],medications:[],symptoms:[]},this.saveData()}debugDataState(){console.log("🔍 JSONStorage Debug:"),console.log("Total Patients:",this.data.patients.length),console.log("Total Medications/Prescriptions:",this.data.medications.length),console.log("Total Illnesses:",this.data.illnesses.length),console.log("Total Symptoms:",this.data.symptoms.length),console.log("All Data:",this.data)}resetData(){localStorage.removeItem("prescribe-data"),this.loadData(),console.log("🔄 Data reset complete")}clearCorruptedData(){console.log("Clearing corrupted data..."),this.clearAllData(),console.log("Data cleared successfully")}inspectData(){return console.log("=== DATABASE INSPECTION ==="),console.log("All doctors:",this.data.doctors),console.log("All patients:",this.data.patients),console.log("All illnesses:",this.data.illnesses),console.log("All medications:",this.data.medications),console.log("All symptoms:",this.data.symptoms),console.log("Raw localStorage data:",localStorage.getItem(this.storageKey)),console.log("=== END INSPECTION ==="),this.data}}const kt=new V_;class W_{constructor(){this.currentUser=null,this.loadCurrentUser()}loadCurrentUser(){try{const e=localStorage.getItem("prescribe-current-user");this.currentUser=e?JSON.parse(e):null,console.log("AuthService: Loaded current user from localStorage:",this.currentUser),this.currentUser&&console.log("AuthService: User country from localStorage:",this.currentUser.country)}catch(e){console.error("Error loading current user:",e),this.currentUser=null}}saveCurrentUser(e){try{console.log("AuthService: Saving current user to localStorage:",e),localStorage.setItem("prescribe-current-user",JSON.stringify(e)),this.currentUser=e,console.log("AuthService: User saved successfully to localStorage")}catch(t){console.error("Error saving current user:",t)}}clearCurrentUser(){localStorage.removeItem("prescribe-current-user"),this.currentUser=null}async registerDoctor(e,t,i={}){try{if(await kt.getDoctorByEmail(e))throw new Error("Doctor with this email already exists");const r=await kt.createDoctor({email:e,password:t,role:"doctor",firstName:i.firstName||"",lastName:i.lastName||"",country:i.country||"",name:i.firstName&&i.lastName?`${i.firstName} ${i.lastName}`:""});return this.saveCurrentUser(r),r}catch(s){throw console.error("Error registering doctor:",s),s}}async signInDoctor(e,t){try{const i=await kt.getDoctorByEmail(e);if(!i)throw new Error("Doctor not found");if(i.password!==t)throw new Error("Invalid password");return this.saveCurrentUser(i),i}catch(i){throw console.error("Error signing in doctor:",i),i}}async updateDoctor(e){try{console.log("AuthService: Updating doctor with data:",e),console.log("AuthService: Current user:",this.currentUser);const t=await kt.updateDoctor(e);return this.saveCurrentUser(t),console.log("AuthService: Successfully updated doctor:",t),t}catch(t){throw console.error("AuthService: Error updating doctor:",t),t}}async registerPharmacist(e){try{if(await kt.getPharmacistByEmail(e.email))throw new Error("Pharmacist with this email already exists");return{success:!0,pharmacist:await kt.createPharmacist({email:e.email,password:e.password,role:"pharmacist",businessName:e.businessName,pharmacistNumber:e.pharmacistNumber,createdAt:new Date().toISOString()})}}catch(t){return console.error("Error registering pharmacist:",t),{success:!1,message:t.message}}}async loginPharmacist(e,t){try{const i=await kt.getPharmacistByEmail(e);return i?i.password!==t?{success:!1,message:"Invalid password"}:(this.saveCurrentUser(i),{success:!0,pharmacist:i}):{success:!1,message:"Pharmacist not found"}}catch(i){return console.error("Error logging in pharmacist:",i),{success:!1,message:i.message}}}async signOut(){this.clearCurrentUser()}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}isDoctor(){return this.currentUser&&this.currentUser.role==="doctor"}isPharmacist(){return this.currentUser&&this.currentUser.role==="pharmacist"}onAuthStateChanged(e){return e(this.currentUser),()=>{}}}const Is=new W_,G_=()=>{};var qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Y_=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,h=r>>2,f=(r&3)<<4|a>>4;let g=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(g=64)),i.push(t[h],t[f],t[g],t[p])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Y_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||f==null)throw new K_;const g=r<<2|a>>4;if(i.push(g),c!==64){const p=a<<4&240|c>>2;if(i.push(p),f!==64){const _=c<<6&192|f;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class K_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J_=function(n){const e=Nb(n);return Ib.encodeByteArray(e,!0)},ah=function(n){return J_(n).replace(/\./g,"")},Lb=function(n){try{return Ib.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=()=>X_().__FIREBASE_DEFAULTS__,Q_=()=>{if(typeof process>"u"||typeof qp>"u")return;const n=qp.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Lb(n[1]);return e&&JSON.parse(e)},Lf=()=>{try{return G_()||Z_()||Q_()||$_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cb=n=>{var e,t;return(t=(e=Lf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ey=n=>{const e=Cb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Tb=()=>{var n;return(n=Lf())==null?void 0:n.config},Db=n=>{var e;return(e=Lf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ah(JSON.stringify(t)),ah(JSON.stringify(o)),""].join(".")}const pc={};function iy(){const n={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?n.emulator.push(e):n.prod.push(e);return n}function sy(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Vp=!1;function Eb(n,e){if(typeof window>"u"||typeof document>"u"||!Vc(window.location.host)||pc[n]===e||pc[n]||Vp)return;pc[n]=e;function t(g){return`__firebase__banner__${g}`}const i="__firebase__banner",r=iy().prod.length>0;function o(){const g=document.getElementById(i);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Vp=!0,o()},g}function h(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=sy(i),p=t("text"),_=document.getElementById(p)||document.createElement("span"),y=t("learnmore"),S=document.getElementById(y)||document.createElement("a"),w=t("preprendIcon"),P=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;a(x),h(S,y);const F=c();l(P,w),x.append(P,_,S,F),document.body.appendChild(x)}r?(_.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ry(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qi())}function oy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ay(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ly(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cy(){const n=Qi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uy(){try{return typeof indexedDB=="object"}catch{return!1}}function hy(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="FirebaseError";class Kr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dy,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?fy(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Kr(s,a,i)}}function fy(n,e){return n.replace(py,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const py=/\{\$([^}]+)}/g;function my(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ra(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(Wp(r)&&Wp(o)){if(!Ra(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Wp(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gy(n,e){const t=new by(n,e);return t.subscribe.bind(t)}class by{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");vy(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=rd),s.error===void 0&&(s.error=rd),s.complete===void 0&&(s.complete=rd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vy(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){return n&&n._delegate?n._delegate:n}class Fa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ty;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wy(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yy(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yy(n){return n===ga?void 0:n}function wy(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(In||(In={}));const Sy={debug:In.DEBUG,verbose:In.VERBOSE,info:In.INFO,warn:In.WARN,error:In.ERROR,silent:In.SILENT},ky=In.INFO,Py={[In.DEBUG]:"log",[In.VERBOSE]:"log",[In.INFO]:"info",[In.WARN]:"warn",[In.ERROR]:"error"},Ny=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=Py[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cf{constructor(e){this.name=e,this._logLevel=ky,this._logHandler=Ny,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in In))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,In.DEBUG,...e),this._logHandler(this,In.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,In.VERBOSE,...e),this._logHandler(this,In.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,In.INFO,...e),this._logHandler(this,In.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,In.WARN,...e),this._logHandler(this,In.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,In.ERROR,...e),this._logHandler(this,In.ERROR,...e)}}const Iy=(n,e)=>e.some(t=>n instanceof t);let Gp,Yp;function Ly(){return Gp||(Gp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cy(){return Yp||(Yp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mb=new WeakMap,zd=new WeakMap,Ob=new WeakMap,od=new WeakMap,Tf=new WeakMap;function Ty(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Oo(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Mb.set(t,n)}).catch(()=>{}),Tf.set(e,n),e}function Dy(n){if(zd.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});zd.set(n,e)}let Hd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ob.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Oo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xy(n){Hd=n(Hd)}function Ey(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ad(this),e,...t);return Ob.set(i,e.sort?e.sort():[e]),Oo(i)}:Cy().includes(n)?function(...e){return n.apply(ad(this),e),Oo(Mb.get(this))}:function(...e){return Oo(n.apply(ad(this),e))}}function My(n){return typeof n=="function"?Ey(n):(n instanceof IDBTransaction&&Dy(n),Iy(n,Ly())?new Proxy(n,Hd):n)}function Oo(n){if(n instanceof IDBRequest)return Ty(n);if(od.has(n))return od.get(n);const e=My(n);return e!==n&&(od.set(n,e),Tf.set(e,n)),e}const ad=n=>Tf.get(n);function Oy(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=Oo(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Oo(o.result),l.oldVersion,l.newVersion,Oo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Ry=["get","getKey","getAll","getAllKeys","count"],Fy=["put","add","delete","clear"],ld=new Map;function Kp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ld.get(e))return ld.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=Fy.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Ry.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return ld.set(e,r),r}xy(n=>({...n,get:(e,t,i)=>Kp(e,t)||n.get(e,t,i),has:(e,t)=>!!Kp(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jy(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function jy(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",Jp="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Cf("@firebase/app"),Uy="@firebase/app-compat",zy="@firebase/analytics-compat",Hy="@firebase/analytics",qy="@firebase/app-check-compat",Vy="@firebase/app-check",Wy="@firebase/auth",Gy="@firebase/auth-compat",Yy="@firebase/database",Ky="@firebase/data-connect",Jy="@firebase/database-compat",Xy="@firebase/functions",Zy="@firebase/functions-compat",Qy="@firebase/installations",$y="@firebase/installations-compat",ew="@firebase/messaging",tw="@firebase/messaging-compat",nw="@firebase/performance",iw="@firebase/performance-compat",sw="@firebase/remote-config",rw="@firebase/remote-config-compat",ow="@firebase/storage",aw="@firebase/storage-compat",lw="@firebase/firestore",cw="@firebase/ai",uw="@firebase/firestore-compat",hw="firebase",dw="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="[DEFAULT]",fw={[qd]:"fire-core",[Uy]:"fire-core-compat",[Hy]:"fire-analytics",[zy]:"fire-analytics-compat",[Vy]:"fire-app-check",[qy]:"fire-app-check-compat",[Wy]:"fire-auth",[Gy]:"fire-auth-compat",[Yy]:"fire-rtdb",[Ky]:"fire-data-connect",[Jy]:"fire-rtdb-compat",[Xy]:"fire-fn",[Zy]:"fire-fn-compat",[Qy]:"fire-iid",[$y]:"fire-iid-compat",[ew]:"fire-fcm",[tw]:"fire-fcm-compat",[nw]:"fire-perf",[iw]:"fire-perf-compat",[sw]:"fire-rc",[rw]:"fire-rc-compat",[ow]:"fire-gcs",[aw]:"fire-gcs-compat",[lw]:"fire-fst",[uw]:"fire-fst-compat",[cw]:"fire-vertex","fire-js":"fire-js",[hw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,pw=new Map,Wd=new Map;function Xp(n,e){try{n.container.addComponent(e)}catch(t){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ll(n){const e=n.name;if(Wd.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Wd.set(e,n);for(const t of lh.values())Xp(t,n);for(const t of pw.values())Xp(t,n);return!0}function Df(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ro=new Wc("app","Firebase",mw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=dw;function Rb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Vd,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ro.create("bad-app-name",{appName:String(s)});if(t||(t=Tb()),!t)throw Ro.create("no-options");const r=lh.get(s);if(r){if(Ra(t,r.options)&&Ra(i,r.config))return r;throw Ro.create("duplicate-app",{appName:s})}const o=new Ay(s);for(const l of Wd.values())o.addComponent(l);const a=new gw(t,i,o);return lh.set(s,a),a}function Fb(n=Vd){const e=lh.get(n);if(!e&&n===Vd&&Tb())return Rb();if(!e)throw Ro.create("no-app",{appName:n});return e}function Fo(n,e,t){let i=fw[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(o.join(" "));return}Ll(new Fa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebase-heartbeat-database",vw=1,Tc="firebase-heartbeat-store";let cd=null;function Bb(){return cd||(cd=Oy(bw,vw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ro.create("idb-open",{originalErrorMessage:n.message})})),cd}async function _w(n){try{const t=(await Bb()).transaction(Tc),i=await t.objectStore(Tc).get(jb(n));return await t.done,i}catch(e){if(e instanceof Kr)Gr.warn(e.message);else{const t=Ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(t.message)}}}async function Zp(n,e){try{const i=(await Bb()).transaction(Tc,"readwrite");await i.objectStore(Tc).put(e,jb(n)),await i.done}catch(t){if(t instanceof Kr)Gr.warn(t.message);else{const i=Ro.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gr.warn(i.message)}}}function jb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=1024,ww=30;class Aw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>ww){const o=Pw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Gr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qp(),{heartbeatsToSend:i,unsentEntries:s}=Sw(this._heartbeatsCache.heartbeats),r=ah(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Gr.warn(t),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function Sw(n,e=yw){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),$p(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),$p(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class kw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uy()?hy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _w(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $p(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}function Pw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n){Ll(new Fa("platform-logger",e=>new By(e),"PRIVATE")),Ll(new Fa("heartbeat",e=>new Aw(e),"PRIVATE")),Fo(qd,Jp,n),Fo(qd,Jp,"esm2020"),Fo("fire-js","")}Nw("");function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Iw=Ub,zb=new Wc("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Cf("@firebase/auth");function Lw(n,...e){ch.logLevel<=In.WARN&&ch.warn(`Auth (${Ol}): ${n}`,...e)}function Gu(n,...e){ch.logLevel<=In.ERROR&&ch.error(`Auth (${Ol}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,...e){throw Ef(n,...e)}function Ws(n,...e){return Ef(n,...e)}function xf(n,e,t){const i={...Iw(),[e]:t};return new Wc("auth","Firebase",i).create(e,{appName:n.name})}function Ia(n){return xf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cw(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&gr(n,"argument-error"),xf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return zb.create(n,...e)}function Kt(n,e,...t){if(!n)throw Ef(e,...t)}function zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gu(e),new Error(e)}function Yr(n,e){n||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Tw(){return em()==="http:"||em()==="https:"}function em(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tw()||ay()||"connection"in navigator)?navigator.onLine:!0}function xw(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile=ry()||ly()}get(){return Dw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e){Yr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ow=new Yc(3e4,6e4);function Of(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Rl(n,e,t,i,s={}){return qb(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=Gc({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...r};return oy()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Vc(n.emulatorConfig.host)&&(c.credentials="include"),Hb.fetch()(await Vb(n,n.config.apiHost,t,a),c)})}async function qb(n,e,t){n._canInitEmulator=!1;const i={...Ew,...e};try{const s=new Fw(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw ku(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ku(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ku(n,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xf(n,h,c);gr(n,h)}}catch(s){if(s instanceof Kr)throw s;gr(n,"network-request-failed",{message:String(s)})}}async function Rw(n,e,t,i,s={}){const r=await Rl(n,e,t,i,s);return"mfaPendingCredential"in r&&gr(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function Vb(n,e,t,i){const s=`${e}${t}?${i}`,r=n,o=r.config.emulator?Mf(n.config,s):`${n.config.apiScheme}://${s}`;return Mw.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class Fw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ws(this.auth,"network-request-failed")),Ow.get())})}}function ku(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ws(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(n,e){return Rl(n,"POST","/v1/accounts:delete",e)}async function uh(n,e){return Rl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jw(n,e=!1){const t=Yo(n),i=await t.getIdToken(e),s=Rf(i);Kt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:mc(ud(s.auth_time)),issuedAtTime:mc(ud(s.iat)),expirationTime:mc(ud(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function ud(n){return Number(n)*1e3}function Rf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Lb(t);return s?JSON.parse(s):(Gu("Failed to decode base64 JWT payload"),null)}catch(s){return Gu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tm(n){const e=Rf(n);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Kr&&Uw(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Uw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n){var f;const e=n.auth,t=await n.getIdToken(),i=await Dc(n,uh(e,{idToken:t}));Kt(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const r=(f=s.providerUserInfo)!=null&&f.length?Wb(s.providerUserInfo):[],o=qw(n.providerData,r),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function Hw(n){const e=Yo(n);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qw(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Wb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(n,e){const t=await qb(n,{},async()=>{const i=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await Vb(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return n.emulatorConfig&&Vc(n.emulatorConfig.host)&&(l.credentials="include"),Hb.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ww(n,e){return Rl(n,"POST","/v2/accounts:revokeToken",Of(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const t=tm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await Vw(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new Sl;return i&&(Kt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(Kt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(Kt(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(n,e){Kt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Hs{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new zw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jw(this,e)}reload(){return Hw(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await hh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zs(this.auth.app))return Promise.reject(Ia(this.auth));const e=await this.getIdToken();return await Dc(this,Bw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,r=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:p,providerData:_,stsTokenManager:y}=t;Kt(f&&y,e,"internal-error");const S=Sl.fromJSON(this.name,y);Kt(typeof f=="string",e,"internal-error"),So(i,e.name),So(s,e.name),Kt(typeof g=="boolean",e,"internal-error"),Kt(typeof p=="boolean",e,"internal-error"),So(r,e.name),So(o,e.name),So(a,e.name),So(l,e.name),So(c,e.name),So(h,e.name);const w=new Hs({uid:f,auth:e,email:s,emailVerified:g,displayName:i,isAnonymous:p,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:S,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(w.providerData=_.map(P=>({...P}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,t,i=!1){const s=new Sl;s.updateFromServerResponse(t);const r=new Hs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await hh(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Kt(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?Wb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Sl;a.updateFromIdToken(i);const l=new Hs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Map;function Hr(n){Yr(n instanceof Function,"Expected a class definition");let e=nm.get(n);return e?(Yr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nm.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gb.type="NONE";const im=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n,e,t){return`firebase:${n}:${e}:${t}`}class kl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Yu(this.userKey,s.apiKey,r),this.fullPersistenceKey=Yu("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uh(this.auth,{idToken:e}).catch(()=>{});return t?Hs._fromGetAccountInfoResponse(this.auth,t,e):null}return Hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new kl(Hr(im),e,i);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Hr(im);const o=Yu(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const g=await uh(e,{idToken:h}).catch(()=>{});if(!g)break;f=await Hs._fromGetAccountInfoResponse(e,g,h)}else f=Hs._fromJSON(e,h);c!==r&&(a=f),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new kl(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new kl(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qb(e))return"Blackberry";if($b(e))return"Webos";if(Kb(e))return"Safari";if((e.includes("chrome/")||Jb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Yb(n=Qi()){return/firefox\//i.test(n)}function Kb(n=Qi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jb(n=Qi()){return/crios\//i.test(n)}function Xb(n=Qi()){return/iemobile/i.test(n)}function Zb(n=Qi()){return/android/i.test(n)}function Qb(n=Qi()){return/blackberry/i.test(n)}function $b(n=Qi()){return/webos/i.test(n)}function Ff(n=Qi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Gw(n=Qi()){var e;return Ff(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Yw(){return cy()&&document.documentMode===10}function e5(n=Qi()){return Ff(n)||Zb(n)||$b(n)||Qb(n)||/windows phone/i.test(n)||Xb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(n,e=[]){let t;switch(n){case"Browser":t=sm(Qi());break;case"Worker":t=`${sm(Qi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(n,e={}){return Rl(n,"GET","/v2/passwordPolicy",Of(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=6;class Zw{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Xw,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rm(this),this.idTokenSubscription=new rm(this),this.beforeStateQueue=new Kw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await kl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uh(this,{idToken:e}),i=await Hs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(zs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zs(this.app))return Promise.reject(Ia(this));const t=e?Yo(e):null;return t&&Kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zs(this.app)?Promise.reject(Ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zs(this.app)?Promise.reject(Ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Jw(this),t=new Zw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Ww(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;Kt(t,this,"argument-error"),this.redirectPersistenceManager=await kl.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(zs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Lw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ih(n){return Yo(n)}class rm{constructor(e){this.auth=e,this.observer=null,this.addObserver=gy(t=>this.observer=t)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $w(n){Bf=n}function e3(n){return Bf.loadJS(n)}function t3(){return Bf.gapiScript}function n3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n,e){const t=Df(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(Ra(r,e??{}))return s;gr(s,"already-initialized")}return t.initialize({options:e})}function s3(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Hr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function r3(n,e,t){const i=Ih(n);Kt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=n5(e),{host:o,port:a}=o3(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Kt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Kt(Ra(c,i.config.emulator)&&Ra(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Vc(o)?(xb(`${r}//${o}${l}`),Eb("Auth",!0)):a3()}function n5(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o3(n){const e=n5(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:om(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:om(o)}}}function om(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function a3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e){return Rw(n,"POST","/v1/accounts:signInWithIdp",Of(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="http://localhost";class Ba extends i5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=t;if(!i||!s)return null;const o=new Ba(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Pl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Pl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pl(e,t)}buildRequest(){const e={requestUri:l3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Kc{constructor(){super("facebook.com")}static credential(e){return Ba._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ba._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return jr.credential(t,i)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Kc{constructor(){super("github.com")}static credential(e){return Ba._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.GITHUB_SIGN_IN_METHOD="github.com";Io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Kc{constructor(){super("twitter.com")}static credential(e,t){return Ba._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Lo.credential(t,i)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await Hs._fromIdTokenResponse(e,i,s),o=am(i);return new Cl({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=am(i);return new Cl({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function am(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends Kr{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new dh(e,t,i,s)}}function s5(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(n,r,e,i):r})}async function c3(n,e,t=!1){const i=await Dc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(n,e,t=!1){const{auth:i}=n;if(zs(i.app))return Promise.reject(Ia(i));const s="reauthenticate";try{const r=await Dc(n,s5(i,s,e,n),t);Kt(r.idToken,i,"internal-error");const o=Rf(r.idToken);Kt(o,i,"internal-error");const{sub:a}=o;return Kt(n.uid===a,i,"user-mismatch"),Cl._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&gr(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(n,e,t=!1){if(zs(n.app))return Promise.reject(Ia(n));const i="signIn",s=await s5(n,i,e),r=await Cl._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}function d3(n,e,t,i){return Yo(n).onIdTokenChanged(e,t,i)}function f3(n,e,t){return Yo(n).beforeAuthStateChanged(e,t)}function p3(n,e,t,i){return Yo(n).onAuthStateChanged(e,t,i)}function m3(n){return Yo(n).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=1e3,b3=10;class o5 extends r5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=e5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);Yw()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b3):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},g3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o5.type="LOCAL";const v3=o5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5 extends r5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a5.type="SESSION";const l5=a5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await _3(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Uf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function w3(n){dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function A3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S3(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function k3(){return c5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="firebaseLocalStorageDb",P3=1,ph="firebaseLocalStorage",h5="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ch(n,e){return n.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function N3(){const n=indexedDB.deleteDatabase(u5);return new Jc(n).toPromise()}function Kd(){const n=indexedDB.open(u5,P3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ph,{keyPath:h5})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ph)?e(i):(i.close(),await N3(),e(await Kd()))})})}async function lm(n,e,t){const i=Ch(n,!0).put({[h5]:e,value:t});return new Jc(i).toPromise()}async function I3(n,e){const t=Ch(n,!1).get(e),i=await new Jc(t).toPromise();return i===void 0?null:i.value}function cm(n,e){const t=Ch(n,!0).delete(e);return new Jc(t).toPromise()}const L3=800,C3=3;class d5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>C3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(k3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await A3(),!this.activeServiceWorker)return;this.sender=new y3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kd();return await lm(e,fh,"1"),await cm(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lm(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>I3(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Ch(s,!1).getAll();return new Jc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d5.type="LOCAL";const T3=d5;new Yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(n,e){return e?Hr(e):(Kt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends i5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function D3(n){return h3(n.auth,new zf(n),n.bypassAuthState)}function x3(n){const{auth:e,user:t}=n;return Kt(t,e,"internal-error"),u3(t,new zf(n),n.bypassAuthState)}async function E3(n){const{auth:e,user:t}=n;return Kt(t,e,"internal-error"),c3(t,new zf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D3;case"linkViaPopup":case"linkViaRedirect":return E3;case"reauthViaPopup":case"reauthViaRedirect":return x3;default:gr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Yc(2e3,1e4);async function O3(n,e,t){if(zs(n.app))return Promise.reject(Ws(n,"operation-not-supported-in-this-environment"));const i=Ih(n);Cw(n,e,jf);const s=f5(i,t);return new Sa(i,"signInViaPopup",e,s).executeNotNull()}class Sa extends p5{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M3.get())};e()}}Sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="pendingRedirect",Ku=new Map;class F3 extends p5{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const i=await B3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B3(n,e){const t=z3(e),i=U3(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function j3(n,e){Ku.set(n._key(),e)}function U3(n){return Hr(n._redirectPersistence)}function z3(n){return Yu(R3,n.config.apiKey,n.name)}async function H3(n,e,t=!1){if(zs(n.app))return Promise.reject(Ia(n));const i=Ih(n),s=f5(i,e),o=await new F3(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=10*60*1e3;class V3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!m5(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ws(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q3&&this.cachedEventUids.clear(),this.cachedEventUids.has(um(e))}saveEventToCache(e){this.cachedEventUids.add(um(e)),this.lastProcessedEventTime=Date.now()}}function um(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function m5({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function W3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m5(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(n,e={}){return Rl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K3=/^https?/;async function J3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await G3(n);for(const t of e)try{if(X3(t))return}catch{}gr(n,"unauthorized-domain")}function X3(n){const e=Gd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!K3.test(t))return!1;if(Y3.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new Yc(3e4,6e4);function hm(){const n=dr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q3(n){return new Promise((e,t)=>{var s,r,o;function i(){hm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hm(),t(Ws(n,"network-request-failed"))},timeout:Z3.get()})}if((r=(s=dr().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=dr().gapi)!=null&&o.load)i();else{const a=n3("iframefcb");return dr()[a]=()=>{gapi.load?i():t(Ws(n,"network-request-failed"))},e3(`${t3()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function $3(n){return Ju=Ju||Q3(n),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Yc(5e3,15e3),t4="__/auth/iframe",n4="emulator/auth/iframe",i4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r4(n){const e=n.config;Kt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mf(e,n4):`https://${n.config.authDomain}/${t4}`,i={apiKey:e.apiKey,appName:n.name,v:Ol},s=s4.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${Gc(i).slice(1)}`}async function o4(n){const e=await $3(n),t=dr().gapi;return Kt(t,n,"internal-error"),e.open({where:document.body,url:r4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Ws(n,"network-request-failed"),a=dr().setTimeout(()=>{r(o)},e4.get());function l(){dr().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l4=500,c4=600,u4="_blank",h4="http://localhost";class dm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d4(n,e,t,i=l4,s=c4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...a4,width:i.toString(),height:s.toString(),top:r,left:o},c=Qi().toLowerCase();t&&(a=Jb(c)?u4:t),Yb(c)&&(e=e||h4,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[p,_])=>`${g}${p}=${_},`,"");if(Gw(c)&&a!=="_self")return f4(e||"",a),new dm(null);const f=window.open(e||"",a,h);Kt(f,n,"popup-blocked");try{f.focus()}catch{}return new dm(f)}function f4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="__/auth/handler",m4="emulator/auth/handler",g4=encodeURIComponent("fac");async function fm(n,e,t,i,s,r){Kt(n.config.authDomain,n,"auth-domain-config-required"),Kt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ol,eventId:s};if(e instanceof jf){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",my(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Kc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${g4}=${encodeURIComponent(l)}`:"";return`${b4(n)}?${Gc(a).slice(1)}${c}`}function b4({config:n}){return n.emulator?Mf(n,m4):`https://${n.authDomain}/${p4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="webStorageSupport";class v4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l5,this._completeRedirectFn=H3,this._overrideRedirectResult=j3}async _openPopup(e,t,i,s){var o;Yr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await fm(e,t,i,Gd(),s);return d4(e,r,Uf())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await fm(e,t,i,Gd(),s);return w3(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Yr(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await o4(e),i=new V3(e);return t.register("authEvent",s=>(Kt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hd,{type:hd},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[hd];r!==void 0&&t(!!r),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=J3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return e5()||Kb()||Ff()}}const _4=v4;var pm="@firebase/auth",mm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A4(n){Ll(new Fa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Kt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t5(n)},c=new Qw(i,s,r,l);return s3(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ll(new Fa("auth-internal",e=>{const t=Ih(e.getProvider("auth").getImmediate());return(i=>new y4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fo(pm,mm,w4(n)),Fo(pm,mm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=5*60,k4=Db("authIdTokenMaxAge")||S4;let gm=null;const P4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>k4)return;const s=t==null?void 0:t.token;gm!==s&&(gm=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function N4(n=Fb()){const e=Df(n,"auth");if(e.isInitialized())return e.getImmediate();const t=i3(n,{popupRedirectResolver:_4,persistence:[T3,v3,l5]}),i=Db("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=P4(r.toString());f3(t,o,()=>o(t.currentUser)),d3(t,a=>o(a))}}const s=Cb("auth");return s&&r3(t,`http://${s}`),t}function I4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$w({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Ws("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",I4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A4("Browser");var L4="firebase",C4="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo(L4,C4,"app");var bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hf;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,k){function E(){}E.prototype=k.prototype,L.D=k.prototype,L.prototype=new E,L.prototype.constructor=L,L.C=function(R,I,C){for(var O=Array(arguments.length-2),q=2;q<arguments.length;q++)O[q-2]=arguments[q];return k.prototype[I].apply(R,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,k,E){E||(E=0);var R=Array(16);if(typeof k=="string")for(var I=0;16>I;++I)R[I]=k.charCodeAt(E++)|k.charCodeAt(E++)<<8|k.charCodeAt(E++)<<16|k.charCodeAt(E++)<<24;else for(I=0;16>I;++I)R[I]=k[E++]|k[E++]<<8|k[E++]<<16|k[E++]<<24;k=L.g[0],E=L.g[1],I=L.g[2];var C=L.g[3],O=k+(C^E&(I^C))+R[0]+3614090360&4294967295;k=E+(O<<7&4294967295|O>>>25),O=C+(I^k&(E^I))+R[1]+3905402710&4294967295,C=k+(O<<12&4294967295|O>>>20),O=I+(E^C&(k^E))+R[2]+606105819&4294967295,I=C+(O<<17&4294967295|O>>>15),O=E+(k^I&(C^k))+R[3]+3250441966&4294967295,E=I+(O<<22&4294967295|O>>>10),O=k+(C^E&(I^C))+R[4]+4118548399&4294967295,k=E+(O<<7&4294967295|O>>>25),O=C+(I^k&(E^I))+R[5]+1200080426&4294967295,C=k+(O<<12&4294967295|O>>>20),O=I+(E^C&(k^E))+R[6]+2821735955&4294967295,I=C+(O<<17&4294967295|O>>>15),O=E+(k^I&(C^k))+R[7]+4249261313&4294967295,E=I+(O<<22&4294967295|O>>>10),O=k+(C^E&(I^C))+R[8]+1770035416&4294967295,k=E+(O<<7&4294967295|O>>>25),O=C+(I^k&(E^I))+R[9]+2336552879&4294967295,C=k+(O<<12&4294967295|O>>>20),O=I+(E^C&(k^E))+R[10]+4294925233&4294967295,I=C+(O<<17&4294967295|O>>>15),O=E+(k^I&(C^k))+R[11]+2304563134&4294967295,E=I+(O<<22&4294967295|O>>>10),O=k+(C^E&(I^C))+R[12]+1804603682&4294967295,k=E+(O<<7&4294967295|O>>>25),O=C+(I^k&(E^I))+R[13]+4254626195&4294967295,C=k+(O<<12&4294967295|O>>>20),O=I+(E^C&(k^E))+R[14]+2792965006&4294967295,I=C+(O<<17&4294967295|O>>>15),O=E+(k^I&(C^k))+R[15]+1236535329&4294967295,E=I+(O<<22&4294967295|O>>>10),O=k+(I^C&(E^I))+R[1]+4129170786&4294967295,k=E+(O<<5&4294967295|O>>>27),O=C+(E^I&(k^E))+R[6]+3225465664&4294967295,C=k+(O<<9&4294967295|O>>>23),O=I+(k^E&(C^k))+R[11]+643717713&4294967295,I=C+(O<<14&4294967295|O>>>18),O=E+(C^k&(I^C))+R[0]+3921069994&4294967295,E=I+(O<<20&4294967295|O>>>12),O=k+(I^C&(E^I))+R[5]+3593408605&4294967295,k=E+(O<<5&4294967295|O>>>27),O=C+(E^I&(k^E))+R[10]+38016083&4294967295,C=k+(O<<9&4294967295|O>>>23),O=I+(k^E&(C^k))+R[15]+3634488961&4294967295,I=C+(O<<14&4294967295|O>>>18),O=E+(C^k&(I^C))+R[4]+3889429448&4294967295,E=I+(O<<20&4294967295|O>>>12),O=k+(I^C&(E^I))+R[9]+568446438&4294967295,k=E+(O<<5&4294967295|O>>>27),O=C+(E^I&(k^E))+R[14]+3275163606&4294967295,C=k+(O<<9&4294967295|O>>>23),O=I+(k^E&(C^k))+R[3]+4107603335&4294967295,I=C+(O<<14&4294967295|O>>>18),O=E+(C^k&(I^C))+R[8]+1163531501&4294967295,E=I+(O<<20&4294967295|O>>>12),O=k+(I^C&(E^I))+R[13]+2850285829&4294967295,k=E+(O<<5&4294967295|O>>>27),O=C+(E^I&(k^E))+R[2]+4243563512&4294967295,C=k+(O<<9&4294967295|O>>>23),O=I+(k^E&(C^k))+R[7]+1735328473&4294967295,I=C+(O<<14&4294967295|O>>>18),O=E+(C^k&(I^C))+R[12]+2368359562&4294967295,E=I+(O<<20&4294967295|O>>>12),O=k+(E^I^C)+R[5]+4294588738&4294967295,k=E+(O<<4&4294967295|O>>>28),O=C+(k^E^I)+R[8]+2272392833&4294967295,C=k+(O<<11&4294967295|O>>>21),O=I+(C^k^E)+R[11]+1839030562&4294967295,I=C+(O<<16&4294967295|O>>>16),O=E+(I^C^k)+R[14]+4259657740&4294967295,E=I+(O<<23&4294967295|O>>>9),O=k+(E^I^C)+R[1]+2763975236&4294967295,k=E+(O<<4&4294967295|O>>>28),O=C+(k^E^I)+R[4]+1272893353&4294967295,C=k+(O<<11&4294967295|O>>>21),O=I+(C^k^E)+R[7]+4139469664&4294967295,I=C+(O<<16&4294967295|O>>>16),O=E+(I^C^k)+R[10]+3200236656&4294967295,E=I+(O<<23&4294967295|O>>>9),O=k+(E^I^C)+R[13]+681279174&4294967295,k=E+(O<<4&4294967295|O>>>28),O=C+(k^E^I)+R[0]+3936430074&4294967295,C=k+(O<<11&4294967295|O>>>21),O=I+(C^k^E)+R[3]+3572445317&4294967295,I=C+(O<<16&4294967295|O>>>16),O=E+(I^C^k)+R[6]+76029189&4294967295,E=I+(O<<23&4294967295|O>>>9),O=k+(E^I^C)+R[9]+3654602809&4294967295,k=E+(O<<4&4294967295|O>>>28),O=C+(k^E^I)+R[12]+3873151461&4294967295,C=k+(O<<11&4294967295|O>>>21),O=I+(C^k^E)+R[15]+530742520&4294967295,I=C+(O<<16&4294967295|O>>>16),O=E+(I^C^k)+R[2]+3299628645&4294967295,E=I+(O<<23&4294967295|O>>>9),O=k+(I^(E|~C))+R[0]+4096336452&4294967295,k=E+(O<<6&4294967295|O>>>26),O=C+(E^(k|~I))+R[7]+1126891415&4294967295,C=k+(O<<10&4294967295|O>>>22),O=I+(k^(C|~E))+R[14]+2878612391&4294967295,I=C+(O<<15&4294967295|O>>>17),O=E+(C^(I|~k))+R[5]+4237533241&4294967295,E=I+(O<<21&4294967295|O>>>11),O=k+(I^(E|~C))+R[12]+1700485571&4294967295,k=E+(O<<6&4294967295|O>>>26),O=C+(E^(k|~I))+R[3]+2399980690&4294967295,C=k+(O<<10&4294967295|O>>>22),O=I+(k^(C|~E))+R[10]+4293915773&4294967295,I=C+(O<<15&4294967295|O>>>17),O=E+(C^(I|~k))+R[1]+2240044497&4294967295,E=I+(O<<21&4294967295|O>>>11),O=k+(I^(E|~C))+R[8]+1873313359&4294967295,k=E+(O<<6&4294967295|O>>>26),O=C+(E^(k|~I))+R[15]+4264355552&4294967295,C=k+(O<<10&4294967295|O>>>22),O=I+(k^(C|~E))+R[6]+2734768916&4294967295,I=C+(O<<15&4294967295|O>>>17),O=E+(C^(I|~k))+R[13]+1309151649&4294967295,E=I+(O<<21&4294967295|O>>>11),O=k+(I^(E|~C))+R[4]+4149444226&4294967295,k=E+(O<<6&4294967295|O>>>26),O=C+(E^(k|~I))+R[11]+3174756917&4294967295,C=k+(O<<10&4294967295|O>>>22),O=I+(k^(C|~E))+R[2]+718787259&4294967295,I=C+(O<<15&4294967295|O>>>17),O=E+(C^(I|~k))+R[9]+3951481745&4294967295,L.g[0]=L.g[0]+k&4294967295,L.g[1]=L.g[1]+(I+(O<<21&4294967295|O>>>11))&4294967295,L.g[2]=L.g[2]+I&4294967295,L.g[3]=L.g[3]+C&4294967295}i.prototype.u=function(L,k){k===void 0&&(k=L.length);for(var E=k-this.blockSize,R=this.B,I=this.h,C=0;C<k;){if(I==0)for(;C<=E;)s(this,L,C),C+=this.blockSize;if(typeof L=="string"){for(;C<k;)if(R[I++]=L.charCodeAt(C++),I==this.blockSize){s(this,R),I=0;break}}else for(;C<k;)if(R[I++]=L[C++],I==this.blockSize){s(this,R),I=0;break}}this.h=I,this.o+=k},i.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var k=1;k<L.length-8;++k)L[k]=0;var E=8*this.o;for(k=L.length-8;k<L.length;++k)L[k]=E&255,E/=256;for(this.u(L),L=Array(16),k=E=0;4>k;++k)for(var R=0;32>R;R+=8)L[E++]=this.g[k]>>>R&255;return L};function r(L,k){var E=a;return Object.prototype.hasOwnProperty.call(E,L)?E[L]:E[L]=k(L)}function o(L,k){this.h=k;for(var E=[],R=!0,I=L.length-1;0<=I;I--){var C=L[I]|0;R&&C==k||(E[I]=C,R=!1)}this.g=E}var a={};function l(L){return-128<=L&&128>L?r(L,function(k){return new o([k|0],0>k?-1:0)}):new o([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return S(c(-L));for(var k=[],E=1,R=0;L>=E;R++)k[R]=L/E|0,E*=4294967296;return new o(k,0)}function h(L,k){if(L.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(L.charAt(0)=="-")return S(h(L.substring(1),k));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(k,8)),R=f,I=0;I<L.length;I+=8){var C=Math.min(8,L.length-I),O=parseInt(L.substring(I,I+C),k);8>C?(C=c(Math.pow(k,C)),R=R.j(C).add(c(O))):(R=R.j(E),R=R.add(c(O)))}return R}var f=l(0),g=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-S(this).m();for(var L=0,k=1,E=0;E<this.g.length;E++){var R=this.i(E);L+=(0<=R?R:4294967296+R)*k,k*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(_(this))return"0";if(y(this))return"-"+S(this).toString(L);for(var k=c(Math.pow(L,6)),E=this,R="";;){var I=F(E,k).g;E=w(E,I.j(k));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(L);if(E=I,_(E))return C+R;for(;6>C.length;)C="0"+C;R=C+R}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function _(L){if(L.h!=0)return!1;for(var k=0;k<L.g.length;k++)if(L.g[k]!=0)return!1;return!0}function y(L){return L.h==-1}n.l=function(L){return L=w(this,L),y(L)?-1:_(L)?0:1};function S(L){for(var k=L.g.length,E=[],R=0;R<k;R++)E[R]=~L.g[R];return new o(E,~L.h).add(g)}n.abs=function(){return y(this)?S(this):this},n.add=function(L){for(var k=Math.max(this.g.length,L.g.length),E=[],R=0,I=0;I<=k;I++){var C=R+(this.i(I)&65535)+(L.i(I)&65535),O=(C>>>16)+(this.i(I)>>>16)+(L.i(I)>>>16);R=O>>>16,C&=65535,O&=65535,E[I]=O<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(L,k){return L.add(S(k))}n.j=function(L){if(_(this)||_(L))return f;if(y(this))return y(L)?S(this).j(S(L)):S(S(this).j(L));if(y(L))return S(this.j(S(L)));if(0>this.l(p)&&0>L.l(p))return c(this.m()*L.m());for(var k=this.g.length+L.g.length,E=[],R=0;R<2*k;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(var I=0;I<L.g.length;I++){var C=this.i(R)>>>16,O=this.i(R)&65535,q=L.i(I)>>>16,Y=L.i(I)&65535;E[2*R+2*I]+=O*Y,P(E,2*R+2*I),E[2*R+2*I+1]+=C*Y,P(E,2*R+2*I+1),E[2*R+2*I+1]+=O*q,P(E,2*R+2*I+1),E[2*R+2*I+2]+=C*q,P(E,2*R+2*I+2)}for(R=0;R<k;R++)E[R]=E[2*R+1]<<16|E[2*R];for(R=k;R<2*k;R++)E[R]=0;return new o(E,0)};function P(L,k){for(;(L[k]&65535)!=L[k];)L[k+1]+=L[k]>>>16,L[k]&=65535,k++}function x(L,k){this.g=L,this.h=k}function F(L,k){if(_(k))throw Error("division by zero");if(_(L))return new x(f,f);if(y(L))return k=F(S(L),k),new x(S(k.g),S(k.h));if(y(k))return k=F(L,S(k)),new x(S(k.g),k.h);if(30<L.g.length){if(y(L)||y(k))throw Error("slowDivide_ only works with positive integers.");for(var E=g,R=k;0>=R.l(L);)E=U(E),R=U(R);var I=H(E,1),C=H(R,1);for(R=H(R,2),E=H(E,2);!_(R);){var O=C.add(R);0>=O.l(L)&&(I=I.add(E),C=O),R=H(R,1),E=H(E,1)}return k=w(L,I.j(k)),new x(I,k)}for(I=f;0<=L.l(k);){for(E=Math.max(1,Math.floor(L.m()/k.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),C=c(E),O=C.j(k);y(O)||0<O.l(L);)E-=R,C=c(E),O=C.j(k);_(C)&&(C=g),I=I.add(C),L=w(L,O)}return new x(I,L)}n.A=function(L){return F(this,L).h},n.and=function(L){for(var k=Math.max(this.g.length,L.g.length),E=[],R=0;R<k;R++)E[R]=this.i(R)&L.i(R);return new o(E,this.h&L.h)},n.or=function(L){for(var k=Math.max(this.g.length,L.g.length),E=[],R=0;R<k;R++)E[R]=this.i(R)|L.i(R);return new o(E,this.h|L.h)},n.xor=function(L){for(var k=Math.max(this.g.length,L.g.length),E=[],R=0;R<k;R++)E[R]=this.i(R)^L.i(R);return new o(E,this.h^L.h)};function U(L){for(var k=L.g.length+1,E=[],R=0;R<k;R++)E[R]=L.i(R)<<1|L.i(R-1)>>>31;return new o(E,L.h)}function H(L,k){var E=k>>5;k%=32;for(var R=L.g.length-E,I=[],C=0;C<R;C++)I[C]=0<k?L.i(C+E)>>>k|L.i(C+E+1)<<32-k:L.i(C+E);return new o(I,L.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Hf=o}).apply(typeof bm<"u"?bm:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,M,z){return v==Array.prototype||v==Object.prototype||(v[M]=z.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var M=0;M<v.length;++M){var z=v[M];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var i=t(this);function s(v,M){if(M)e:{var z=i;v=v.split(".");for(var ie=0;ie<v.length-1;ie++){var Ne=v[ie];if(!(Ne in z))break e;z=z[Ne]}v=v[v.length-1],ie=z[v],M=M(ie),M!=ie&&M!=null&&e(z,v,{configurable:!0,writable:!0,value:M})}}function r(v,M){v instanceof String&&(v+="");var z=0,ie=!1,Ne={next:function(){if(!ie&&z<v.length){var Be=z++;return{value:M(Be,v[Be]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Ne[Symbol.iterator]=function(){return Ne},Ne}s("Array.prototype.values",function(v){return v||function(){return r(this,function(M,z){return z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(v){var M=typeof v;return M=M!="object"?M:v?Array.isArray(v)?"array":M:"null",M=="array"||M=="object"&&typeof v.length=="number"}function c(v){var M=typeof v;return M=="object"&&v!=null||M=="function"}function h(v,M,z){return v.call.apply(v.bind,arguments)}function f(v,M,z){if(!v)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ne,ie),v.apply(M,Ne)}}return function(){return v.apply(M,arguments)}}function g(v,M,z){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function p(v,M){var z=Array.prototype.slice.call(arguments,1);return function(){var ie=z.slice();return ie.push.apply(ie,arguments),v.apply(this,ie)}}function _(v,M){function z(){}z.prototype=M.prototype,v.aa=M.prototype,v.prototype=new z,v.prototype.constructor=v,v.Qb=function(ie,Ne,Be){for(var ct=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)ct[Gt-2]=arguments[Gt];return M.prototype[Ne].apply(ie,ct)}}function y(v){const M=v.length;if(0<M){const z=Array(M);for(let ie=0;ie<M;ie++)z[ie]=v[ie];return z}return[]}function S(v,M){for(let z=1;z<arguments.length;z++){const ie=arguments[z];if(l(ie)){const Ne=v.length||0,Be=ie.length||0;v.length=Ne+Be;for(let ct=0;ct<Be;ct++)v[Ne+ct]=ie[ct]}else v.push(ie)}}class w{constructor(M,z){this.i=M,this.j=z,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function P(v){return/^[\s\xa0]*$/.test(v)}function x(){var v=a.navigator;return v&&(v=v.userAgent)?v:""}function F(v){return F[" "](v),v}F[" "]=function(){};var U=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(v,M,z){for(const ie in v)M.call(z,v[ie],ie,v)}function L(v,M){for(const z in v)M.call(void 0,v[z],z,v)}function k(v){const M={};for(const z in v)M[z]=v[z];return M}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(v,M){let z,ie;for(let Ne=1;Ne<arguments.length;Ne++){ie=arguments[Ne];for(z in ie)v[z]=ie[z];for(let Be=0;Be<E.length;Be++)z=E[Be],Object.prototype.hasOwnProperty.call(ie,z)&&(v[z]=ie[z])}}function I(v){var M=1;v=v.split(":");const z=[];for(;0<M&&v.length;)z.push(v.shift()),M--;return v.length&&z.push(v.join(":")),z}function C(v){a.setTimeout(()=>{throw v},0)}function O(){var v=Q;let M=null;return v.g&&(M=v.g,v.g=v.g.next,v.g||(v.h=null),M.next=null),M}class q{constructor(){this.h=this.g=null}add(M,z){const ie=Y.get();ie.set(M,z),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var Y=new w(()=>new $,v=>v.reset());class ${constructor(){this.next=this.g=this.h=null}set(M,z){this.h=M,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,X=!1,Q=new q,re=()=>{const v=a.Promise.resolve(void 0);Z=()=>{v.then(me)}};var me=()=>{for(var v;v=O();){try{v.h.call(v.g)}catch(z){C(z)}var M=Y;M.j(v),100>M.h&&(M.h++,v.next=M.g,M.g=v)}X=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(v,M){this.type=v,this.g=this.target=M,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var v=!1,M=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const z=()=>{};a.addEventListener("test",z,M),a.removeEventListener("test",z,M)}catch{}return v}();function te(v,M){if(V.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var z=this.type=v.type,ie=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=M,M=v.relatedTarget){if(U){e:{try{F(M.nodeName);var Ne=!0;break e}catch{}Ne=!1}Ne||(M=null)}}else z=="mouseover"?M=v.fromElement:z=="mouseout"&&(M=v.toElement);this.relatedTarget=M,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ae[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&te.aa.h.call(this)}}_(te,V);var ae={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ve=0;function he(v,M,z,ie,Ne){this.listener=v,this.proxy=null,this.src=M,this.type=z,this.capture=!!ie,this.ha=Ne,this.key=++ve,this.da=this.fa=!1}function ye(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ae(v){this.src=v,this.g={},this.h=0}Ae.prototype.add=function(v,M,z,ie,Ne){var Be=v.toString();v=this.g[Be],v||(v=this.g[Be]=[],this.h++);var ct=Te(v,M,ie,Ne);return-1<ct?(M=v[ct],z||(M.fa=!1)):(M=new he(M,this.src,Be,!!ie,Ne),M.fa=z,v.push(M)),M};function Me(v,M){var z=M.type;if(z in v.g){var ie=v.g[z],Ne=Array.prototype.indexOf.call(ie,M,void 0),Be;(Be=0<=Ne)&&Array.prototype.splice.call(ie,Ne,1),Be&&(ye(M),v.g[z].length==0&&(delete v.g[z],v.h--))}}function Te(v,M,z,ie){for(var Ne=0;Ne<v.length;++Ne){var Be=v[Ne];if(!Be.da&&Be.listener==M&&Be.capture==!!z&&Be.ha==ie)return Ne}return-1}var De="closure_lm_"+(1e6*Math.random()|0),de={};function W(v,M,z,ie,Ne){if(Array.isArray(M)){for(var Be=0;Be<M.length;Be++)W(v,M[Be],z,ie,Ne);return null}return z=ht(z),v&&v[fe]?v.K(M,z,c(ie)?!!ie.capture:!1,Ne):_e(v,M,z,!1,ie,Ne)}function _e(v,M,z,ie,Ne,Be){if(!M)throw Error("Invalid event type");var ct=c(Ne)?!!Ne.capture:!!Ne,Gt=Ue(v);if(Gt||(v[De]=Gt=new Ae(v)),z=Gt.add(M,z,ie,ct,Be),z.proxy)return z;if(ie=Ie(),z.proxy=ie,ie.src=v,ie.listener=z,v.addEventListener)G||(Ne=ct),Ne===void 0&&(Ne=!1),v.addEventListener(M.toString(),ie,Ne);else if(v.attachEvent)v.attachEvent(We(M.toString()),ie);else if(v.addListener&&v.removeListener)v.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Ie(){function v(z){return M.call(v.src,v.listener,z)}const M=Je;return v}function be(v,M,z,ie,Ne){if(Array.isArray(M))for(var Be=0;Be<M.length;Be++)be(v,M[Be],z,ie,Ne);else ie=c(ie)?!!ie.capture:!!ie,z=ht(z),v&&v[fe]?(v=v.i,M=String(M).toString(),M in v.g&&(Be=v.g[M],z=Te(Be,z,ie,Ne),-1<z&&(ye(Be[z]),Array.prototype.splice.call(Be,z,1),Be.length==0&&(delete v.g[M],v.h--)))):v&&(v=Ue(v))&&(M=v.g[M.toString()],v=-1,M&&(v=Te(M,z,ie,Ne)),(z=-1<v?M[v]:null)&&Le(z))}function Le(v){if(typeof v!="number"&&v&&!v.da){var M=v.src;if(M&&M[fe])Me(M.i,v);else{var z=v.type,ie=v.proxy;M.removeEventListener?M.removeEventListener(z,ie,v.capture):M.detachEvent?M.detachEvent(We(z),ie):M.addListener&&M.removeListener&&M.removeListener(ie),(z=Ue(M))?(Me(z,v),z.h==0&&(z.src=null,M[De]=null)):ye(v)}}}function We(v){return v in de?de[v]:de[v]="on"+v}function Je(v,M){if(v.da)v=!0;else{M=new te(M,this);var z=v.listener,ie=v.ha||v.src;v.fa&&Le(v),v=z.call(ie,M)}return v}function Ue(v){return v=v[De],v instanceof Ae?v:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function ht(v){return typeof v=="function"?v:(v[Ye]||(v[Ye]=function(M){return v.handleEvent(M)}),v[Ye])}function it(){B.call(this),this.i=new Ae(this),this.M=this,this.F=null}_(it,B),it.prototype[fe]=!0,it.prototype.removeEventListener=function(v,M,z,ie){be(this,v,M,z,ie)};function ze(v,M){var z,ie=v.F;if(ie)for(z=[];ie;ie=ie.F)z.push(ie);if(v=v.M,ie=M.type||M,typeof M=="string")M=new V(M,v);else if(M instanceof V)M.target=M.target||v;else{var Ne=M;M=new V(ie,v),R(M,Ne)}if(Ne=!0,z)for(var Be=z.length-1;0<=Be;Be--){var ct=M.g=z[Be];Ne=Ge(ct,ie,!0,M)&&Ne}if(ct=M.g=v,Ne=Ge(ct,ie,!0,M)&&Ne,Ne=Ge(ct,ie,!1,M)&&Ne,z)for(Be=0;Be<z.length;Be++)ct=M.g=z[Be],Ne=Ge(ct,ie,!1,M)&&Ne}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var v=this.i,M;for(M in v.g){for(var z=v.g[M],ie=0;ie<z.length;ie++)ye(z[ie]);delete v.g[M],v.h--}}this.F=null},it.prototype.K=function(v,M,z,ie){return this.i.add(String(v),M,!1,z,ie)},it.prototype.L=function(v,M,z,ie){return this.i.add(String(v),M,!0,z,ie)};function Ge(v,M,z,ie){if(M=v.i.g[String(M)],!M)return!0;M=M.concat();for(var Ne=!0,Be=0;Be<M.length;++Be){var ct=M[Be];if(ct&&!ct.da&&ct.capture==z){var Gt=ct.listener,pn=ct.ha||ct.src;ct.fa&&Me(v.i,ct),Ne=Gt.call(pn,ie)!==!1&&Ne}}return Ne&&!ie.defaultPrevented}function qe(v,M,z){if(typeof v=="function")z&&(v=g(v,z));else if(v&&typeof v.handleEvent=="function")v=g(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(v,M||0)}function ot(v){v.g=qe(()=>{v.g=null,v.i&&(v.i=!1,ot(v))},v.l);const M=v.h;v.h=null,v.m.apply(null,M)}class Xe extends B{constructor(M,z){super(),this.m=M,this.l=z,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(v){B.call(this),this.h=v,this.g={}}_(Mt,B);var gt=[];function Ft(v){H(v.g,function(M,z){this.g.hasOwnProperty(z)&&Le(M)},v),v.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),Ft(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xt=a.JSON.stringify,Qe=a.JSON.parse,vt=class{stringify(v){return a.JSON.stringify(v,void 0)}parse(v){return a.JSON.parse(v,void 0)}};function pt(){}pt.prototype.h=null;function Rt(v){return v.h||(v.h=v.i())}function ft(){}var ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lt(){V.call(this,"d")}_(Lt,V);function st(){V.call(this,"c")}_(st,V);var He={},yt=null;function bt(){return yt=yt||new it}He.La="serverreachability";function Dt(v){V.call(this,He.La,v)}_(Dt,V);function Ct(v){const M=bt();ze(M,new Dt(M))}He.STAT_EVENT="statevent";function qt(v,M){V.call(this,He.STAT_EVENT,v),this.stat=M}_(qt,V);function wt(v){const M=bt();ze(M,new qt(M,v))}He.Ma="timingevent";function en(v,M){V.call(this,He.Ma,v),this.size=M}_(en,V);function Ln(v,M){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){v()},M)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function un(v,M,z,ie,Ne,Be){v.info(function(){if(v.g)if(Be)for(var ct="",Gt=Be.split("&"),pn=0;pn<Gt.length;pn++){var zt=Gt[pn].split("=");if(1<zt.length){var Rn=zt[0];zt=zt[1];var Nn=Rn.split("_");ct=2<=Nn.length&&Nn[1]=="type"?ct+(Rn+"="+zt+"&"):ct+(Rn+"=redacted&")}}else ct=null;else ct=Be;return"XMLHTTP REQ ("+ie+") [attempt "+Ne+"]: "+M+`
`+z+`
`+ct})}function rn(v,M,z,ie,Ne,Be,ct){v.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Ne+"]: "+M+`
`+z+`
`+Be+" "+ct})}function Zt(v,M,z,ie){v.info(function(){return"XMLHTTP TEXT ("+M+"): "+Qn(v,z)+(ie?" "+ie:"")})}function bi(v,M){v.info(function(){return"TIMEOUT: "+M})}sn.prototype.info=function(){};function Qn(v,M){if(!v.g)return M;if(!M)return null;try{var z=JSON.parse(M);if(z){for(v=0;v<z.length;v++)if(Array.isArray(z[v])){var ie=z[v];if(!(2>ie.length)){var Ne=ie[1];if(Array.isArray(Ne)&&!(1>Ne.length)){var Be=Ne[0];if(Be!="noop"&&Be!="stop"&&Be!="close")for(var ct=1;ct<Ne.length;ct++)Ne[ct]=""}}}}return xt(z)}catch{return M}}var Bn={NO_ERROR:0,TIMEOUT:8},vn={},si;function _n(){}_(_n,pt),_n.prototype.g=function(){return new XMLHttpRequest},_n.prototype.i=function(){return{}},si=new _n;function yn(v,M,z,ie){this.j=v,this.i=M,this.l=z,this.R=ie||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var ri={},hn={};function wi(v,M,z){v.L=1,v.v=_r(Yi(M)),v.m=z,v.P=!0,Ai(v,null)}function Ai(v,M){v.F=Date.now(),$e(v),v.A=Yi(v.v);var z=v.A,ie=v.R;Array.isArray(ie)||(ie=[String(ie)]),Wt(z.i,"t",ie),v.C=0,z=v.j.J,v.h=new Yn,v.g=K(v.j,z?M:null,!v.m),0<v.O&&(v.M=new Xe(g(v.Y,v,v.g),v.O)),M=v.U,z=v.g,ie=v.ca;var Ne="readystatechange";Array.isArray(Ne)||(Ne&&(gt[0]=Ne.toString()),Ne=gt);for(var Be=0;Be<Ne.length;Be++){var ct=W(z,Ne[Be],ie||M.handleEvent,!1,M.h||M);if(!ct)break;M.g[ct.key]=ct}M=v.H?k(v.H):{},v.m?(v.u||(v.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,M)):(v.u="GET",v.g.ea(v.A,v.u,null,M)),Ct(),un(v.i,v.u,v.A,v.l,v.R,v.m)}yn.prototype.ca=function(v){v=v.target;const M=this.M;M&&Si(v)==3?M.j():this.Y(v)},yn.prototype.Y=function(v){try{if(v==this.g)e:{const Nn=Si(this.g);var M=this.g.Ba();const Di=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||Za(this.g)))){this.J||Nn!=4||M==7||(M==8||0>=Di?Ct(3):Ct(2)),Yt(this);var z=this.g.Z();this.X=z;t:if(Ze(this)){var ie=Za(this.g);v="";var Ne=ie.length,Be=Si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),dn(this);var ct="";break t}this.h.i=new a.TextDecoder}for(M=0;M<Ne;M++)this.h.h=!0,v+=this.h.i.decode(ie[M],{stream:!(Be&&M==Ne-1)});ie.length=0,this.h.g+=v,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=z==200,rn(this.i,this.u,this.A,this.l,this.R,Nn,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,pn=this.g;if((Gt=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Gt)){var zt=Gt;break t}}zt=null}if(z=zt)Zt(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nn(this,z);else{this.o=!1,this.s=3,wt(12),tn(this),dn(this);break e}}if(this.P){z=!0;let Fi;for(;!this.J&&this.C<ct.length;)if(Fi=lt(this,ct),Fi==hn){Nn==4&&(this.s=4,wt(14),z=!1),Zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Fi==ri){this.s=4,wt(15),Zt(this.i,this.l,ct,"[Invalid Chunk]"),z=!1;break}else Zt(this.i,this.l,Fi,null),nn(this,Fi);if(Ze(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||ct.length!=0||this.h.h||(this.s=1,wt(16),z=!1),this.o=this.o&&z,!z)Zt(this.i,this.l,ct,"[Invalid Chunked Response]"),tn(this),dn(this);else if(0<ct.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),lo(Rn),Rn.M=!0,wt(11))}}else Zt(this.i,this.l,ct,null),nn(this,ct);Nn==4&&tn(this),this.o&&!this.J&&(Nn==4?tr(this.j,this):(this.o=!1,$e(this)))}else $s(this.g),z==400&&0<ct.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),tn(this),dn(this)}}}catch{}finally{}};function Ze(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function lt(v,M){var z=v.C,ie=M.indexOf(`
`,z);return ie==-1?hn:(z=Number(M.substring(z,ie)),isNaN(z)?ri:(ie+=1,ie+z>M.length?hn:(M=M.slice(ie,ie+z),v.C=ie+z,M)))}yn.prototype.cancel=function(){this.J=!0,tn(this)};function $e(v){v.S=Date.now()+v.I,Bt(v,v.I)}function Bt(v,M){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Ln(g(v.ba,v),M)}function Yt(v){v.B&&(a.clearTimeout(v.B),v.B=null)}yn.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(bi(this.i,this.A),this.L!=2&&(Ct(),wt(17)),tn(this),this.s=2,dn(this)):Bt(this,this.S-v)};function dn(v){v.j.G==0||v.J||tr(v.j,v)}function tn(v){Yt(v);var M=v.M;M&&typeof M.ma=="function"&&M.ma(),v.M=null,Ft(v.U),v.g&&(M=v.g,v.g=null,M.abort(),M.ma())}function nn(v,M){try{var z=v.j;if(z.G!=0&&(z.g==v||fn(z.h,v))){if(!v.K&&fn(z.h,v)&&z.G==3){try{var ie=z.Da.g.parse(M)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Ne=ie;if(Ne[0]==0){e:if(!z.u){if(z.g)if(z.g.F+3e3<v.F)Ms(z),so(z);else break e;kr(z),wt(18)}}else z.za=Ne[1],0<z.za-z.T&&37500>Ne[2]&&z.F&&z.v==0&&!z.C&&(z.C=Ln(g(z.Za,z),6e3));if(1>=kn(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else Ri(z,11)}else if((v.K||z.g==v)&&Ms(z),!P(M))for(Ne=z.Da.g.parse(M),M=0;M<Ne.length;M++){let zt=Ne[M];if(z.T=zt[0],zt=zt[1],z.G==2)if(zt[0]=="c"){z.K=zt[1],z.ia=zt[2];const Rn=zt[3];Rn!=null&&(z.la=Rn,z.j.info("VER="+z.la));const Nn=zt[4];Nn!=null&&(z.Aa=Nn,z.j.info("SVER="+z.Aa));const Di=zt[5];Di!=null&&typeof Di=="number"&&0<Di&&(ie=1.5*Di,z.L=ie,z.j.info("backChannelRequestTimeoutMs_="+ie)),ie=z;const Fi=v.g;if(Fi){const nr=Fi.g?Fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nr){var Be=ie.h;Be.g||nr.indexOf("spdy")==-1&&nr.indexOf("quic")==-1&&nr.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(Nt(Be,Be.h),Be.h=null))}if(ie.D){const Pr=Fi.g?Fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Pr&&(ie.ya=Pr,Cn(ie.I,ie.D,Pr))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-v.F,z.j.info("Handshake RTT: "+z.R+"ms")),ie=z;var ct=v;if(ie.qa=N(ie,ie.J?ie.ia:null,ie.W),ct.K){$t(ie.h,ct);var Gt=ct,pn=ie.L;pn&&(Gt.I=pn),Gt.B&&(Yt(Gt),$e(Gt)),ie.g=ct}else ao(ie);0<z.i.length&&ro(z)}else zt[0]!="stop"&&zt[0]!="close"||Ri(z,7);else z.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Ri(z,7):Es(z):zt[0]!="noop"&&z.l&&z.l.ta(zt),z.v=0)}}Ct(4)}catch{}}var Sn=class{constructor(v,M){this.g=v,this.map=M}};function At(v){this.l=v||10,a.PerformanceNavigationTiming?(v=a.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ht(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function kn(v){return v.h?1:v.g?v.g.size:0}function fn(v,M){return v.h?v.h==M:v.g?v.g.has(M):!1}function Nt(v,M){v.g?v.g.add(M):v.h=M}function $t(v,M){v.h&&v.h==M?v.h=null:v.g&&v.g.has(M)&&v.g.delete(M)}At.prototype.cancel=function(){if(this.i=Jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Jo(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let M=v.i;for(const z of v.g.values())M=M.concat(z.D);return M}return y(v.i)}function Wa(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(l(v)){for(var M=[],z=v.length,ie=0;ie<z;ie++)M.push(v[ie]);return M}M=[],z=0;for(ie in v)M[z++]=v[ie];return M}function Xo(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(l(v)||typeof v=="string"){var M=[];v=v.length;for(var z=0;z<v;z++)M.push(z);return M}M=[],z=0;for(const ie in v)M[z++]=ie;return M}}}function Ga(v,M){if(v.forEach&&typeof v.forEach=="function")v.forEach(M,void 0);else if(l(v)||typeof v=="string")Array.prototype.forEach.call(v,M,void 0);else for(var z=Xo(v),ie=Wa(v),Ne=ie.length,Be=0;Be<Ne;Be++)M.call(void 0,ie[Be],z&&z[Be],v)}var es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jr(v,M){if(v){v=v.split("&");for(var z=0;z<v.length;z++){var ie=v[z].indexOf("="),Ne=null;if(0<=ie){var Be=v[z].substring(0,ie);Ne=v[z].substring(ie+1)}else Be=v[z];M(Be,Ne?decodeURIComponent(Ne.replace(/\+/g," ")):"")}}}function oi(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof oi){this.h=v.h,vr(this,v.j),this.o=v.o,this.g=v.g,Xr(this,v.s),this.l=v.l;var M=v.i,z=new Zs;z.i=M.i,M.g&&(z.g=new Map(M.g),z.h=M.h),Zo(this,z),this.m=v.m}else v&&(M=String(v).match(es))?(this.h=!1,vr(this,M[1]||"",!0),this.o=yr(M[2]||""),this.g=yr(M[3]||"",!0),Xr(this,M[4]),this.l=yr(M[5]||"",!0),Zo(this,M[6]||"",!0),this.m=yr(M[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}oi.prototype.toString=function(){var v=[],M=this.j;M&&v.push(Cs(M,Ya,!0),":");var z=this.g;return(z||M=="file")&&(v.push("//"),(M=this.o)&&v.push(Cs(M,Ya,!0),"@"),v.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.s,z!=null&&v.push(":",String(z))),(z=this.l)&&(this.g&&z.charAt(0)!="/"&&v.push("/"),v.push(Cs(z,z.charAt(0)=="/"?Ts:Bl,!0))),(z=this.i.toString())&&v.push("?",z),(z=this.m)&&v.push("#",Cs(z,Qr)),v.join("")};function Yi(v){return new oi(v)}function vr(v,M,z){v.j=z?yr(M,!0):M,v.j&&(v.j=v.j.replace(/:$/,""))}function Xr(v,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);v.s=M}else v.s=null}function Zo(v,M,z){M instanceof Zs?(v.i=M,jl(v.i,v.h)):(z||(M=Cs(M,Zr)),v.i=new Zs(M,v.h))}function Cn(v,M,z){v.i.set(M,z)}function _r(v){return Cn(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function yr(v,M){return v?M?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Cs(v,M,z){return typeof v=="string"?(v=encodeURI(v).replace(M,Fl),z&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Fl(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Ya=/[#\/\?@]/g,Bl=/[#\?:]/g,Ts=/[#\?]/g,Zr=/[#\?@]/g,Qr=/#/g;function Zs(v,M){this.h=this.g=null,this.i=v||null,this.j=!!M}function Kn(v){v.g||(v.g=new Map,v.h=0,v.i&&Jr(v.i,function(M,z){v.add(decodeURIComponent(M.replace(/\+/g," ")),z)}))}n=Zs.prototype,n.add=function(v,M){Kn(this),this.i=null,v=Qs(this,v);var z=this.g.get(v);return z||this.g.set(v,z=[]),z.push(M),this.h+=1,this};function Ka(v,M){Kn(v),M=Qs(v,M),v.g.has(M)&&(v.i=null,v.h-=v.g.get(M).length,v.g.delete(M))}function Qo(v,M){return Kn(v),M=Qs(v,M),v.g.has(M)}n.forEach=function(v,M){Kn(this),this.g.forEach(function(z,ie){z.forEach(function(Ne){v.call(M,Ne,ie,this)},this)},this)},n.na=function(){Kn(this);const v=Array.from(this.g.values()),M=Array.from(this.g.keys()),z=[];for(let ie=0;ie<M.length;ie++){const Ne=v[ie];for(let Be=0;Be<Ne.length;Be++)z.push(M[ie])}return z},n.V=function(v){Kn(this);let M=[];if(typeof v=="string")Qo(this,v)&&(M=M.concat(this.g.get(Qs(this,v))));else{v=Array.from(this.g.values());for(let z=0;z<v.length;z++)M=M.concat(v[z])}return M},n.set=function(v,M){return Kn(this),this.i=null,v=Qs(this,v),Qo(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[M]),this.h+=1,this},n.get=function(v,M){return v?(v=this.V(v),0<v.length?String(v[0]):M):M};function Wt(v,M,z){Ka(v,M),0<z.length&&(v.i=null,v.g.set(Qs(v,M),y(z)),v.h+=z.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],M=Array.from(this.g.keys());for(var z=0;z<M.length;z++){var ie=M[z];const Be=encodeURIComponent(String(ie)),ct=this.V(ie);for(ie=0;ie<ct.length;ie++){var Ne=Be;ct[ie]!==""&&(Ne+="="+encodeURIComponent(String(ct[ie]))),v.push(Ne)}}return this.i=v.join("&")};function Qs(v,M){return M=String(M),v.j&&(M=M.toLowerCase()),M}function jl(v,M){M&&!v.j&&(Kn(v),v.i=null,v.g.forEach(function(z,ie){var Ne=ie.toLowerCase();ie!=Ne&&(Ka(this,ie),Wt(this,Ne,z))},v)),v.j=M}function vs(v,M){const z=new sn;if(a.Image){const ie=new Image;ie.onload=p(cs,z,"TestLoadImage: loaded",!0,M,ie),ie.onerror=p(cs,z,"TestLoadImage: error",!1,M,ie),ie.onabort=p(cs,z,"TestLoadImage: abort",!1,M,ie),ie.ontimeout=p(cs,z,"TestLoadImage: timeout",!1,M,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=v}else M(!1)}function Ja(v,M){const z=new sn,ie=new AbortController,Ne=setTimeout(()=>{ie.abort(),cs(z,"TestPingServer: timeout",!1,M)},1e4);fetch(v,{signal:ie.signal}).then(Be=>{clearTimeout(Ne),Be.ok?cs(z,"TestPingServer: ok",!0,M):cs(z,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Ne),cs(z,"TestPingServer: error",!1,M)})}function cs(v,M,z,ie,Ne){try{Ne&&(Ne.onload=null,Ne.onerror=null,Ne.onabort=null,Ne.ontimeout=null),ie(z)}catch{}}function $r(){this.g=new vt}function $o(v,M,z){const ie=z||"";try{Ga(v,function(Ne,Be){let ct=Ne;c(Ne)&&(ct=xt(Ne)),M.push(ie+Be+"="+encodeURIComponent(ct))})}catch(Ne){throw M.push(ie+"type="+encodeURIComponent("_badmap")),Ne}}function eo(v){this.l=v.Ub||null,this.j=v.eb||!1}_(eo,pt),eo.prototype.g=function(){return new to(this.l,this.j)},eo.prototype.i=function(v){return function(){return v}}({});function to(v,M){it.call(this),this.D=v,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(to,it),n=to.prototype,n.open=function(v,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=M,this.readyState=1,us(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(M.body=v),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xa(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xa(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var M=v.value?v.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!v.done}))&&(this.response=this.responseText+=M)}v.done?Ds(this):us(this),this.readyState==3&&Xa(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,Ds(this))},n.Qa=function(v){this.g&&(this.response=v,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(v){v.readyState=4,v.l=null,v.j=null,v.v=null,us(v)}n.setRequestHeader=function(v,M){this.u.append(v,M)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],M=this.h.entries();for(var z=M.next();!z.done;)z=z.value,v.push(z[0]+": "+z[1]),z=M.next();return v.join(`\r
`)};function us(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function xs(v){let M="";return H(v,function(z,ie){M+=ie,M+=":",M+=z,M+=`\r
`}),M}function ea(v,M,z){e:{for(ie in z){var ie=!1;break e}ie=!0}ie||(z=xs(z),typeof v=="string"?z!=null&&encodeURIComponent(String(z)):Cn(v,M,z))}function Tn(v){it.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Tn,it);var ta=/^https?$/i,no=["POST","PUT"];n=Tn.prototype,n.Ha=function(v){this.J=v},n.ea=function(v,M,z,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);M=M?M.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?Rt(this.o):Rt(si),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(M,String(v),!0),this.B=!1}catch(Be){na(this,Be);return}if(v=z||"",z=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Ne in ie)z.set(Ne,ie[Ne]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Be of ie.keys())z.set(Be,ie.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(z.keys()).find(Be=>Be.toLowerCase()=="content-type"),Ne=a.FormData&&v instanceof a.FormData,!(0<=Array.prototype.indexOf.call(no,M,void 0))||ie||Ne||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,ct]of z)this.g.setRequestHeader(Be,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hs(this),this.u=!0,this.g.send(v),this.u=!1}catch(Be){na(this,Be)}};function na(v,M){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=M,v.m=5,ia(v),wr(v)}function ia(v){v.A||(v.A=!0,ze(v,"complete"),ze(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,ze(this,"complete"),ze(this,"abort"),wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Tn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sa(this):this.bb())},n.bb=function(){sa(this)};function sa(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Si(v)!=4||v.Z()!=2)){if(v.u&&Si(v)==4)qe(v.Ea,0,v);else if(ze(v,"readystatechange"),Si(v)==4){v.h=!1;try{const ct=v.Z();e:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var z;if(!(z=M)){var ie;if(ie=ct===0){var Ne=String(v.D).match(es)[1]||null;!Ne&&a.self&&a.self.location&&(Ne=a.self.location.protocol.slice(0,-1)),ie=!ta.test(Ne?Ne.toLowerCase():"")}z=ie}if(z)ze(v,"complete"),ze(v,"success");else{v.m=6;try{var Be=2<Si(v)?v.g.statusText:""}catch{Be=""}v.l=Be+" ["+v.Z()+"]",ia(v)}}finally{wr(v)}}}}function wr(v,M){if(v.g){hs(v);const z=v.g,ie=v.v[0]?()=>{}:null;v.g=null,v.v=null,M||ze(v,"ready");try{z.onreadystatechange=ie}catch{}}}function hs(v){v.I&&(a.clearTimeout(v.I),v.I=null)}n.isActive=function(){return!!this.g};function Si(v){return v.g?v.g.readyState:0}n.Z=function(){try{return 2<Si(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var M=this.g.responseText;return v&&M.indexOf(v)==0&&(M=M.substring(v.length)),Qe(M)}};function Za(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(v){const M={};v=(v.g&&2<=Si(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<v.length;ie++){if(P(v[ie]))continue;var z=I(v[ie]);const Ne=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Be=M[Ne]||[];M[Ne]=Be,Be.push(z)}L(M,function(ie){return ie.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(v,M,z){return z&&z.internalChannelParams&&z.internalChannelParams[v]||M}function io(v){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ti("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ti("baseRetryDelayMs",5e3,v),this.cb=Ti("retryDelaySeedMs",1e4,v),this.Wa=Ti("forwardChannelMaxRetries",2,v),this.wa=Ti("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new At(v&&v.concurrentRequestLimit),this.Da=new $r,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=io.prototype,n.la=8,n.G=1,n.connect=function(v,M,z,ie){wt(0),this.W=v,this.H=M||{},z&&ie!==void 0&&(this.H.OSID=z,this.H.OAID=ie),this.F=this.X,this.I=N(this,null,this.W),ro(this)};function Es(v){if(Ar(v),v.G==3){var M=v.U++,z=Yi(v.I);if(Cn(z,"SID",v.K),Cn(z,"RID",M),Cn(z,"TYPE","terminate"),er(v,z),M=new yn(v,v.j,M),M.L=2,M.v=_r(Yi(z)),z=!1,a.navigator&&a.navigator.sendBeacon)try{z=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!z&&a.Image&&(new Image().src=M.v,z=!0),z||(M.g=K(M.j,null),M.g.ea(M.v)),M.F=Date.now(),$e(M)}uo(v)}function so(v){v.g&&(lo(v),v.g.cancel(),v.g=null)}function Ar(v){so(v),v.u&&(a.clearTimeout(v.u),v.u=null),Ms(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&a.clearTimeout(v.s),v.s=null)}function ro(v){if(!Ht(v.h)&&!v.s){v.s=!0;var M=v.Ga;Z||re(),X||(Z(),X=!0),Q.add(M,v),v.B=0}}function ra(v,M){return kn(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=M.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Ln(g(v.Ga,v,M),co(v,v.B)),v.B++,!0)}n.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Ne=new yn(this,this.j,v);let Be=this.o;if(this.S&&(Be?(Be=k(Be),R(Be,this.S)):Be=this.S),this.m!==null||this.O||(Ne.H=Be,Be=null),this.P)e:{for(var M=0,z=0;z<this.i.length;z++){t:{var ie=this.i[z];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(M+=ie,4096<M){M=z;break e}if(M===4096||z===this.i.length-1){M=z+1;break e}}M=1e3}else M=1e3;M=Sr(this,Ne,M),z=Yi(this.I),Cn(z,"RID",v),Cn(z,"CVER",22),this.D&&Cn(z,"X-HTTP-Session-Id",this.D),er(this,z),Be&&(this.O?M="headers="+encodeURIComponent(String(xs(Be)))+"&"+M:this.m&&ea(z,this.m,Be)),Nt(this.h,Ne),this.Ua&&Cn(z,"TYPE","init"),this.P?(Cn(z,"$req",M),Cn(z,"SID","null"),Ne.T=!0,wi(Ne,z,null)):wi(Ne,z,M),this.G=2}}else this.G==3&&(v?oo(this,v):this.i.length==0||Ht(this.h)||oo(this))};function oo(v,M){var z;M?z=M.l:z=v.U++;const ie=Yi(v.I);Cn(ie,"SID",v.K),Cn(ie,"RID",z),Cn(ie,"AID",v.T),er(v,ie),v.m&&v.o&&ea(ie,v.m,v.o),z=new yn(v,v.j,z,v.B+1),v.m===null&&(z.H=v.o),M&&(v.i=M.D.concat(v.i)),M=Sr(v,z,1e3),z.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Nt(v.h,z),wi(z,ie,M)}function er(v,M){v.H&&H(v.H,function(z,ie){Cn(M,ie,z)}),v.l&&Ga({},function(z,ie){Cn(M,ie,z)})}function Sr(v,M,z){z=Math.min(v.i.length,z);var ie=v.l?g(v.l.Na,v.l,v):null;e:{var Ne=v.i;let Be=-1;for(;;){const ct=["count="+z];Be==-1?0<z?(Be=Ne[0].g,ct.push("ofs="+Be)):Be=0:ct.push("ofs="+Be);let Gt=!0;for(let pn=0;pn<z;pn++){let zt=Ne[pn].g;const Rn=Ne[pn].map;if(zt-=Be,0>zt)Be=Math.max(0,Ne[pn].g-100),Gt=!1;else try{$o(Rn,ct,"req"+zt+"_")}catch{ie&&ie(Rn)}}if(Gt){ie=ct.join("&");break e}}}return v=v.i.splice(0,z),M.D=v,ie}function ao(v){if(!v.g&&!v.u){v.Y=1;var M=v.Fa;Z||re(),X||(Z(),X=!0),Q.add(M,v),v.v=0}}function kr(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Ln(g(v.Fa,v),co(v,v.v)),v.v++,!0)}n.Fa=function(){if(this.u=null,Qa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Ln(g(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),so(this),Qa(this))};function lo(v){v.A!=null&&(a.clearTimeout(v.A),v.A=null)}function Qa(v){v.g=new yn(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var M=Yi(v.qa);Cn(M,"RID","rpc"),Cn(M,"SID",v.K),Cn(M,"AID",v.T),Cn(M,"CI",v.F?"0":"1"),!v.F&&v.ja&&Cn(M,"TO",v.ja),Cn(M,"TYPE","xmlhttp"),er(v,M),v.m&&v.o&&ea(M,v.m,v.o),v.L&&(v.g.I=v.L);var z=v.g;v=v.ia,z.L=1,z.v=_r(Yi(M)),z.m=null,z.P=!0,Ai(z,v)}n.Za=function(){this.C!=null&&(this.C=null,so(this),kr(this),wt(19))};function Ms(v){v.C!=null&&(a.clearTimeout(v.C),v.C=null)}function tr(v,M){var z=null;if(v.g==M){Ms(v),lo(v),v.g=null;var ie=2}else if(fn(v.h,M))z=M.D,$t(v.h,M),ie=1;else return;if(v.G!=0){if(M.o)if(ie==1){z=M.m?M.m.length:0,M=Date.now()-M.F;var Ne=v.B;ie=bt(),ze(ie,new en(ie,z)),ro(v)}else ao(v);else if(Ne=M.s,Ne==3||Ne==0&&0<M.X||!(ie==1&&ra(v,M)||ie==2&&kr(v)))switch(z&&0<z.length&&(M=v.h,M.i=M.i.concat(z)),Ne){case 1:Ri(v,5);break;case 4:Ri(v,10);break;case 3:Ri(v,6);break;default:Ri(v,2)}}}function co(v,M){let z=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(z*=2),z*M}function Ri(v,M){if(v.j.info("Error code "+M),M==2){var z=g(v.fb,v),ie=v.Xa;const Ne=!ie;ie=new oi(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vr(ie,"https"),_r(ie),Ne?vs(ie.toString(),z):Ja(ie.toString(),z)}else wt(2);v.G=0,v.l&&v.l.sa(M),uo(v),Ar(v)}n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function uo(v){if(v.G=0,v.ka=[],v.l){const M=Jo(v.h);(M.length!=0||v.i.length!=0)&&(S(v.ka,M),S(v.ka,v.i),v.h.i.length=0,y(v.i),v.i.length=0),v.l.ra()}}function N(v,M,z){var ie=z instanceof oi?Yi(z):new oi(z);if(ie.g!="")M&&(ie.g=M+"."+ie.g),Xr(ie,ie.s);else{var Ne=a.location;ie=Ne.protocol,M=M?M+"."+Ne.hostname:Ne.hostname,Ne=+Ne.port;var Be=new oi(null);ie&&vr(Be,ie),M&&(Be.g=M),Ne&&Xr(Be,Ne),z&&(Be.l=z),ie=Be}return z=v.D,M=v.ya,z&&M&&Cn(ie,z,M),Cn(ie,"VER",v.la),er(v,ie),ie}function K(v,M,z){if(M&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=v.Ca&&!v.pa?new Tn(new eo({eb:z})):new Tn(v.pa),M.Ha(v.J),M}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ge(){}n=ge.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function we(v,M){it.call(this),this.g=new io(M),this.l=v,this.h=M&&M.messageUrlParams||null,v=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(v?v["X-WebChannel-Content-Type"]=M.messageContentType:v={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(v?v["X-WebChannel-Client-Profile"]=M.va:v={"X-WebChannel-Client-Profile":M.va}),this.g.S=v,(v=M&&M.Sb)&&!P(v)&&(this.g.m=v),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!P(M)&&(this.g.D=M,v=this.h,v!==null&&M in v&&(v=this.h,M in v&&delete v[M])),this.j=new rt(this)}_(we,it),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Es(this.g)},we.prototype.o=function(v){var M=this.g;if(typeof v=="string"){var z={};z.__data__=v,v=z}else this.u&&(z={},z.__data__=xt(v),v=z);M.i.push(new Sn(M.Ya++,v)),M.G==3&&ro(M)},we.prototype.N=function(){this.g.l=null,delete this.j,Es(this.g),delete this.g,we.aa.N.call(this)};function Oe(v){Lt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var M=v.__sm__;if(M){e:{for(const z in M){v=z;break e}v=void 0}(this.i=v)&&(v=this.i,M=M!==null&&v in M?M[v]:void 0),this.data=M}else this.data=v}_(Oe,Lt);function Ke(){st.call(this),this.status=1}_(Ke,st);function rt(v){this.g=v}_(rt,ge),rt.prototype.ua=function(){ze(this.g,"a")},rt.prototype.ta=function(v){ze(this.g,new Oe(v))},rt.prototype.sa=function(v){ze(this.g,new Ke)},rt.prototype.ra=function(){ze(this.g,"b")},we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,Bn.NO_ERROR=0,Bn.TIMEOUT=8,Bn.HTTP_ERROR=6,vn.COMPLETE="complete",ft.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",it.prototype.listen=it.prototype.K,Tn.prototype.listenOnce=Tn.prototype.L,Tn.prototype.getLastError=Tn.prototype.Ka,Tn.prototype.getLastErrorCode=Tn.prototype.Ba,Tn.prototype.getStatus=Tn.prototype.Z,Tn.prototype.getResponseJson=Tn.prototype.Oa,Tn.prototype.getResponseText=Tn.prototype.oa,Tn.prototype.send=Tn.prototype.ea,Tn.prototype.setWithCredentials=Tn.prototype.Ha}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const vm="@firebase/firestore",_m="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zi.UNAUTHENTICATED=new Zi(null),Zi.GOOGLE_CREDENTIALS=new Zi("google-credentials-uid"),Zi.FIRST_PARTY=new Zi("first-party-uid"),Zi.MOCK_USER=new Zi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Cf("@firebase/firestore");function qs(n,...e){if(Tl.logLevel<=In.DEBUG){const t=e.map(qf);Tl.debug(`Firestore (${Xc}): ${n}`,...t)}}function g5(n,...e){if(Tl.logLevel<=In.ERROR){const t=e.map(qf);Tl.error(`Firestore (${Xc}): ${n}`,...t)}}function T4(n,...e){if(Tl.logLevel<=In.WARN){const t=e.map(qf);Tl.warn(`Firestore (${Xc}): ${n}`,...t)}}function qf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,b5(n,i,t)}function b5(n,e,t){let i=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw g5(i),new Error(i)}function gc(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||b5(e,s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class bn extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zi.UNAUTHENTICATED))}shutdown(){}}class x4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class E4{constructor(e){this.t=e,this.currentUser=Zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gc(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new bc;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new bc,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{qs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(qs("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new bc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(qs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gc(typeof i.accessToken=="string",31837,{l:i}),new v5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gc(e===null||typeof e=="string",2055,{h:e}),new Zi(e)}}class M4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new M4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gc(this.o===void 0,3512);const i=r=>{r.error!=null&&qs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,qs("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{qs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):qs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ym(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gc(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ym(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=F4(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function zo(n,e){return n<e?-1:n>e?1:0}function j4(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),r=e.charAt(i);if(s!==r)return dd(s)===dd(r)?zo(s,r):dd(s)?1:-1}return zo(n.length,e.length)}const U4=55296,z4=57343;function dd(n){const e=n.charCodeAt(0);return e>=U4&&e<=z4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&xc(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xc(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=ar.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return zo(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),s=ar.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ar.extractNumericId(e).compare(ar.extractNumericId(t)):j4(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hf.fromString(e.substring(4,e.length-2))}}class Us extends ar{construct(e,t,i){return new Us(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new bn(gn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Us(t)}static emptyPath(){return new Us([])}}const H4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ya extends ar{construct(e,t,i){return new ya(e,t,i)}static isValidIdentifier(e){return H4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ya.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wm}static keyField(){return new ya([wm])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new bn(gn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new bn(gn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new bn(gn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new bn(gn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ya(t)}static emptyPath(){return new ya([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.path=e}static fromPath(e){return new ka(Us.fromString(e))}static fromName(e){return new ka(Us.fromString(e).popFirst(5))}static empty(){return new ka(Us.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Us.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Us.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ka(new Us(e.slice()))}}function q4(n,e,t,i){if(e===!0&&i===!0)throw new bn(gn.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V4(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function W4(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xc(12329,{type:typeof n})}function G4(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new bn(gn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=W4(n);throw new bn(gn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zc(n,e){if(!V4(n))throw new bn(gn.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const o=n[i];if(s&&typeof o!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){t=`Expected '${i}' field to equal '${r.value}'`;break}}if(t)throw new bn(gn.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=-62135596800,Sm=1e6;class lr{static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Sm);return new lr(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bn(gn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bn(gn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Am)throw new bn(gn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bn(gn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sm}_compareTo(e){return this.seconds===e.seconds?zo(this.nanoseconds,e.nanoseconds):zo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,lr._jsonSchema))return new lr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Am;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lr._jsonSchemaVersion="firestore/timestamp/1.0",lr._jsonSchema={type:yi("string",lr._jsonSchemaVersion),seconds:yi("number"),nanoseconds:yi("number")};function Y4(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new K4("Invalid base64 string: "+r):r}}(e);return new ja(t)}static fromUint8Array(e){const t=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new ja(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ja.EMPTY_BYTE_STRING=new ja("");const Jd="(default)";class mh{constructor(e,t){this.projectId=e,this.database=t||Jd}static empty(){return new mh("","")}get isDefaultDatabase(){return this.database===Jd}isEqual(e){return e instanceof mh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X4(n){return new J4(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var km,mn;(mn=km||(km={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Hf([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=1048576;function fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&qs("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new bc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new Vf(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bn(gn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Pm,Nm;(Nm=Pm||(Pm={})).Ma="default",Nm.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="firestore.googleapis.com",Lm=!0;class Cm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new bn(gn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_5,this.ssl=Lm}else this.host=e.host,this.ssl=e.ssl??Lm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q4)throw new bn(gn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e6(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new bn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new bn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new bn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class y5{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bn(gn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new bn(gn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new D4;switch(i.type){case"firstParty":return new O4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new bn(gn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Im.get(t);i&&(qs("ComponentProvider","Removing Datastore"),Im.delete(t),i.terminate())}(this),Promise.resolve()}}function t6(n,e,t,i={}){var c;n=G4(n,y5);const s=Vc(e),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;s&&(xb(`https://${a}`),Eb("Firestore",!0)),r.host!==_5&&r.host!==a&&T4("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!Ra(l,o)&&(n._setSettings(l),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=Zi.MOCK_USER;else{h=ny(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new bn(gn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Zi(g)}n._authCredentials=new x4(new v5(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wf(this.firestore,e,this._query)}}class ur{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}toJSON(){return{type:ur._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Zc(t,ur._jsonSchema))return new ur(e,i||null,new ka(Us.fromString(t.referencePath)))}}ur._jsonSchemaVersion="firestore/documentReference/1.0",ur._jsonSchema={type:yi("string",ur._jsonSchemaVersion),referencePath:yi("string")};class Gf extends Wf{constructor(e,t,i){super(e,t,X4(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new ka(e))}withConverter(e){return new Gf(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="AsyncQueue";class Dm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $4(this,"async_queue_retry"),this._c=()=>{const i=fd();i&&qs(Tm,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=fd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new bc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Y4(e))throw e;qs(Tm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,g5("INTERNAL UNHANDLED ERROR: ",xm(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Vf.createAndSchedule(this,e,t,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&xc(47125,{Pc:xm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xm(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class n6 extends y5{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Dm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dm(e),this._firestoreClient=void 0,await e}}}function i6(n,e){const t=typeof n=="object"?n:Fb(),i=typeof n=="string"?n:Jd,s=Df(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=ey("firestore");r&&t6(s,...r)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(ja.fromBase64String(e))}catch(t){throw new bn(gn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(ja.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:yi("string",Ur._jsonSchemaVersion),bytes:yi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new bn(gn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ya(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bn(gn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bn(gn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zo(this._lat,e._lat)||zo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:La._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,La._jsonSchema))return new La(e.latitude,e.longitude)}}La._jsonSchemaVersion="firestore/geoPoint/1.0",La._jsonSchema={type:yi("string",La._jsonSchemaVersion),latitude:yi("number"),longitude:yi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ca._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,Ca._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ca(e.vectorValues);throw new bn(gn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ca._jsonSchemaVersion="firestore/vectorValue/1.0",Ca._jsonSchema={type:yi("string",Ca._jsonSchemaVersion),vectorValues:yi("object")};const s6=new RegExp("[~\\*/\\[\\]]");function r6(n,e,t){if(e.search(s6)>=0)throw Em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new w5(...e.split("."))._internalPath}catch{throw Em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function Em(n,e,t,i,s){let r=`Function ${e}() called with invalid data`;r+=". ";let o="";return new bn(gn.INVALID_ARGUMENT,r+n+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(S5("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o6 extends A5{data(){return super.data()}}function S5(n,e){return typeof e=="string"?r6(n,e):e instanceof w5?e._internalPath:e._delegate._internalPath}class Nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends A5{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(S5("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new bn(gn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Nl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:yi("string",Nl._jsonSchemaVersion),bundleSource:yi("string","DocumentSnapshot"),bundleName:yi("string"),bundle:yi("string")};class Xu extends Nl{data(e={}){return super.data(e)}}class vc{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Xu(this._firestore,this._userDataWriter,i.key,i,new Nu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bn(gn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Xu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Nu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new Xu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Nu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:a6(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new bn(gn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(t.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xc(61501,{type:n})}}vc._jsonSchemaVersion="firestore/querySnapshot/1.0",vc._jsonSchema={type:yi("string",vc._jsonSchemaVersion),bundleSource:yi("string","QuerySnapshot"),bundleName:yi("string"),bundle:yi("string")};(function(e,t=!0){(function(s){Xc=s})(Ol),Ll(new Fa("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new n6(new E4(i.getProvider("auth-internal")),new R4(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new bn(gn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(c.options.projectId,h)}(o,s),o);return r={useFetchStreams:t,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Fo(vm,_m,e),Fo(vm,_m,"esm2020")})();const l6={apiKey:"AIzaSyAb7sjU-L2WjdG6NelbiLi1SmMQxTRxm90",authDomain:"prescribe-7e1e8.firebaseapp.com",projectId:"prescribe-7e1e8",storageBucket:"prescribe-7e1e8.firebasestorage.app",messagingSenderId:"685956765872",appId:"1:685956765872:web:9078519ae1ac2680254375"},k5=Rb(l6),pd=N4(k5);i6(k5);const c6=new jr;class u6{constructor(){this.currentUser=null,this.authStateListeners=[],this.setupAuthStateListener()}setupAuthStateListener(){p3(pd,e=>{this.currentUser=e,this.notifyAuthStateListeners(e)})}notifyAuthStateListeners(e){this.authStateListeners.forEach(t=>{try{t(e)}catch(i){console.error("Error in auth state listener:",i)}})}async signInWithGoogle(e="doctor"){var t,i;try{const r=(await O3(pd,c6)).user,o=r.email.toLowerCase()==="senakahks@gmail.com",a={uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,role:o?"admin":e,provider:"google",isAdmin:o};if(o){const c={id:"admin-001",email:r.email.toLowerCase(),name:r.displayName||"System Administrator",role:"admin",uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,provider:"google",permissions:["read_all","write_all","delete_all","manage_users","view_analytics"],lastLogin:new Date().toISOString(),createdAt:new Date().toISOString()};return localStorage.setItem("prescribe-current-admin",JSON.stringify(c)),c}let l=null;if(e==="doctor"?l=await kt.getDoctorByEmail(r.email):e==="pharmacist"&&(l=await kt.getPharmacistByEmail(r.email)),l){const c={...l,uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,provider:"google"};return e==="doctor"?await kt.updateDoctor(c):e==="pharmacist"&&await kt.updatePharmacist(c),c}else if(e==="doctor"){const c={email:r.email,firstName:((t=r.displayName)==null?void 0:t.split(" ")[0])||"",lastName:((i=r.displayName)==null?void 0:i.split(" ").slice(1).join(" "))||"",name:r.displayName||"",role:"doctor",uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,provider:"google",createdAt:new Date().toISOString()};return await kt.createDoctor(c)}else if(e==="pharmacist"){const c={email:r.email,businessName:r.displayName||"Google Pharmacy",role:"pharmacist",uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,provider:"google",pharmacistNumber:this.generatePharmacistNumber(),createdAt:new Date().toISOString()};return await kt.createPharmacist(c)}}catch(s){if(console.error("Error signing in with Google:",s),s.code==="auth/operation-not-allowed")return console.warn("Google authentication not enabled in Firebase. Creating mock user for development."),this.createMockGoogleUser(e);throw s.code==="auth/popup-closed-by-user"?new Error("Google sign-in was cancelled by user."):s.code==="auth/popup-blocked"?new Error("Google sign-in popup was blocked by browser. Please allow popups and try again."):new Error(`Google authentication failed: ${s.message}`)}}generatePharmacistNumber(){return Math.floor(1e5+Math.random()*9e5).toString()}async createMockGoogleUser(e="doctor"){const t=`google.user.${e}@example.com`,i=`Google ${e==="doctor"?"Doctor":"Pharmacist"}`;let s=null;if(e==="doctor"?s=await kt.getDoctorByEmail(t):e==="pharmacist"&&(s=await kt.getPharmacistByEmail(t)),s){const r={...s,uid:`mock-google-${s.id}`,displayName:i,photoURL:"https://via.placeholder.com/150/4285f4/ffffff?text=G",provider:"google-mock"};return e==="doctor"?await kt.updateDoctor(r):e==="pharmacist"&&await kt.updatePharmacist(r),r}else if(e==="doctor"){const r={email:t,firstName:"Google",lastName:"Doctor",name:i,role:"doctor",uid:`mock-google-${Date.now()}`,displayName:i,photoURL:"https://via.placeholder.com/150/4285f4/ffffff?text=G",provider:"google-mock",createdAt:new Date().toISOString()};return await kt.createDoctor(r)}else if(e==="pharmacist"){const r={email:t,businessName:"Google Pharmacy",role:"pharmacist",uid:`mock-google-${Date.now()}`,displayName:i,photoURL:"https://via.placeholder.com/150/4285f4/ffffff?text=G",provider:"google-mock",pharmacistNumber:this.generatePharmacistNumber(),createdAt:new Date().toISOString()};return await kt.createPharmacist(r)}}async signOut(){try{await m3(pd),this.currentUser=null}catch(e){throw console.error("Error signing out:",e),e}}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}onAuthStateChanged(e){return this.authStateListeners.push(e),e(this.currentUser),()=>{const t=this.authStateListeners.indexOf(e);t>-1&&this.authStateListeners.splice(t,1)}}isDoctor(){return this.currentUser&&this.currentUser.role==="doctor"}isPharmacist(){return this.currentUser&&this.currentUser.role==="pharmacist"}}const gh=new u6;class h6{constructor(){this.adminEmail="senakahks@gmail.com",this.currentAdmin=null,this.loadCurrentAdmin()}loadCurrentAdmin(){try{const e=localStorage.getItem("prescribe-current-admin");this.currentAdmin=e?JSON.parse(e):null}catch(e){console.error("Error loading current admin:",e),this.currentAdmin=null}}saveCurrentAdmin(e){try{localStorage.setItem("prescribe-current-admin",JSON.stringify(e)),this.currentAdmin=e}catch(t){console.error("Error saving current admin:",t)}}clearCurrentAdmin(){localStorage.removeItem("prescribe-current-admin"),this.currentAdmin=null}isAdminEmail(e){return e.toLowerCase()===this.adminEmail.toLowerCase()}async signInAdmin(e,t){try{if(!this.isAdminEmail(e))throw new Error("Access denied. Admin privileges required.");if(t!=="M-PrescribeAdmin2024!")throw new Error("Invalid admin credentials");const s={id:"admin-001",email:e.toLowerCase(),role:"admin",name:"System Administrator",permissions:["read_all","write_all","delete_all","manage_users","view_analytics"],lastLogin:new Date().toISOString()};return this.saveCurrentAdmin(s),s}catch(i){throw console.error("Error signing in admin:",i),i}}async signOut(){this.clearCurrentAdmin()}getCurrentAdmin(){return this.currentAdmin}isAuthenticated(){return this.currentAdmin!==null}hasPermission(e){return this.currentAdmin?this.currentAdmin.permissions.includes(e):!1}isAdmin(){return this.currentAdmin&&this.currentAdmin.role==="admin"}onAuthStateChanged(e){return e(this.currentAdmin),()=>{}}}const Dl=new h6;class d6{constructor(){this.storageKey="prescribe-ai-token-usage",this.usageData=this.loadUsageData()}loadUsageData(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{totalTokens:0,totalCost:0,dailyUsage:{},monthlyUsage:{},requests:[],lastUpdated:null}}catch(e){return console.error("Error loading AI token usage data:",e),{totalTokens:0,totalCost:0,dailyUsage:{},monthlyUsage:{},requests:[],lastUpdated:null}}}saveUsageData(){try{this.usageData.lastUpdated=new Date().toISOString(),localStorage.setItem(this.storageKey,JSON.stringify(this.usageData))}catch(e){console.error("Error saving AI token usage data:",e)}}trackUsage(e,t,i,s="gpt-3.5-turbo",r=null){const o=t+i,a=this.calculateCost(t,i,s),l=new Date().toISOString(),c=new Date().toISOString().split("T")[0],h=new Date().toISOString().substring(0,7),f={id:Date.now()+Math.random(),type:e,timestamp:l,model:s,promptTokens:t,completionTokens:i,totalTokens:o,cost:a,doctorId:r};return this.usageData.requests.push(f),this.usageData.totalTokens+=o,this.usageData.totalCost+=a,this.usageData.dailyUsage[c]||(this.usageData.dailyUsage[c]={tokens:0,cost:0,requests:0}),this.usageData.dailyUsage[c].tokens+=o,this.usageData.dailyUsage[c].cost+=a,this.usageData.dailyUsage[c].requests+=1,this.usageData.monthlyUsage[h]||(this.usageData.monthlyUsage[h]={tokens:0,cost:0,requests:0}),this.usageData.monthlyUsage[h].tokens+=o,this.usageData.monthlyUsage[h].cost+=a,this.usageData.monthlyUsage[h].requests+=1,this.usageData.requests.length>100&&(this.usageData.requests=this.usageData.requests.slice(-100)),this.saveUsageData(),console.log(`📊 AI Token Usage Tracked: ${o} tokens, $${a.toFixed(4)}`),f}calculateCost(e,t,i){const s={"gpt-3.5-turbo":{prompt:5e-4,completion:.0015},"gpt-4":{prompt:.03,completion:.06},"gpt-4-turbo":{prompt:.01,completion:.03},"gpt-4o":{prompt:.005,completion:.015}},r=s[i]||s["gpt-3.5-turbo"],o=e/1e3*r.prompt,a=t/1e3*r.completion;return(o+a)*1.2}getUsageStats(){const e=new Date().toISOString().split("T")[0],t=new Date().toISOString().substring(0,7);return{total:{tokens:this.usageData.totalTokens,cost:this.usageData.totalCost,requests:this.usageData.requests.length},today:this.usageData.dailyUsage[e]||{tokens:0,cost:0,requests:0},thisMonth:this.usageData.monthlyUsage[t]||{tokens:0,cost:0,requests:0},lastUpdated:this.usageData.lastUpdated}}getRecentRequests(e=10){return this.usageData.requests.sort((t,i)=>new Date(i.timestamp)-new Date(t.timestamp)).slice(0,e)}getWeeklyUsage(){const e=[];for(let t=6;t>=0;t--){const i=new Date;i.setDate(i.getDate()-t);const s=i.toISOString().split("T")[0];e.push({date:s,...this.usageData.dailyUsage[s]||{tokens:0,cost:0,requests:0}})}return e}getMonthlyUsage(){const e=[];for(let t=5;t>=0;t--){const i=new Date;i.setMonth(i.getMonth()-t);const s=i.toISOString().substring(0,7);e.push({month:s,...this.usageData.monthlyUsage[s]||{tokens:0,cost:0,requests:0}})}return e}clearUsageData(){this.usageData={totalTokens:0,totalCost:0,dailyUsage:{},monthlyUsage:{},requests:[],lastUpdated:null},this.saveUsageData()}getCurrentPricing(){return{"gpt-3.5-turbo":{prompt:5e-4,completion:.0015},"gpt-4":{prompt:.03,completion:.06},"gpt-4-turbo":{prompt:.01,completion:.03},"gpt-4o":{prompt:.005,completion:.015},bufferFactor:1.2,lastUpdated:"2024-12-19",note:"Estimated costs with 20% buffer. Actual OpenAI billing may vary."}}getCostDisclaimer(){return{message:"Cost estimates are approximate and may not reflect actual OpenAI billing.",factors:["Pricing rates may change without notice","Taxes and fees not included","Buffer factor applied for safety","Actual costs may be higher or lower"],recommendation:"Check your OpenAI dashboard for exact billing amounts"}}getDoctorUsageStats(e){if(!e)return null;const t=this.usageData.requests.filter(f=>f.doctorId===e),i=new Date().toISOString().split("T")[0],s=t.reduce((f,g)=>f+g.totalTokens,0),r=t.reduce((f,g)=>f+g.cost,0),o=t.length,a=t.filter(f=>f.timestamp.startsWith(i)),l=a.reduce((f,g)=>f+g.totalTokens,0),c=a.reduce((f,g)=>f+g.cost,0),h=a.length;return{total:{tokens:s,cost:r,requests:o},today:{tokens:l,cost:c,requests:h}}}getAllDoctorsUsageStats(){return[...new Set(this.usageData.requests.map(t=>t.doctorId).filter(t=>t))].map(t=>({doctorId:t,stats:this.getDoctorUsageStats(t)}))}}const gs=new d6,P5=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CD",name:"Congo, Democratic Republic of the"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Côte d'Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"VA",name:"Holy See (Vatican City State)"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MK",name:"Macedonia, the former Yugoslav Republic of"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia, Federated States of"},{code:"MD",name:"Moldova, Republic of"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territory, Occupied"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Réunion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthélemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin (French part)"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten (Dutch part)"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syrian Arab Republic"},{code:"TW",name:"Taiwan, Province of China"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VN",name:"Viet Nam"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];function f6(n,e,t){const i=n.slice();return i[20]=e[t],i}function Mm(n){let e,t,i,s,r,o,a,l,c,h,f,g;return{c(){e=m("div"),t=m("div"),i=m("label"),i.textContent="First Name",s=D(),r=m("input"),o=D(),a=m("div"),l=m("label"),l.textContent="Last Name",c=D(),h=m("input"),d(i,"for","firstName"),d(i,"class","form-label small"),d(r,"type","text"),d(r,"class","form-control form-control-sm"),d(r,"id","firstName"),d(r,"placeholder","Enter first name"),r.required=!0,r.disabled=n[8],d(t,"class","col-12 col-sm-6"),d(l,"for","lastName"),d(l,"class","form-label small"),d(h,"type","text"),d(h,"class","form-control form-control-sm"),d(h,"id","lastName"),d(h,"placeholder","Enter last name"),h.required=!0,h.disabled=n[8],d(a,"class","col-12 col-sm-6"),d(e,"class","row g-2 mb-3")},m(p,_){ue(p,e,_),u(e,t),u(t,i),u(t,s),u(t,r),je(r,n[0]),u(e,o),u(e,a),u(a,l),u(a,c),u(a,h),je(h,n[1]),f||(g=[Ee(r,"input",n[13]),Ee(h,"input",n[14])],f=!0)},p(p,_){_&256&&(r.disabled=p[8]),_&1&&r.value!==p[0]&&je(r,p[0]),_&256&&(h.disabled=p[8]),_&2&&h.value!==p[1]&&je(h,p[1])},d(p){p&&ce(e),f=!1,an(g)}}}function Om(n){let e,t,i,s,r,o,a,l=Et(P5),c=[];for(let h=0;h<l.length;h+=1)c[h]=p6(f6(n,l,h));return{c(){e=m("div"),t=m("label"),t.innerHTML='Country <span class="text-danger">*</span>',i=D(),s=m("select"),r=m("option"),r.textContent="Select country";for(let h=0;h<c.length;h+=1)c[h].c();d(t,"for","country"),d(t,"class","form-label small"),r.__value="",je(r,r.__value),d(s,"class","form-select form-select-sm"),d(s,"id","country"),s.required=!0,s.disabled=n[8],n[5]===void 0&&mr(()=>n[16].call(s)),d(e,"class","mb-3")},m(h,f){ue(h,e,f),u(e,t),u(e,i),u(e,s),u(s,r);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(s,null);as(s,n[5],!0),o||(a=Ee(s,"change",n[16]),o=!0)},p(h,f){f&256&&(s.disabled=h[8]),f&32&&as(s,h[5])},d(h){h&&ce(e),On(c,h),o=!1,a()}}}function p6(n){let e;return{c(){e=m("option"),e.textContent=`${n[20].name}`,e.__value=n[20].name,je(e,e.__value)},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function Rm(n){let e;return{c(){e=m("div"),e.innerHTML=`<i class="fas fa-shield-alt me-1"></i>
        Password must be at least 8 characters with uppercase, lowercase, number, and special character`,d(e,"class","form-text")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function Fm(n){let e,t,i,s,r,o;return{c(){e=m("div"),t=m("label"),t.textContent="Confirm Password",i=D(),s=m("input"),d(t,"for","confirmPassword"),d(t,"class","form-label small"),d(s,"type","password"),d(s,"class","form-control form-control-sm"),d(s,"id","confirmPassword"),d(s,"placeholder","Confirm password"),s.required=!0,s.disabled=n[8],d(e,"class","mb-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),je(s,n[4]),r||(o=Ee(s,"input",n[18]),r=!0)},p(a,l){l&256&&(s.disabled=a[8]),l&16&&s.value!==a[4]&&je(s,a[4])},d(a){a&&ce(e),r=!1,o()}}}function Bm(n){let e,t,i,s,r;return{c(){e=m("div"),t=m("i"),i=D(),s=m("small"),r=le(n[7]),d(t,"class","fas fa-exclamation-triangle me-1"),d(e,"class","alert alert-danger alert-sm"),d(e,"role","alert")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,s),u(s,r)},p(o,a){a&128&&Se(r,o[7])},d(o){o&&ce(e)}}}function jm(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-1"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function m6(n){let e;return{c(){e=m("i"),d(e,"class","fab fa-google me-1")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function g6(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-1"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function b6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F=n[6]?"Register":"Login",U,H,L,k,E,R,I,C,O,q,Y,$,Z=n[6]?"Already have an account? Login":"Need an account? Register",X,Q,re,me=n[6]&&Mm(n),B=n[6]&&Om(n),V=n[6]&&Rm(),G=n[6]&&Fm(n),te=n[7]&&Bm(n),ae=n[8]&&jm();function fe(ye,Ae){return ye[9]?g6:m6}let ve=fe(n),he=ve(n);return{c(){e=m("form"),me&&me.c(),t=D(),i=m("div"),s=m("label"),s.textContent="Email Address",r=D(),o=m("input"),a=D(),B&&B.c(),l=D(),c=m("div"),h=m("label"),h.textContent="Password",f=D(),g=m("input"),p=D(),V&&V.c(),_=D(),G&&G.c(),y=D(),te&&te.c(),S=D(),w=m("div"),P=m("button"),ae&&ae.c(),x=D(),U=le(F),L=D(),k=m("button"),he.c(),E=D(),R=m("span"),R.textContent="Continue with Google",I=D(),C=m("span"),C.textContent="Google",q=D(),Y=m("div"),$=m("button"),X=le(Z),d(s,"for","email"),d(s,"class","form-label small"),d(o,"type","email"),d(o,"class","form-control form-control-sm"),d(o,"id","email"),d(o,"placeholder","Enter email address"),o.required=!0,o.disabled=n[8],d(i,"class","mb-3"),d(h,"for","password"),d(h,"class","form-label small"),d(g,"type","password"),d(g,"class","form-control form-control-sm"),d(g,"id","password"),d(g,"placeholder","Enter password"),d(g,"minlength","8"),g.required=!0,g.disabled=n[8],d(c,"class","mb-3"),d(P,"type","submit"),d(P,"class","btn btn-primary btn-sm"),P.disabled=H=n[8]||n[9],d(R,"class","d-none d-sm-inline"),d(C,"class","d-sm-none"),d(k,"type","button"),d(k,"class","btn btn-outline-danger btn-sm"),k.disabled=O=n[8]||n[9],d(w,"class","d-grid gap-2 mb-3"),d($,"type","button"),d($,"class","btn btn-link"),$.disabled=n[8],d(Y,"class","text-center mt-3")},m(ye,Ae){ue(ye,e,Ae),me&&me.m(e,null),u(e,t),u(e,i),u(i,s),u(i,r),u(i,o),je(o,n[2]),u(e,a),B&&B.m(e,null),u(e,l),u(e,c),u(c,h),u(c,f),u(c,g),je(g,n[3]),u(c,p),V&&V.m(c,null),u(e,_),G&&G.m(e,null),u(e,y),te&&te.m(e,null),u(e,S),u(e,w),u(w,P),ae&&ae.m(P,null),u(P,x),u(P,U),u(w,L),u(w,k),he.m(k,null),u(k,E),u(k,R),u(k,I),u(k,C),u(e,q),u(e,Y),u(Y,$),u($,X),Q||(re=[Ee(o,"input",n[15]),Ee(g,"input",n[17]),Ee(k,"click",n[12]),Ee($,"click",n[10]),Ee(e,"submit",n[11])],Q=!0)},p(ye,[Ae]){ye[6]?me?me.p(ye,Ae):(me=Mm(ye),me.c(),me.m(e,t)):me&&(me.d(1),me=null),Ae&256&&(o.disabled=ye[8]),Ae&4&&o.value!==ye[2]&&je(o,ye[2]),ye[6]?B?B.p(ye,Ae):(B=Om(ye),B.c(),B.m(e,l)):B&&(B.d(1),B=null),Ae&256&&(g.disabled=ye[8]),Ae&8&&g.value!==ye[3]&&je(g,ye[3]),ye[6]?V||(V=Rm(),V.c(),V.m(c,null)):V&&(V.d(1),V=null),ye[6]?G?G.p(ye,Ae):(G=Fm(ye),G.c(),G.m(e,y)):G&&(G.d(1),G=null),ye[7]?te?te.p(ye,Ae):(te=Bm(ye),te.c(),te.m(e,S)):te&&(te.d(1),te=null),ye[8]?ae||(ae=jm(),ae.c(),ae.m(P,x)):ae&&(ae.d(1),ae=null),Ae&64&&F!==(F=ye[6]?"Register":"Login")&&Se(U,F),Ae&768&&H!==(H=ye[8]||ye[9])&&(P.disabled=H),ve!==(ve=fe(ye))&&(he.d(1),he=ve(ye),he&&(he.c(),he.m(k,E))),Ae&768&&O!==(O=ye[8]||ye[9])&&(k.disabled=O),Ae&64&&Z!==(Z=ye[6]?"Already have an account? Login":"Need an account? Register")&&Se(X,Z),Ae&256&&($.disabled=ye[8])},i:dt,o:dt,d(ye){ye&&ce(e),me&&me.d(),B&&B.d(),V&&V.d(),G&&G.d(),te&&te.d(),ae&&ae.d(),he.d(),Q=!1,an(re)}}}function v6(n,e,t){const i=$i();let s="",r="",o="",a="",l="",c="",h=!1,f="",g=!1,p=!1;const _=()=>{t(6,h=!h),t(7,f=""),t(0,s=""),t(1,r=""),t(2,o=""),t(3,a=""),t(4,l=""),t(5,c="")},y=async L=>{L.preventDefault(),t(7,f=""),t(8,g=!0);try{if(h){if(a!==l)throw new Error("Passwords do not match");if(!s.trim()||!r.trim())throw new Error("First name and last name are required");if(!c.trim())throw new Error("Country is required");if(a.length<8)throw new Error("Password must be at least 8 characters long");if(!/(?=.*[a-z])/.test(a))throw new Error("Password must contain at least one lowercase letter");if(!/(?=.*[A-Z])/.test(a))throw new Error("Password must contain at least one uppercase letter");if(!/(?=.*\d)/.test(a))throw new Error("Password must contain at least one number");if(!/(?=.*[@$!%*?&])/.test(a))throw new Error("Password must contain at least one special character (@$!%*?&)");if(["password","123456","password123","admin","doctor","medical","healthcare"].some(R=>a.toLowerCase().includes(R)))throw new Error("Password contains common words and is not secure");if(/(.)\1{2,}/.test(a))throw new Error("Password cannot contain repeated characters");const E=await Is.registerDoctor(o,a,{firstName:s,lastName:r,country:c});console.log("Doctor registered successfully"),i("user-authenticated",E)}else{const k=await Is.signInDoctor(o,a);console.log("Doctor signed in successfully"),i("user-authenticated",k)}}catch(k){t(7,f=k.message),console.error("Authentication error:",k)}finally{t(8,g=!1)}},S=async()=>{t(7,f=""),t(9,p=!0);try{const L=await gh.signInWithGoogle("doctor");console.log("Doctor signed in with Google successfully"),i("user-authenticated",L)}catch(L){t(7,f=L.message||"Failed to sign in with Google"),console.error("Google authentication error:",L)}finally{t(9,p=!1)}};function w(){s=this.value,t(0,s)}function P(){r=this.value,t(1,r)}function x(){o=this.value,t(2,o)}function F(){c=Ha(this),t(5,c)}function U(){a=this.value,t(3,a)}function H(){l=this.value,t(4,l)}return[s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H]}class _6 extends ii{constructor(e){super(),ni(this,e,v6,b6,Zn,{})}}const pl=[];function y6(n,e=dt){let t;const i=new Set;function s(a){if(Zn(n,a)&&(n=a,t)){const l=!pl.length;for(const c of i)c[1](),pl.push(c,n);if(l){for(let c=0;c<pl.length;c+=2)pl[c][0](pl[c+1]);pl.length=0}}}function r(a){s(a(n))}function o(a,l=dt){const c=[a,l];return i.add(c),i.size===1&&(t=e(s,r)||dt),a(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}const Yf=y6([]),Kf=(n,e="success",t=3e3)=>{const i=Date.now()+Math.random(),s={id:i,message:n,type:e,duration:t,visible:!0};Yf.update(r=>[...r,s]),setTimeout(()=>{w6(i)},t)},w6=n=>{Yf.update(e=>e.filter(t=>t.id!==n))},Ls=(n,e=3e3)=>{Kf(n,"success",e)},cr=(n,e=5e3)=>{Kf(n,"error",e)},Xd=(n,e=3e3)=>{Kf(n,"info",e)};function Um(n){let e,t,i,s,r;return{c(){e=m("div"),t=m("i"),i=le(`
    Account created! Your pharmacist number: `),s=m("strong"),r=le(n[10]),d(t,"class","fas fa-check-circle me-2"),d(e,"class","alert alert-success mb-3")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,s),u(s,r)},p(o,a){a&1024&&Se(r,o[10])},d(o){o&&ce(e)}}}function A6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$=n[3]&&zm(n),Z=n[1]&&Hm();return{c(){e=m("form"),t=m("div"),i=m("label"),i.textContent="Pharmacy Name",s=D(),r=m("input"),o=D(),a=m("div"),l=m("label"),l.textContent="Email Address",c=D(),h=m("input"),f=D(),g=m("div"),p=m("label"),p.textContent="Password",_=D(),y=m("input"),S=D(),w=m("div"),P=m("label"),P.textContent="Confirm Password",x=D(),F=m("input"),U=D(),$&&$.c(),H=D(),L=m("div"),k=m("button"),Z&&Z.c(),E=le(`
        Register`),R=D(),I=m("div"),C=m("button"),O=le("Already have an account? Login"),d(i,"for","regBusinessName"),d(i,"class","form-label"),d(r,"type","text"),d(r,"id","regBusinessName"),d(r,"class","form-control"),d(r,"placeholder","Enter your pharmacy name"),r.required=!0,r.disabled=n[1],d(t,"class","mb-3"),d(l,"for","regEmail"),d(l,"class","form-label"),d(h,"type","email"),d(h,"id","regEmail"),d(h,"class","form-control"),d(h,"placeholder","Enter your email address"),h.required=!0,h.disabled=n[1],d(a,"class","mb-3"),d(p,"for","regPassword"),d(p,"class","form-label"),d(y,"type","password"),d(y,"id","regPassword"),d(y,"class","form-control"),d(y,"placeholder","Create a secure password"),y.required=!0,d(y,"minlength","6"),y.disabled=n[1],d(g,"class","mb-3"),d(P,"for","regConfirmPassword"),d(P,"class","form-label"),d(F,"type","password"),d(F,"id","regConfirmPassword"),d(F,"class","form-control"),d(F,"placeholder","Confirm your password"),F.required=!0,F.disabled=n[1],d(w,"class","mb-3"),d(k,"type","submit"),d(k,"class","btn btn-primary"),k.disabled=n[1],d(L,"class","d-grid"),d(C,"type","button"),d(C,"class","btn btn-link"),C.disabled=n[1],d(I,"class","text-center mt-3")},m(X,Q){ue(X,e,Q),u(e,t),u(t,i),u(t,s),u(t,r),je(r,n[8]),u(e,o),u(e,a),u(a,l),u(a,c),u(a,h),je(h,n[6]),u(e,f),u(e,g),u(g,p),u(g,_),u(g,y),je(y,n[7]),u(e,S),u(e,w),u(w,P),u(w,x),u(w,F),je(F,n[9]),u(e,U),$&&$.m(e,null),u(e,H),u(e,L),u(L,k),Z&&Z.m(k,null),u(k,E),u(e,R),u(e,I),u(I,C),u(C,O),q||(Y=[Ee(r,"input",n[17]),Ee(h,"input",n[18]),Ee(y,"input",n[19]),Ee(F,"input",n[20]),Ee(C,"click",n[14]),Ee(e,"submit",Pf(n[12]))],q=!0)},p(X,Q){Q&2&&(r.disabled=X[1]),Q&256&&r.value!==X[8]&&je(r,X[8]),Q&2&&(h.disabled=X[1]),Q&64&&h.value!==X[6]&&je(h,X[6]),Q&2&&(y.disabled=X[1]),Q&128&&y.value!==X[7]&&je(y,X[7]),Q&2&&(F.disabled=X[1]),Q&512&&F.value!==X[9]&&je(F,X[9]),X[3]?$?$.p(X,Q):($=zm(X),$.c(),$.m(e,H)):$&&($.d(1),$=null),X[1]?Z||(Z=Hm(),Z.c(),Z.m(k,E)):Z&&(Z.d(1),Z=null),Q&2&&(k.disabled=X[1]),Q&2&&(C.disabled=X[1])},d(X){X&&ce(e),$&&$.d(),Z&&Z.d(),q=!1,an(Y)}}}function S6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q=n[3]&&qm(n),Y=n[1]&&Vm();function $(Q,re){return Q[2]?P6:k6}let Z=$(n),X=Z(n);return{c(){e=m("form"),t=m("div"),i=m("label"),i.textContent="Email Address",s=D(),r=m("input"),o=D(),a=m("div"),l=m("label"),l.textContent="Password",c=D(),h=m("input"),f=D(),q&&q.c(),g=D(),p=m("div"),_=m("button"),Y&&Y.c(),y=le(`
        Login`),w=D(),P=m("button"),X.c(),x=D(),F=m("span"),F.textContent="Continue with Google",U=D(),H=m("span"),H.textContent="Google",k=D(),E=m("div"),R=m("button"),I=le("Need an account? Register"),d(i,"for","loginEmail"),d(i,"class","form-label small"),d(r,"type","email"),d(r,"id","loginEmail"),d(r,"class","form-control form-control-sm"),d(r,"placeholder","Enter email address"),r.required=!0,r.disabled=n[1],d(t,"class","mb-3"),d(l,"for","loginPassword"),d(l,"class","form-label small"),d(h,"type","password"),d(h,"id","loginPassword"),d(h,"class","form-control form-control-sm"),d(h,"placeholder","Enter password"),h.required=!0,h.disabled=n[1],d(a,"class","mb-3"),d(_,"type","submit"),d(_,"class","btn btn-primary btn-sm"),_.disabled=S=n[1]||n[2],d(F,"class","d-none d-sm-inline"),d(H,"class","d-sm-none"),d(P,"type","button"),d(P,"class","btn btn-outline-danger btn-sm"),P.disabled=L=n[1]||n[2],d(p,"class","d-grid gap-2 mb-3"),d(R,"type","button"),d(R,"class","btn btn-link"),R.disabled=n[1],d(E,"class","text-center mt-3")},m(Q,re){ue(Q,e,re),u(e,t),u(t,i),u(t,s),u(t,r),je(r,n[4]),u(e,o),u(e,a),u(a,l),u(a,c),u(a,h),je(h,n[5]),u(e,f),q&&q.m(e,null),u(e,g),u(e,p),u(p,_),Y&&Y.m(_,null),u(_,y),u(p,w),u(p,P),X.m(P,null),u(P,x),u(P,F),u(P,U),u(P,H),u(e,k),u(e,E),u(E,R),u(R,I),C||(O=[Ee(r,"input",n[15]),Ee(h,"input",n[16]),Ee(P,"click",n[13]),Ee(R,"click",n[14]),Ee(e,"submit",Pf(n[11]))],C=!0)},p(Q,re){re&2&&(r.disabled=Q[1]),re&16&&r.value!==Q[4]&&je(r,Q[4]),re&2&&(h.disabled=Q[1]),re&32&&h.value!==Q[5]&&je(h,Q[5]),Q[3]?q?q.p(Q,re):(q=qm(Q),q.c(),q.m(e,g)):q&&(q.d(1),q=null),Q[1]?Y||(Y=Vm(),Y.c(),Y.m(_,y)):Y&&(Y.d(1),Y=null),re&6&&S!==(S=Q[1]||Q[2])&&(_.disabled=S),Z!==(Z=$(Q))&&(X.d(1),X=Z(Q),X&&(X.c(),X.m(P,x))),re&6&&L!==(L=Q[1]||Q[2])&&(P.disabled=L),re&2&&(R.disabled=Q[1])},d(Q){Q&&ce(e),q&&q.d(),Y&&Y.d(),X.d(),C=!1,an(O)}}}function zm(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[3]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r&8&&Se(i,s[3])},d(s){s&&ce(e)}}}function Hm(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function qm(n){let e,t,i,s,r;return{c(){e=m("div"),t=m("i"),i=D(),s=m("small"),r=le(n[3]),d(t,"class","fas fa-exclamation-triangle me-1"),d(e,"class","alert alert-danger alert-sm"),d(e,"role","alert")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,s),u(s,r)},p(o,a){a&8&&Se(r,o[3])},d(o){o&&ce(e)}}}function Vm(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-1"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function k6(n){let e;return{c(){e=m("i"),d(e,"class","fab fa-google me-1")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function P6(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-1"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function N6(n){let e,t,i=n[10]&&Um(n);function s(a,l){return a[0]?S6:A6}let r=s(n),o=r(n);return{c(){i&&i.c(),e=D(),o.c(),t=gi()},m(a,l){i&&i.m(a,l),ue(a,e,l),o.m(a,l),ue(a,t,l)},p(a,[l]){a[10]?i?i.p(a,l):(i=Um(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),r===(r=s(a))&&o?o.p(a,l):(o.d(1),o=r(a),o&&(o.c(),o.m(t.parentNode,t)))},i:dt,o:dt,d(a){a&&(ce(e),ce(t)),i&&i.d(a),o.d(a)}}}function I6(n,e,t){const i=$i();let s=!0,r=!1,o=!1,a="",l="",c="",h="",f="",g="",p="",_="";const y=()=>{const R=JSON.parse(localStorage.getItem("pharmacistNumbers")||"[]");let I;do I=Math.floor(1e5+Math.random()*9e5).toString();while(R.includes(I));return R.push(I),localStorage.setItem("pharmacistNumbers",JSON.stringify(R)),I},S=async()=>{t(1,r=!0),t(3,a="");try{const R=await Is.loginPharmacist(l,c);R.success?(Ls("Login successful!"),i("pharmacist-login",R.pharmacist)):t(3,a=R.message||"Login failed")}catch(R){t(3,a="Login failed: "+R.message)}finally{t(1,r=!1)}},w=async()=>{t(1,r=!0),t(3,a="");try{if(f!==p){t(3,a="Passwords do not match");return}const R=y(),I=await Is.registerPharmacist({email:h,password:f,businessName:g,pharmacistNumber:R});I.success?(t(10,_=R),Ls("Account created successfully!"),Ls(`Your pharmacist number is: ${R}`),setTimeout(()=>{t(0,s=!0),t(6,h=""),t(7,f=""),t(8,g=""),t(9,p=""),t(10,_="")},2e3)):t(3,a=I.message||"Registration failed")}catch(R){t(3,a="Registration failed: "+R.message)}finally{t(1,r=!1)}},P=async()=>{t(3,a=""),t(2,o=!0);try{const R=await gh.signInWithGoogle("pharmacist");console.log("Pharmacist signed in with Google successfully"),Ls("Google login successful!"),i("pharmacist-login",R)}catch(R){t(3,a=R.message||"Failed to sign in with Google"),cr(a),console.error("Google authentication error:",R)}finally{t(2,o=!1)}},x=()=>{t(0,s=!s),t(3,a=""),t(4,l=""),t(5,c=""),t(6,h=""),t(7,f=""),t(8,g=""),t(9,p=""),t(10,_="")};function F(){l=this.value,t(4,l)}function U(){c=this.value,t(5,c)}function H(){g=this.value,t(8,g)}function L(){h=this.value,t(6,h)}function k(){f=this.value,t(7,f)}function E(){p=this.value,t(9,p)}return[s,r,o,a,l,c,h,f,g,p,_,S,w,P,x,F,U,H,L,k,E]}class L6 extends ii{constructor(e){super(),ni(this,e,I6,N6,Zn,{})}}function Wm(n,e,t){const i=n.slice();return i[13]=e[t],i}function Gm(n,e,t){const i=n.slice();return i[16]=e[t],i}function Ym(n,e,t){const i=n.slice();return i[19]=e[t],i}function Km(n){let e,t,i,s,r=Et(n[2]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Jm(Ym(n,r,a));return{c(){e=m("div"),t=m("div"),t.innerHTML=`<h6 class="card-title mb-0"><i class="fas fa-user-md me-2"></i>
              Connected Doctors</h6>`,i=D(),s=m("div");for(let a=0;a<o.length;a+=1)o[a].c();d(t,"class","card-header bg-info text-white"),d(s,"class","card-body"),d(e,"class","card border-0 shadow-sm mt-3 svelte-b2ipo6")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l&4){r=Et(a[2]);let c;for(c=0;c<r.length;c+=1){const h=Ym(a,r,c);o[c]?o[c].p(h,l):(o[c]=Jm(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function Jm(n){let e,t,i,s,r,o=(n[19].name||`${n[19].firstName} ${n[19].lastName}`||n[19].email)+"",a,l,c,h=n[19].email+"",f,g;return{c(){e=m("div"),t=m("i"),i=D(),s=m("div"),r=m("div"),a=le(o),l=D(),c=m("small"),f=le(h),g=D(),d(t,"class","fas fa-user-md text-primary me-2"),d(r,"class","fw-bold"),d(c,"class","text-muted"),d(e,"class","d-flex align-items-center mb-2")},m(p,_){ue(p,e,_),u(e,t),u(e,i),u(e,s),u(s,r),u(r,a),u(s,l),u(s,c),u(c,f),u(e,g)},p(p,_){_&4&&o!==(o=(p[19].name||`${p[19].firstName} ${p[19].lastName}`||p[19].email)+"")&&Se(a,o),_&4&&h!==(h=p[19].email+"")&&Se(f,h)},d(p){p&&ce(e)}}}function C6(n){let e,t,i,s,r,o=Et(n[1]),a=[];for(let l=0;l<o.length;l+=1)a[l]=Xm(Gm(n,o,l));return{c(){e=m("div"),t=m("table"),i=m("thead"),i.innerHTML='<tr><th class="svelte-b2ipo6">Patient</th> <th class="svelte-b2ipo6">Doctor</th> <th class="svelte-b2ipo6">Medications</th> <th class="svelte-b2ipo6">Date</th> <th class="svelte-b2ipo6">Status</th> <th class="svelte-b2ipo6">Actions</th></tr>',s=D(),r=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();d(i,"class","table-light"),d(t,"class","table table-hover svelte-b2ipo6"),d(e,"class","table-responsive")},m(l,c){ue(l,e,c),u(e,t),u(t,i),u(t,s),u(t,r);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(r,null)},p(l,c){if(c&1666){o=Et(l[1]);let h;for(h=0;h<o.length;h+=1){const f=Gm(l,o,h);a[h]?a[h].p(f,c):(a[h]=Xm(f),a[h].c(),a[h].m(r,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},d(l){l&&ce(e),On(a,l)}}}function T6(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-prescription fa-3x text-muted mb-3"></i> <h5 class="text-muted">No Prescriptions Available</h5> <p class="text-muted">Prescriptions from connected doctors will appear here.</p>',d(e,"class","text-center py-5")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function D6(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <p class="mt-2 text-muted">Loading prescriptions...</p>',d(e,"class","text-center py-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function Xm(n){let e,t,i,s=n[16].patientName+"",r,o,a,l=n[16].patientEmail+"",c,h,f,g,p=n[10](n[16].doctorId)+"",_,y,S,w,P=n[16].doctorId+"",x,F,U,H,L=(n[16].medications?n[16].medications.length:1)+"",k,E,R,I,C,O=n[9](n[16].createdAt||n[16].dateCreated)+"",q,Y,$,Z,X,Q,re,me,B;function V(){return n[12](n[16])}return{c(){e=m("tr"),t=m("td"),i=m("div"),r=le(s),o=D(),a=m("small"),c=le(l),h=D(),f=m("td"),g=m("div"),_=le(p),y=D(),S=m("small"),w=le("ID: "),x=le(P),F=D(),U=m("td"),H=m("span"),k=le(L),E=le(" medication(s)"),R=D(),I=m("td"),C=m("small"),q=le(O),Y=D(),$=m("td"),$.innerHTML='<span class="badge bg-warning text-dark svelte-b2ipo6">Pending</span>',Z=D(),X=m("td"),Q=m("button"),Q.innerHTML=`<i class="fas fa-eye me-1"></i>
                          View`,re=D(),d(i,"class","fw-bold"),d(a,"class","text-muted"),d(g,"class","fw-bold"),d(S,"class","text-muted"),d(H,"class","badge bg-primary svelte-b2ipo6"),d(Q,"class","btn btn-outline-primary btn-sm svelte-b2ipo6")},m(G,te){ue(G,e,te),u(e,t),u(t,i),u(i,r),u(t,o),u(t,a),u(a,c),u(e,h),u(e,f),u(f,g),u(g,_),u(f,y),u(f,S),u(S,w),u(S,x),u(e,F),u(e,U),u(U,H),u(H,k),u(H,E),u(e,R),u(e,I),u(I,C),u(C,q),u(e,Y),u(e,$),u(e,Z),u(e,X),u(X,Q),u(e,re),me||(B=Ee(Q,"click",V),me=!0)},p(G,te){n=G,te&2&&s!==(s=n[16].patientName+"")&&Se(r,s),te&2&&l!==(l=n[16].patientEmail+"")&&Se(c,l),te&2&&p!==(p=n[10](n[16].doctorId)+"")&&Se(_,p),te&2&&P!==(P=n[16].doctorId+"")&&Se(x,P),te&2&&L!==(L=(n[16].medications?n[16].medications.length:1)+"")&&Se(k,L),te&2&&O!==(O=n[9](n[16].createdAt||n[16].dateCreated)+"")&&Se(q,O)},d(G){G&&ce(e),me=!1,B()}}}function Zm(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w=n[4].patientName+"",P,x,F,U,H,L=n[4].patientEmail+"",k,E,R,I,C,O,q,Y,$,Z=n[10](n[4].doctorId)+"",X,Q,re,me,B,V=n[9](n[4].createdAt||n[4].dateCreated)+"",G,te,ae,fe,ve,he=n[4].id+"",ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue=n[4].patientAge&&Qm(n);function Ye(Ge,qe){return Ge[4].medications&&Ge[4].medications.length>0?E6:x6}let ht=Ye(n),it=ht(n),ze=n[4].notes&&eg(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML=`<i class="fas fa-prescription me-2"></i>
            Prescription Details`,o=D(),a=m("button"),l=D(),c=m("div"),h=m("div"),f=m("div"),g=m("h6"),g.textContent="Patient Information",p=D(),_=m("p"),y=m("strong"),y.textContent="Name:",S=D(),P=le(w),x=D(),F=m("p"),U=m("strong"),U.textContent="Email:",H=D(),k=le(L),E=D(),Ue&&Ue.c(),R=D(),I=m("div"),C=m("h6"),C.textContent="Prescription Information",O=D(),q=m("p"),Y=m("strong"),Y.textContent="Doctor:",$=D(),X=le(Z),Q=D(),re=m("p"),me=m("strong"),me.textContent="Date:",B=D(),G=le(V),te=D(),ae=m("p"),fe=m("strong"),fe.textContent="Prescription ID:",ve=D(),ye=le(he),Ae=D(),Me=m("div"),Te=m("h6"),Te.textContent="Medications",De=D(),it.c(),de=D(),ze&&ze.c(),W=D(),_e=m("div"),Ie=m("button"),Ie.innerHTML=`<i class="fas fa-times me-1"></i>
            Close`,be=D(),Le=m("button"),Le.innerHTML=`<i class="fas fa-check me-1"></i>
            Mark as Dispensed`,d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close btn-close-white"),d(s,"class","modal-header bg-primary text-white svelte-b2ipo6"),d(g,"class","fw-bold text-primary"),d(f,"class","col-md-6"),d(C,"class","fw-bold text-primary"),d(I,"class","col-md-6"),d(h,"class","row mb-4"),d(Te,"class","fw-bold text-primary"),d(Me,"class","mb-4"),d(c,"class","modal-body"),d(Ie,"type","button"),d(Ie,"class","btn btn-secondary svelte-b2ipo6"),d(Le,"type","button"),d(Le,"class","btn btn-success svelte-b2ipo6"),d(_e,"class","modal-footer"),d(i,"class","modal-content svelte-b2ipo6"),d(t,"class","modal-dialog modal-lg"),d(e,"class","modal fade show d-block"),$n(e,"background-color","rgba(var(--bs-dark-rgb), 0.5)"),d(e,"tabindex","-1")},m(Ge,qe){ue(Ge,e,qe),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),u(c,h),u(h,f),u(f,g),u(f,p),u(f,_),u(_,y),u(_,S),u(_,P),u(f,x),u(f,F),u(F,U),u(F,H),u(F,k),u(f,E),Ue&&Ue.m(f,null),u(h,R),u(h,I),u(I,C),u(I,O),u(I,q),u(q,Y),u(q,$),u(q,X),u(I,Q),u(I,re),u(re,me),u(re,B),u(re,G),u(I,te),u(I,ae),u(ae,fe),u(ae,ve),u(ae,ye),u(c,Ae),u(c,Me),u(Me,Te),u(Me,De),it.m(Me,null),u(c,de),ze&&ze.m(c,null),u(i,W),u(i,_e),u(_e,Ie),u(_e,be),u(_e,Le),We||(Je=[Ee(a,"click",n[8]),Ee(Ie,"click",n[8])],We=!0)},p(Ge,qe){qe&16&&w!==(w=Ge[4].patientName+"")&&Se(P,w),qe&16&&L!==(L=Ge[4].patientEmail+"")&&Se(k,L),Ge[4].patientAge?Ue?Ue.p(Ge,qe):(Ue=Qm(Ge),Ue.c(),Ue.m(f,null)):Ue&&(Ue.d(1),Ue=null),qe&16&&Z!==(Z=Ge[10](Ge[4].doctorId)+"")&&Se(X,Z),qe&16&&V!==(V=Ge[9](Ge[4].createdAt||Ge[4].dateCreated)+"")&&Se(G,V),qe&16&&he!==(he=Ge[4].id+"")&&Se(ye,he),ht===(ht=Ye(Ge))&&it?it.p(Ge,qe):(it.d(1),it=ht(Ge),it&&(it.c(),it.m(Me,null))),Ge[4].notes?ze?ze.p(Ge,qe):(ze=eg(Ge),ze.c(),ze.m(c,null)):ze&&(ze.d(1),ze=null)},d(Ge){Ge&&ce(e),Ue&&Ue.d(),it.d(),ze&&ze.d(),We=!1,an(Je)}}}function Qm(n){let e,t,i,s=n[4].patientAge+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Age:",i=D(),r=le(s)},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a&16&&s!==(s=o[4].patientAge+"")&&Se(r,s)},d(o){o&&ce(e)}}}function x6(n){let e;return{c(){e=m("div"),e.innerHTML=`<i class="fas fa-info-circle me-2"></i>
                No medications found in this prescription.`,d(e,"class","alert alert-info")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function E6(n){let e,t,i,s,r,o=Et(n[4].medications),a=[];for(let l=0;l<o.length;l+=1)a[l]=$m(Wm(n,o,l));return{c(){e=m("div"),t=m("table"),i=m("thead"),i.innerHTML='<tr><th class="svelte-b2ipo6">Medication</th> <th class="svelte-b2ipo6">Dosage</th> <th class="svelte-b2ipo6">Frequency</th> <th class="svelte-b2ipo6">Duration</th> <th class="svelte-b2ipo6">Instructions</th></tr>',s=D(),r=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();d(i,"class","table-light"),d(t,"class","table table-bordered svelte-b2ipo6"),d(e,"class","table-responsive")},m(l,c){ue(l,e,c),u(e,t),u(t,i),u(t,s),u(t,r);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(r,null)},p(l,c){if(c&16){o=Et(l[4].medications);let h;for(h=0;h<o.length;h+=1){const f=Wm(l,o,h);a[h]?a[h].p(f,c):(a[h]=$m(f),a[h].c(),a[h].m(r,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},d(l){l&&ce(e),On(a,l)}}}function $m(n){let e,t,i=n[13].name+"",s,r,o,a=n[13].dosage+"",l,c,h,f=n[13].frequency+"",g,p,_,y=n[13].duration+"",S,w,P,x=n[13].instructions+"",F,U;return{c(){e=m("tr"),t=m("td"),s=le(i),r=D(),o=m("td"),l=le(a),c=D(),h=m("td"),g=le(f),p=D(),_=m("td"),S=le(y),w=D(),P=m("td"),F=le(x),U=D(),d(t,"class","fw-bold")},m(H,L){ue(H,e,L),u(e,t),u(t,s),u(e,r),u(e,o),u(o,l),u(e,c),u(e,h),u(h,g),u(e,p),u(e,_),u(_,S),u(e,w),u(e,P),u(P,F),u(e,U)},p(H,L){L&16&&i!==(i=H[13].name+"")&&Se(s,i),L&16&&a!==(a=H[13].dosage+"")&&Se(l,a),L&16&&f!==(f=H[13].frequency+"")&&Se(g,f),L&16&&y!==(y=H[13].duration+"")&&Se(S,y),L&16&&x!==(x=H[13].instructions+"")&&Se(F,x)},d(H){H&&ce(e)}}}function eg(n){let e,t,i,s,r=n[4].notes+"",o;return{c(){e=m("div"),t=m("h6"),t.textContent="Doctor's Notes",i=D(),s=m("div"),o=le(r),d(t,"class","fw-bold text-primary"),d(s,"class","alert alert-light"),d(e,"class","mb-4")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),u(s,o)},p(a,l){l&16&&r!==(r=a[4].notes+"")&&Se(o,r)},d(a){a&&ce(e)}}}function M6(n){let e,t,i,s,r,o,a,l,c,h,f=n[0].businessName+"",g,p,_,y,S,w=n[0].businessName+"",P,x,F,U,H,L=n[0].pharmacistNumber+"",k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te=n[0].businessName+"",ae,fe,ve,he,ye,Ae,Me=n[0].pharmacistNumber+"",Te,De,de,W,_e,Ie,be=n[2].length+"",Le,We,Je,Ue,Ye,ht,it=n[1].length+"",ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt,Rt,ft,ut,Lt,st=n[2].length>0&&Km(n);function He(Ct,qt){return Ct[3]?D6:Ct[1].length===0?T6:C6}let yt=He(n),bt=yt(n),Dt=n[5]&&n[4]&&Zm(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),s.innerHTML='<i class="fas fa-pills text-primary me-2"></i> <span class="fw-bold text-primary">M-Prescribe - Pharmacist Portal</span>',r=D(),o=m("div"),a=m("button"),l=m("i"),c=D(),h=m("span"),g=le(f),p=D(),_=m("ul"),y=m("li"),S=m("h6"),P=le(w),x=D(),F=m("li"),U=m("span"),H=le("ID: "),k=le(L),E=D(),R=m("li"),R.innerHTML='<hr class="dropdown-divider"/>',I=D(),C=m("li"),O=m("button"),O.innerHTML='<i class="fas fa-sign-out-alt me-2"></i>Sign Out',q=D(),Y=m("div"),$=m("div"),Z=m("div"),X=m("div"),X.innerHTML=`<h6 class="card-title mb-0"><i class="fas fa-info-circle me-2"></i>
            Pharmacy Information</h6>`,Q=D(),re=m("div"),me=m("div"),B=m("label"),B.textContent="Business Name:",V=D(),G=m("p"),ae=le(te),fe=D(),ve=m("div"),he=m("label"),he.textContent="Pharmacist ID:",ye=D(),Ae=m("p"),Te=le(Me),De=D(),de=m("div"),W=m("label"),W.textContent="Connected Doctors:",_e=D(),Ie=m("p"),Le=le(be),We=D(),Je=m("div"),Ue=m("label"),Ue.textContent="Total Prescriptions:",Ye=D(),ht=m("p"),ze=le(it),Ge=D(),st&&st.c(),qe=D(),ot=m("div"),Xe=m("div"),Mt=m("div"),gt=m("div"),Ft=m("h5"),Ft.innerHTML=`<i class="fas fa-prescription me-2 text-primary"></i>
              Prescriptions`,xt=D(),Qe=m("button"),Qe.innerHTML=`<i class="fas fa-sync-alt me-1"></i>
              Refresh`,vt=D(),pt=m("div"),bt.c(),Rt=D(),Dt&&Dt.c(),ft=gi(),d(s,"class","d-flex align-items-center"),d(l,"class","fas fa-user-circle me-2"),d(h,"class","d-none d-md-inline"),d(a,"class","btn btn-link dropdown-toggle d-flex align-items-center p-0 svelte-b2ipo6"),d(a,"type","button"),d(a,"data-bs-toggle","dropdown"),d(S,"class","dropdown-header"),d(U,"class","dropdown-item-text small text-muted"),d(O,"class","dropdown-item"),d(_,"class","dropdown-menu dropdown-menu-end"),d(o,"class","dropdown"),d(i,"class","d-flex justify-content-between align-items-center px-3 w-100"),d(t,"class","bg-white shadow-sm mb-3 py-2"),d(X,"class","card-header bg-primary text-white"),d(B,"class","form-label fw-bold"),d(G,"class","mb-0"),d(me,"class","mb-3"),d(he,"class","form-label fw-bold"),d(Ae,"class","mb-0 text-primary fw-bold"),d(ve,"class","mb-3"),d(W,"class","form-label fw-bold"),d(Ie,"class","mb-0"),d(de,"class","mb-3"),d(Ue,"class","form-label fw-bold"),d(ht,"class","mb-0"),d(Je,"class","mb-0"),d(re,"class","card-body"),d(Z,"class","card border-0 shadow-sm svelte-b2ipo6"),d($,"class","col-lg-3 mb-4"),d(Ft,"class","card-title mb-0"),d(Qe,"class","btn btn-outline-primary btn-sm svelte-b2ipo6"),d(gt,"class","d-flex justify-content-between align-items-center"),d(Mt,"class","card-header bg-white border-bottom"),d(pt,"class","card-body"),d(Xe,"class","card border-0 shadow-sm svelte-b2ipo6"),d(ot,"class","col-lg-9"),d(Y,"class","row"),d(e,"class","container-fluid")},m(Ct,qt){ue(Ct,e,qt),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(o,a),u(a,l),u(a,c),u(a,h),u(h,g),u(o,p),u(o,_),u(_,y),u(y,S),u(S,P),u(_,x),u(_,F),u(F,U),u(U,H),u(U,k),u(_,E),u(_,R),u(_,I),u(_,C),u(C,O),u(e,q),u(e,Y),u(Y,$),u($,Z),u(Z,X),u(Z,Q),u(Z,re),u(re,me),u(me,B),u(me,V),u(me,G),u(G,ae),u(re,fe),u(re,ve),u(ve,he),u(ve,ye),u(ve,Ae),u(Ae,Te),u(re,De),u(re,de),u(de,W),u(de,_e),u(de,Ie),u(Ie,Le),u(re,We),u(re,Je),u(Je,Ue),u(Je,Ye),u(Je,ht),u(ht,ze),u($,Ge),st&&st.m($,null),u(Y,qe),u(Y,ot),u(ot,Xe),u(Xe,Mt),u(Mt,gt),u(gt,Ft),u(gt,xt),u(gt,Qe),u(Xe,vt),u(Xe,pt),bt.m(pt,null),ue(Ct,Rt,qt),Dt&&Dt.m(Ct,qt),ue(Ct,ft,qt),ut||(Lt=[Ee(O,"click",n[11]),Ee(Qe,"click",n[6])],ut=!0)},p(Ct,[qt]){qt&1&&f!==(f=Ct[0].businessName+"")&&Se(g,f),qt&1&&w!==(w=Ct[0].businessName+"")&&Se(P,w),qt&1&&L!==(L=Ct[0].pharmacistNumber+"")&&Se(k,L),qt&1&&te!==(te=Ct[0].businessName+"")&&Se(ae,te),qt&1&&Me!==(Me=Ct[0].pharmacistNumber+"")&&Se(Te,Me),qt&4&&be!==(be=Ct[2].length+"")&&Se(Le,be),qt&2&&it!==(it=Ct[1].length+"")&&Se(ze,it),Ct[2].length>0?st?st.p(Ct,qt):(st=Km(Ct),st.c(),st.m($,null)):st&&(st.d(1),st=null),yt===(yt=He(Ct))&&bt?bt.p(Ct,qt):(bt.d(1),bt=yt(Ct),bt&&(bt.c(),bt.m(pt,null))),Ct[5]&&Ct[4]?Dt?Dt.p(Ct,qt):(Dt=Zm(Ct),Dt.c(),Dt.m(ft.parentNode,ft)):Dt&&(Dt.d(1),Dt=null)},i:dt,o:dt,d(Ct){Ct&&(ce(e),ce(Rt),ce(ft)),st&&st.d(),bt.d(),Dt&&Dt.d(Ct),ut=!1,an(Lt)}}}function O6(n,e,t){let{pharmacist:i}=e,s=[],r=[],o=!0,a=null,l=!1;const c=async()=>{try{t(3,o=!0);const S=await kt.getAllPrescriptions();t(1,s=S.filter(w=>i.connectedDoctors.includes(w.doctorId))),t(2,r=[]);for(const w of i.connectedDoctors){const P=await kt.getDoctorById(w);P&&r.push(P)}s.sort((w,P)=>new Date(P.createdAt||P.dateCreated)-new Date(w.createdAt||w.dateCreated))}catch(S){console.error("Error loading pharmacist data:",S),cr("Failed to load prescriptions")}finally{t(3,o=!1)}},h=S=>{t(4,a=S),t(5,l=!0)},f=()=>{t(5,l=!1),t(4,a=null)},g=S=>S?new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",p=S=>{const w=r.find(P=>P.id===S);return w?w.name||`${w.firstName} ${w.lastName}`||w.email:"Unknown Doctor"},_=async()=>{try{await Is.signOut(),Ls("Signed out successfully")}catch{cr("Sign out failed")}};Go(()=>{c()});const y=S=>h(S);return n.$$set=S=>{"pharmacist"in S&&t(0,i=S.pharmacist)},[i,s,r,o,a,l,c,h,f,g,p,_,y]}class R6 extends ii{constructor(e){super(),ni(this,e,O6,M6,Zn,{pharmacist:0})}}function tg(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[13]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r[0]&8192&&Se(i,s[13])},d(s){s&&ce(e)}}}function ng(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function F6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt,Rt,ft,ut,Lt,st,He,yt,bt,Dt,Ct,qt,wt,en,Ln,sn,un,rn,Zt,bi,Qn,Bn,vn,si,_n,yn,Yn,ri,hn,wi,Ai,Ze,lt,$e,Bt,Yt,dn,tn,nn,Sn,At,Ht,kn=n[13]&&tg(n),fn=n[14]&&ng();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h5 class="mb-0"><i class="fas fa-user-plus me-2"></i>Add New Patient</h5>',i=D(),s=m("div"),r=m("form"),o=m("div"),a=m("div"),l=m("div"),c=m("label"),c.innerHTML='<i class="fas fa-user me-1"></i>First Name <span class="text-danger">*</span>',h=D(),f=m("input"),g=D(),p=m("div"),_=m("div"),y=m("label"),y.textContent="Last Name",S=D(),w=m("input"),P=D(),x=m("div"),F=m("div"),U=m("div"),H=m("label"),H.innerHTML='<i class="fas fa-envelope me-1"></i>Email Address',L=D(),k=m("input"),E=D(),R=m("div"),I=m("div"),C=m("label"),C.textContent="Phone Number",O=D(),q=m("input"),Y=D(),$=m("div"),Z=m("div"),X=m("div"),Q=m("label"),Q.innerHTML='<i class="fas fa-calendar me-1"></i>Date of Birth',re=D(),me=m("input"),B=D(),V=m("div"),G=m("div"),te=m("label"),te.innerHTML='<i class="fas fa-birthday-cake me-1"></i>Age <span class="text-danger">*</span>',ae=D(),fe=m("input"),ve=D(),he=m("small"),he.textContent="Auto-calculated",ye=D(),Ae=m("div"),Me=m("div"),Te=m("label"),Te.innerHTML='<i class="fas fa-weight me-1"></i>Weight',De=D(),de=m("input"),W=D(),_e=m("small"),_e.textContent="Weight in kilograms",Ie=D(),be=m("div"),Le=m("div"),We=m("label"),We.innerHTML='<i class="fas fa-tint me-1"></i>Blood Group',Je=D(),Ue=m("select"),Ye=m("option"),Ye.textContent="Select Blood Group",ht=m("option"),ht.textContent="A+",it=m("option"),it.textContent="A-",ze=m("option"),ze.textContent="B+",Ge=m("option"),Ge.textContent="B-",qe=m("option"),qe.textContent="AB+",ot=m("option"),ot.textContent="AB-",Xe=m("option"),Xe.textContent="O+",Mt=m("option"),Mt.textContent="O-",gt=D(),Ft=m("small"),Ft.textContent="Important for medical procedures",xt=D(),Qe=m("div"),vt=m("div"),pt=m("div"),Rt=m("label"),Rt.textContent="ID Number",ft=D(),ut=m("input"),Lt=D(),st=m("div"),He=m("label"),He.textContent="Address",yt=D(),bt=m("textarea"),Dt=D(),Ct=m("div"),qt=m("label"),qt.innerHTML='<i class="fas fa-exclamation-triangle me-1"></i>Allergies',wt=D(),en=m("textarea"),Ln=D(),sn=m("small"),sn.textContent="Important: List all known allergies to medications, foods, or other substances",un=D(),rn=m("div"),Zt=m("div"),bi=m("div"),Qn=m("label"),Qn.textContent="Emergency Contact",Bn=D(),vn=m("input"),si=D(),_n=m("div"),yn=m("div"),Yn=m("label"),Yn.textContent="Emergency Phone",ri=D(),hn=m("input"),wi=D(),kn&&kn.c(),Ai=D(),Ze=m("div"),lt=m("button"),fn&&fn.c(),$e=D(),Bt=m("i"),Yt=le("Save Patient"),dn=D(),tn=m("button"),nn=m("i"),Sn=le("Cancel"),d(t,"class","card-header"),d(c,"for","firstName"),d(c,"class","form-label"),d(f,"type","text"),d(f,"class","form-control"),d(f,"id","firstName"),f.required=!0,f.disabled=n[14],d(l,"class","mb-3"),d(a,"class","col-12 col-md-6"),d(y,"for","lastName"),d(y,"class","form-label"),d(w,"type","text"),d(w,"class","form-control"),d(w,"id","lastName"),w.disabled=n[14],d(_,"class","mb-3"),d(p,"class","col-12 col-md-6"),d(o,"class","row g-3"),d(H,"for","email"),d(H,"class","form-label"),d(k,"type","email"),d(k,"class","form-control"),d(k,"id","email"),k.disabled=n[14],d(U,"class","mb-3"),d(F,"class","col-12 col-md-6"),d(C,"for","phone"),d(C,"class","form-label"),d(q,"type","tel"),d(q,"class","form-control"),d(q,"id","phone"),q.disabled=n[14],d(I,"class","mb-3"),d(R,"class","col-12 col-md-6"),d(x,"class","row g-3"),d(Q,"for","dateOfBirth"),d(Q,"class","form-label"),d(me,"type","date"),d(me,"class","form-control"),d(me,"id","dateOfBirth"),me.disabled=n[14],d(X,"class","mb-3"),d(Z,"class","col-12 col-md-3"),d(te,"for","age"),d(te,"class","form-label"),d(fe,"type","number"),d(fe,"class","form-control"),d(fe,"id","age"),d(fe,"min","0"),d(fe,"max","150"),d(fe,"placeholder","Auto-calculated"),fe.disabled=n[14],d(he,"class","form-text text-muted"),d(G,"class","mb-3"),d(V,"class","col-12 col-md-3"),d(Te,"for","weight"),d(Te,"class","form-label"),d(de,"type","number"),d(de,"class","form-control"),d(de,"id","weight"),d(de,"min","0"),d(de,"max","500"),d(de,"step","0.1"),d(de,"placeholder","kg"),de.disabled=n[14],d(_e,"class","form-text text-muted"),d(Me,"class","mb-3"),d(Ae,"class","col-12 col-md-3"),d(We,"for","bloodGroup"),d(We,"class","form-label"),Ye.__value="",je(Ye,Ye.__value),ht.__value="A+",je(ht,ht.__value),it.__value="A-",je(it,it.__value),ze.__value="B+",je(ze,ze.__value),Ge.__value="B-",je(Ge,Ge.__value),qe.__value="AB+",je(qe,qe.__value),ot.__value="AB-",je(ot,ot.__value),Xe.__value="O+",je(Xe,Xe.__value),Mt.__value="O-",je(Mt,Mt.__value),d(Ue,"class","form-control"),d(Ue,"id","bloodGroup"),Ue.disabled=n[14],n[7]===void 0&&mr(()=>n[25].call(Ue)),d(Ft,"class","form-text text-muted"),d(Le,"class","mb-3"),d(be,"class","col-12 col-md-3"),d($,"class","row g-3"),d(Rt,"for","idNumber"),d(Rt,"class","form-label"),d(ut,"type","text"),d(ut,"class","form-control"),d(ut,"id","idNumber"),ut.disabled=n[14],d(pt,"class","mb-3"),d(vt,"class","col-12 col-md-6"),d(Qe,"class","row g-3"),d(He,"for","address"),d(He,"class","form-label"),d(bt,"class","form-control"),d(bt,"id","address"),d(bt,"rows","3"),bt.disabled=n[14],d(st,"class","mb-3"),d(qt,"for","allergies"),d(qt,"class","form-label"),d(en,"class","form-control"),d(en,"id","allergies"),d(en,"rows","3"),d(en,"placeholder","List any known allergies (e.g., Penicillin, Shellfish, Latex, etc.)"),en.disabled=n[14],d(sn,"class","form-text text-muted"),d(Ct,"class","mb-3"),d(Qn,"for","emergencyContact"),d(Qn,"class","form-label"),d(vn,"type","text"),d(vn,"class","form-control"),d(vn,"id","emergencyContact"),vn.disabled=n[14],d(bi,"class","mb-3"),d(Zt,"class","col-12 col-md-6"),d(Yn,"for","emergencyPhone"),d(Yn,"class","form-label"),d(hn,"type","tel"),d(hn,"class","form-control"),d(hn,"id","emergencyPhone"),hn.disabled=n[14],d(yn,"class","mb-3"),d(_n,"class","col-12 col-md-6"),d(rn,"class","row g-3"),d(Bt,"class","fas fa-save me-1"),d(lt,"type","submit"),d(lt,"class","btn btn-primary flex-fill"),lt.disabled=n[14],d(nn,"class","fas fa-times me-1"),d(tn,"type","button"),d(tn,"class","btn btn-secondary flex-fill"),tn.disabled=n[14],d(Ze,"class","d-flex flex-column flex-sm-row gap-2"),d(s,"class","card-body"),d(e,"class","card")},m(Nt,$t){ue(Nt,e,$t),u(e,t),u(e,i),u(e,s),u(s,r),u(r,o),u(o,a),u(a,l),u(l,c),u(l,h),u(l,f),je(f,n[0]),u(o,g),u(o,p),u(p,_),u(_,y),u(_,S),u(_,w),je(w,n[1]),u(r,P),u(r,x),u(x,F),u(F,U),u(U,H),u(U,L),u(U,k),je(k,n[2]),u(x,E),u(x,R),u(R,I),u(I,C),u(I,O),u(I,q),je(q,n[3]),u(r,Y),u(r,$),u($,Z),u(Z,X),u(X,Q),u(X,re),u(X,me),je(me,n[4]),u($,B),u($,V),u(V,G),u(G,te),u(G,ae),u(G,fe),je(fe,n[5]),u(G,ve),u(G,he),u($,ye),u($,Ae),u(Ae,Me),u(Me,Te),u(Me,De),u(Me,de),je(de,n[6]),u(Me,W),u(Me,_e),u($,Ie),u($,be),u(be,Le),u(Le,We),u(Le,Je),u(Le,Ue),u(Ue,Ye),u(Ue,ht),u(Ue,it),u(Ue,ze),u(Ue,Ge),u(Ue,qe),u(Ue,ot),u(Ue,Xe),u(Ue,Mt),as(Ue,n[7],!0),u(Le,gt),u(Le,Ft),u(r,xt),u(r,Qe),u(Qe,vt),u(vt,pt),u(pt,Rt),u(pt,ft),u(pt,ut),je(ut,n[8]),u(r,Lt),u(r,st),u(st,He),u(st,yt),u(st,bt),je(bt,n[9]),u(r,Dt),u(r,Ct),u(Ct,qt),u(Ct,wt),u(Ct,en),je(en,n[10]),u(Ct,Ln),u(Ct,sn),u(r,un),u(r,rn),u(rn,Zt),u(Zt,bi),u(bi,Qn),u(bi,Bn),u(bi,vn),je(vn,n[11]),u(rn,si),u(rn,_n),u(_n,yn),u(yn,Yn),u(yn,ri),u(yn,hn),je(hn,n[12]),u(r,wi),kn&&kn.m(r,null),u(r,Ai),u(r,Ze),u(Ze,lt),fn&&fn.m(lt,null),u(lt,$e),u(lt,Bt),u(lt,Yt),u(Ze,dn),u(Ze,tn),u(tn,nn),u(tn,Sn),At||(Ht=[Ee(f,"input",n[18]),Ee(w,"input",n[19]),Ee(k,"input",n[20]),Ee(q,"input",n[21]),Ee(me,"input",n[22]),Ee(me,"change",n[15]),Ee(fe,"input",n[23]),Ee(de,"input",n[24]),Ee(Ue,"change",n[25]),Ee(ut,"input",n[26]),Ee(bt,"input",n[27]),Ee(en,"input",n[28]),Ee(vn,"input",n[29]),Ee(hn,"input",n[30]),Ee(tn,"click",n[17]),Ee(r,"submit",n[16])],At=!0)},p(Nt,$t){$t[0]&16384&&(f.disabled=Nt[14]),$t[0]&1&&f.value!==Nt[0]&&je(f,Nt[0]),$t[0]&16384&&(w.disabled=Nt[14]),$t[0]&2&&w.value!==Nt[1]&&je(w,Nt[1]),$t[0]&16384&&(k.disabled=Nt[14]),$t[0]&4&&k.value!==Nt[2]&&je(k,Nt[2]),$t[0]&16384&&(q.disabled=Nt[14]),$t[0]&8&&je(q,Nt[3]),$t[0]&16384&&(me.disabled=Nt[14]),$t[0]&16&&je(me,Nt[4]),$t[0]&16384&&(fe.disabled=Nt[14]),$t[0]&32&&Uo(fe.value)!==Nt[5]&&je(fe,Nt[5]),$t[0]&16384&&(de.disabled=Nt[14]),$t[0]&64&&Uo(de.value)!==Nt[6]&&je(de,Nt[6]),$t[0]&16384&&(Ue.disabled=Nt[14]),$t[0]&128&&as(Ue,Nt[7]),$t[0]&16384&&(ut.disabled=Nt[14]),$t[0]&256&&ut.value!==Nt[8]&&je(ut,Nt[8]),$t[0]&16384&&(bt.disabled=Nt[14]),$t[0]&512&&je(bt,Nt[9]),$t[0]&16384&&(en.disabled=Nt[14]),$t[0]&1024&&je(en,Nt[10]),$t[0]&16384&&(vn.disabled=Nt[14]),$t[0]&2048&&vn.value!==Nt[11]&&je(vn,Nt[11]),$t[0]&16384&&(hn.disabled=Nt[14]),$t[0]&4096&&je(hn,Nt[12]),Nt[13]?kn?kn.p(Nt,$t):(kn=tg(Nt),kn.c(),kn.m(r,Ai)):kn&&(kn.d(1),kn=null),Nt[14]?fn||(fn=ng(),fn.c(),fn.m(lt,$e)):fn&&(fn.d(1),fn=null),$t[0]&16384&&(lt.disabled=Nt[14]),$t[0]&16384&&(tn.disabled=Nt[14])},i:dt,o:dt,d(Nt){Nt&&ce(e),kn&&kn.d(),fn&&fn.d(),At=!1,an(Ht)}}}function B6(n,e,t){const i=$i();let s="",r="",o="",a="",l="",c="",h="",f="",g="",p="",_="",y="",S="",w="",P=!1;const x=re=>{if(!re)return"";const me=new Date,B=new Date(re);let V=me.getFullYear()-B.getFullYear();const G=me.getMonth()-B.getMonth();return(G<0||G===0&&me.getDate()<B.getDate())&&V--,V.toString()},F=()=>{l&&t(5,c=x(l))},U=async re=>{re.preventDefault(),t(13,w=""),t(14,P=!0);try{if(!s.trim())throw new Error("First name is required");let me=c;if(l&&!c&&(me=x(l)),!me||me==="")throw new Error("Age is required. Please provide either age or date of birth");if(o&&o.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))throw new Error("Please enter a valid email address");if(l&&new Date(l)>=new Date)throw new Error("Date of birth must be in the past");const B={firstName:s.trim(),lastName:r.trim()||"",email:o.trim()||"",phone:a.trim()||"",dateOfBirth:l||"",age:me,weight:h.trim()||"",bloodGroup:f.trim()||"",idNumber:g.trim()||"",address:p.trim()||"",allergies:_.trim()||"",emergencyContact:y.trim()||"",emergencyPhone:S.trim()||""};i("patient-added",B),t(0,s=""),t(1,r=""),t(2,o=""),t(3,a=""),t(4,l=""),t(5,c=""),t(6,h=""),t(7,f=""),t(8,g=""),t(9,p=""),t(10,_=""),t(11,y=""),t(12,S="")}catch(me){t(13,w=me.message),console.error("Form validation error:",me)}finally{t(14,P=!1)}},H=()=>{i("cancel")};function L(){s=this.value,t(0,s)}function k(){r=this.value,t(1,r)}function E(){o=this.value,t(2,o)}function R(){a=this.value,t(3,a)}function I(){l=this.value,t(4,l)}function C(){c=Uo(this.value),t(5,c)}function O(){h=Uo(this.value),t(6,h)}function q(){f=Ha(this),t(7,f)}function Y(){g=this.value,t(8,g)}function $(){p=this.value,t(9,p)}function Z(){_=this.value,t(10,_)}function X(){y=this.value,t(11,y)}function Q(){S=this.value,t(12,S)}return[s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q]}class j6 extends ii{constructor(e){super(),ni(this,e,B6,F6,Zn,{},null,[-1,-1])}}const U6="modulepreload",z6=function(n){return"/"+n},ig={},Ec=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=z6(l),l in ig)return;ig[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":U6,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};class H6{constructor(){this.apiKey="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",this.baseURL="https://api.openai.com/v1"}isConfigured(){return this.apiKey&&this.apiKey!=="undefined"&&this.apiKey!==""}async generateRecommendations(e,t=null,i=null){var s,r,o;if(!this.isConfigured())throw new Error("OpenAI API key not configured. Please add VITE_OPENAI_API_KEY to your environment variables.");try{console.log("🤖 Generating AI recommendations for symptoms:",e);const l=`As a medical AI assistant, analyze the following patient symptoms and provide professional medical recommendations. 

Patient Symptoms: ${e.map(g=>`${g.description} (Severity: ${g.severity}${g.duration?`, Duration: ${g.duration}`:""})`).join(", ")}
${t?`Patient Age: ${t} years`:""}

Please provide your response in the following structured format:

**Possible Conditions:**
- List potential diagnoses or conditions to consider

**Diagnostic Recommendations:**
- Recommended tests or examinations
- When to seek immediate medical attention

**Treatment Recommendations:**
- General treatment approaches
- Lifestyle modifications
- Follow-up considerations

**Important Notes:**
- Key warnings or red flags
- When to contact healthcare provider immediately

Format your response with clear headings and bullet points. Be concise but comprehensive. Remember this is for informational purposes only and should not replace professional medical consultation.`,c=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a medical AI assistant that provides professional medical recommendations based on symptoms. Always emphasize that your recommendations are for informational purposes only and should not replace professional medical consultation."},{role:"user",content:l}],max_tokens:1e3,temperature:.3})});if(!c.ok){const g=await c.json();throw new Error(`OpenAI API error: ${((s=g.error)==null?void 0:s.message)||"Unknown error"}`)}const h=await c.json(),f=((o=(r=h.choices[0])==null?void 0:r.message)==null?void 0:o.content)||"No recommendations available.";return h.usage&&gs.trackUsage("generateRecommendations",h.usage.prompt_tokens,h.usage.completion_tokens,"gpt-3.5-turbo",i),console.log("✅ AI recommendations generated successfully"),f}catch(a){throw console.error("❌ Error generating AI recommendations:",a),a}}async generateMedicationSuggestions(e,t=[],i=null){var s,r,o;if(!this.isConfigured())throw new Error("OpenAI API key not configured.");try{console.log("💊 Generating medication suggestions for symptoms:",e);const a=e.map(p=>`${p.description} (Severity: ${p.severity})`).join(", "),l=t.length>0?`Current medications: ${t.map(p=>p.name).join(", ")}`:"No current medications",c=`As a medical AI assistant, suggest appropriate medications for the following symptoms. Consider drug interactions and contraindications.

Patient Symptoms: ${a}
${l}

Please provide your response in the following structured format:

**Over-the-Counter Medications:**
- List OTC medications that might help
- Dosage recommendations
- Important considerations

**Prescription Medications:**
- Prescription medications to consider
- Typical dosages
- Special considerations

**Drug Interactions:**
- Important interactions to be aware of
- Contraindications
- Monitoring requirements

**Side Effects & Monitoring:**
- Common side effects to watch for
- When to discontinue
- Follow-up requirements

**Important Warnings:**
- Critical safety information
- When to avoid certain medications
- Emergency situations

Format your response with clear headings and bullet points. Remember this is for informational purposes only and should not replace professional medical consultation.`,h=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a medical AI assistant that provides medication suggestions based on symptoms. Always emphasize professional medical consultation and consider drug interactions."},{role:"user",content:c}],max_tokens:800,temperature:.2})});if(!h.ok){const p=await h.json();throw new Error(`OpenAI API error: ${((s=p.error)==null?void 0:s.message)||"Unknown error"}`)}const f=await h.json(),g=((o=(r=f.choices[0])==null?void 0:r.message)==null?void 0:o.content)||"No medication suggestions available.";return f.usage&&gs.trackUsage("generateMedicationSuggestions",f.usage.prompt_tokens,f.usage.completion_tokens,"gpt-3.5-turbo",i),console.log("✅ Medication suggestions generated successfully"),g}catch(a){throw console.error("❌ Error generating medication suggestions:",a),a}}getKnownDangerousInteractions(){return[{drugs:["phenelzine","isocarboxazid","tranylcypromine","selegiline","rasagiline"],interactions:["fluoxetine","sertraline","paroxetine","citalopram","escitalopram","fluvoxamine"],severity:"critical",description:"MAOI + SSRI: Extremely dangerous — risk of serotonin syndrome (high fever, agitation, muscle rigidity, seizures, even death). There must be at least 14 days between stopping MAOI and starting SSRI."},{drugs:["warfarin"],interactions:["aspirin","ibuprofen","naproxen","diclofenac","celecoxib"],severity:"high",description:"Warfarin + NSAIDs: Increased bleeding risk. Monitor INR closely."},{drugs:["digoxin"],interactions:["furosemide","hydrochlorothiazide","spironolactone"],severity:"high",description:"Digoxin + Diuretics: Risk of digoxin toxicity due to potassium depletion."},{drugs:["lithium"],interactions:["furosemide","hydrochlorothiazide","ibuprofen","naproxen"],severity:"high",description:"Lithium + NSAIDs/Diuretics: Increased lithium levels, risk of toxicity."},{drugs:["lisinopril","enalapril","ramipril","captopril"],interactions:["potassium chloride","potassium citrate","spironolactone"],severity:"high",description:"ACE Inhibitors + Potassium: Risk of hyperkalemia (high potassium levels)."}]}getKnownSafeCombinations(){return[{drugs:["paracetamol","acetaminophen"],interactions:["metformin","aspirin","ibuprofen","omeprazole","amoxicillin","amoxiclav"],description:"Safe combination - no significant interactions"},{drugs:["metformin"],interactions:["paracetamol","acetaminophen","aspirin","ibuprofen","omeprazole"],description:"Safe combination - no significant interactions"},{drugs:["aspirin"],interactions:["paracetamol","acetaminophen","metformin","omeprazole"],description:"Safe combination - no significant interactions"},{drugs:["ibuprofen"],interactions:["paracetamol","acetaminophen","metformin"],description:"Safe combination - no significant interactions"},{drugs:["omeprazole"],interactions:["paracetamol","acetaminophen","metformin","aspirin"],description:"Safe combination - no significant interactions"}]}checkLocalDangerousInteractions(e){const t=this.getKnownDangerousInteractions(),i=e.map(s=>s.name.toLowerCase().trim());for(const s of t){const r=s.drugs.some(a=>i.some(l=>l.includes(a))),o=s.interactions.some(a=>i.some(l=>l.includes(a)));if(r&&o)return{hasInteractions:!0,interactions:`🚨 DANGEROUS INTERACTION DETECTED 🚨

${s.description}

**ACTION REQUIRED:** Do NOT take these medications together. Consult a healthcare professional immediately.`,severity:s.severity,isLocalDetection:!0}}return null}checkKnownSafeCombinations(e){const t=this.getKnownSafeCombinations(),i=e.map(s=>s.name.toLowerCase().trim());for(const s of t){const r=s.drugs.some(a=>i.some(l=>l.includes(a))),o=s.interactions.some(a=>i.some(l=>l.includes(a)));if(r&&o)return{isSafeCombination:!0,description:s.description}}return null}parseAIInteractionResponse(e){const t=e.toLowerCase(),i=t.match(/interaction detected:\s*(yes|no)/),s=t.match(/severity level:\s*(none|low|moderate|high|critical)/);let r=!1,o="Unknown";return i?(r=i[1]==="yes",s&&(o=s[1].charAt(0).toUpperCase()+s[1].slice(1)),console.log("🔍 Using structured response:",{hasInteractions:r,severity:o})):(r=!t.includes("no significant drug interactions detected")&&!t.includes("no interactions found")&&!t.includes("no known interactions")&&!t.includes("no drug interactions")&&!t.includes("no significant interactions")&&!t.includes("no major interactions")&&!t.includes("no dangerous interactions")&&(t.includes("drug interaction")||t.includes("contraindication")||t.includes("serotonin syndrome")||t.includes("bleeding risk")||t.includes("toxicity risk")||t.includes("dangerous combination")||t.includes("avoid taking")||t.includes("do not combine")||t.includes("increased risk")||t.includes("monitor closely")),o="low",t.includes("critical")||t.includes("severe")||t.includes("dangerous")||t.includes("contraindication")||t.includes("serotonin syndrome")||t.includes("fatal")||t.includes("death")||t.includes("emergency")||t.includes("life-threatening")?o="critical":t.includes("major")||t.includes("high risk")||t.includes("significant interaction")||t.includes("serious")||t.includes("toxicity")||t.includes("bleeding risk")?o="high":(t.includes("moderate")||t.includes("medium")||t.includes("caution")||t.includes("warning"))&&(o="moderate"),console.log("🔍 Using fallback parsing:",{hasInteractions:r,severity:o})),{hasInteractions:r,severity:o}}async checkDrugInteractions(e,t=null){var i,s,r;if(!this.isConfigured())throw new Error("OpenAI API key not configured.");try{if(!e||e.length<2)return{hasInteractions:!1,interactions:"No drug interactions to check (less than 2 medications).",severity:"none"};console.log("🔍 Checking drug interactions for prescriptions:",e);const o=this.checkLocalDangerousInteractions(e);if(o)return console.log("🚨 Local dangerous interaction detected:",o),o;const a=this.checkKnownSafeCombinations(e);if(a)return console.log("✅ Safe combination detected:",a),{hasInteractions:!1,interactions:"No significant drug interactions detected. These medications are commonly prescribed together and are considered safe.",severity:"none",isSafeCombination:!0};const c=`As a medical AI assistant, analyze the following medications for potential drug interactions.

Current Prescriptions: ${e.map(y=>y.name).join(", ")}

Please provide your response in EXACTLY this format:

**INTERACTION DETECTED: [YES/NO]**
**SEVERITY LEVEL: [None/Low/Moderate/High/Critical]**

**DETAILED ANALYSIS:**
- Check for KNOWN, DOCUMENTED drug-drug interactions only
- Identify SPECIFIC contraindications (not general warnings)
- Assess severity levels based on documented evidence

**SPECIFIC INTERACTIONS:**
- List ONLY confirmed interactions found in medical literature
- Explain the specific mechanism and documented effects
- Provide evidence-based monitoring recommendations

**MONITORING RECOMMENDATIONS:**
- Evidence-based monitoring guidelines
- Recommended follow-up intervals
- Specific signs of adverse reactions to watch for

IMPORTANT CRITERIA:
- Only report DOCUMENTED, CLINICALLY SIGNIFICANT interactions
- Do NOT report theoretical or minor interactions
- Be CONSERVATIVE - only flag interactions with clear evidence
- Focus on HIGH-RISK combinations:
  - Serotonin syndrome risks (MAOI + SSRI combinations)
  - Bleeding risks (warfarin + NSAIDs)
  - Toxicity risks (lithium + diuretics)
  - Cardiovascular risks
  - CNS depressant combinations

CRITICAL: Start your response with "INTERACTION DETECTED: YES" or "INTERACTION DETECTED: NO" exactly as shown. This is for informational purposes only and should not replace professional medical consultation.`,h=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a medical AI assistant specializing in drug interaction analysis. Provide accurate, evidence-based information about medication interactions while emphasizing the need for professional medical consultation. Be thorough in identifying ALL potential interactions and contraindications."},{role:"user",content:c}],max_tokens:1e3,temperature:.1})});if(!h.ok){const y=await h.json();throw new Error(`OpenAI API error: ${((i=y.error)==null?void 0:i.message)||"Unknown error"}`)}const f=await h.json(),g=((r=(s=f.choices[0])==null?void 0:s.message)==null?void 0:r.content)||"Unable to analyze drug interactions.";f.usage&&gs.trackUsage("checkDrugInteractions",f.usage.prompt_tokens,f.usage.completion_tokens,"gpt-3.5-turbo",t);const{hasInteractions:p,severity:_}=this.parseAIInteractionResponse(g);return console.log("✅ Drug interaction analysis completed:",{hasInteractions:p,severity:_}),{hasInteractions:p,interactions:g,severity:_}}catch(o){throw console.error("❌ Error checking drug interactions:",o),o}}async generateCombinedAnalysis(e,t=[],i=null,s=null){var r,o,a;if(!this.isConfigured())throw new Error("OpenAI API key not configured.");try{console.log("🤖 Generating combined AI analysis...");const l=e.map(_=>_.description).join(", "),c=t.length>0?`Current medications: ${t.map(_=>_.name).join(", ")}`:"No current medications",h=`Patient symptoms: ${l}${i?`, Age: ${i}`:""}
${c}

Provide concise medical analysis:

**Possible Conditions:**
- List 2-3 most likely conditions

**Treatment Recommendations:**
- Key medications to consider (OTC and prescription)
- Important dosages and considerations

**Drug Interactions:**
- Critical interactions with current medications
- Key warnings

**Red Flags:**
- When to seek immediate medical attention

Be brief and focused. Medical information only.`,f=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"Medical assistant. Provide concise analysis with clear sections. Be brief but comprehensive for medical decision-making."},{role:"user",content:h}],max_tokens:600,temperature:.2})});if(!f.ok){const _=await f.json();throw new Error(`OpenAI API error: ${((r=_.error)==null?void 0:r.message)||"Unknown error"}`)}const g=await f.json(),p=((a=(o=g.choices[0])==null?void 0:o.message)==null?void 0:a.content)||"No analysis available.";return g.usage&&gs.trackUsage("generateCombinedAnalysis",g.usage.prompt_tokens,g.usage.completion_tokens,"gpt-3.5-turbo",s),console.log("✅ Combined AI analysis generated"),{combinedAnalysis:p,recommendations:p,medicationSuggestions:p}}catch(l){throw console.error("❌ Error generating combined analysis:",l),l}}}const wa=new H6;function q6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$;return{c(){e=m("ul"),t=m("li"),i=m("button"),s=m("i"),r=le("Overview"),a=D(),l=m("li"),c=m("button"),h=m("i"),f=le("Prescriptions"),p=D(),_=m("li"),y=m("button"),S=m("i"),w=le("Symptoms"),x=D(),F=m("li"),U=m("button"),H=m("i"),L=le("Illnesses"),E=D(),R=m("li"),I=m("button"),C=m("i"),O=le("History"),d(s,"class","fas fa-user me-2"),d(i,"class",o="nav-link "+(n[0]==="overview"?"active":"")),d(i,"role","tab"),d(t,"class","nav-item"),d(t,"role","presentation"),d(h,"class","fas fa-pills me-2"),d(c,"class",g="nav-link "+(n[0]==="prescriptions"?"active":"")),d(c,"role","tab"),d(l,"class","nav-item"),d(l,"role","presentation"),d(S,"class","fas fa-thermometer-half me-2"),d(y,"class",P="nav-link "+(n[0]==="symptoms"?"active":"")),d(y,"role","tab"),d(_,"class","nav-item"),d(_,"role","presentation"),d(H,"class","fas fa-heartbeat me-2"),d(U,"class",k="nav-link "+(n[0]==="illnesses"?"active":"")),d(U,"role","tab"),d(F,"class","nav-item"),d(F,"role","presentation"),d(C,"class","fas fa-history me-2"),d(I,"class",q="nav-link "+(n[0]==="history"?"active":"")),d(I,"role","tab"),d(R,"class","nav-item"),d(R,"role","presentation"),d(e,"class","nav nav-tabs"),d(e,"role","tablist")},m(Z,X){ue(Z,e,X),u(e,t),u(t,i),u(i,s),u(i,r),u(e,a),u(e,l),u(l,c),u(c,h),u(c,f),u(e,p),u(e,_),u(_,y),u(y,S),u(y,w),u(e,x),u(e,F),u(F,U),u(U,H),u(U,L),u(e,E),u(e,R),u(R,I),u(I,C),u(I,O),Y||($=[Ee(i,"click",n[2]),Ee(c,"click",n[3]),Ee(y,"click",n[4]),Ee(U,"click",n[5]),Ee(I,"click",n[6])],Y=!0)},p(Z,[X]){X&1&&o!==(o="nav-link "+(Z[0]==="overview"?"active":""))&&d(i,"class",o),X&1&&g!==(g="nav-link "+(Z[0]==="prescriptions"?"active":""))&&d(c,"class",g),X&1&&P!==(P="nav-link "+(Z[0]==="symptoms"?"active":""))&&d(y,"class",P),X&1&&k!==(k="nav-link "+(Z[0]==="illnesses"?"active":""))&&d(U,"class",k),X&1&&q!==(q="nav-link "+(Z[0]==="history"?"active":""))&&d(I,"class",q)},i:dt,o:dt,d(Z){Z&&ce(e),Y=!1,an($)}}}function V6(n,e,t){let{activeTab:i="overview"}=e,{onTabChange:s}=e;const r=()=>s("overview"),o=()=>s("prescriptions"),a=()=>s("symptoms"),l=()=>s("illnesses"),c=()=>s("history");return n.$$set=h=>{"activeTab"in h&&t(0,i=h.activeTab),"onTabChange"in h&&t(1,s=h.onTabChange)},[i,s,r,o,a,l,c]}class W6 extends ii{constructor(e){super(),ni(this,e,V6,q6,Zn,{activeTab:0,onTabChange:1})}}function sg(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[5]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r&32&&Se(i,s[5])},d(s){s&&ce(e)}}}function rg(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function G6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De=n[5]&&sg(n),de=n[6]&&rg();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-heartbeat me-2"></i>Add New Illness</h6>',i=D(),s=m("div"),r=m("form"),o=m("div"),a=m("label"),a.textContent="Illness Name *",l=D(),c=m("input"),h=D(),f=m("div"),g=m("label"),g.textContent="Description",p=D(),_=m("textarea"),y=D(),S=m("div"),w=m("div"),P=m("div"),x=m("label"),x.textContent="Status",F=D(),U=m("select"),H=m("option"),H.textContent="Active",L=m("option"),L.textContent="Chronic",k=m("option"),k.textContent="Resolved",E=m("option"),E.textContent="Under Monitoring",R=D(),I=m("div"),C=m("div"),O=m("label"),O.textContent="Diagnosis Date *",q=D(),Y=m("input"),$=D(),Z=m("div"),X=m("label"),X.textContent="Additional Notes",Q=D(),re=m("textarea"),me=D(),De&&De.c(),B=D(),V=m("div"),G=m("button"),de&&de.c(),te=D(),ae=m("i"),fe=le("Save Illness"),ve=D(),he=m("button"),ye=m("i"),Ae=le("Cancel"),d(t,"class","card-header"),d(a,"for","illnessName"),d(a,"class","form-label"),d(c,"type","text"),d(c,"class","form-control"),d(c,"id","illnessName"),c.required=!0,c.disabled=n[6],d(c,"placeholder","e.g., Diabetes, Hypertension"),d(o,"class","mb-3"),d(g,"for","illnessDescription"),d(g,"class","form-label"),d(_,"class","form-control"),d(_,"id","illnessDescription"),d(_,"rows","3"),_.disabled=n[6],d(_,"placeholder","Describe the illness, symptoms, or condition"),d(f,"class","mb-3"),d(x,"for","illnessStatus"),d(x,"class","form-label"),H.__value="active",je(H,H.__value),L.__value="chronic",je(L,L.__value),k.__value="resolved",je(k,k.__value),E.__value="monitoring",je(E,E.__value),d(U,"class","form-select"),d(U,"id","illnessStatus"),U.disabled=n[6],n[2]===void 0&&mr(()=>n[12].call(U)),d(P,"class","mb-3"),d(w,"class","col-md-6"),d(O,"for","diagnosisDate"),d(O,"class","form-label"),d(Y,"type","date"),d(Y,"class","form-control"),d(Y,"id","diagnosisDate"),Y.required=!0,Y.disabled=n[6],d(C,"class","mb-3"),d(I,"class","col-md-6"),d(S,"class","row"),d(X,"for","illnessNotes"),d(X,"class","form-label"),d(re,"class","form-control"),d(re,"id","illnessNotes"),d(re,"rows","2"),re.disabled=n[6],d(re,"placeholder","Any additional notes about the illness"),d(Z,"class","mb-3"),d(ae,"class","fas fa-save me-1"),d(G,"type","submit"),d(G,"class","btn btn-primary"),G.disabled=n[6],d(ye,"class","fas fa-times me-1"),d(he,"type","button"),d(he,"class","btn btn-secondary"),he.disabled=n[6],d(V,"class","d-flex gap-2"),d(s,"class","card-body"),d(e,"class","card")},m(W,_e){ue(W,e,_e),u(e,t),u(e,i),u(e,s),u(s,r),u(r,o),u(o,a),u(o,l),u(o,c),je(c,n[0]),u(r,h),u(r,f),u(f,g),u(f,p),u(f,_),je(_,n[1]),u(r,y),u(r,S),u(S,w),u(w,P),u(P,x),u(P,F),u(P,U),u(U,H),u(U,L),u(U,k),u(U,E),as(U,n[2],!0),u(S,R),u(S,I),u(I,C),u(C,O),u(C,q),u(C,Y),je(Y,n[3]),u(r,$),u(r,Z),u(Z,X),u(Z,Q),u(Z,re),je(re,n[4]),u(r,me),De&&De.m(r,null),u(r,B),u(r,V),u(V,G),de&&de.m(G,null),u(G,te),u(G,ae),u(G,fe),u(V,ve),u(V,he),u(he,ye),u(he,Ae),Me||(Te=[Ee(c,"input",n[10]),Ee(_,"input",n[11]),Ee(U,"change",n[12]),Ee(Y,"input",n[13]),Ee(re,"input",n[14]),Ee(he,"click",n[8]),Ee(r,"submit",n[7])],Me=!0)},p(W,[_e]){_e&64&&(c.disabled=W[6]),_e&1&&c.value!==W[0]&&je(c,W[0]),_e&64&&(_.disabled=W[6]),_e&2&&je(_,W[1]),_e&64&&(U.disabled=W[6]),_e&4&&as(U,W[2]),_e&64&&(Y.disabled=W[6]),_e&8&&je(Y,W[3]),_e&64&&(re.disabled=W[6]),_e&16&&je(re,W[4]),W[5]?De?De.p(W,_e):(De=sg(W),De.c(),De.m(r,B)):De&&(De.d(1),De=null),W[6]?de||(de=rg(),de.c(),de.m(G,te)):de&&(de.d(1),de=null),_e&64&&(G.disabled=W[6]),_e&64&&(he.disabled=W[6])},i:dt,o:dt,d(W){W&&ce(e),De&&De.d(),de&&de.d(),Me=!1,an(Te)}}}function Y6(n,e,t){let{visible:i=!0}=e;const s=$i();let r="",o="",a="active",l="",c="",h="",f=!1;const g=async x=>{x.preventDefault(),t(5,h=""),t(6,f=!0);try{if(!r||!l)throw new Error("Please fill in all required fields");if(new Date(l)>new Date)throw new Error("Diagnosis date cannot be in the future");const H={name:r.trim(),description:o.trim(),status:a,diagnosisDate:l,notes:c.trim()};s("illness-added",H),t(0,r=""),t(1,o=""),t(2,a="active"),t(3,l=""),t(4,c="")}catch(F){t(5,h=F.message),console.error("Form validation error:",F)}finally{t(6,f=!1)}},p=()=>{s("cancel")};function _(){r=this.value,t(0,r)}function y(){o=this.value,t(1,o)}function S(){a=Ha(this),t(2,a)}function w(){l=this.value,t(3,l)}function P(){c=this.value,t(4,c)}return n.$$set=x=>{"visible"in x&&t(9,i=x.visible)},n.$$.update=()=>{n.$$.dirty&512&&(i||t(6,f=!1))},[r,o,a,l,c,h,f,g,p,i,_,y,S,w,P]}class K6 extends ii{constructor(e){super(),ni(this,e,Y6,G6,Zn,{visible:9})}}function og(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[5]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r&32&&Se(i,s[5])},d(s){s&&ce(e)}}}function ag(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function J6(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De=n[5]&&og(n),de=n[6]&&ag();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-thermometer-half me-2"></i>Add New Symptoms</h6>',i=D(),s=m("div"),r=m("form"),o=m("div"),a=m("label"),a.textContent="Symptom Description *",l=D(),c=m("textarea"),h=D(),f=m("div"),g=m("div"),p=m("div"),_=m("label"),_.textContent="Severity",y=D(),S=m("select"),w=m("option"),w.textContent="Mild",P=m("option"),P.textContent="Moderate",x=m("option"),x.textContent="Severe",F=m("option"),F.textContent="Critical",U=D(),H=m("div"),L=m("div"),k=m("label"),k.textContent="Duration",E=D(),R=m("input"),I=D(),C=m("div"),O=m("label"),O.textContent="Onset Date *",q=D(),Y=m("input"),$=D(),Z=m("div"),X=m("label"),X.textContent="Additional Notes",Q=D(),re=m("textarea"),me=D(),De&&De.c(),B=D(),V=m("div"),G=m("button"),de&&de.c(),te=D(),ae=m("i"),fe=le("Save Symptoms"),ve=D(),he=m("button"),ye=m("i"),Ae=le("Cancel"),d(t,"class","card-header"),d(a,"for","symptomsDescription"),d(a,"class","form-label"),d(c,"class","form-control"),d(c,"id","symptomsDescription"),d(c,"rows","3"),c.required=!0,c.disabled=n[6],d(c,"placeholder","Describe the symptoms in detail (e.g., chest pain, shortness of breath, fever)"),d(o,"class","mb-3"),d(_,"for","symptomsSeverity"),d(_,"class","form-label"),w.__value="mild",je(w,w.__value),P.__value="moderate",je(P,P.__value),x.__value="severe",je(x,x.__value),F.__value="critical",je(F,F.__value),d(S,"class","form-select"),d(S,"id","symptomsSeverity"),S.disabled=n[6],n[1]===void 0&&mr(()=>n[11].call(S)),d(p,"class","mb-3"),d(g,"class","col-12 col-md-6"),d(k,"for","symptomsDuration"),d(k,"class","form-label"),d(R,"type","text"),d(R,"class","form-control"),d(R,"id","symptomsDuration"),R.disabled=n[6],d(R,"placeholder","e.g., 2 hours, 3 days, 1 week"),d(L,"class","mb-3"),d(H,"class","col-12 col-md-6"),d(f,"class","row g-3"),d(O,"for","symptomsOnsetDate"),d(O,"class","form-label"),d(Y,"type","date"),d(Y,"class","form-control"),d(Y,"id","symptomsOnsetDate"),Y.required=!0,Y.disabled=n[6],d(C,"class","mb-3"),d(X,"for","symptomsNotes"),d(X,"class","form-label"),d(re,"class","form-control"),d(re,"id","symptomsNotes"),d(re,"rows","2"),re.disabled=n[6],d(re,"placeholder","Any additional notes about the symptoms (triggers, patterns, etc.)"),d(Z,"class","mb-3"),d(ae,"class","fas fa-save me-1"),d(G,"type","submit"),d(G,"class","btn btn-primary flex-fill"),G.disabled=n[6],d(ye,"class","fas fa-times me-1"),d(he,"type","button"),d(he,"class","btn btn-secondary flex-fill"),he.disabled=n[6],d(V,"class","d-flex flex-column flex-sm-row gap-2"),d(s,"class","card-body"),d(e,"class","card")},m(W,_e){ue(W,e,_e),u(e,t),u(e,i),u(e,s),u(s,r),u(r,o),u(o,a),u(o,l),u(o,c),je(c,n[0]),u(r,h),u(r,f),u(f,g),u(g,p),u(p,_),u(p,y),u(p,S),u(S,w),u(S,P),u(S,x),u(S,F),as(S,n[1],!0),u(f,U),u(f,H),u(H,L),u(L,k),u(L,E),u(L,R),je(R,n[2]),u(r,I),u(r,C),u(C,O),u(C,q),u(C,Y),je(Y,n[3]),u(r,$),u(r,Z),u(Z,X),u(Z,Q),u(Z,re),je(re,n[4]),u(r,me),De&&De.m(r,null),u(r,B),u(r,V),u(V,G),de&&de.m(G,null),u(G,te),u(G,ae),u(G,fe),u(V,ve),u(V,he),u(he,ye),u(he,Ae),Me||(Te=[Ee(c,"input",n[10]),Ee(S,"change",n[11]),Ee(R,"input",n[12]),Ee(Y,"input",n[13]),Ee(re,"input",n[14]),Ee(he,"click",n[8]),Ee(r,"submit",n[7])],Me=!0)},p(W,[_e]){_e&64&&(c.disabled=W[6]),_e&1&&je(c,W[0]),_e&64&&(S.disabled=W[6]),_e&2&&as(S,W[1]),_e&64&&(R.disabled=W[6]),_e&4&&R.value!==W[2]&&je(R,W[2]),_e&64&&(Y.disabled=W[6]),_e&8&&je(Y,W[3]),_e&64&&(re.disabled=W[6]),_e&16&&je(re,W[4]),W[5]?De?De.p(W,_e):(De=og(W),De.c(),De.m(r,B)):De&&(De.d(1),De=null),W[6]?de||(de=ag(),de.c(),de.m(G,te)):de&&(de.d(1),de=null),_e&64&&(G.disabled=W[6]),_e&64&&(he.disabled=W[6])},i:dt,o:dt,d(W){W&&ce(e),De&&De.d(),de&&de.d(),Me=!1,an(Te)}}}function X6(n,e,t){let{visible:i=!0}=e;const s=$i();let r="",o="mild",a="",l="",c="",h="",f=!1;const g=async x=>{x.preventDefault(),t(5,h=""),t(6,f=!0);try{if(!r||!l)throw new Error("Please fill in all required fields");if(new Date(l)>new Date)throw new Error("Onset date cannot be in the future");const H={description:r.trim(),severity:o,duration:a.trim(),onsetDate:l,notes:c.trim()};s("symptoms-added",H),t(0,r=""),t(1,o="mild"),t(2,a=""),t(3,l=""),t(4,c="")}catch(F){t(5,h=F.message),console.error("Form validation error:",F)}finally{t(6,f=!1)}},p=()=>{s("cancel")};function _(){r=this.value,t(0,r)}function y(){o=Ha(this),t(1,o)}function S(){a=this.value,t(2,a)}function w(){l=this.value,t(3,l)}function P(){c=this.value,t(4,c)}return n.$$set=x=>{"visible"in x&&t(9,i=x.visible)},n.$$.update=()=>{n.$$.dirty&512&&(i||t(6,f=!1))},[r,o,a,l,c,h,f,g,p,i,_,y,S,w,P]}class Z6 extends ii{constructor(e){super(),ni(this,e,X6,J6,Zn,{visible:9})}}class Q6{constructor(){this.storageKey="prescribe-drug-database",this.data=this.loadData()}loadData(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(e){return console.error("Error loading drug database:",e),{}}}saveData(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch(e){console.error("Error saving drug database:",e)}}initializeDoctorDatabase(e){this.data[e]||(this.data[e]={drugs:[],lastUpdated:new Date().toISOString()},this.saveData())}addDrug(e,t){this.initializeDoctorDatabase(e);const i={id:this.generateId(),name:t.name.toLowerCase().trim(),displayName:t.name.trim(),dosage:t.dosage||"",instructions:t.instructions||"",frequency:t.frequency||"",duration:t.duration||"",notes:t.notes||"",createdAt:new Date().toISOString(),addedBy:e},s=this.data[e].drugs.find(r=>r.name===i.name);return s?(Object.assign(s,i),s.updatedAt=new Date().toISOString()):this.data[e].drugs.push(i),this.data[e].lastUpdated=new Date().toISOString(),this.saveData(),i}searchDrugs(e,t,i=10){var o;if(this.initializeDoctorDatabase(e),!t||t.trim().length<2)return[];const s=t.toLowerCase().trim();return(((o=this.data[e])==null?void 0:o.drugs)||[]).filter(a=>a.name.includes(s)||a.displayName.toLowerCase().includes(s)).sort((a,l)=>{const c=a.name.startsWith(s),h=l.name.startsWith(s);return c&&!h?-1:!c&&h?1:a.name.localeCompare(l.name)}).slice(0,i)}getDoctorDrugs(e){var t;return this.initializeDoctorDatabase(e),((t=this.data[e])==null?void 0:t.drugs)||[]}getDrugById(e,t){var i;return this.initializeDoctorDatabase(e),(i=this.data[e])==null?void 0:i.drugs.find(s=>s.id===t)}updateDrug(e,t,i){this.initializeDoctorDatabase(e);const s=this.data[e].drugs.findIndex(r=>r.id===t);return s!==-1?(this.data[e].drugs[s]={...this.data[e].drugs[s],...i,updatedAt:new Date().toISOString()},this.data[e].lastUpdated=new Date().toISOString(),this.saveData(),this.data[e].drugs[s]):null}deleteDrug(e,t){this.initializeDoctorDatabase(e);const i=this.data[e].drugs.findIndex(s=>s.id===t);return i!==-1?(this.data[e].drugs.splice(i,1),this.data[e].lastUpdated=new Date().toISOString(),this.saveData(),!0):!1}generateId(){return"drug_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}getDatabaseStats(e){var i,s;this.initializeDoctorDatabase(e);const t=((i=this.data[e])==null?void 0:i.drugs)||[];return{totalDrugs:t.length,lastUpdated:(s=this.data[e])==null?void 0:s.lastUpdated,recentlyAdded:t.filter(r=>{const o=new Date(r.createdAt),a=new Date(Date.now()-7*24*60*60*1e3);return o>a}).length}}clearDoctorDatabase(e){this.data[e]&&(delete this.data[e],this.saveData())}debugDatabase(e){console.log("🔍 Drug Database Debug for Doctor:",e),console.log("Database:",this.data[e]),console.log("Stats:",this.getDatabaseStats(e))}}const bh=new Q6;function lg(n,e,t){const i=n.slice();return i[20]=e[t],i[22]=t,i}function cg(n){let e,t,i,s;return{c(){e=m("button"),t=m("i"),d(t,"class","fas fa-times"),d(e,"class","btn btn-outline-secondary"),d(e,"type","button"),e.disabled=n[3],d(e,"title","Clear search")},m(r,o){ue(r,e,o),u(e,t),i||(s=Ee(e,"click",n[12]),i=!0)},p(r,o){o&8&&(e.disabled=r[3])},d(r){r&&ce(e),i=!1,s()}}}function ug(n){let e,t=Et(n[4]),i=[];for(let s=0;s<t.length;s+=1)i[s]=dg(lg(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","dropdown-menu show w-100 position-absolute top-100 start-0 svelte-1u10zbn"),$n(e,"z-index","1000")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r&2128){t=Et(s[4]);let o;for(o=0;o<t.length;o+=1){const a=lg(s,t,o);i[o]?i[o].p(a,r):(i[o]=dg(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function hg(n){let e,t,i,s=n[20].dosage+"",r;return{c(){e=m("br"),t=m("small"),i=le("Dosage: "),r=le(s),d(t,"class","text-muted")},m(o,a){ue(o,e,a),ue(o,t,a),u(t,i),u(t,r)},p(o,a){a&16&&s!==(s=o[20].dosage+"")&&Se(r,s)},d(o){o&&(ce(e),ce(t))}}}function dg(n){let e,t,i,s,r=n[20].displayName+"",o,a,l,c,h,f,g,p,_=n[20].dosage&&hg(n);function y(){return n[17](n[20])}function S(){return n[18](n[22])}return{c(){e=m("button"),t=m("div"),i=m("div"),s=m("strong"),o=le(r),a=D(),_&&_.c(),l=D(),c=m("small"),c.innerHTML='<i class="fas fa-pills"></i>',h=D(),d(c,"class","text-muted"),d(t,"class","d-flex justify-content-between align-items-center"),d(e,"class",f="dropdown-item "+(n[6]===n[22]?"active":"")+" svelte-1u10zbn"),d(e,"type","button")},m(w,P){ue(w,e,P),u(e,t),u(t,i),u(i,s),u(s,o),u(i,a),_&&_.m(i,null),u(t,l),u(t,c),u(e,h),g||(p=[Ee(e,"click",y),Ee(e,"mouseenter",S)],g=!0)},p(w,P){n=w,P&16&&r!==(r=n[20].displayName+"")&&Se(o,r),n[20].dosage?_?_.p(n,P):(_=hg(n),_.c(),_.m(i,null)):_&&(_.d(1),_=null),P&64&&f!==(f="dropdown-item "+(n[6]===n[22]?"active":"")+" svelte-1u10zbn")&&d(e,"class",f)},d(w){w&&ce(e),_&&_.d(),g=!1,an(p)}}}function $6(n){let e,t,i,s,r,o,a,l,c,h,f,g=n[0]&&cg(n),p=n[5]&&n[4].length>0&&ug(n);return{c(){e=m("div"),t=m("div"),i=m("input"),s=D(),r=m("button"),o=m("i"),a=le("To database"),l=D(),g&&g.c(),c=D(),p&&p.c(),d(i,"type","text"),d(i,"class","form-control"),d(i,"placeholder",n[1]),i.disabled=n[3],d(o,"class","fas fa-database me-1"),d(r,"class","btn btn-outline-primary"),d(r,"type","button"),r.disabled=n[3],d(r,"title","Add to database"),d(t,"class","input-group"),d(e,"class","position-relative")},m(_,y){ue(_,e,y),u(e,t),u(t,i),je(i,n[0]),u(t,s),u(t,r),u(r,o),u(r,a),u(t,l),g&&g.m(t,null),u(e,c),p&&p.m(e,null),h||(f=[Ee(i,"input",n[15]),Ee(i,"input",n[7]),Ee(i,"focus",n[8]),Ee(i,"blur",n[9]),Ee(i,"keydown",n[10]),Ee(r,"click",n[16])],h=!0)},p(_,[y]){y&2&&d(i,"placeholder",_[1]),y&8&&(i.disabled=_[3]),y&1&&i.value!==_[0]&&je(i,_[0]),y&8&&(r.disabled=_[3]),_[0]?g?g.p(_,y):(g=cg(_),g.c(),g.m(t,null)):g&&(g.d(1),g=null),_[5]&&_[4].length>0?p?p.p(_,y):(p=ug(_),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i:dt,o:dt,d(_){_&&ce(e),g&&g.d(),p&&p.d(),h=!1,an(f)}}}function eA(n,e,t){let{value:i=""}=e,{placeholder:s="e.g., Metformin, Lisinopril"}=e,{doctorId:r=null}=e,{onDrugSelect:o=null}=e,{disabled:a=!1}=e,l=[],c=!1,h=-1,f=null;const g=()=>{if(!r||!i.trim()){console.log("Search cancelled - no doctorId or value:",{doctorId:r,value:i}),t(4,l=[]),t(5,c=!1);return}console.log("Searching drugs for doctor:",r,"query:",i),t(4,l=bh.searchDrugs(r,i)),console.log("Search results:",l),t(5,c=l.length>0),t(6,h=-1)};function p(){console.log("Input changed:",i)}const _=()=>{i&&i.length>=2&&g()},y=()=>{setTimeout(()=>{t(5,c=!1),t(6,h=-1)},200)},S=L=>{if(c)switch(L.key){case"ArrowDown":L.preventDefault(),t(6,h=Math.min(h+1,l.length-1));break;case"ArrowUp":L.preventDefault(),t(6,h=Math.max(h-1,-1));break;case"Enter":L.preventDefault(),h>=0&&h<l.length&&w(l[h]);break;case"Escape":t(5,c=!1),t(6,h=-1);break}},w=L=>{t(0,i=L.displayName),t(5,c=!1),t(6,h=-1),o&&o(L)},P=()=>{t(0,i=""),t(4,l=[]),t(5,c=!1),t(6,h=-1)};function x(){i=this.value,t(0,i)}const F=()=>{if(console.log("To database clicked for:",i),i.trim()){const L={name:i.trim(),displayName:i.trim(),dosage:"",instructions:"",frequency:"",duration:"",notes:""};bh.addDrug(r,L),Ls(`"${i.trim()}" added to your drug database`),t(4,l=[]),t(5,c=!1)}else Xd("Please enter a drug name to add to database")},U=L=>w(L),H=L=>t(6,h=L);return n.$$set=L=>{"value"in L&&t(0,i=L.value),"placeholder"in L&&t(1,s=L.placeholder),"doctorId"in L&&t(2,r=L.doctorId),"onDrugSelect"in L&&t(13,o=L.onDrugSelect),"disabled"in L&&t(3,a=L.disabled)},n.$$.update=()=>{n.$$.dirty&16389&&(i&&i.length>=2&&r?(console.log("Searching for:",i,"Doctor ID:",r),clearTimeout(f),t(14,f=setTimeout(()=>{g()},300))):(t(4,l=[]),t(5,c=!1)))},[i,s,r,a,l,c,h,p,_,y,S,w,P,o,f,x,F,U,H]}class tA extends ii{constructor(e){super(),ni(this,e,eA,$6,Zn,{value:0,placeholder:1,doctorId:2,onDrugSelect:13,disabled:3})}}function fg(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[9]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r&512&&Se(i,s[9])},d(s){s&&ce(e)}}}function pg(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function nA(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt;function Rt(st){n[17](st)}let ft={placeholder:"e.g., Metformin, Lisinopril",doctorId:n[0],onDrugSelect:n[12],disabled:n[10]};n[1]!==void 0&&(ft.value=n[1]),c=new tA({props:ft}),Bd.push(()=>z_(c,"value",Rt));let ut=n[9]&&fg(n),Lt=n[10]&&pg();return{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-pills me-2"></i>Add New Medication</h6>',i=D(),s=m("div"),r=m("form"),o=m("div"),a=m("label"),a.innerHTML='Medication Name <span class="text-danger">*</span>',l=D(),Gn(c.$$.fragment),f=D(),g=m("div"),p=m("div"),_=m("div"),y=m("label"),y.innerHTML='Dosage <span class="text-danger">*</span>',S=D(),w=m("input"),P=D(),x=m("div"),F=m("div"),U=m("label"),U.innerHTML='Frequency <span class="text-danger">*</span>',H=D(),L=m("select"),k=m("option"),k.textContent="Select frequency",E=m("option"),E.textContent="Once daily",R=m("option"),R.textContent="Twice daily",I=m("option"),I.textContent="Three times daily",C=m("option"),C.textContent="Four times daily",O=m("option"),O.textContent="As needed",q=m("option"),q.textContent="Weekly",Y=m("option"),Y.textContent="Monthly",$=D(),Z=m("div"),X=m("label"),X.innerHTML='Instructions <span class="text-danger">*</span>',Q=D(),re=m("textarea"),me=D(),B=m("div"),V=m("div"),G=m("div"),te=m("label"),te.innerHTML='Duration <span class="text-danger">*</span>',ae=D(),fe=m("input"),ve=D(),he=m("div"),ye=m("div"),Ae=m("label"),Ae.innerHTML='Start Date <small class="text-muted">(Optional)</small>',Me=D(),Te=m("input"),De=D(),de=m("div"),W=m("div"),_e=m("label"),_e.textContent="End Date",Ie=D(),be=m("input"),Le=D(),We=m("div"),Je=m("label"),Je.textContent="Additional Notes",Ue=D(),Ye=m("textarea"),ht=D(),ut&&ut.c(),it=D(),ze=m("div"),Ge=m("button"),Lt&&Lt.c(),qe=D(),ot=m("i"),Xe=le("Save Medication"),Mt=D(),gt=m("button"),Ft=m("i"),xt=le("Cancel"),d(t,"class","card-header"),d(a,"for","medicationName"),d(a,"class","form-label"),d(o,"class","mb-3"),d(y,"for","medicationDosage"),d(y,"class","form-label"),d(w,"type","text"),d(w,"class","form-control"),d(w,"id","medicationDosage"),w.required=!0,w.disabled=n[10],d(w,"placeholder","e.g., 500mg, 10ml"),d(_,"class","mb-3"),d(p,"class","col-md-6"),d(U,"for","medicationFrequency"),d(U,"class","form-label"),k.__value="",je(k,k.__value),E.__value="once daily",je(E,E.__value),R.__value="twice daily",je(R,R.__value),I.__value="three times daily",je(I,I.__value),C.__value="four times daily",je(C,C.__value),O.__value="as needed",je(O,O.__value),q.__value="weekly",je(q,q.__value),Y.__value="monthly",je(Y,Y.__value),d(L,"class","form-select"),d(L,"id","medicationFrequency"),L.required=!0,L.disabled=n[10],n[4]===void 0&&mr(()=>n[19].call(L)),d(F,"class","mb-3"),d(x,"class","col-md-6"),d(g,"class","row"),d(X,"for","medicationInstructions"),d(X,"class","form-label"),d(re,"class","form-control"),d(re,"id","medicationInstructions"),d(re,"rows","2"),re.required=!0,re.disabled=n[10],d(re,"placeholder","e.g., Take with food, Take before bedtime"),d(Z,"class","mb-3"),d(te,"for","medicationDuration"),d(te,"class","form-label"),d(fe,"type","text"),d(fe,"class","form-control"),d(fe,"id","medicationDuration"),fe.disabled=n[10],d(fe,"placeholder","e.g., 30 days, 3 months"),d(G,"class","mb-3"),d(V,"class","col-md-4"),d(Ae,"for","medicationStartDate"),d(Ae,"class","form-label"),d(Te,"type","date"),d(Te,"class","form-control"),d(Te,"id","medicationStartDate"),Te.disabled=n[10],d(ye,"class","mb-3"),d(he,"class","col-md-4"),d(_e,"for","medicationEndDate"),d(_e,"class","form-label"),d(be,"type","date"),d(be,"class","form-control"),d(be,"id","medicationEndDate"),be.disabled=n[10],d(W,"class","mb-3"),d(de,"class","col-md-4"),d(B,"class","row"),d(Je,"for","medicationNotes"),d(Je,"class","form-label"),d(Ye,"class","form-control"),d(Ye,"id","medicationNotes"),d(Ye,"rows","2"),Ye.disabled=n[10],d(Ye,"placeholder","Any additional notes about the medication"),d(We,"class","mb-3"),d(ot,"class","fas fa-save me-1"),d(Ge,"type","submit"),d(Ge,"class","btn btn-primary"),Ge.disabled=n[10],d(Ft,"class","fas fa-times me-1"),d(gt,"type","button"),d(gt,"class","btn btn-secondary"),gt.disabled=n[10],d(ze,"class","d-flex gap-2"),d(s,"class","card-body"),d(e,"class","card")},m(st,He){ue(st,e,He),u(e,t),u(e,i),u(e,s),u(s,r),u(r,o),u(o,a),u(o,l),zn(c,o,null),u(r,f),u(r,g),u(g,p),u(p,_),u(_,y),u(_,S),u(_,w),je(w,n[2]),u(g,P),u(g,x),u(x,F),u(F,U),u(F,H),u(F,L),u(L,k),u(L,E),u(L,R),u(L,I),u(L,C),u(L,O),u(L,q),u(L,Y),as(L,n[4],!0),u(r,$),u(r,Z),u(Z,X),u(Z,Q),u(Z,re),je(re,n[3]),u(r,me),u(r,B),u(B,V),u(V,G),u(G,te),u(G,ae),u(G,fe),je(fe,n[5]),u(B,ve),u(B,he),u(he,ye),u(ye,Ae),u(ye,Me),u(ye,Te),je(Te,n[6]),u(B,De),u(B,de),u(de,W),u(W,_e),u(W,Ie),u(W,be),je(be,n[7]),u(r,Le),u(r,We),u(We,Je),u(We,Ue),u(We,Ye),je(Ye,n[8]),u(r,ht),ut&&ut.m(r,null),u(r,it),u(r,ze),u(ze,Ge),Lt&&Lt.m(Ge,null),u(Ge,qe),u(Ge,ot),u(Ge,Xe),u(ze,Mt),u(ze,gt),u(gt,Ft),u(gt,xt),Qe=!0,vt||(pt=[Ee(w,"input",n[18]),Ee(L,"change",n[19]),Ee(re,"input",n[20]),Ee(fe,"input",n[21]),Ee(Te,"input",n[22]),Ee(be,"input",n[23]),Ee(Ye,"input",n[24]),Ee(gt,"click",n[13]),Ee(r,"submit",n[11])],vt=!0)},p(st,[He]){const yt={};He&1&&(yt.doctorId=st[0]),He&1024&&(yt.disabled=st[10]),!h&&He&2&&(h=!0,yt.value=st[1],F_(()=>h=!1)),c.$set(yt),(!Qe||He&1024)&&(w.disabled=st[10]),He&4&&w.value!==st[2]&&je(w,st[2]),(!Qe||He&1024)&&(L.disabled=st[10]),He&16&&as(L,st[4]),(!Qe||He&1024)&&(re.disabled=st[10]),He&8&&je(re,st[3]),(!Qe||He&1024)&&(fe.disabled=st[10]),He&32&&fe.value!==st[5]&&je(fe,st[5]),(!Qe||He&1024)&&(Te.disabled=st[10]),He&64&&je(Te,st[6]),(!Qe||He&1024)&&(be.disabled=st[10]),He&128&&je(be,st[7]),(!Qe||He&1024)&&(Ye.disabled=st[10]),He&256&&je(Ye,st[8]),st[9]?ut?ut.p(st,He):(ut=fg(st),ut.c(),ut.m(r,it)):ut&&(ut.d(1),ut=null),st[10]?Lt||(Lt=pg(),Lt.c(),Lt.m(Ge,qe)):Lt&&(Lt.d(1),Lt=null),(!Qe||He&1024)&&(Ge.disabled=st[10]),(!Qe||He&1024)&&(gt.disabled=st[10])},i(st){Qe||(Pt(c.$$.fragment,st),Qe=!0)},o(st){Ot(c.$$.fragment,st),Qe=!1},d(st){st&&ce(e),Hn(c),ut&&ut.d(),Lt&&Lt.d(),vt=!1,an(pt)}}}function iA(n,e,t){let{visible:i=!0}=e,{editingMedication:s=null}=e,{doctorId:r=null}=e;const o=$i();let a="",l="",c="",h="",f="",g="",p="",_="",y="",S=!1,w=!1;const P=()=>{console.log("🔄 Resetting MedicationForm to empty state"),t(1,a=""),t(2,l=""),t(3,c=""),t(4,h=""),t(5,f=""),t(6,g=""),t(7,p=""),t(8,_=""),t(9,y=""),t(16,w=!1),setTimeout(()=>{console.log("✅ MedicationForm reset complete - final state:",{name:a,dosage:l,instructions:c,frequency:h,duration:f,startDate:g,endDate:p,notes:_})},10)},x=async q=>{q.preventDefault(),t(9,y=""),t(10,S=!0);try{if(!a||!l||!c||!h||!f)throw new Error("Please fill in all required fields");const Y=g?new Date(g):new Date;if(p&&new Date(p)<=Y)throw new Error("End date must be after start date");const $={name:a.trim(),dosage:l.trim(),instructions:c.trim(),frequency:h,duration:f.trim(),startDate:g||new Date().toISOString().split("T")[0],endDate:p||null,notes:_.trim()};if(s&&($.id=s.id,$.isEdit=!0),r){const Z=bh.getDoctorDrugs(r).find(X=>X.name===a.trim().toLowerCase());bh.addDrug(r,{name:a.trim(),dosage:l.trim(),instructions:c.trim(),frequency:h,duration:f.trim(),notes:_.trim()}),Z?Xd(`"${a.trim()}" updated in your drug database`):Ls(`"${a.trim()}" added to your drug database`)}o("medication-added",$),t(1,a=""),t(2,l=""),t(3,c=""),t(4,h=""),t(5,f=""),t(6,g=""),t(7,p=""),t(8,_="")}catch(Y){t(9,y=Y.message),console.error("Form validation error:",Y)}finally{t(10,S=!1)}},F=q=>{t(1,a=q.displayName),s&&(t(2,l=q.dosage||l),t(3,c=q.instructions||c),t(4,h=q.frequency||h),t(5,f=q.duration||f),t(8,_=q.notes||_)),Xd(`"${q.displayName}" selected`)},U=()=>{o("cancel")};Go(()=>{console.log("🚀 MedicationForm mounted - checking if reset needed"),s?console.log("📝 Editing existing prescription - keeping data"):(console.log("🔄 New prescription - resetting to empty state"),P())});function H(q){a=q,t(1,a),t(15,s),t(16,w)}function L(){l=this.value,t(2,l),t(15,s),t(16,w)}function k(){h=Ha(this),t(4,h),t(15,s),t(16,w)}function E(){c=this.value,t(3,c),t(15,s),t(16,w)}function R(){f=this.value,t(5,f),t(15,s),t(16,w)}function I(){g=this.value,t(6,g),t(15,s),t(16,w)}function C(){p=this.value,t(7,p),t(15,s),t(16,w)}function O(){_=this.value,t(8,_),t(15,s),t(16,w)}return n.$$set=q=>{"visible"in q&&t(14,i=q.visible),"editingMedication"in q&&t(15,s=q.editingMedication),"doctorId"in q&&t(0,r=q.doctorId)},n.$$.update=()=>{n.$$.dirty&16384&&(i||t(10,S=!1)),n.$$.dirty&98304&&s&&!w&&(t(1,a=s.name||""),t(2,l=s.dosage||""),t(3,c=s.instructions||""),t(4,h=s.frequency||""),t(5,f=s.duration||""),t(6,g=s.startDate||""),t(7,p=s.endDate||""),t(8,_=s.notes||""),t(16,w=!0))},[r,a,l,c,h,f,g,p,_,y,S,x,F,U,i,s,w,H,L,k,E,R,I,C,O]}class sA extends ii{constructor(e){super(),ni(this,e,iA,nA,Zn,{visible:14,editingMedication:15,doctorId:0})}}function mg(n){let e,t,i,s,r,o;return r=new K6({props:{selectedPatient:n[3],visible:n[0]}}),r.$on("illness-added",function(){Ys(n[6])&&n[6].apply(this,arguments)}),r.$on("cancel",function(){Ys(n[9])&&n[9].apply(this,arguments)}),{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-heartbeat me-2"></i>Add Illness</h6>',i=D(),s=m("div"),Gn(r.$$.fragment),d(t,"class","card-header"),d(s,"class","card-body"),d(e,"class","card mb-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),zn(r,s,null),o=!0},p(a,l){n=a;const c={};l&8&&(c.selectedPatient=n[3]),l&1&&(c.visible=n[0]),r.$set(c)},i(a){o||(Pt(r.$$.fragment,a),o=!0)},o(a){Ot(r.$$.fragment,a),o=!1},d(a){a&&ce(e),Hn(r)}}}function gg(n){let e,t,i,s,r,o;return r=new Z6({props:{selectedPatient:n[3],visible:n[1]}}),r.$on("symptoms-added",function(){Ys(n[7])&&n[7].apply(this,arguments)}),r.$on("cancel",function(){Ys(n[10])&&n[10].apply(this,arguments)}),{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-thermometer-half me-2"></i>Add Symptoms</h6>',i=D(),s=m("div"),Gn(r.$$.fragment),d(t,"class","card-header"),d(s,"class","card-body"),d(e,"class","card mb-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),zn(r,s,null),o=!0},p(a,l){n=a;const c={};l&8&&(c.selectedPatient=n[3]),l&2&&(c.visible=n[1]),r.$set(c)},i(a){o||(Pt(r.$$.fragment,a),o=!0)},o(a){Ot(r.$$.fragment,a),o=!1},d(a){a&&ce(e),Hn(r)}}}function bg(n){let e,t;return e=new sA({props:{selectedPatient:n[3],editingMedication:n[4],doctorId:n[5],visible:n[2]}}),e.$on("medication-added",function(){Ys(n[8])&&n[8].apply(this,arguments)}),e.$on("cancel",function(){Ys(n[11])&&n[11].apply(this,arguments)}),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p(i,s){n=i;const r={};s&8&&(r.selectedPatient=n[3]),s&16&&(r.editingMedication=n[4]),s&32&&(r.doctorId=n[5]),s&4&&(r.visible=n[2]),e.$set(r)},i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function rA(n){let e,t,i,s,r=n[0]&&mg(n),o=n[1]&&gg(n),a=n[2]&&bg(n);return{c(){r&&r.c(),e=D(),o&&o.c(),t=D(),a&&a.c(),i=gi()},m(l,c){r&&r.m(l,c),ue(l,e,c),o&&o.m(l,c),ue(l,t,c),a&&a.m(l,c),ue(l,i,c),s=!0},p(l,[c]){l[0]?r?(r.p(l,c),c&1&&Pt(r,1)):(r=mg(l),r.c(),Pt(r,1),r.m(e.parentNode,e)):r&&(Mi(),Ot(r,1,1,()=>{r=null}),Oi()),l[1]?o?(o.p(l,c),c&2&&Pt(o,1)):(o=gg(l),o.c(),Pt(o,1),o.m(t.parentNode,t)):o&&(Mi(),Ot(o,1,1,()=>{o=null}),Oi()),l[2]?a?(a.p(l,c),c&4&&Pt(a,1)):(a=bg(l),a.c(),Pt(a,1),a.m(i.parentNode,i)):a&&(Mi(),Ot(a,1,1,()=>{a=null}),Oi())},i(l){s||(Pt(r),Pt(o),Pt(a),s=!0)},o(l){Ot(r),Ot(o),Ot(a),s=!1},d(l){l&&(ce(e),ce(t),ce(i)),r&&r.d(l),o&&o.d(l),a&&a.d(l)}}}function oA(n,e,t){let{showIllnessForm:i=!1}=e,{showSymptomsForm:s=!1}=e,{showMedicationForm:r=!1}=e,{selectedPatient:o=null}=e,{editingMedication:a=null}=e,{doctorId:l=null}=e,{onIllnessAdded:c}=e,{onSymptomsAdded:h}=e,{onMedicationAdded:f}=e,{onCancelIllness:g}=e,{onCancelSymptoms:p}=e,{onCancelMedication:_}=e;return n.$$set=y=>{"showIllnessForm"in y&&t(0,i=y.showIllnessForm),"showSymptomsForm"in y&&t(1,s=y.showSymptomsForm),"showMedicationForm"in y&&t(2,r=y.showMedicationForm),"selectedPatient"in y&&t(3,o=y.selectedPatient),"editingMedication"in y&&t(4,a=y.editingMedication),"doctorId"in y&&t(5,l=y.doctorId),"onIllnessAdded"in y&&t(6,c=y.onIllnessAdded),"onSymptomsAdded"in y&&t(7,h=y.onSymptomsAdded),"onMedicationAdded"in y&&t(8,f=y.onMedicationAdded),"onCancelIllness"in y&&t(9,g=y.onCancelIllness),"onCancelSymptoms"in y&&t(10,p=y.onCancelSymptoms),"onCancelMedication"in y&&t(11,_=y.onCancelMedication)},[i,s,r,o,a,l,c,h,f,g,p,_]}class Jf extends ii{constructor(e){super(),ni(this,e,oA,rA,Zn,{showIllnessForm:0,showSymptomsForm:1,showMedicationForm:2,selectedPatient:3,editingMedication:4,doctorId:5,onIllnessAdded:6,onSymptomsAdded:7,onMedicationAdded:8,onCancelIllness:9,onCancelSymptoms:10,onCancelMedication:11})}}function vg(n,e,t){const i=n.slice();return i[1]=e[t],i[3]=t,i}function aA(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-pills fa-2x text-muted mb-3"></i> <p class="text-muted">No prescriptions found for this patient.</p>',d(e,"class","text-center p-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function lA(n){let e,t=Et(n[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=yg(vg(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","list-group")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r&1){t=Et(s[0]);let o;for(o=0;o<t.length;o+=1){const a=vg(s,t,o);i[o]?i[o].p(a,r):(i[o]=yg(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function _g(n){let e,t,i,s=n[1].notes+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Notes:",i=D(),r=le(s),d(e,"class","mb-1")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a&1&&s!==(s=o[1].notes+"")&&Se(r,s)},d(o){o&&ce(e)}}}function yg(n){let e,t,i,s,r,o=(n[1].name||"Unknown Prescription")+"",a,l,c,h,f,g=(n[1].dosage||"Not specified")+"",p,_,y,S,w=(n[1].duration||"Not specified")+"",P,x,F,U,H,L=(n[1].instructions||"No instructions provided")+"",k,E,R,I,C,O,q=(n[1].createdAt?new Date(n[1].createdAt).toLocaleDateString():"Unknown date")+"",Y,$,Z=n[1].notes&&_g(n);return{c(){e=m("div"),t=m("div"),i=m("h6"),s=m("i"),r=D(),a=le(o),l=D(),c=m("p"),h=m("strong"),h.textContent="Dosage:",f=D(),p=le(g),_=le(` | 
            `),y=m("strong"),y.textContent="Duration:",S=D(),P=le(w),x=D(),F=m("p"),U=m("strong"),U.textContent="Instructions:",H=D(),k=le(L),E=D(),Z&&Z.c(),R=D(),I=m("small"),C=m("i"),O=le(`
            Prescribed: `),Y=le(q),$=D(),d(s,"class","fas fa-pills me-2"),d(i,"class","mb-1 fs-5"),d(c,"class","mb-1"),d(F,"class","mb-1"),d(C,"class","fas fa-calendar me-1"),d(I,"class","text-muted"),d(t,"class","w-100"),d(e,"class","list-group-item")},m(X,Q){ue(X,e,Q),u(e,t),u(t,i),u(i,s),u(i,r),u(i,a),u(t,l),u(t,c),u(c,h),u(c,f),u(c,p),u(c,_),u(c,y),u(c,S),u(c,P),u(t,x),u(t,F),u(F,U),u(F,H),u(F,k),u(t,E),Z&&Z.m(t,null),u(t,R),u(t,I),u(I,C),u(I,O),u(I,Y),u(e,$)},p(X,Q){Q&1&&o!==(o=(X[1].name||"Unknown Prescription")+"")&&Se(a,o),Q&1&&g!==(g=(X[1].dosage||"Not specified")+"")&&Se(p,g),Q&1&&w!==(w=(X[1].duration||"Not specified")+"")&&Se(P,w),Q&1&&L!==(L=(X[1].instructions||"No instructions provided")+"")&&Se(k,L),X[1].notes?Z?Z.p(X,Q):(Z=_g(X),Z.c(),Z.m(t,R)):Z&&(Z.d(1),Z=null),Q&1&&q!==(q=(X[1].createdAt?new Date(X[1].createdAt).toLocaleDateString():"Unknown date")+"")&&Se(Y,q)},d(X){X&&ce(e),Z&&Z.d()}}}function cA(n){let e;function t(r,o){return r[0]&&r[0].length>0?lA:aA}let i=t(n),s=i(n);return{c(){s.c(),e=gi()},m(r,o){s.m(r,o),ue(r,e,o)},p(r,[o]){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},i:dt,o:dt,d(r){r&&ce(e),s.d(r)}}}function uA(n,e,t){let{prescriptions:i=[]}=e;return n.$$set=s=>{"prescriptions"in s&&t(0,i=s.prescriptions)},[i]}class hA extends ii{constructor(e){super(),ni(this,e,uA,cA,Zn,{prescriptions:0})}}function Mn(n){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(n)}var Vi=Uint8Array,bs=Uint16Array,Xf=Int32Array,Th=new Vi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dh=new Vi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zd=new Vi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N5=function(n,e){for(var t=new bs(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new Xf(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},I5=N5(Th,2),L5=I5.b,Qd=I5.r;L5[28]=258,Qd[258]=28;var C5=N5(Dh,0),dA=C5.b,wg=C5.r,$d=new bs(32768);for(var Jn=0;Jn<32768;++Jn){var ko=(Jn&43690)>>1|(Jn&21845)<<1;ko=(ko&52428)>>2|(ko&13107)<<2,ko=(ko&61680)>>4|(ko&3855)<<4,$d[Jn]=((ko&65280)>>8|(ko&255)<<8)>>1}var fr=function(n,e,t){for(var i=n.length,s=0,r=new bs(e);s<i;++s)n[s]&&++r[n[s]-1];var o=new bs(e);for(s=1;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(t){a=new bs(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],h=e-n[s],f=o[n[s]-1]++<<h,g=f|(1<<h)-1;f<=g;++f)a[$d[f]>>l]=c}else for(a=new bs(i),s=0;s<i;++s)n[s]&&(a[s]=$d[o[n[s]-1]++]>>15-n[s]);return a},Ho=new Vi(288);for(var Jn=0;Jn<144;++Jn)Ho[Jn]=8;for(var Jn=144;Jn<256;++Jn)Ho[Jn]=9;for(var Jn=256;Jn<280;++Jn)Ho[Jn]=7;for(var Jn=280;Jn<288;++Jn)Ho[Jn]=8;var Mc=new Vi(32);for(var Jn=0;Jn<32;++Jn)Mc[Jn]=5;var fA=fr(Ho,9,0),pA=fr(Ho,9,1),mA=fr(Mc,5,0),gA=fr(Mc,5,1),md=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Fs=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},gd=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Zf=function(n){return(n+7)/8|0},T5=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Vi(n.subarray(e,t))},bA=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],js=function(n,e,t){var i=new Error(e||bA[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,js),!t)throw i;return i},vA=function(n,e,t,i){var s=n.length,r=0;if(!s||e.f&&!e.l)return t||new Vi(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Vi(s*3));var c=function(Ae){var Me=t.length;if(Ae>Me){var Te=new Vi(Math.max(Me*2,Ae));Te.set(t),t=Te}},h=e.f||0,f=e.p||0,g=e.b||0,p=e.l,_=e.d,y=e.m,S=e.n,w=s*8;do{if(!p){h=Fs(n,f,1);var P=Fs(n,f+1,3);if(f+=3,P)if(P==1)p=pA,_=gA,y=9,S=5;else if(P==2){var H=Fs(n,f,31)+257,L=Fs(n,f+10,15)+4,k=H+Fs(n,f+5,31)+1;f+=14;for(var E=new Vi(k),R=new Vi(19),I=0;I<L;++I)R[Zd[I]]=Fs(n,f+I*3,7);f+=L*3;for(var C=md(R),O=(1<<C)-1,q=fr(R,C,1),I=0;I<k;){var Y=q[Fs(n,f,O)];f+=Y&15;var x=Y>>4;if(x<16)E[I++]=x;else{var $=0,Z=0;for(x==16?(Z=3+Fs(n,f,3),f+=2,$=E[I-1]):x==17?(Z=3+Fs(n,f,7),f+=3):x==18&&(Z=11+Fs(n,f,127),f+=7);Z--;)E[I++]=$}}var X=E.subarray(0,H),Q=E.subarray(H);y=md(X),S=md(Q),p=fr(X,y,1),_=fr(Q,S,1)}else js(1);else{var x=Zf(f)+4,F=n[x-4]|n[x-3]<<8,U=x+F;if(U>s){l&&js(0);break}a&&c(g+F),t.set(n.subarray(x,U),g),e.b=g+=F,e.p=f=U*8,e.f=h;continue}if(f>w){l&&js(0);break}}a&&c(g+131072);for(var re=(1<<y)-1,me=(1<<S)-1,B=f;;B=f){var $=p[gd(n,f)&re],V=$>>4;if(f+=$&15,f>w){l&&js(0);break}if($||js(2),V<256)t[g++]=V;else if(V==256){B=f,p=null;break}else{var G=V-254;if(V>264){var I=V-257,te=Th[I];G=Fs(n,f,(1<<te)-1)+L5[I],f+=te}var ae=_[gd(n,f)&me],fe=ae>>4;ae||js(3),f+=ae&15;var Q=dA[fe];if(fe>3){var te=Dh[fe];Q+=gd(n,f)&(1<<te)-1,f+=te}if(f>w){l&&js(0);break}a&&c(g+131072);var ve=g+G;if(g<Q){var he=r-Q,ye=Math.min(Q,ve);for(he+g<0&&js(3);g<ye;++g)t[g]=i[he+g]}for(;g<ve;++g)t[g]=t[g-Q]}}e.l=p,e.p=B,e.b=g,e.f=h,p&&(h=1,e.m=y,e.d=_,e.n=S)}while(!h);return g!=t.length&&o?T5(t,0,g):t.subarray(0,g)},Er=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},ec=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},bd=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var s=t.length,r=t.slice();if(!s)return{t:x5,l:0};if(s==1){var o=new Vi(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(U,H){return U.f-H.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,h=1,f=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=s-1;)a=t[t[c].f<t[f].f?c++:f++],l=t[c!=h&&t[c].f<t[f].f?c++:f++],t[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var g=r[0].s,i=1;i<s;++i)r[i].s>g&&(g=r[i].s);var p=new bs(g+1),_=ef(t[h-1],p,0);if(_>e){var i=0,y=0,S=_-e,w=1<<S;for(r.sort(function(H,L){return p[L.s]-p[H.s]||H.f-L.f});i<s;++i){var P=r[i].s;if(p[P]>e)y+=w-(1<<_-p[P]),p[P]=e;else break}for(y>>=S;y>0;){var x=r[i].s;p[x]<e?y-=1<<e-p[x]++-1:++i}for(;i>=0&&y;--i){var F=r[i].s;p[F]==e&&(--p[F],++y)}_=e}return{t:new Vi(p),l:_}},ef=function(n,e,t){return n.s==-1?Math.max(ef(n.l,e,t+1),ef(n.r,e,t+1)):e[n.s]=t},Ag=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new bs(++e),i=0,s=n[0],r=1,o=function(l){t[i++]=l},a=1;a<=e;++a)if(n[a]==s&&a!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=n[a]}return{c:t.subarray(0,i),n:e}},tc=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},D5=function(n,e,t){var i=t.length,s=Zf(e+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=t[r];return(s+4+i)*8},Sg=function(n,e,t,i,s,r,o,a,l,c,h){Er(e,h++,t),++s[256];for(var f=bd(s,15),g=f.t,p=f.l,_=bd(r,15),y=_.t,S=_.l,w=Ag(g),P=w.c,x=w.n,F=Ag(y),U=F.c,H=F.n,L=new bs(19),k=0;k<P.length;++k)++L[P[k]&31];for(var k=0;k<U.length;++k)++L[U[k]&31];for(var E=bd(L,7),R=E.t,I=E.l,C=19;C>4&&!R[Zd[C-1]];--C);var O=c+5<<3,q=tc(s,Ho)+tc(r,Mc)+o,Y=tc(s,g)+tc(r,y)+o+14+3*C+tc(L,R)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&O<=q&&O<=Y)return D5(e,h,n.subarray(l,l+c));var $,Z,X,Q;if(Er(e,h,1+(Y<q)),h+=2,Y<q){$=fr(g,p,0),Z=g,X=fr(y,S,0),Q=y;var re=fr(R,I,0);Er(e,h,x-257),Er(e,h+5,H-1),Er(e,h+10,C-4),h+=14;for(var k=0;k<C;++k)Er(e,h+3*k,R[Zd[k]]);h+=3*C;for(var me=[P,U],B=0;B<2;++B)for(var V=me[B],k=0;k<V.length;++k){var G=V[k]&31;Er(e,h,re[G]),h+=R[G],G>15&&(Er(e,h,V[k]>>5&127),h+=V[k]>>12)}}else $=fA,Z=Ho,X=mA,Q=Mc;for(var k=0;k<a;++k){var te=i[k];if(te>255){var G=te>>18&31;ec(e,h,$[G+257]),h+=Z[G+257],G>7&&(Er(e,h,te>>23&31),h+=Th[G]);var ae=te&31;ec(e,h,X[ae]),h+=Q[ae],ae>3&&(ec(e,h,te>>5&8191),h+=Dh[ae])}else ec(e,h,$[te]),h+=Z[te]}return ec(e,h,$[256]),h+Z[256]},_A=new Xf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x5=new Vi(0),yA=function(n,e,t,i,s,r){var o=r.z||n.length,a=new Vi(i+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(i,a.length-s),c=r.l,h=(r.r||0)&7;if(e){h&&(l[0]=r.r>>3);for(var f=_A[e-1],g=f>>13,p=f&8191,_=(1<<t)-1,y=r.p||new bs(32768),S=r.h||new bs(_+1),w=Math.ceil(t/3),P=2*w,x=function(De){return(n[De]^n[De+1]<<w^n[De+2]<<P)&_},F=new Xf(25e3),U=new bs(288),H=new bs(32),L=0,k=0,E=r.i||0,R=0,I=r.w||0,C=0;E+2<o;++E){var O=x(E),q=E&32767,Y=S[O];if(y[q]=Y,S[O]=q,I<=E){var $=o-E;if((L>7e3||R>24576)&&($>423||!c)){h=Sg(n,l,0,F,U,H,k,R,C,E-C,h),R=L=k=0,C=E;for(var Z=0;Z<286;++Z)U[Z]=0;for(var Z=0;Z<30;++Z)H[Z]=0}var X=2,Q=0,re=p,me=q-Y&32767;if($>2&&O==x(E-me))for(var B=Math.min(g,$)-1,V=Math.min(32767,E),G=Math.min(258,$);me<=V&&--re&&q!=Y;){if(n[E+X]==n[E+X-me]){for(var te=0;te<G&&n[E+te]==n[E+te-me];++te);if(te>X){if(X=te,Q=me,te>B)break;for(var ae=Math.min(me,te-2),fe=0,Z=0;Z<ae;++Z){var ve=E-me+Z&32767,he=y[ve],ye=ve-he&32767;ye>fe&&(fe=ye,Y=ve)}}}q=Y,Y=y[q],me+=q-Y&32767}if(Q){F[R++]=268435456|Qd[X]<<18|wg[Q];var Ae=Qd[X]&31,Me=wg[Q]&31;k+=Th[Ae]+Dh[Me],++U[257+Ae],++H[Me],I=E+X,++L}else F[R++]=n[E],++U[n[E]]}}for(E=Math.max(E,I);E<o;++E)F[R++]=n[E],++U[n[E]];h=Sg(n,l,c,F,U,H,k,R,C,E-C,h),c||(r.r=h&7|l[h/8|0]<<3,h-=7,r.h=S,r.p=y,r.i=E,r.w=I)}else{for(var E=r.w||0;E<o+c;E+=65535){var Te=E+65535;Te>=o&&(l[h/8|0]=c,Te=o),h=D5(l,h+1,n.subarray(E,Te))}r.i=o}return T5(a,0,i+Zf(h)+s)},E5=function(){var n=1,e=0;return{p:function(t){for(var i=n,s=e,r=t.length|0,o=0;o!=r;){for(var a=Math.min(o+2655,r);o<a;++o)s+=i+=t[o];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}n=i,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},wA=function(n,e,t,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),o=new Vi(r.length+n.length);o.set(r),o.set(n,r.length),n=o,s.w=r.length}return yA(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,s)},M5=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},AA=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=i<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=E5();s.p(e.dictionary),M5(n,2,s.d())}},SA=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&js(6,"invalid zlib data"),(n[1]>>5&1)==1&&js(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function tf(n,e){e||(e={});var t=E5();t.p(n);var i=wA(n,e,e.dictionary?6:2,4);return AA(i,e),M5(i,i.length-4,t.d()),i}function kA(n,e){return vA(n.subarray(SA(n),-4),{i:2},e,e)}var PA=typeof TextDecoder<"u"&&new TextDecoder,NA=0;try{PA.decode(x5,{stream:!0}),NA=1}catch{}var Vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vd(){Vt.console&&typeof Vt.console.log=="function"&&Vt.console.log.apply(Vt.console,arguments)}var Un={log:vd,warn:function(n){Vt.console&&(typeof Vt.console.warn=="function"?Vt.console.warn.apply(Vt.console,arguments):vd.call(null,arguments))},error:function(n){Vt.console&&(typeof Vt.console.error=="function"?Vt.console.error.apply(Vt.console,arguments):vd(n))}};function _d(n,e,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){ba(i.response,e,t)},i.onerror=function(){Un.error("could not download file")},i.send()}function kg(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Iu(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var _c,nf,ba=Vt.saveAs||((typeof window>"u"?"undefined":Mn(window))!=="object"||window!==Vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var i=Vt.URL||Vt.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?kg(s.href)?_d(n,e,t):Iu(s,s.target="_blank"):Iu(s)):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){Iu(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(kg(n))_d(n,e,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Iu(i)})}else navigator.msSaveOrOpenBlob(function(s,r){return r===void 0?r={autoBom:!1}:Mn(r)!=="object"&&(Un.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return _d(n,e,t);var s=n.type==="application/octet-stream",r=/constructor/i.test(Vt.HTMLElement)||Vt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&r)&&(typeof FileReader>"u"?"undefined":Mn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},a.readAsDataURL(n)}else{var l=Vt.URL||Vt.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function O5(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<t.length;i++){var s=t[i].re,r=t[i].process,o=s.exec(n);o&&(e=r(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function yd(n,e){var t=n[0],i=n[1],s=n[2],r=n[3];t=Bi(t,i,s,r,e[0],7,-680876936),r=Bi(r,t,i,s,e[1],12,-389564586),s=Bi(s,r,t,i,e[2],17,606105819),i=Bi(i,s,r,t,e[3],22,-1044525330),t=Bi(t,i,s,r,e[4],7,-176418897),r=Bi(r,t,i,s,e[5],12,1200080426),s=Bi(s,r,t,i,e[6],17,-1473231341),i=Bi(i,s,r,t,e[7],22,-45705983),t=Bi(t,i,s,r,e[8],7,1770035416),r=Bi(r,t,i,s,e[9],12,-1958414417),s=Bi(s,r,t,i,e[10],17,-42063),i=Bi(i,s,r,t,e[11],22,-1990404162),t=Bi(t,i,s,r,e[12],7,1804603682),r=Bi(r,t,i,s,e[13],12,-40341101),s=Bi(s,r,t,i,e[14],17,-1502002290),t=ji(t,i=Bi(i,s,r,t,e[15],22,1236535329),s,r,e[1],5,-165796510),r=ji(r,t,i,s,e[6],9,-1069501632),s=ji(s,r,t,i,e[11],14,643717713),i=ji(i,s,r,t,e[0],20,-373897302),t=ji(t,i,s,r,e[5],5,-701558691),r=ji(r,t,i,s,e[10],9,38016083),s=ji(s,r,t,i,e[15],14,-660478335),i=ji(i,s,r,t,e[4],20,-405537848),t=ji(t,i,s,r,e[9],5,568446438),r=ji(r,t,i,s,e[14],9,-1019803690),s=ji(s,r,t,i,e[3],14,-187363961),i=ji(i,s,r,t,e[8],20,1163531501),t=ji(t,i,s,r,e[13],5,-1444681467),r=ji(r,t,i,s,e[2],9,-51403784),s=ji(s,r,t,i,e[7],14,1735328473),t=Ui(t,i=ji(i,s,r,t,e[12],20,-1926607734),s,r,e[5],4,-378558),r=Ui(r,t,i,s,e[8],11,-2022574463),s=Ui(s,r,t,i,e[11],16,1839030562),i=Ui(i,s,r,t,e[14],23,-35309556),t=Ui(t,i,s,r,e[1],4,-1530992060),r=Ui(r,t,i,s,e[4],11,1272893353),s=Ui(s,r,t,i,e[7],16,-155497632),i=Ui(i,s,r,t,e[10],23,-1094730640),t=Ui(t,i,s,r,e[13],4,681279174),r=Ui(r,t,i,s,e[0],11,-358537222),s=Ui(s,r,t,i,e[3],16,-722521979),i=Ui(i,s,r,t,e[6],23,76029189),t=Ui(t,i,s,r,e[9],4,-640364487),r=Ui(r,t,i,s,e[12],11,-421815835),s=Ui(s,r,t,i,e[15],16,530742520),t=zi(t,i=Ui(i,s,r,t,e[2],23,-995338651),s,r,e[0],6,-198630844),r=zi(r,t,i,s,e[7],10,1126891415),s=zi(s,r,t,i,e[14],15,-1416354905),i=zi(i,s,r,t,e[5],21,-57434055),t=zi(t,i,s,r,e[12],6,1700485571),r=zi(r,t,i,s,e[3],10,-1894986606),s=zi(s,r,t,i,e[10],15,-1051523),i=zi(i,s,r,t,e[1],21,-2054922799),t=zi(t,i,s,r,e[8],6,1873313359),r=zi(r,t,i,s,e[15],10,-30611744),s=zi(s,r,t,i,e[6],15,-1560198380),i=zi(i,s,r,t,e[13],21,1309151649),t=zi(t,i,s,r,e[4],6,-145523070),r=zi(r,t,i,s,e[11],10,-1120210379),s=zi(s,r,t,i,e[2],15,718787259),i=zi(i,s,r,t,e[9],21,-343485551),n[0]=To(t,n[0]),n[1]=To(i,n[1]),n[2]=To(s,n[2]),n[3]=To(r,n[3])}function xh(n,e,t,i,s,r){return e=To(To(e,n),To(i,r)),To(e<<s|e>>>32-s,t)}function Bi(n,e,t,i,s,r,o){return xh(e&t|~e&i,n,e,s,r,o)}function ji(n,e,t,i,s,r,o){return xh(e&i|t&~i,n,e,s,r,o)}function Ui(n,e,t,i,s,r,o){return xh(e^t^i,n,e,s,r,o)}function zi(n,e,t,i,s,r,o){return xh(t^(e|~i),n,e,s,r,o)}function R5(n){var e,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)yd(i,IA(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(yd(i,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,yd(i,s),i}function IA(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}_c=Vt.atob.bind(Vt),nf=Vt.btoa.bind(Vt);var Pg="0123456789abcdef".split("");function LA(n){for(var e="",t=0;t<4;t++)e+=Pg[n>>8*t+4&15]+Pg[n>>8*t&15];return e}function CA(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function sf(n){return R5(n).map(CA).join("")}var TA=function(n){for(var e=0;e<n.length;e++)n[e]=LA(n[e]);return n.join("")}(R5("hello"))!="5d41402abc4b2a76b9719d911017c592";function To(n,e){if(TA){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rf(n,e){var t,i,s,r;if(n!==t){for(var o=(s=n,r=1+(256/n.length>>0),new Array(r+1).join(s)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}t=n,i=a}else a=i;var f=e.length,g=0,p=0,_="";for(l=0;l<f;l++)p=(p+(h=a[g=(g+1)%256]))%256,a[g]=a[p],a[p]=h,o=a[(a[g]+a[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^o);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ng={print:4,modify:8,copy:16,"annot-forms":32};function yl(n,e,t,i){this.v=1,this.r=2;var s=192;n.forEach(function(a){if(Ng.perm!==void 0)throw new Error("Invalid permission: "+a);s+=Ng[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var r=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^s)),this.encryptionKey=sf(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=rf(this.encryptionKey,this.padding)}function wl(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,i=0;i<t;i++){var s=n.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[i]}return e}function Ig(n){if(Mn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,s){if(s=s||!1,typeof t!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[i,!!s],r},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var r in e[t]){var o=e[t][r];try{o[0].apply(n,i)}catch(a){Vt.console&&Un.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Oc(n){if(!(this instanceof Oc))return new Oc(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function F5(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Co(n,e,t,i,s){if(!(this instanceof Co))return new Co(n,e,t,i,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,F5.call(this,i,s)}function Pa(n,e,t,i,s){if(!(this instanceof Pa))return new Pa(n,e,t,i,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,F5.call(this,i,s)}function Ut(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],r=arguments[3],o=[],a=1,l=16,c="S",h=null;Mn(n=n||{})==="object"&&(t=n.orientation,i=n.unit||i,s=n.format||s,r=n.compress||n.compressPdf||r,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),o=n.filters||(r===!0?["FlateEncode"]:o),i=i||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=Ig;var _="1.3",y=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(N){_=N};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var w=p.__private__.getPageFormat=function(N){return S[N]};s=s||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},x=P.COMPAT;function F(){this.saveGraphicsState(),W(new wt(Xe,0,0,-Xe,0,Ri()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),c="n",x=P.ADVANCED}function U(){this.restoreGraphicsState(),c="S",x=P.COMPAT}var H=p.__private__.combineFontStyleAndFontWeight=function(N,K){if(N=="bold"&&K=="normal"||N=="bold"&&K==400||N=="normal"&&K=="italic"||N=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(N=K==400||K==="normal"?N==="italic"?"italic":"normal":K!=700&&K!=="bold"||N!=="normal"?(K==700?"bold":K)+""+N:"bold"),N};p.advancedAPI=function(N){var K=x===P.COMPAT;return K&&F.call(this),typeof N!="function"||(N(this),K&&U.call(this)),this},p.compatAPI=function(N){var K=x===P.ADVANCED;return K&&U.call(this),typeof N!="function"||(N(this),K&&F.call(this)),this},p.isAdvancedAPI=function(){return x===P.ADVANCED};var L,k=function(N){if(x!==P.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=p.roundToPrecision=p.__private__.roundToPrecision=function(N,K){var ge=e||K;if(isNaN(N)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(ge).replace(/0+$/,"")};L=p.hpf=p.__private__.hpf=typeof l=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return E(N,l)}:l==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return E(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return E(N,16)};var R=p.f2=p.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return E(N,2)},I=p.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return E(N,3)},C=p.scale=p.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return x===P.COMPAT?N*Xe:x===P.ADVANCED?N:void 0},O=function(N){return x===P.COMPAT?Ri()-N:x===P.ADVANCED?N:void 0},q=function(N){return C(O(N))};p.__private__.setPrecision=p.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(e=parseInt(N,10))};var Y,$="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return $},X=p.__private__.setFileId=function(N){return $=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Kn=new yl(h.userPermissions,h.userPassword,h.ownerPassword,$)),$};p.setFileId=function(N){return X(N),this},p.getFileId=function(){return Z()};var Q=p.__private__.convertDateToPDFDate=function(N){var K=N.getTimezoneOffset(),ge=K<0?"+":"-",we=Math.floor(Math.abs(K/60)),Oe=Math.abs(K%60),Ke=[ge,G(we),"'",G(Oe),"'"].join("");return["D:",N.getFullYear(),G(N.getMonth()+1),G(N.getDate()),G(N.getHours()),G(N.getMinutes()),G(N.getSeconds()),Ke].join("")},re=p.__private__.convertPDFDateToDate=function(N){var K=parseInt(N.substr(2,4),10),ge=parseInt(N.substr(6,2),10)-1,we=parseInt(N.substr(8,2),10),Oe=parseInt(N.substr(10,2),10),Ke=parseInt(N.substr(12,2),10),rt=parseInt(N.substr(14,2),10);return new Date(K,ge,we,Oe,Ke,rt,0)},me=p.__private__.setCreationDate=function(N){var K;if(N===void 0&&(N=new Date),N instanceof Date)K=Q(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=N}return Y=K},B=p.__private__.getCreationDate=function(N){var K=Y;return N==="jsDate"&&(K=re(Y)),K};p.setCreationDate=function(N){return me(N),this},p.getCreationDate=function(N){return B(N)};var V,G=p.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},te=p.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},ae=0,fe=[],ve=[],he=0,ye=[],Ae=[],Me=!1,Te=ve,De=function(){ae=0,he=0,ve=[],fe=[],ye=[],Qn=rn(),Bn=rn()};p.__private__.setCustomOutputDestination=function(N){Me=!0,Te=N};var de=function(N){Me||(Te=N)};p.__private__.resetCustomOutputDestination=function(){Me=!1,Te=ve};var W=p.__private__.out=function(N){return N=N.toString(),he+=N.length+1,Te.push(N),Te},_e=p.__private__.write=function(N){return W(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},Ie=p.__private__.getArrayBuffer=function(N){for(var K=N.length,ge=new ArrayBuffer(K),we=new Uint8Array(ge);K--;)we[K]=N.charCodeAt(K);return ge},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return be};var Le=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(N){return Le=x===P.ADVANCED?N/Xe:N,this};var We,Je=p.__private__.getFontSize=p.getFontSize=function(){return x===P.COMPAT?Le:Le*Xe},Ue=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(N){return Ue=N,this},p.__private__.getR2L=p.getR2L=function(){return Ue};var Ye,ht=p.__private__.setZoomMode=function(N){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))We=N;else if(isNaN(N)){if(K.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');We=N}else We=parseInt(N,10)};p.__private__.getZoomMode=function(){return We};var it,ze=p.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');Ye=N};p.__private__.getPageMode=function(){return Ye};var Ge=p.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');it=N};p.__private__.getLayoutMode=function(){return it},p.__private__.setDisplayMode=p.setDisplayMode=function(N,K,ge){return ht(N),Ge(K),ze(ge),this};var qe={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(N){if(Object.keys(qe).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return qe[N]},p.__private__.getDocumentProperties=function(){return qe},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(N){for(var K in qe)qe.hasOwnProperty(K)&&N[K]&&(qe[K]=N[K]);return this},p.__private__.setDocumentProperty=function(N,K){if(Object.keys(qe).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return qe[N]=K};var ot,Xe,Mt,gt,Ft,xt={},Qe={},vt=[],pt={},Rt={},ft={},ut={},Lt=null,st=0,He=[],yt=new Ig(p),bt=n.hotfixes||[],Dt={},Ct={},qt=[],wt=function N(K,ge,we,Oe,Ke,rt){if(!(this instanceof N))return new N(K,ge,we,Oe,Ke,rt);isNaN(K)&&(K=1),isNaN(ge)&&(ge=0),isNaN(we)&&(we=0),isNaN(Oe)&&(Oe=1),isNaN(Ke)&&(Ke=0),isNaN(rt)&&(rt=0),this._matrix=[K,ge,we,Oe,Ke,rt]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(N)},wt.prototype.multiply=function(N){var K=N.sx*this.sx+N.shy*this.shx,ge=N.sx*this.shy+N.shy*this.sy,we=N.shx*this.sx+N.sy*this.shx,Oe=N.shx*this.shy+N.sy*this.sy,Ke=N.tx*this.sx+N.ty*this.shx+this.tx,rt=N.tx*this.shy+N.ty*this.sy+this.ty;return new wt(K,ge,we,Oe,Ke,rt)},wt.prototype.decompose=function(){var N=this.sx,K=this.shy,ge=this.shx,we=this.sy,Oe=this.tx,Ke=this.ty,rt=Math.sqrt(N*N+K*K),v=(N/=rt)*ge+(K/=rt)*we;ge-=N*v,we-=K*v;var M=Math.sqrt(ge*ge+we*we);return v/=M,N*(we/=M)<K*(ge/=M)&&(N=-N,K=-K,v=-v,rt=-rt),{scale:new wt(rt,0,0,M,0,0),translate:new wt(1,0,0,1,Oe,Ke),rotate:new wt(N,K,-K,N,0,0),skew:new wt(1,0,v,1,0,0)}},wt.prototype.toString=function(N){return this.join(" ")},wt.prototype.inversed=function(){var N=this.sx,K=this.shy,ge=this.shx,we=this.sy,Oe=this.tx,Ke=this.ty,rt=1/(N*we-K*ge),v=we*rt,M=-K*rt,z=-ge*rt,ie=N*rt;return new wt(v,M,z,ie,-v*Oe-z*Ke,-M*Oe-ie*Ke)},wt.prototype.applyToPoint=function(N){var K=N.x*this.sx+N.y*this.shx+this.tx,ge=N.x*this.shy+N.y*this.sy+this.ty;return new Sr(K,ge)},wt.prototype.applyToRectangle=function(N){var K=this.applyToPoint(N),ge=this.applyToPoint(new Sr(N.x+N.w,N.y+N.h));return new ao(K.x,K.y,ge.x-K.x,ge.y-K.y)},wt.prototype.clone=function(){var N=this.sx,K=this.shy,ge=this.shx,we=this.sy,Oe=this.tx,Ke=this.ty;return new wt(N,K,ge,we,Oe,Ke)},p.Matrix=wt;var en=p.matrixMult=function(N,K){return K.multiply(N)},Ln=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ln;var sn=function(N,K){if(!Rt[N]){var ge=(K instanceof Co?"Sh":"P")+(Object.keys(pt).length+1).toString(10);K.id=ge,Rt[N]=ge,pt[ge]=K,yt.publish("addPattern",K)}};p.ShadingPattern=Co,p.TilingPattern=Pa,p.addShadingPattern=function(N,K){return k("addShadingPattern()"),sn(N,K),this},p.beginTilingPattern=function(N){k("beginTilingPattern()"),lo(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},p.endTilingPattern=function(N,K){k("endTilingPattern()"),K.stream=Ae[V].join(`
`),sn(N,K),yt.publish("endTilingPattern",K),qt.pop().restore()};var un=p.__private__.newObject=function(){var N=rn();return Zt(N,!0),N},rn=p.__private__.newObjectDeferred=function(){return ae++,fe[ae]=function(){return he},ae},Zt=function(N,K){return K=typeof K=="boolean"&&K,fe[N]=he,K&&W(N+" 0 obj"),N},bi=p.__private__.newAdditionalObject=function(){var N={objId:rn(),content:""};return ye.push(N),N},Qn=rn(),Bn=rn(),vn=p.__private__.decodeColorString=function(N){var K=N.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var ge=parseFloat(K[0]);K=[ge,ge,ge,"r"]}for(var we="#",Oe=0;Oe<3;Oe++)we+=("0"+Math.floor(255*parseFloat(K[Oe])).toString(16)).slice(-2);return we},si=p.__private__.encodeColorString=function(N){var K;typeof N=="string"&&(N={ch1:N});var ge=N.ch1,we=N.ch2,Oe=N.ch3,Ke=N.ch4,rt=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var v=new O5(ge);if(v.ok)ge=v.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var M=parseInt(ge.substr(1),16);ge=M>>16&255,we=M>>8&255,Oe=255&M}if(we===void 0||Ke===void 0&&ge===we&&we===Oe)if(typeof ge=="string")K=ge+" "+rt[0];else switch(N.precision){case 2:K=R(ge/255)+" "+rt[0];break;case 3:default:K=I(ge/255)+" "+rt[0]}else if(Ke===void 0||Mn(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return K=["1.","1.","1.",rt[1]].join(" ");if(typeof ge=="string")K=[ge,we,Oe,rt[1]].join(" ");else switch(N.precision){case 2:K=[R(ge/255),R(we/255),R(Oe/255),rt[1]].join(" ");break;default:case 3:K=[I(ge/255),I(we/255),I(Oe/255),rt[1]].join(" ")}}else if(typeof ge=="string")K=[ge,we,Oe,Ke,rt[2]].join(" ");else switch(N.precision){case 2:K=[R(ge),R(we),R(Oe),R(Ke),rt[2]].join(" ");break;case 3:default:K=[I(ge),I(we),I(Oe),I(Ke),rt[2]].join(" ")}return K},_n=p.__private__.getFilters=function(){return o},yn=p.__private__.putStream=function(N){var K=(N=N||{}).data||"",ge=N.filters||_n(),we=N.alreadyAppliedFilters||[],Oe=N.addLength1||!1,Ke=K.length,rt=N.objectId,v=function(pn){return pn};if(h!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(v=Kn.encryptor(rt,0));var M={};ge===!0&&(ge=["FlateEncode"]);var z=N.additionalKeyValues||[],ie=(M=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(K,ge):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(M.data.length!==0&&(z.push({key:"Length",value:M.data.length}),Oe===!0&&z.push({key:"Length1",value:Ke})),ie.length!=0)if(ie.split("/").length-1==1)z.push({key:"Filter",value:ie});else{z.push({key:"Filter",value:"["+ie+"]"});for(var Ne=0;Ne<z.length;Ne+=1)if(z[Ne].key==="DecodeParms"){for(var Be=[],ct=0;ct<M.reverseChain.split("/").length-1;ct+=1)Be.push("null");Be.push(z[Ne].value),z[Ne].value="["+Be.join(" ")+"]"}}W("<<");for(var Gt=0;Gt<z.length;Gt++)W("/"+z[Gt].key+" "+z[Gt].value);W(">>"),M.data.length!==0&&(W("stream"),W(v(M.data)),W("endstream"))},Yn=p.__private__.putPage=function(N){var K=N.number,ge=N.data,we=N.objId,Oe=N.contentsObjId;Zt(we,!0),W("<</Type /Page"),W("/Parent "+N.rootDictionaryObjId+" 0 R"),W("/Resources "+N.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(L(N.mediaBox.bottomLeftX))+" "+parseFloat(L(N.mediaBox.bottomLeftY))+" "+L(N.mediaBox.topRightX)+" "+L(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&W("/CropBox ["+L(N.cropBox.bottomLeftX)+" "+L(N.cropBox.bottomLeftY)+" "+L(N.cropBox.topRightX)+" "+L(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&W("/BleedBox ["+L(N.bleedBox.bottomLeftX)+" "+L(N.bleedBox.bottomLeftY)+" "+L(N.bleedBox.topRightX)+" "+L(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&W("/TrimBox ["+L(N.trimBox.bottomLeftX)+" "+L(N.trimBox.bottomLeftY)+" "+L(N.trimBox.topRightX)+" "+L(N.trimBox.topRightY)+"]"),N.artBox!==null&&W("/ArtBox ["+L(N.artBox.bottomLeftX)+" "+L(N.artBox.bottomLeftY)+" "+L(N.artBox.topRightX)+" "+L(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&W("/UserUnit "+N.userUnit),yt.publish("putPage",{objId:we,pageContext:He[K],pageNumber:K,page:ge}),W("/Contents "+Oe+" 0 R"),W(">>"),W("endobj");var Ke=ge.join(`
`);return x===P.ADVANCED&&(Ke+=`
Q`),Zt(Oe,!0),yn({data:Ke,filters:_n(),objectId:Oe}),W("endobj"),we},ri=p.__private__.putPages=function(){var N,K,ge=[];for(N=1;N<=st;N++)He[N].objId=rn(),He[N].contentsObjId=rn();for(N=1;N<=st;N++)ge.push(Yn({number:N,data:Ae[N],objId:He[N].objId,contentsObjId:He[N].contentsObjId,mediaBox:He[N].mediaBox,cropBox:He[N].cropBox,bleedBox:He[N].bleedBox,trimBox:He[N].trimBox,artBox:He[N].artBox,userUnit:He[N].userUnit,rootDictionaryObjId:Qn,resourceDictionaryObjId:Bn}));Zt(Qn,!0),W("<</Type /Pages");var we="/Kids [";for(K=0;K<st;K++)we+=ge[K]+" 0 R ";W(we+"]"),W("/Count "+st),W(">>"),W("endobj"),yt.publish("postPutPages")},hn=function(N){yt.publish("putFont",{font:N,out:W,newObject:un,putStream:yn}),N.isAlreadyPutted!==!0&&(N.objectNumber=un(),W("<<"),W("/Type /Font"),W("/BaseFont /"+wl(N.postScriptName)),W("/Subtype /Type1"),typeof N.encoding=="string"&&W("/Encoding /"+N.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},wi=function(){for(var N in xt)xt.hasOwnProperty(N)&&(f===!1||f===!0&&g.hasOwnProperty(N))&&hn(xt[N])},Ai=function(N){N.objectNumber=un();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[L(N.x),L(N.y),L(N.x+N.width),L(N.y+N.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var ge=N.pages[1].join(`
`);yn({data:ge,additionalKeyValues:K,objectId:N.objectNumber}),W("endobj")},Ze=function(){for(var N in Dt)Dt.hasOwnProperty(N)&&Ai(Dt[N])},lt=function(N,K){var ge,we=[],Oe=1/(K-1);for(ge=0;ge<1;ge+=Oe)we.push(ge);if(we.push(1),N[0].offset!=0){var Ke={offset:0,color:N[0].color};N.unshift(Ke)}if(N[N.length-1].offset!=1){var rt={offset:1,color:N[N.length-1].color};N.push(rt)}for(var v="",M=0,z=0;z<we.length;z++){for(ge=we[z];ge>N[M+1].offset;)M++;var ie=N[M].offset,Ne=(ge-ie)/(N[M+1].offset-ie),Be=N[M].color,ct=N[M+1].color;v+=te(Math.round((1-Ne)*Be[0]+Ne*ct[0]).toString(16))+te(Math.round((1-Ne)*Be[1]+Ne*ct[1]).toString(16))+te(Math.round((1-Ne)*Be[2]+Ne*ct[2]).toString(16))}return v.trim()},$e=function(N,K){K||(K=21);var ge=un(),we=lt(N.colors,K),Oe=[];Oe.push({key:"FunctionType",value:"0"}),Oe.push({key:"Domain",value:"[0.0 1.0]"}),Oe.push({key:"Size",value:"["+K+"]"}),Oe.push({key:"BitsPerSample",value:"8"}),Oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yn({data:we,additionalKeyValues:Oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),W("endobj"),N.objectNumber=un(),W("<< /ShadingType "+N.type),W("/ColorSpace /DeviceRGB");var Ke="/Coords ["+L(parseFloat(N.coords[0]))+" "+L(parseFloat(N.coords[1]))+" ";N.type===2?Ke+=L(parseFloat(N.coords[2]))+" "+L(parseFloat(N.coords[3])):Ke+=L(parseFloat(N.coords[2]))+" "+L(parseFloat(N.coords[3]))+" "+L(parseFloat(N.coords[4]))+" "+L(parseFloat(N.coords[5])),W(Ke+="]"),N.matrix&&W("/Matrix ["+N.matrix.toString()+"]"),W("/Function "+ge+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Bt=function(N,K){var ge=rn(),we=un();K.push({resourcesOid:ge,objectOid:we}),N.objectNumber=we;var Oe=[];Oe.push({key:"Type",value:"/Pattern"}),Oe.push({key:"PatternType",value:"1"}),Oe.push({key:"PaintType",value:"1"}),Oe.push({key:"TilingType",value:"1"}),Oe.push({key:"BBox",value:"["+N.boundingBox.map(L).join(" ")+"]"}),Oe.push({key:"XStep",value:L(N.xStep)}),Oe.push({key:"YStep",value:L(N.yStep)}),Oe.push({key:"Resources",value:ge+" 0 R"}),N.matrix&&Oe.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),yn({data:N.stream,additionalKeyValues:Oe,objectId:N.objectNumber}),W("endobj")},Yt=function(N){var K;for(K in pt)pt.hasOwnProperty(K)&&(pt[K]instanceof Co?$e(pt[K]):pt[K]instanceof Pa&&Bt(pt[K],N))},dn=function(N){for(var K in N.objectNumber=un(),W("<<"),N)switch(K){case"opacity":W("/ca "+R(N[K]));break;case"stroke-opacity":W("/CA "+R(N[K]))}W(">>"),W("endobj")},tn=function(){var N;for(N in ft)ft.hasOwnProperty(N)&&dn(ft[N])},nn=function(){for(var N in W("/XObject <<"),Dt)Dt.hasOwnProperty(N)&&Dt[N].objectNumber>=0&&W("/"+N+" "+Dt[N].objectNumber+" 0 R");yt.publish("putXobjectDict"),W(">>")},Sn=function(){Kn.oid=un(),W("<<"),W("/Filter /Standard"),W("/V "+Kn.v),W("/R "+Kn.r),W("/U <"+Kn.toHexString(Kn.U)+">"),W("/O <"+Kn.toHexString(Kn.O)+">"),W("/P "+Kn.P),W(">>"),W("endobj")},At=function(){for(var N in W("/Font <<"),xt)xt.hasOwnProperty(N)&&(f===!1||f===!0&&g.hasOwnProperty(N))&&W("/"+N+" "+xt[N].objectNumber+" 0 R");W(">>")},Ht=function(){if(Object.keys(pt).length>0){for(var N in W("/Shading <<"),pt)pt.hasOwnProperty(N)&&pt[N]instanceof Co&&pt[N].objectNumber>=0&&W("/"+N+" "+pt[N].objectNumber+" 0 R");yt.publish("putShadingPatternDict"),W(">>")}},kn=function(N){if(Object.keys(pt).length>0){for(var K in W("/Pattern <<"),pt)pt.hasOwnProperty(K)&&pt[K]instanceof p.TilingPattern&&pt[K].objectNumber>=0&&pt[K].objectNumber<N&&W("/"+K+" "+pt[K].objectNumber+" 0 R");yt.publish("putTilingPatternDict"),W(">>")}},fn=function(){if(Object.keys(ft).length>0){var N;for(N in W("/ExtGState <<"),ft)ft.hasOwnProperty(N)&&ft[N].objectNumber>=0&&W("/"+N+" "+ft[N].objectNumber+" 0 R");yt.publish("putGStateDict"),W(">>")}},Nt=function(N){Zt(N.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),At(),Ht(),kn(N.objectOid),fn(),nn(),W(">>"),W("endobj")},$t=function(){var N=[];wi(),tn(),Ze(),Yt(N),yt.publish("putResources"),N.forEach(Nt),Nt({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),yt.publish("postPutResources")},Jo=function(){yt.publish("putAdditionalObjects");for(var N=0;N<ye.length;N++){var K=ye[N];Zt(K.objId,!0),W(K.content),W("endobj")}yt.publish("postPutAdditionalObjects")},Wa=function(N){Qe[N.fontName]=Qe[N.fontName]||{},Qe[N.fontName][N.fontStyle]=N.id},Xo=function(N,K,ge,we,Oe){var Ke={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:N,fontName:K,fontStyle:ge,encoding:we,isStandardFont:Oe||!1,metadata:{}};return yt.publish("addFont",{font:Ke,instance:this}),xt[Ke.id]=Ke,Wa(Ke),Ke.id},Ga=function(N){for(var K=0,ge=be.length;K<ge;K++){var we=Xo.call(this,N[K][0],N[K][1],N[K][2],be[K][3],!0);f===!1&&(g[we]=!0);var Oe=N[K][0].split("-");Wa({id:we,fontName:Oe[0],fontStyle:Oe[1]||""})}yt.publish("addFonts",{fonts:xt,dictionary:Qe})},es=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(we){var K=we.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var ge="Error in function "+K.split(`
`)[0].split("<")[0]+": "+we.message;if(!Vt.console)throw new Error(ge);Vt.console.error(ge,we),Vt.alert&&alert(ge)}},N.foo.bar=N,N.foo},Jr=function(N,K){var ge,we,Oe,Ke,rt,v,M,z,ie;if(Oe=(K=K||{}).sourceEncoding||"Unicode",rt=K.outputEncoding,(K.autoencode||rt)&&xt[ot].metadata&&xt[ot].metadata[Oe]&&xt[ot].metadata[Oe].encoding&&(Ke=xt[ot].metadata[Oe].encoding,!rt&&xt[ot].encoding&&(rt=xt[ot].encoding),!rt&&Ke.codePages&&(rt=Ke.codePages[0]),typeof rt=="string"&&(rt=Ke[rt]),rt)){for(M=!1,v=[],ge=0,we=N.length;ge<we;ge++)(z=rt[N.charCodeAt(ge)])?v.push(String.fromCharCode(z)):v.push(N[ge]),v[ge].charCodeAt(0)>>8&&(M=!0);N=v.join("")}for(ge=N.length;M===void 0&&ge!==0;)N.charCodeAt(ge-1)>>8&&(M=!0),ge--;if(!M)return N;for(v=K.noBOM?[]:[254,255],ge=0,we=N.length;ge<we;ge++){if((ie=(z=N.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");v.push(ie),v.push(z-(ie<<8))}return String.fromCharCode.apply(void 0,v)},oi=p.__private__.pdfEscape=p.pdfEscape=function(N,K){return Jr(N,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yi=p.__private__.beginPage=function(N){Ae[++st]=[],He[st]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},Zo(st),de(Ae[V])},vr=function(N,K){var ge,we,Oe;switch(t=K||t,typeof N=="string"&&(ge=w(N.toLowerCase()),Array.isArray(ge)&&(we=ge[0],Oe=ge[1])),Array.isArray(N)&&(we=N[0]*Xe,Oe=N[1]*Xe),isNaN(we)&&(we=s[0],Oe=s[1]),(we>14400||Oe>14400)&&(Un.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Oe=Math.min(14400,Oe)),s=[we,Oe],t.substr(0,1)){case"l":Oe>we&&(s=[Oe,we]);break;case"p":we>Oe&&(s=[Oe,we])}Yi(s),na(ta),W(Ti),ra!==0&&W(ra+" J"),oo!==0&&W(oo+" j"),yt.publish("addPage",{pageNumber:st})},Xr=function(N){N>0&&N<=st&&(Ae.splice(N,1),He.splice(N,1),st--,V>st&&(V=st),this.setPage(V))},Zo=function(N){N>0&&N<=st&&(V=N)},Cn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ae.length-1},_r=function(N,K,ge){var we,Oe=void 0;return ge=ge||{},N=N!==void 0?N:xt[ot].fontName,K=K!==void 0?K:xt[ot].fontStyle,we=N.toLowerCase(),Qe[we]!==void 0&&Qe[we][K]!==void 0?Oe=Qe[we][K]:Qe[N]!==void 0&&Qe[N][K]!==void 0?Oe=Qe[N][K]:ge.disableWarning===!1&&Un.warn("Unable to look up font label for font '"+N+"', '"+K+"'. Refer to getFontList() for available fonts."),Oe||ge.noFallback||(Oe=Qe.times[K])==null&&(Oe=Qe.times.normal),Oe},yr=p.__private__.putInfo=function(){var N=un(),K=function(we){return we};for(var ge in h!==null&&(K=Kn.encryptor(N,0)),W("<<"),W("/Producer ("+oi(K("jsPDF "+Ut.version))+")"),qe)qe.hasOwnProperty(ge)&&qe[ge]&&W("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+oi(K(qe[ge]))+")");W("/CreationDate ("+oi(K(Y))+")"),W(">>"),W("endobj")},Cs=p.__private__.putCatalog=function(N){var K=(N=N||{}).rootDictionaryObjId||Qn;switch(un(),W("<<"),W("/Type /Catalog"),W("/Pages "+K+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+We;ge.substr(ge.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&W("/OpenAction [3 0 R /XYZ null null "+R(We)+"]")}switch(it||(it="continuous"),it){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}Ye&&W("/PageMode /"+Ye),yt.publish("putCatalog"),W(">>"),W("endobj")},Fl=p.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(ae+1)),W("/Root "+ae+" 0 R"),W("/Info "+(ae-1)+" 0 R"),h!==null&&W("/Encrypt "+Kn.oid+" 0 R"),W("/ID [ <"+$+"> <"+$+"> ]"),W(">>")},Ya=p.__private__.putHeader=function(){W("%PDF-"+_),W("%ºß¬à")},Bl=p.__private__.putXRef=function(){var N="0000000000";W("xref"),W("0 "+(ae+1)),W("0000000000 65535 f ");for(var K=1;K<=ae;K++)typeof fe[K]=="function"?W((N+fe[K]()).slice(-10)+" 00000 n "):fe[K]!==void 0?W((N+fe[K]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},Ts=p.__private__.buildDocument=function(){De(),de(ve),yt.publish("buildDocument"),Ya(),ri(),Jo(),$t(),h!==null&&Sn(),yr(),Cs();var N=he;return Bl(),Fl(),W("startxref"),W(""+N),W("%%EOF"),de(Ae[V]),ve.join(`
`)},Zr=p.__private__.getBlob=function(N){return new Blob([Ie(N)],{type:"application/pdf"})},Qr=p.output=p.__private__.output=es(function(N,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",N){case void 0:return Ts();case"save":p.save(K.filename);break;case"arraybuffer":return Ie(Ts());case"blob":return Zr(Ts());case"bloburi":case"bloburl":if(Vt.URL!==void 0&&typeof Vt.URL.createObjectURL=="function")return Vt.URL&&Vt.URL.createObjectURL(Zr(Ts()))||void 0;Un.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",we=Ts();try{ge=nf(we)}catch{ge=nf(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+K.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var Oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Oe=K.pdfObjectUrl,Ke="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Oe+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",v=Vt.open();return v!==null&&v.document.write(rt),v}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var M='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',z=Vt.open();if(z!==null){z.document.write(M);var ie=this;z.document.documentElement.querySelector("#pdfViewer").onload=function(){z.document.title=K.filename,z.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ie.output("bloburl"))}}return z}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ne='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',Be=Vt.open();if(Be!==null&&(Be.document.write(Ne),Be.document.title=K.filename),Be||typeof safari>"u")return Be;break;case"datauri":case"dataurl":return Vt.document.location.href=this.output("datauristring",K);default:return null}}),Zs=function(N){return Array.isArray(bt)===!0&&bt.indexOf(N)>-1};switch(i){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=Zs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Xe=i}var Kn=null;me(),X();var Ka=function(N){return h!==null?Kn.encryptor(N,0):function(K){return K}},Qo=p.__private__.getPageInfo=p.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:He[N].objId,pageNumber:N,pageContext:He[N]}},Wt=p.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in He)if(He[K].objId===N)break;return Qo(K)},Qs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:He[V].objId,pageNumber:V,pageContext:He[V]}};p.addPage=function(){return vr.apply(this,arguments),this},p.setPage=function(){return Zo.apply(this,arguments),de.call(this,Ae[V]),this},p.insertPage=function(N){return this.addPage(),this.movePage(V,N),this},p.movePage=function(N,K){var ge,we;if(N>K){ge=Ae[N],we=He[N];for(var Oe=N;Oe>K;Oe--)Ae[Oe]=Ae[Oe-1],He[Oe]=He[Oe-1];Ae[K]=ge,He[K]=we,this.setPage(K)}else if(N<K){ge=Ae[N],we=He[N];for(var Ke=N;Ke<K;Ke++)Ae[Ke]=Ae[Ke+1],He[Ke]=He[Ke+1];Ae[K]=ge,He[K]=we,this.setPage(K)}return this},p.deletePage=function(){return Xr.apply(this,arguments),this},p.__private__.text=p.text=function(N,K,ge,we,Oe){var Ke,rt,v,M,z,ie,Ne,Be,ct,Gt=(we=we||{}).scope||this;if(typeof N=="number"&&typeof K=="number"&&(typeof ge=="string"||Array.isArray(ge))){var pn=ge;ge=K,K=N,N=pn}if(arguments[3]instanceof wt?(k("The transform parameter of text() with a Matrix value"),ct=Oe):(v=arguments[4],M=arguments[5],Mn(Ne=arguments[3])==="object"&&Ne!==null||(typeof v=="string"&&(M=v,v=null),typeof Ne=="string"&&(M=Ne,Ne=null),typeof Ne=="number"&&(v=Ne,Ne=null),we={flags:Ne,angle:v,align:M})),isNaN(K)||isNaN(ge)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Gt;var zt="",Rn=!1,Nn=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:Tn,Di=Gt.internal.scaleFactor;function Fi(qn){return qn=qn.split("	").join(Array(we.TabLen||9).join(" ")),oi(qn,Ne)}function nr(qn){for(var Vn,hi=qn.concat(),ki=[],Cr=hi.length;Cr--;)typeof(Vn=hi.shift())=="string"?ki.push(Vn):Array.isArray(qn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?ki.push(Vn[0]):ki.push([Vn[0],Vn[1],Vn[2]]);return ki}function Pr(qn,Vn){var hi;if(typeof qn=="string")hi=Vn(qn)[0];else if(Array.isArray(qn)){for(var ki,Cr,Yl=qn.concat(),ll=[],su=Yl.length;su--;)typeof(ki=Yl.shift())=="string"?ll.push(Vn(ki)[0]):Array.isArray(ki)&&typeof ki[0]=="string"&&(Cr=Vn(ki[0],ki[1],ki[2]),ll.push([Cr[0],Cr[1],Cr[2]]));hi=ll}return hi}var $a=!1,Ul=!0;if(typeof N=="string")$a=!0;else if(Array.isArray(N)){var zl=N.concat();rt=[];for(var el,xi=zl.length;xi--;)(typeof(el=zl.shift())!="string"||Array.isArray(el)&&typeof el[0]!="string")&&(Ul=!1);$a=Ul}if($a===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var tl=Le/Gt.internal.scaleFactor,nl=tl*(Nn-1);switch(we.baseline){case"bottom":ge-=nl;break;case"top":ge+=tl-nl;break;case"hanging":ge+=tl-2*nl;break;case"middle":ge+=tl/2-nl}if((ie=we.maxWidth||0)>0&&(typeof N=="string"?N=Gt.splitTextToSize(N,ie):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(qn,Vn){return qn.concat(Gt.splitTextToSize(Vn,ie))},[]))),Ke={text:N,x:K,y:ge,options:we,mutex:{pdfEscape:oi,activeFontKey:ot,fonts:xt,activeFontSize:Le}},yt.publish("preProcessText",Ke),N=Ke.text,v=(we=Ke.options).angle,!(ct instanceof wt)&&v&&typeof v=="number"){v*=Math.PI/180,we.rotationDirection===0&&(v=-v),x===P.ADVANCED&&(v=-v);var il=Math.cos(v),Hl=Math.sin(v);ct=new wt(il,Hl,-Hl,il,0,0)}else v&&v instanceof wt&&(ct=v);x!==P.ADVANCED||ct||(ct=Ln),(z=we.charSpace||Ar)!==void 0&&(zt+=L(C(z))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Be=we.horizontalScale)!==void 0&&(zt+=L(100*Be)+` Tz
`),we.lang;var ts=-1,Uh=we.renderingMode!==void 0?we.renderingMode:we.stroke,ql=Gt.internal.getCurrentPageInfo().pageContext;switch(Uh){case 0:case!1:case"fill":ts=0;break;case 1:case!0:case"stroke":ts=1;break;case 2:case"fillThenStroke":ts=2;break;case 3:case"invisible":ts=3;break;case 4:case"fillAndAddForClipping":ts=4;break;case 5:case"strokeAndAddPathForClipping":ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ts=6;break;case 7:case"addToPathForClipping":ts=7}var eu=ql.usedRenderingMode!==void 0?ql.usedRenderingMode:-1;ts!==-1?zt+=ts+` Tr
`:eu!==-1&&(zt+=`0 Tr
`),ts!==-1&&(ql.usedRenderingMode=ts),M=we.align||"left";var _s,sl=Le*Nn,tu=Gt.internal.pageSize.getWidth(),nu=xt[ot];z=we.charSpace||Ar,ie=we.maxWidth||0,Ne=Object.assign({autoencode:!0,noBOM:!0},we.flags);var ho=[],oa=function(qn){return Gt.getStringUnitWidth(qn,{font:nu,charSpace:z,fontSize:Le,doKerning:!1})*Le/Di};if(Object.prototype.toString.call(N)==="[object Array]"){var ns;rt=nr(N),M!=="left"&&(_s=rt.map(oa));var Ki,fo=0;if(M==="right"){K-=_s[0],N=[],xi=rt.length;for(var Nr=0;Nr<xi;Nr++)Nr===0?(Ki=hs(K),ns=Si(ge)):(Ki=C(fo-_s[Nr]),ns=-sl),N.push([rt[Nr],Ki,ns]),fo=_s[Nr]}else if(M==="center"){K-=_s[0]/2,N=[],xi=rt.length;for(var Ir=0;Ir<xi;Ir++)Ir===0?(Ki=hs(K),ns=Si(ge)):(Ki=C((fo-_s[Ir])/2),ns=-sl),N.push([rt[Ir],Ki,ns]),fo=_s[Ir]}else if(M==="left"){N=[],xi=rt.length;for(var rl=0;rl<xi;rl++)N.push(rt[rl])}else if(M==="justify"&&nu.encoding==="Identity-H"){N=[],xi=rt.length,ie=ie!==0?ie:tu;for(var Lr=0,ui=0;ui<xi;ui++)if(ns=ui===0?Si(ge):-sl,Ki=ui===0?hs(K):Lr,ui<xi-1){var Vl=C((ie-_s[ui])/(rt[ui].split(" ").length-1)),Ji=rt[ui].split(" ");N.push([Ji[0]+" ",Ki,ns]),Lr=0;for(var ys=1;ys<Ji.length;ys++){var ol=(oa(Ji[ys-1]+" "+Ji[ys])-oa(Ji[ys]))*Di+Vl;ys==Ji.length-1?N.push([Ji[ys],ol,0]):N.push([Ji[ys]+" ",ol,0]),Lr-=ol}}else N.push([rt[ui],Ki,ns]);N.push(["",Lr,0])}else{if(M!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],xi=rt.length,ie=ie!==0?ie:tu,ui=0;ui<xi;ui++)ns=ui===0?Si(ge):-sl,Ki=ui===0?hs(K):0,ui<xi-1?ho.push(L(C((ie-_s[ui])/(rt[ui].split(" ").length-1)))):ho.push(0),N.push([rt[ui],Ki,ns])}}var iu=typeof we.R2L=="boolean"?we.R2L:Ue;iu===!0&&(N=Pr(N,function(qn,Vn,hi){return[qn.split("").reverse().join(""),Vn,hi]})),Ke={text:N,x:K,y:ge,options:we,mutex:{pdfEscape:oi,activeFontKey:ot,fonts:xt,activeFontSize:Le}},yt.publish("postProcessText",Ke),N=Ke.text,Rn=Ke.mutex.isHex||!1;var Wl=xt[ot].encoding;Wl!=="WinAnsiEncoding"&&Wl!=="StandardEncoding"||(N=Pr(N,function(qn,Vn,hi){return[Fi(qn),Vn,hi]})),rt=nr(N),N=[];for(var aa,la,po,ca=0,al=1,ua=Array.isArray(rt[0])?al:ca,mo="",Gl=function(qn,Vn,hi){var ki="";return hi instanceof wt?(hi=typeof we.angle=="number"?en(hi,new wt(1,0,0,1,qn,Vn)):en(new wt(1,0,0,1,qn,Vn),hi),x===P.ADVANCED&&(hi=en(new wt(1,0,0,-1,0,0),hi)),ki=hi.join(" ")+` Tm
`):ki=L(qn)+" "+L(Vn)+` Td
`,ki},ws=0;ws<rt.length;ws++){switch(mo="",ua){case al:po=(Rn?"<":"(")+rt[ws][0]+(Rn?">":")"),aa=parseFloat(rt[ws][1]),la=parseFloat(rt[ws][2]);break;case ca:po=(Rn?"<":"(")+rt[ws]+(Rn?">":")"),aa=hs(K),la=Si(ge)}ho!==void 0&&ho[ws]!==void 0&&(mo=ho[ws]+` Tw
`),ws===0?N.push(mo+Gl(aa,la,ct)+po):ua===ca?N.push(mo+po):ua===al&&N.push(mo+Gl(aa,la,ct)+po)}N=ua===ca?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var As=`BT
/`;return As+=ot+" "+Le+` Tf
`,As+=L(Le*Nn)+` TL
`,As+=Es+`
`,As+=zt,As+=N,W(As+="ET"),g[ot]=!0,Gt};var jl=p.__private__.clip=p.clip=function(N){return W(N==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return jl("evenodd")},p.__private__.discardPath=p.discardPath=function(){return W("n"),this};var vs=p.__private__.isValidStyle=function(N){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(K=!0),K};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(N){return vs(N)&&(c=N),this};var Ja=p.__private__.getStyle=p.getStyle=function(N){var K=c;switch(N){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=N}return K},cs=p.close=function(){return W("h"),this};p.stroke=function(){return W("S"),this},p.fill=function(N){return $r("f",N),this},p.fillEvenOdd=function(N){return $r("f*",N),this},p.fillStroke=function(N){return $r("B",N),this},p.fillStrokeEvenOdd=function(N){return $r("B*",N),this};var $r=function(N,K){Mn(K)==="object"?to(K,N):W(N)},$o=function(N){N===null||x===P.ADVANCED&&N===void 0||(N=Ja(N),W(N))};function eo(N,K,ge,we,Oe){var Ke=new Pa(K||this.boundingBox,ge||this.xStep,we||this.yStep,this.gState,Oe||this.matrix);Ke.stream=this.stream;var rt=N+"$$"+this.cloneIndex+++"$$";return sn(rt,Ke),Ke}var to=function(N,K){var ge=Rt[N.key],we=pt[ge];if(we instanceof Co)W("q"),W(Xa(K)),we.gState&&p.setGState(we.gState),W(N.matrix.toString()+" cm"),W("/"+ge+" sh"),W("Q");else if(we instanceof Pa){var Oe=new wt(1,0,0,-1,0,Ri());N.matrix&&(Oe=Oe.multiply(N.matrix||Ln),ge=eo.call(we,N.key,N.boundingBox,N.xStep,N.yStep,Oe).id),W("q"),W("/Pattern cs"),W("/"+ge+" scn"),we.gState&&p.setGState(we.gState),W(K),W("Q")}},Xa=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ds=p.moveTo=function(N,K){return W(L(C(N))+" "+L(q(K))+" m"),this},us=p.lineTo=function(N,K){return W(L(C(N))+" "+L(q(K))+" l"),this},xs=p.curveTo=function(N,K,ge,we,Oe,Ke){return W([L(C(N)),L(q(K)),L(C(ge)),L(q(we)),L(C(Oe)),L(q(Ke)),"c"].join(" ")),this};p.__private__.line=p.line=function(N,K,ge,we,Oe){if(isNaN(N)||isNaN(K)||isNaN(ge)||isNaN(we)||!vs(Oe))throw new Error("Invalid arguments passed to jsPDF.line");return x===P.COMPAT?this.lines([[ge-N,we-K]],N,K,[1,1],Oe||"S"):this.lines([[ge-N,we-K]],N,K,[1,1]).stroke()},p.__private__.lines=p.lines=function(N,K,ge,we,Oe,Ke){var rt,v,M,z,ie,Ne,Be,ct,Gt,pn,zt,Rn;if(typeof N=="number"&&(Rn=ge,ge=K,K=N,N=Rn),we=we||[1,1],Ke=Ke||!1,isNaN(K)||isNaN(ge)||!Array.isArray(N)||!Array.isArray(we)||!vs(Oe)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ds(K,ge),rt=we[0],v=we[1],z=N.length,pn=K,zt=ge,M=0;M<z;M++)(ie=N[M]).length===2?(pn=ie[0]*rt+pn,zt=ie[1]*v+zt,us(pn,zt)):(Ne=ie[0]*rt+pn,Be=ie[1]*v+zt,ct=ie[2]*rt+pn,Gt=ie[3]*v+zt,pn=ie[4]*rt+pn,zt=ie[5]*v+zt,xs(Ne,Be,ct,Gt,pn,zt));return Ke&&cs(),$o(Oe),this},p.path=function(N){for(var K=0;K<N.length;K++){var ge=N[K],we=ge.c;switch(ge.op){case"m":Ds(we[0],we[1]);break;case"l":us(we[0],we[1]);break;case"c":xs.apply(this,we);break;case"h":cs()}}return this},p.__private__.rect=p.rect=function(N,K,ge,we,Oe){if(isNaN(N)||isNaN(K)||isNaN(ge)||isNaN(we)||!vs(Oe))throw new Error("Invalid arguments passed to jsPDF.rect");return x===P.COMPAT&&(we=-we),W([L(C(N)),L(q(K)),L(C(ge)),L(C(we)),"re"].join(" ")),$o(Oe),this},p.__private__.triangle=p.triangle=function(N,K,ge,we,Oe,Ke,rt){if(isNaN(N)||isNaN(K)||isNaN(ge)||isNaN(we)||isNaN(Oe)||isNaN(Ke)||!vs(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-N,we-K],[Oe-ge,Ke-we],[N-Oe,K-Ke]],N,K,[1,1],rt,!0),this},p.__private__.roundedRect=p.roundedRect=function(N,K,ge,we,Oe,Ke,rt){if(isNaN(N)||isNaN(K)||isNaN(ge)||isNaN(we)||isNaN(Oe)||isNaN(Ke)||!vs(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var v=4/3*(Math.SQRT2-1);return Oe=Math.min(Oe,.5*ge),Ke=Math.min(Ke,.5*we),this.lines([[ge-2*Oe,0],[Oe*v,0,Oe,Ke-Ke*v,Oe,Ke],[0,we-2*Ke],[0,Ke*v,-Oe*v,Ke,-Oe,Ke],[2*Oe-ge,0],[-Oe*v,0,-Oe,-Ke*v,-Oe,-Ke],[0,2*Ke-we],[0,-Ke*v,Oe*v,-Ke,Oe,-Ke]],N+Oe,K,[1,1],rt,!0),this},p.__private__.ellipse=p.ellipse=function(N,K,ge,we,Oe){if(isNaN(N)||isNaN(K)||isNaN(ge)||isNaN(we)||!vs(Oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*ge,rt=4/3*(Math.SQRT2-1)*we;return Ds(N+ge,K),xs(N+ge,K-rt,N+Ke,K-we,N,K-we),xs(N-Ke,K-we,N-ge,K-rt,N-ge,K),xs(N-ge,K+rt,N-Ke,K+we,N,K+we),xs(N+Ke,K+we,N+ge,K+rt,N+ge,K),$o(Oe),this},p.__private__.circle=p.circle=function(N,K,ge,we){if(isNaN(N)||isNaN(K)||isNaN(ge)||!vs(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,K,ge,ge,we)},p.setFont=function(N,K,ge){return ge&&(K=H(K,ge)),ot=_r(N,K,{disableWarning:!1}),this};var ea=p.__private__.getFont=p.getFont=function(){return xt[_r.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var N,K,ge={};for(N in Qe)if(Qe.hasOwnProperty(N))for(K in ge[N]=[],Qe[N])Qe[N].hasOwnProperty(K)&&ge[N].push(K);return ge},p.addFont=function(N,K,ge,we,Oe){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?Oe=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(ge=H(ge,we)),Oe=Oe||"Identity-H",Xo.call(this,N,K,ge,Oe)};var Tn,ta=n.lineWidth||.200025,no=p.__private__.getLineWidth=p.getLineWidth=function(){return ta},na=p.__private__.setLineWidth=p.setLineWidth=function(N){return ta=N,W(L(C(N))+" w"),this};p.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(N,K){if(N=N||[],K=K||0,isNaN(K)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(ge){return L(C(ge))}).join(" "),K=L(C(K)),W("["+N+"] "+K+" d"),this};var ia=p.__private__.getLineHeight=p.getLineHeight=function(){return Le*Tn};p.__private__.getLineHeight=p.getLineHeight=function(){return Le*Tn};var sa=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(Tn=N),this},wr=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Tn};sa(n.lineHeight);var hs=p.__private__.getHorizontalCoordinate=function(N){return C(N)},Si=p.__private__.getVerticalCoordinate=function(N){return x===P.ADVANCED?N:He[V].mediaBox.topRightY-He[V].mediaBox.bottomLeftY-C(N)},Za=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(N){return L(hs(N))},$s=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(N){return L(Si(N))},Ti=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return vn(Ti)},p.__private__.setStrokeColor=p.setDrawColor=function(N,K,ge,we){return Ti=si({ch1:N,ch2:K,ch3:ge,ch4:we,pdfColorType:"draw",precision:2}),W(Ti),this};var io=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return vn(io)},p.__private__.setFillColor=p.setFillColor=function(N,K,ge,we){return io=si({ch1:N,ch2:K,ch3:ge,ch4:we,pdfColorType:"fill",precision:2}),W(io),this};var Es=n.textColor||"0 g",so=p.__private__.getTextColor=p.getTextColor=function(){return vn(Es)};p.__private__.setTextColor=p.setTextColor=function(N,K,ge,we){return Es=si({ch1:N,ch2:K,ch3:ge,ch4:we,pdfColorType:"text",precision:3}),this};var Ar=n.charSpace,ro=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ar||0)};p.__private__.setCharSpace=p.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ar=N,this};var ra=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(N){var K=p.CapJoinStyles[N];if(K===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ra=K,W(K+" J"),this};var oo=0;p.__private__.setLineJoin=p.setLineJoin=function(N){var K=p.CapJoinStyles[N];if(K===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oo=K,W(K+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(L(C(N))+" M"),this},p.GState=Oc,p.setGState=function(N){(N=typeof N=="string"?ft[ut[N]]:er(null,N)).equals(Lt)||(W("/"+N.id+" gs"),Lt=N)};var er=function(N,K){if(!N||!ut[N]){var ge=!1;for(var we in ft)if(ft.hasOwnProperty(we)&&ft[we].equals(K)){ge=!0;break}if(ge)K=ft[we];else{var Oe="GS"+(Object.keys(ft).length+1).toString(10);ft[Oe]=K,K.id=Oe}return N&&(ut[N]=K.id),yt.publish("addGState",K),K}};p.addGState=function(N,K){return er(N,K),this},p.saveGraphicsState=function(){return W("q"),vt.push({key:ot,size:Le,color:Es}),this},p.restoreGraphicsState=function(){W("Q");var N=vt.pop();return ot=N.key,Le=N.size,Es=N.color,Lt=null,this},p.setCurrentTransformationMatrix=function(N){return W(N.toString()+" cm"),this},p.comment=function(N){return W("#"+N),this};var Sr=function(N,K){var ge=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(Ke){isNaN(Ke)||(ge=parseFloat(Ke))}});var we=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(Ke){isNaN(Ke)||(we=parseFloat(Ke))}});var Oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Oe},set:function(Ke){Oe=Ke.toString()}}),this},ao=function(N,K,ge,we){Sr.call(this,N,K),this.type="rect";var Oe=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Oe},set:function(rt){isNaN(rt)||(Oe=parseFloat(rt))}});var Ke=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(rt){isNaN(rt)||(Ke=parseFloat(rt))}}),this},kr=function(){this.page=st,this.currentPage=V,this.pages=Ae.slice(0),this.pagesContext=He.slice(0),this.x=Mt,this.y=gt,this.matrix=Ft,this.width=tr(V),this.height=Ri(V),this.outputDestination=Te,this.id="",this.objectNumber=-1};kr.prototype.restore=function(){st=this.page,V=this.currentPage,He=this.pagesContext,Ae=this.pages,Mt=this.x,gt=this.y,Ft=this.matrix,co(V,this.width),uo(V,this.height),Te=this.outputDestination};var lo=function(N,K,ge,we,Oe){qt.push(new kr),st=V=0,Ae=[],Mt=N,gt=K,Ft=Oe,Yi([ge,we])},Qa=function(N){if(Ct[N])qt.pop().restore();else{var K=new kr,ge="Xo"+(Object.keys(Dt).length+1).toString(10);K.id=ge,Ct[N]=ge,Dt[ge]=K,yt.publish("addFormObject",K),qt.pop().restore()}};for(var Ms in p.beginFormObject=function(N,K,ge,we,Oe){return lo(N,K,ge,we,Oe),this},p.endFormObject=function(N){return Qa(N),this},p.doFormObject=function(N,K){var ge=Dt[Ct[N]];return W("q"),W(K.toString()+" cm"),W("/"+ge.id+" Do"),W("Q"),this},p.getFormObject=function(N){var K=Dt[Ct[N]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},p.save=function(N,K){return N=N||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(ba(Zr(Ts()),N),typeof ba.unload=="function"&&Vt.setTimeout&&setTimeout(ba.unload,911),this):new Promise(function(ge,we){try{var Oe=ba(Zr(Ts()),N);typeof ba.unload=="function"&&Vt.setTimeout&&setTimeout(ba.unload,911),ge(Oe)}catch(Ke){we(Ke.message)}})},Ut.API)Ut.API.hasOwnProperty(Ms)&&(Ms==="events"&&Ut.API.events.length?function(N,K){var ge,we,Oe;for(Oe=K.length-1;Oe!==-1;Oe--)ge=K[Oe][0],we=K[Oe][1],N.subscribe.apply(N,[ge].concat(typeof we=="function"?[we]:we))}(yt,Ut.API.events):p[Ms]=Ut.API[Ms]);var tr=p.getPageWidth=function(N){return(He[N=N||V].mediaBox.topRightX-He[N].mediaBox.bottomLeftX)/Xe},co=p.setPageWidth=function(N,K){He[N].mediaBox.topRightX=K*Xe+He[N].mediaBox.bottomLeftX},Ri=p.getPageHeight=function(N){return(He[N=N||V].mediaBox.topRightY-He[N].mediaBox.bottomLeftY)/Xe},uo=p.setPageHeight=function(N,K){He[N].mediaBox.topRightY=K*Xe+He[N].mediaBox.bottomLeftY};return p.internal={pdfEscape:oi,getStyle:Ja,getFont:ea,getFontSize:Je,getCharSpace:ro,getTextColor:so,getLineHeight:ia,getLineHeightFactor:wr,getLineWidth:no,write:_e,getHorizontalCoordinate:hs,getVerticalCoordinate:Si,getCoordinateString:Za,getVerticalCoordinateString:$s,collections:{},newObject:un,newAdditionalObject:bi,newObjectDeferred:rn,newObjectDeferredBegin:Zt,getFilters:_n,putStream:yn,events:yt,scaleFactor:Xe,pageSize:{getWidth:function(){return tr(V)},setWidth:function(N){co(V,N)},getHeight:function(){return Ri(V)},setHeight:function(N){uo(V,N)}},encryptionOptions:h,encryption:Kn,getEncryptor:Ka,output:Qr,getNumberOfPages:Cn,pages:Ae,out:W,f2:R,f3:I,getPageInfo:Qo,getPageInfoByObjId:Wt,getCurrentPageInfo:Qs,getPDFVersion:y,Point:Sr,Rectangle:ao,Matrix:wt,hasHotfix:Zs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return tr(V)},set:function(N){co(V,N)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ri(V)},set:function(N){uo(V,N)},enumerable:!0,configurable:!0}),Ga.call(p,be),ot="F1",vr(s,t),yt.publish("initialized"),p}yl.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},yl.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yl.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},yl.prototype.processOwnerPassword=function(n,e){return rf(sf(e).substr(0,5),n)},yl.prototype.encryptor=function(n,e){var t=sf(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return rf(t,i)}},Oc.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Mn(n)!==Mn(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;i++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},Ut.API={events:[]},Ut.version="2.5.2";var li=Ut.API,Qf=1,qa=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ml=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(n){return n.toFixed(2)},Po=function(n){return n.toFixed(5)};li.__acroform__={};var ls=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Lg=function(n){return n*Qf},sr=function(n){var e=new j5,t=Tt.internal.getHeight(n)||0,i=Tt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Jt(i)),Number(Jt(t))],e},DA=li.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},xA=li.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},EA=li.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},di=li.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return EA(n,e-1)},fi=li.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return DA(n,e-1)},pi=li.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xA(n,e-1)},MA=li.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,s=n[0],r=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(s)||0,l.lowerLeft_Y=i(r+a)||0,l.upperRight_X=t(s+o)||0,l.upperRight_Y=i(r)||0,[Number(Jt(l.lowerLeft_X)),Number(Jt(l.lowerLeft_Y)),Number(Jt(l.upperRight_X)),Number(Jt(l.upperRight_Y))]},OA=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,i=of(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+Jt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=sr(n);return r.scope=n.scope,r.stream=e.join(`
`),r}},of=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(I){return I.split(`
`)}):s.map(function(I){return[I]});var r=t,o=Tt.internal.getHeight(n)||0;o=o<0?-o:o;var a=Tt.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(I,C,O){if(I+1<s.length){var q=C+" "+s[I+1][0];return Lu(q,n,O).width<=a-4}return!1};r++;e:for(;r>0;){e="",r--;var c,h,f=Lu("3",n,r).height,g=n.multiline?o-r:(o-f)/2,p=g+=2,_=0,y=0,S=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lu(e,n,r=12).width+", FieldWidth:"+a+`
`;break}for(var w="",P=0,x=0;x<s.length;x++)if(s.hasOwnProperty(x)){var F=!1;if(s[x].length!==1&&S!==s[x].length-1){if((f+2)*(P+2)+2>o)continue e;w+=s[x][S],F=!0,y=x,x--}else{w=(w+=s[x][S]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var U=parseInt(x),H=l(U,w,r),L=x>=s.length-1;if(H&&!L){w+=" ",S=0;continue}if(H||L){if(L)y=U;else if(n.multiline&&(f+2)*(P+2)+2>o)continue e}else{if(!n.multiline||(f+2)*(P+2)+2>o)continue e;y=U}}for(var k="",E=_;E<=y;E++){var R=s[E];if(n.multiline){if(E===y){k+=R[S]+" ",S=(S+1)%R.length;continue}if(E===_){k+=R[R.length-1]+" ";continue}}k+=R[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,h=Lu(k,n,r).width,n.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=Jt(c)+" "+Jt(p)+` Td
`,e+="("+qa(k)+`) Tj
`,e+=-Jt(c)+` 0 Td
`,p=-(r+2),h=0,_=F?y:y+1,P++,w=""}break}return i.text=e,i.fontSize=r,i},Lu=function(n,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},RA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FA=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},BA=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var i=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),Mn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[i]}},jA=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Js.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(RA)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qf=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new U5,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var r=i[s];r.objId=void 0,r.hasAnnotation&&FA(r,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(i,s){var r=!i;for(var o in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=MA(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Tt.createDefaultAppearanceStream(a),Mn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=OA(a);l.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var f="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var p=a.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var _=p[o];typeof _=="function"&&(_=_.call(s,a)),f+="/"+o+" "+_+" ",s.internal.acroformPlugin.xForms.indexOf(_)>=0||s.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(s,a)),f+="/"+o+" "+_,s.internal.acroformPlugin.xForms.indexOf(_)>=0||s.internal.acroformPlugin.xForms.push(_);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:a.objId}),s.internal.out("endobj")}r&&BA(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},B5=li.__acroform__.arrayToPdfArray=function(n,e,t){var i=function(o){return o};if(Array.isArray(n)){for(var s="[",r=0;r<n.length;r++)switch(r!==0&&(s+=" "),Mn(n[r])){case"boolean":case"number":case"object":s+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),s+="("+qa(i(n[r].toString()))+")"):s+=n[r].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wd=function(n,e,t){var i=function(s){return s};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+qa(i(n))+")"},hr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hr.prototype.toString=function(){return this.objId+" 0 R"},hr.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},hr.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],s=this[i];s&&(Array.isArray(s)?n.push({key:i,value:B5(s,this.objId,this.scope)}):s instanceof hr?(s.scope=this.scope,n.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:i,value:s}))}return n};var j5=function(){hr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ls(j5,hr);var U5=function(){hr.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+qa(t(n))+")"}},set:function(t){n=t}})};ls(U5,hr);var Js=function n(){hr.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!di(e,3)},set:function(w){w?this.F=fi(e,3):this.F=pi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(w){i=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(w){i[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(w){i[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(w){i[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(w){i[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof vh)return;r="FieldObject"+n.FieldNum++}var w=function(P){return P};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+qa(w(r))+")"},set:function(w){r=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(w){r=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Qf:c},set:function(w){c=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof vh||this instanceof Bo))return wd(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Pi?g:wd(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof Pi?w:w.substr(0,1)==="("?ml(w.substr(1,w.length-2)):ml(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi?ml(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Pi?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Pi?p:wd(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof Pi?w:w.substr(0,1)==="("?ml(w.substr(1,w.length-2)):ml(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi?ml(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Pi?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(w){w=!!w,y=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(w){_=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,1)},set:function(w){w?this.Ff=fi(this.Ff,1):this.Ff=pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,2)},set:function(w){w?this.Ff=fi(this.Ff,2):this.Ff=pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,3)},set:function(w){w?this.Ff=fi(this.Ff,3):this.Ff=pi(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');S=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(S){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};ls(Js,hr);var Ta=function(){Js.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return B5(e,this.objId,this.scope)},set:function(t){var i,s;s=[],typeof(i=t)=="string"&&(s=function(r,o,a){a||(a=1);for(var l,c=[];l=o.exec(r);)c.push(l[a]);return c}(i,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,18)},set:function(t){t?this.Ff=fi(this.Ff,18):this.Ff=pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=fi(this.Ff,19):this.Ff=pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,20)},set:function(t){t?(this.Ff=fi(this.Ff,20),e.sort()):this.Ff=pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,22)},set:function(t){t?this.Ff=fi(this.Ff,22):this.Ff=pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(t){t?this.Ff=fi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,27)},set:function(t){t?this.Ff=fi(this.Ff,27):this.Ff=pi(this.Ff,27)}}),this.hasAppearanceStream=!1};ls(Ta,Js);var Da=function(){Ta.call(this),this.fontName="helvetica",this.combo=!1};ls(Da,Ta);var xa=function(){Da.call(this),this.combo=!0};ls(xa,Da);var yc=function(){xa.call(this),this.edit=!0};ls(yc,xa);var Pi=function(){Js.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,15)},set:function(t){t?this.Ff=fi(this.Ff,15):this.Ff=pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,16)},set:function(t){t?this.Ff=fi(this.Ff,16):this.Ff=pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,17)},set:function(t){t?this.Ff=fi(this.Ff,17):this.Ff=pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(t){t?this.Ff=fi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,s=[];for(i in s.push("<<"),e)s.push("/"+i+" ("+qa(t(e[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){Mn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ls(Pi,Js);var wc=function(){Pi.call(this),this.pushButton=!0};ls(wc,Pi);var Ea=function(){Pi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ls(Ea,Pi);var vh=function(){var n,e;Js.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,o=[];for(r in o.push("<<"),i)o.push("/"+r+" ("+qa(s(i[r]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Mn(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ls(vh,Js),Ea.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ea.prototype.createOption=function(n){var e=new vh;return e.Parent=this,e.optionName=n,this.Kids.push(e),UA.call(this.scope,e),e};var Ac=function(){Pi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};ls(Ac,Pi);var Bo=function(){Js.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,13)},set:function(e){e?this.Ff=fi(this.Ff,13):this.Ff=pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,21)},set:function(e){e?this.Ff=fi(this.Ff,21):this.Ff=pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(e){e?this.Ff=fi(this.Ff,23):this.Ff=pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,24)},set:function(e){e?this.Ff=fi(this.Ff,24):this.Ff=pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,25)},set:function(e){e?this.Ff=fi(this.Ff,25):this.Ff=pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(e){e?this.Ff=fi(this.Ff,26):this.Ff=pi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ls(Bo,Js);var Sc=function(){Bo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,14)},set:function(n){n?this.Ff=fi(this.Ff,14):this.Ff=pi(this.Ff,14)}}),this.password=!0};ls(Sc,Bo);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),r=of(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Jt(Tt.internal.getWidth(n))+" "+Jt(Tt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+Jt(r.fontSize)+" Tf "+s),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=sr(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=[],r=Tt.internal.getHeight(n),o=Tt.internal.getWidth(n),a=of(n,n.caption);return s.push("1 g"),s.push("0 0 "+Jt(o)+" "+Jt(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Jt(o-1)+" "+Jt(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+Jt(a.fontSize)+" Tf "+i),s.push(a.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(Tt.internal.getWidth(n))+" "+Jt(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Circle.YesNormal,e.D[n]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=sr(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Tt.internal.Bezier_C,r=Number((i*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Po(Tt.internal.getWidth(n)/2)+" "+Po(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Tt.internal.Bezier_C).toFixed(5)),o=Number((i*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Po(Tt.internal.getWidth(n)/2)+" "+Po(Tt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Po(Tt.internal.getWidth(n)/2)+" "+Po(Tt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=[],i=Tt.internal.getWidth(n)<=Tt.internal.getHeight(n)?Tt.internal.getWidth(n)/4:Tt.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Po(Tt.internal.getWidth(n)/2)+" "+Po(Tt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Tt.RadioButton.Cross.YesNormal,e.D[n]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=sr(n);e.scope=n.scope;var t=[],i=Tt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Jt(Tt.internal.getWidth(n)-2)+" "+Jt(Tt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Jt(i.x1.x)+" "+Jt(i.x1.y)+" m"),t.push(Jt(i.x2.x)+" "+Jt(i.x2.y)+" l"),t.push(Jt(i.x4.x)+" "+Jt(i.x4.y)+" m"),t.push(Jt(i.x3.x)+" "+Jt(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=Tt.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Jt(Tt.internal.getWidth(n))+" "+Jt(Tt.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Jt(Tt.internal.getWidth(n)-2)+" "+Jt(Tt.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Jt(t.x1.x)+" "+Jt(t.x1.y)+" m"),i.push(Jt(t.x2.x)+" "+Jt(t.x2.y)+" l"),i.push(Jt(t.x4.x)+" "+Jt(t.x4.y)+" m"),i.push(Jt(t.x3.x)+" "+Jt(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=sr(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(Tt.internal.getWidth(n))+" "+Jt(Tt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Tt.internal.getWidth(n),t=Tt.internal.getHeight(n),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},Tt.internal.getWidth=function(n){var e=0;return Mn(n)==="object"&&(e=Lg(n.Rect[2])),e},Tt.internal.getHeight=function(n){var e=0;return Mn(n)==="object"&&(e=Lg(n.Rect[3])),e};var UA=li.addField=function(n){if(jA(this,n),!(n instanceof Js))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};li.AcroFormChoiceField=Ta,li.AcroFormListBox=Da,li.AcroFormComboBox=xa,li.AcroFormEditBox=yc,li.AcroFormButton=Pi,li.AcroFormPushButton=wc,li.AcroFormRadioButton=Ea,li.AcroFormCheckBox=Ac,li.AcroFormTextField=Bo,li.AcroFormPasswordField=Sc,li.AcroFormAppearance=Tt,li.AcroForm={ChoiceField:Ta,ListBox:Da,ComboBox:xa,EditBox:yc,Button:Pi,PushButton:wc,RadioButton:Ea,CheckBox:Ac,TextField:Bo,PasswordField:Sc,Appearance:Tt},Ut.AcroForm={ChoiceField:Ta,ListBox:Da,ComboBox:xa,EditBox:yc,Button:Pi,PushButton:wc,RadioButton:Ea,CheckBox:Ac,TextField:Bo,PasswordField:Sc,Appearance:Tt};var zA=Ut.AcroForm;function z5(n){return n.reduce(function(e,t,i){return e[t]=i,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(I,C){var O,q,Y,$,Z,X=e;if((C=C||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(H(I))for(Z in t)for(Y=t[Z],O=0;O<Y.length;O+=1){for($=!0,q=0;q<Y[O].length;q+=1)if(Y[O][q]!==void 0&&Y[O][q]!==I[q]){$=!1;break}if($===!0){X=Z;break}}else for(Z in t)for(Y=t[Z],O=0;O<Y.length;O+=1){for($=!0,q=0;q<Y[O].length;q+=1)if(Y[O][q]!==void 0&&Y[O][q]!==I.charCodeAt(q)){$=!1;break}if($===!0){X=Z;break}}return X===e&&C!==e&&(X=C),X},s=function I(C){for(var O=this.internal.write,q=this.internal.putStream,Y=(0,this.internal.getFilters)();Y.indexOf("FlateEncode")!==-1;)Y.splice(Y.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:C.width}),$.push({key:"Height",value:C.height}),C.colorSpace===S.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===S.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var Z="",X=0,Q=C.transparency.length;X<Q;X++)Z+=C.transparency[X]+" "+C.transparency[X]+" ";$.push({key:"Mask",value:"["+Z+"]"})}C.sMask!==void 0&&$.push({key:"SMask",value:C.objectId+1+" 0 R"});var re=C.filter!==void 0?["/"+C.filter]:void 0;if(q({data:C.data,additionalKeyValues:$,alreadyAppliedFilters:re,objectId:C.objectId}),O("endobj"),"sMask"in C&&C.sMask!==void 0){var me="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,B={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:me,data:C.sMask};"filter"in C&&(B.filter=C.filter),I.call(this,B)}if(C.colorSpace===S.INDEXED){var V=this.internal.newObject();q({data:k(new Uint8Array(C.palette)),objectId:V}),O("endobj")}},r=function(){var I=this.internal.collections.addImage_images;for(var C in I)s.call(this,I[C])},o=function(){var I,C=this.internal.collections.addImage_images,O=this.internal.write;for(var q in C)O("/I"+(I=C[q]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(I){return typeof n["process"+I.toUpperCase()]=="function"},f=function(I){return Mn(I)==="object"&&I.nodeType===1},g=function(I,C){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var O=""+I.getAttribute("src");if(O.indexOf("data:image/")===0)return _c(unescape(O).split("base64,").pop());var q=n.loadFile(O,!0);if(q!==void 0)return q}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var Y;switch(C){case"PNG":Y="image/png";break;case"WEBP":Y="image/webp";break;case"JPEG":case"JPG":default:Y="image/jpeg"}return _c(I.toDataURL(Y,1).split("base64,").pop())}},p=function(I){var C=this.internal.collections.addImage_images;if(C){for(var O in C)if(I===C[O].alias)return C[O]}},_=function(I,C,O){return I||C||(I=-96,C=-96),I<0&&(I=-1*O.width*72/I/this.internal.scaleFactor),C<0&&(C=-1*O.height*72/C/this.internal.scaleFactor),I===0&&(I=C*O.width/O.height),C===0&&(C=I*O.height/O.width),[I,C]},y=function(I,C,O,q,Y,$){var Z=_.call(this,O,q,Y),X=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,re=l.call(this);if(O=Z[0],q=Z[1],re[Y.index]=Y,$){$*=Math.PI/180;var me=Math.cos($),B=Math.sin($),V=function(te){return te.toFixed(4)},G=[V(me),V(B),V(-1*B),V(me),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,X(I),Q(C+q),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([X(O),"0","0",X(q),"0","0","cm"].join(" "))):this.internal.write([X(O),"0","0",X(q),X(I),Q(C+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Y.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=n.__addimage__.sHashCode=function(I){var C,O,q=0;if(typeof I=="string")for(O=I.length,C=0;C<O;C++)q=(q<<5)-q+I.charCodeAt(C),q|=0;else if(H(I))for(O=I.byteLength/2,C=0;C<O;C++)q=(q<<5)-q+I[C],q|=0;return q},x=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var C=!0;return I.length===0&&(C=!1),I.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(C=!1),C},F=n.__addimage__.extractImageFromDataUrl=function(I){var C=(I=I||"").split("base64,"),O=null;if(C.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(q)&&(O={mimeType:q[1],charset:q[2],data:C[1]})}return O},U=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(I){return U()&&I instanceof ArrayBuffer};var H=n.__addimage__.isArrayBufferView=function(I){return U()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},L=n.__addimage__.binaryStringToUint8Array=function(I){for(var C=I.length,O=new Uint8Array(C),q=0;q<C;q++)O[q]=I.charCodeAt(q);return O},k=n.__addimage__.arrayBufferToBinaryString=function(I){for(var C="",O=H(I)?I:new Uint8Array(I),q=0;q<O.length;q+=8192)C+=String.fromCharCode.apply(null,O.subarray(q,q+8192));return C};n.addImage=function(){var I,C,O,q,Y,$,Z,X,Q;if(typeof arguments[1]=="number"?(C=e,O=arguments[1],q=arguments[2],Y=arguments[3],$=arguments[4],Z=arguments[5],X=arguments[6],Q=arguments[7]):(C=arguments[1],O=arguments[2],q=arguments[3],Y=arguments[4],$=arguments[5],Z=arguments[6],X=arguments[7],Q=arguments[8]),Mn(I=arguments[0])==="object"&&!f(I)&&"imageData"in I){var re=I;I=re.imageData,C=re.format||C||e,O=re.x||O||0,q=re.y||q||0,Y=re.w||re.width||Y,$=re.h||re.height||$,Z=re.alias||Z,X=re.compression||X,Q=re.rotation||re.angle||Q}var me=this.internal.getFilters();if(X===void 0&&me.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(O)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var B=E.call(this,I,C,Z,X);return y.call(this,O,q,Y,$,B,Q),this};var E=function(I,C,O,q){var Y,$,Z;if(typeof I=="string"&&i(I)===e){I=unescape(I);var X=R(I,!1);(X!==""||(X=n.loadFile(I,!0))!==void 0)&&(I=X)}if(f(I)&&(I=g(I,C)),C=i(I,C),!h(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((Z=O)==null||Z.length===0)&&(O=function(Q){return typeof Q=="string"||H(Q)?P(Q):H(Q.data)?P(Q.data):null}(I)),(Y=p.call(this,O))||(U()&&(I instanceof Uint8Array||C==="RGBA"||($=I,I=L(I))),Y=this["process"+C.toUpperCase()](I,c.call(this),O,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in n.image_compression?Q:w.NONE}(q),$)),!Y)throw new Error("An unknown error occurred whilst processing the image.");return Y},R=n.__addimage__.convertBase64ToBinaryString=function(I,C){var O;C=typeof C!="boolean"||C;var q,Y="";if(typeof I=="string"){q=(O=F(I))!==null?O.data:I;try{Y=_c(q)}catch($){if(C)throw x(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};n.getImageProperties=function(I){var C,O,q="";if(f(I)&&(I=g(I)),typeof I=="string"&&i(I)===e&&((q=R(I,!1))===""&&(q=n.loadFile(I)||""),I=q),O=i(I),!h(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!U()||I instanceof Uint8Array||(I=L(I)),!(C=this["process"+O.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=O,C}})(Ut.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ut.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,s,r,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,h=!1,f=0;f<c.length&&!h;f++)switch((i=c[f]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){i=c[g];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(y.objId),P=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+p(w(i.contents))+")",r+=" /Popup "+S.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+p(w(P))+") >>",y.content=r;var x=y.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+x,i.open&&(r+=" /Open true"),r+=" >>",S.content=r,this.internal.write(y.objId,"0 R",S.objId,"0 R");break;case"freetext":s="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var F=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(_(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(i.options.name){var U=this.annotations._nameMap[i.options.name];i.options.pageNumber=U.page,i.options.top=U.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var H=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+H+" "+i.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,s,r,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(i),w:l(t+s),h:c(i+r)},options:o,type:"link"})},n.textWithLink=function(t,i,s,r){var o,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){a=r.maxWidth;var h=this.splitTextToSize(t,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(t,i,s,r),s+=.2*c,r.align==="center"&&(i-=l/2),r.align==="right"&&(i-=l),this.link(i,s-c,a,o,r),l},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(Ut.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=n.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&r(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&s.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&r(y)&&e[y.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&r(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&r(y)&&e[y.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&r(y)&&e[y.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(y){var S=0,w=t,P="",x=0;for(S=0;S<y.length;S+=1)w[y.charCodeAt(S)]!==void 0?(x++,typeof(w=w[y.charCodeAt(S)])=="number"&&(P+=String.fromCharCode(w),w=t,x=0),S===y.length-1&&(w=t,P+=y.charAt(S-(x-1)),S-=x-1,x=0)):(w=t,P+=y.charAt(S-x),S-=x,x=0);return P};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&i[y.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(y,S,w){return o(y)?r(y)===!1?-1:!c(y)||!o(S)&&!o(w)||!o(w)&&a(S)||a(y)&&!o(S)||a(y)&&l(S)||a(y)&&a(S)?0:h(y)&&o(S)&&!a(S)&&o(w)&&c(w)?3:a(y)||!o(w)?1:2:-1},p=function(y){var S=0,w=0,P=0,x="",F="",U="",H=(y=y||"").split("\\s+"),L=[];for(S=0;S<H.length;S+=1){for(L.push(""),w=0;w<H[S].length;w+=1)x=H[S][w],F=H[S][w-1],U=H[S][w+1],o(x)?(P=g(x,F,U),L[S]+=P!==-1?String.fromCharCode(e[x.charCodeAt(0)][P]):x):L[S]+=x;L[S]=f(L[S])}return L.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var y,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(S)){var P=0;for(w=[],P=0;P<S.length;P+=1)Array.isArray(S[P])?w.push([p(S[P][0]),S[P][1],S[P][2]]):w.push([p(S[P])]);y=w}else y=p(S);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",_])}(Ut.API),Ut.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(a){r=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var s;if((t=t||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ut.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(y){_=y}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,p=0,_=0,y=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,F){return x.concat(S.splitTextToSize(F,w))},[])):l=Array.isArray(l)?l:[l];for(var P=0;P<l.length;P++)p<(y=this.getStringUnitWidth(l[P],{font:f})*h)&&(p=y);return p!==0&&(_=l.length),{w:p/=g,h:Math.max((_*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,p&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,h,f,g){if(i.call(this),!h)throw new Error("No data for PDF table.");var p,_,y,S,w=[],P=[],x=[],F={},U={},H=[],L=[],k=(g=g||{}).autoSize||!1,E=g.printHeaders!==!1,R=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,I=g.margins||Object.assign({width:this.getPageWidth()},e),C=typeof g.padding=="number"?g.padding:3,O=g.headerBackgroundColor||"#c8c8c8",q=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=q,this.setFontSize(R),f==null)P=w=Object.keys(h[0]),x=w.map(function(){return"left"});else if(Array.isArray(f)&&Mn(f[0])==="object")for(w=f.map(function(re){return re.name}),P=f.map(function(re){return re.prompt||re.name||""}),x=f.map(function(re){return re.align||"left"}),p=0;p<f.length;p+=1)U[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(P=w=f,x=w.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<w.length;p+=1){for(F[S=w[p]]=h.map(function(re){return re[S]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(P[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=F[S],this.setFont(void 0,"normal"),y=0;y<_.length;y+=1)H.push(this.getTextDimensions(_[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[S]=Math.max.apply(null,H)+C+C,H=[]}if(E){var Y={};for(p=0;p<w.length;p+=1)Y[w[p]]={},Y[w[p]].text=P[p],Y[w[p]].align=x[p];var $=a.call(this,Y,U);L=w.map(function(re){return new r(l,c,U[re],$,Y[re].text,void 0,Y[re].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var Z=f.reduce(function(re,me){return re[me.name]=me.align,re},{});for(p=0;p<h.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:h[p]},this);var X=a.call(this,h[p],U);for(y=0;y<w.length;y+=1){var Q=h[p][w[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:y,data:Q},this),o.call(this,new r(l,c,U[w[y]],X,Q,p+2,Z[w[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/g+h+h},this).reduce(function(p,_){return Math.max(p,_)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,g.push(h)),h.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(_)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Ut.API);var H5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},q5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],af=z5(q5),V5=[100,200,300,400,500,600,700,800,900],HA=z5(V5);function lf(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(r){return H5[r=r||"normal"]?r:"normal"}(n.style),i=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(r){return typeof af[r=r||"normal"]=="number"?r:"normal"}(n.stretch);return{family:e,style:t,weight:i,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,i].join(" ")}}}function Cg(n,e,t,i){var s;for(s=t;s>=0&&s<e.length;s+=i)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=i)if(n[e[s]])return n[e[s]]}var qA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Tg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dg(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function VA(n,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},qA,t.genericFontFamilies||{}),r=null,o=null,a=0;a<e.length;++a)if(s[(r=lf(e[a])).family]&&(r.family=s[r.family]),n.hasOwnProperty(r.family)){o=n[r.family];break}if(!(o=o||n[i]))throw new Error("Could not find a font-family for the rule '"+Dg(r)+"' and default family '"+i+"'.");if(o=function(l,c){if(c[l])return c[l];var h=af[l],f=h<=af.normal?-1:1,g=Cg(c,q5,h,f);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(r.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=H5[l],f=0;f<h.length;++f)if(c[h[f]])return c[h[f]];throw new Error("Could not find a matching font-style for "+l)}(r.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=HA[l],f=Cg(c,V5,h,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Dg(r)+"'.");return o}function xg(n){return n.trimLeft()}function WA(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function GA(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Cu,Eg,Mg,Ad=["times"];(function(n){var e,t,i,s,r,o,a,l,c,h=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new l,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var f=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=B;Object.defineProperty(this,"pdf",{get:function(){return V}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(de){G=!!de}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(de){te=!!de}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(de){isNaN(de)||(ae=de)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(de){isNaN(de)||(fe=de)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(de){var W;typeof de=="number"?W=[de,de,de,de]:((W=new Array(4))[0]=de[0],W[1]=de.length>=2?de[1]:W[0],W[2]=de.length>=3?de[2]:W[0],W[3]=de.length>=4?de[3]:W[1]),c.margin=W}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(de){ve=de}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(de){he=de}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(de){ye=de}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(de){de instanceof h&&(c=de)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(de){c.path=de}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(de){Ae=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var W;W=g(de),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var W=g(de);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var Me=null;function Te(de,W){if(Me===null){var _e=function(Ie){var be=[];return Object.keys(Ie).forEach(function(Le){Ie[Le].forEach(function(We){var Je=null;switch(We){case"bold":Je={family:Le,weight:"bold"};break;case"italic":Je={family:Le,style:"italic"};break;case"bolditalic":Je={family:Le,weight:"bold",style:"italic"};break;case"":case"normal":Je={family:Le}}Je!==null&&(Je.ref={name:Le,style:We},be.push(Je))})}),be}(de.getFontList());Me=function(Ie){for(var be={},Le=0;Le<Ie.length;++Le){var We=lf(Ie[Le]),Je=We.family,Ue=We.stretch,Ye=We.style,ht=We.weight;be[Je]=be[Je]||{},be[Je][Ue]=be[Je][Ue]||{},be[Je][Ue][Ye]=be[Je][Ue][Ye]||{},be[Je][Ue][Ye][ht]=We}return be}(_e.concat(W))}return Me}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(de){Me=null,De=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var W;if(this.ctx.font=de,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var _e=W[1],Ie=(W[2],W[3]),be=W[4],Le=(W[5],W[6]),We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(We==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var Je=function(qe){var ot,Xe,Mt=[],gt=qe.trim();if(gt==="")return Ad;if(gt in Tg)return[Tg[gt]];for(;gt!=="";){switch(Xe=null,ot=(gt=xg(gt)).charAt(0)){case'"':case"'":Xe=WA(gt.substring(1),ot);break;default:Xe=GA(gt)}if(Xe===null||(Mt.push(Xe[0]),(gt=xg(Xe[1]))!==""&&gt.charAt(0)!==","))return Ad;gt=gt.replace(/^,/,"")}return Mt}(Le);if(this.fontFaces){var Ue=VA(Te(this.pdf,this.fontFaces),Je.map(function(qe){return{family:qe,stretch:"normal",weight:Ie,style:_e}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var Ye="";(Ie==="bold"||parseInt(Ie,10)>=700||_e==="bold")&&(Ye="bold"),_e==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var ht="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ze=0;ze<Je.length;ze++){if(this.pdf.internal.getFont(Je[ze],Ye,{noFallback:!0,disableWarning:!0})!==void 0){ht=Je[ze];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(Je[ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=Je[ze],Ye="bold";else if(this.pdf.internal.getFont(Je[ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=Je[ze],Ye="normal";break}}if(ht===""){for(var Ge=0;Ge<Je.length;Ge++)if(it[Je[Ge]]){ht=it[Je[Ge]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};f.prototype.setLineDash=function(B){this.lineDash=B},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){F.call(this,"fill",!1)},f.prototype.stroke=function(){F.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(B,V){if(isNaN(B)||isNaN(V))throw Un.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(B,V));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(B,V)},f.prototype.closePath=function(){var B=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Mn(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){B=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},f.prototype.lineTo=function(B,V){if(isNaN(B)||isNaN(V))throw Un.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(B,V));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},f.prototype.quadraticCurveTo=function(B,V,G,te){if(isNaN(G)||isNaN(te)||isNaN(B)||isNaN(V))throw Un.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new o(G,te)),fe=this.ctx.transform.applyToPoint(new o(B,V));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},f.prototype.bezierCurveTo=function(B,V,G,te,ae,fe){if(isNaN(ae)||isNaN(fe)||isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te))throw Un.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(ae,fe)),he=this.ctx.transform.applyToPoint(new o(B,V)),ye=this.ctx.transform.applyToPoint(new o(G,te));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ye.x,y2:ye.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},f.prototype.arc=function(B,V,G,te,ae,fe){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te)||isNaN(ae))throw Un.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(B,V));B=ve.x,V=ve.y;var he=this.ctx.transform.applyToPoint(new o(0,G)),ye=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(he.x-ye.x,2)+Math.pow(he.y-ye.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:B,y:V,radius:G,startAngle:te,endAngle:ae,counterclockwise:fe})},f.prototype.arcTo=function(B,V,G,te,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(B,V,G,te){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te))throw Un.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,V),this.lineTo(B+G,V),this.lineTo(B+G,V+te),this.lineTo(B,V+te),this.lineTo(B,V),this.lineTo(B+G,V),this.lineTo(B,V)},f.prototype.fillRect=function(B,V,G,te){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te))throw Un.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,V,G,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(B,V,G,te){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te))throw Un.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(B,V,G,te),this.stroke())},f.prototype.clearRect=function(B,V,G,te){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te))throw Un.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,V,G,te))},f.prototype.save=function(B){B=typeof B!="boolean"||B;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(V),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(B){var V,G,te,ae;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))V=0,G=0,te=0,ae=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(fe!==null)V=parseInt(fe[1]),G=parseInt(fe[2]),te=parseInt(fe[3]),ae=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)V=parseInt(fe[1]),G=parseInt(fe[2]),te=parseInt(fe[3]),ae=parseFloat(fe[4]);else{if(ae=1,typeof B=="string"&&B.charAt(0)!=="#"){var ve=new O5(B);B=ve.ok?ve.toHex():"#000000"}B.length===4?(V=B.substring(1,2),V+=V,G=B.substring(2,3),G+=G,te=B.substring(3,4),te+=te):(V=B.substring(1,3),G=B.substring(3,5),te=B.substring(5,7)),V=parseInt(V,16),G=parseInt(G,16),te=parseInt(te,16)}}return{r:V,g:G,b:te,a:ae,style:B}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(B,V,G,te){if(isNaN(V)||isNaN(G)||typeof B!="string")throw Un.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ae=X(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;C.call(this,{text:B,x:V,y:G,scale:fe,angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(B,V,G,te){if(isNaN(V)||isNaN(G)||typeof B!="string")throw Un.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){te=isNaN(te)?void 0:te;var ae=X(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;C.call(this,{text:B,x:V,y:G,scale:fe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(B){if(typeof B!="string")throw Un.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,G=this.pdf.internal.scaleFactor,te=V.internal.getFontSize(),ae=V.getStringUnitWidth(B)*te/V.internal.scaleFactor,fe=function(ve){var he=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new fe({width:ae*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(B,V){if(isNaN(B)||isNaN(V))throw Un.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(B,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(B){if(isNaN(B))throw Un.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new l(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.translate=function(B,V){if(isNaN(B)||isNaN(V))throw Un.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,B,V);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(B,V,G,te,ae,fe){if(isNaN(B)||isNaN(V)||isNaN(G)||isNaN(te)||isNaN(ae)||isNaN(fe))throw Un.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(B,V,G,te,ae,fe);this.ctx.transform=this.ctx.transform.multiply(ve)},f.prototype.setTransform=function(B,V,G,te,ae,fe){B=isNaN(B)?1:B,V=isNaN(V)?0:V,G=isNaN(G)?0:G,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(B,V,G,te,ae,fe)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(B,V,G,te,ae,fe,ve,he,ye){var Ae=this.pdf.getImageProperties(B),Me=1,Te=1,De=1,de=1;te!==void 0&&he!==void 0&&(De=he/te,de=ye/ae,Me=Ae.width/te*he/te,Te=Ae.height/ae*ye/ae),fe===void 0&&(fe=V,ve=G,V=0,G=0),te!==void 0&&he===void 0&&(he=te,ye=ae),te===void 0&&he===void 0&&(he=Ae.width,ye=Ae.height);for(var W,_e=this.ctx.transform.decompose(),Ie=X(_e.rotate.shx),be=new l,Le=(be=(be=(be=be.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale)).applyToRectangle(new a(fe-V*De,ve-G*de,te*Me,ae*Te)),We=S.call(this,Le),Je=[],Ue=0;Ue<We.length;Ue+=1)Je.indexOf(We[Ue])===-1&&Je.push(We[Ue]);if(x(Je),this.autoPaging)for(var Ye=Je[0],ht=Je[Je.length-1],it=Ye;it<ht+1;it++){this.pdf.setPage(it);var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=it===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=it===1?0:qe+(it-2)*ot;if(this.ctx.clip_path.length!==0){var Mt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(W,this.posX+this.margin[3],-Xe+Ge+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=Mt}var gt=JSON.parse(JSON.stringify(Le));gt=P([gt],this.posX+this.margin[3],-Xe+Ge+this.ctx.prevPageLastElemOffset)[0];var Ft=(it>Ye||it<ht)&&y.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,ot,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,Ie),Ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,Ie)};var S=function(B,V,G){var te=[];V=V||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":te.push(Math.floor((B.y+ae)/G)+1);break;case"arc":te.push(Math.floor((B.y+ae-B.radius)/G)+1),te.push(Math.floor((B.y+ae+B.radius)/G)+1);break;case"qct":var fe=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);te.push(Math.floor((fe.y+ae)/G)+1),te.push(Math.floor((fe.y+fe.h+ae)/G)+1);break;case"bct":var ve=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);te.push(Math.floor((ve.y+ae)/G)+1),te.push(Math.floor((ve.y+ve.h+ae)/G)+1);break;case"rect":te.push(Math.floor((B.y+ae)/G)+1),te.push(Math.floor((B.y+B.h+ae)/G)+1)}for(var he=0;he<te.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<te[he];)w.call(this);return te},w=function(){var B=this.fillStyle,V=this.strokeStyle,G=this.font,te=this.lineCap,ae=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=V,this.font=G,this.lineCap=te,this.lineWidth=ae,this.lineJoin=fe},P=function(B,V,G){for(var te=0;te<B.length;te++)switch(B[te].type){case"bct":B[te].x2+=V,B[te].y2+=G;case"qct":B[te].x1+=V,B[te].y1+=G;case"mt":case"lt":case"arc":default:B[te].x+=V,B[te].y+=G}return B},x=function(B){return B.sort(function(V,G){return V-G})},F=function(B,V){for(var G,te,ae=this.fillStyle,fe=this.strokeStyle,ve=this.lineCap,he=this.lineWidth,ye=Math.abs(he*this.ctx.transform.scaleX),Ae=this.lineJoin,Me=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),De=[],de=0;de<Te.length;de++)if(Te[de].x!==void 0)for(var W=S.call(this,Te[de]),_e=0;_e<W.length;_e+=1)De.indexOf(W[_e])===-1&&De.push(W[_e]);for(var Ie=0;Ie<De.length;Ie++)for(;this.pdf.internal.getNumberOfPages()<De[Ie];)w.call(this);if(x(De),this.autoPaging)for(var be=De[0],Le=De[De.length-1],We=be;We<Le+1;We++){this.pdf.setPage(We),this.fillStyle=ae,this.strokeStyle=fe,this.lineCap=ve,this.lineWidth=ye,this.lineJoin=Ae;var Je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=We===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=We===1?0:Ye+(We-2)*ht;if(this.ctx.clip_path.length!==0){var ze=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(G,this.posX+this.margin[3],-it+Ue+this.ctx.prevPageLastElemOffset),U.call(this,B,!0),this.path=ze}if(te=JSON.parse(JSON.stringify(Me)),this.path=P(te,this.posX+this.margin[3],-it+Ue+this.ctx.prevPageLastElemOffset),V===!1||We===0){var Ge=(We>be||We<Le)&&y.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,ht,null).clip().discardPath()),U.call(this,B,V),Ge&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=ye,U.call(this,B,V),this.lineWidth=he;this.path=Me},U=function(B,V){if((B!=="stroke"||V||!_.call(this))&&(B==="stroke"||V||!p.call(this))){for(var G,te,ae=[],fe=this.path,ve=0;ve<fe.length;ve++){var he=fe[ve];switch(he.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:he,deltas:[],abs:[]});break;case"lt":var ye=ae.length;if(fe[ve-1]&&!isNaN(fe[ve-1].x)&&(G=[he.x-fe[ve-1].x,he.y-fe[ve-1].y],ye>0)){for(;ye>=0;ye--)if(ae[ye-1].close!==!0&&ae[ye-1].begin!==!0){ae[ye-1].deltas.push(G),ae[ye-1].abs.push(he);break}}break;case"bct":G=[he.x1-fe[ve-1].x,he.y1-fe[ve-1].y,he.x2-fe[ve-1].x,he.y2-fe[ve-1].y,he.x-fe[ve-1].x,he.y-fe[ve-1].y],ae[ae.length-1].deltas.push(G);break;case"qct":var Ae=fe[ve-1].x+2/3*(he.x1-fe[ve-1].x),Me=fe[ve-1].y+2/3*(he.y1-fe[ve-1].y),Te=he.x+2/3*(he.x1-he.x),De=he.y+2/3*(he.y1-he.y),de=he.x,W=he.y;G=[Ae-fe[ve-1].x,Me-fe[ve-1].y,Te-fe[ve-1].x,De-fe[ve-1].y,de-fe[ve-1].x,W-fe[ve-1].y],ae[ae.length-1].deltas.push(G);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(he)}}te=V?null:B==="stroke"?"stroke":"fill";for(var _e=!1,Ie=0;Ie<ae.length;Ie++)if(ae[Ie].arc)for(var be=ae[Ie].abs,Le=0;Le<be.length;Le++){var We=be[Le];We.type==="arc"?k.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,V,!_e):O.call(this,We.x,We.y),_e=!0}else if(ae[Ie].close===!0)this.pdf.internal.out("h"),_e=!1;else if(ae[Ie].begin!==!0){var Je=ae[Ie].start.x,Ue=ae[Ie].start.y;q.call(this,ae[Ie].deltas,Je,Ue),_e=!0}te&&E.call(this,te),V&&R.call(this)}},H=function(B){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-G;case"top":return B+V-G;case"hanging":return B+V-2*G;case"middle":return B+V/2-G;case"ideographic":return B;case"alphabetic":default:return B}},L=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(V,G){this.colorStops.push([V,G])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(B,V,G,te,ae,fe,ve,he,ye){for(var Ae=$.call(this,G,te,ae,fe),Me=0;Me<Ae.length;Me++){var Te=Ae[Me];Me===0&&(ye?I.call(this,Te.x1+B,Te.y1+V):O.call(this,Te.x1+B,Te.y1+V)),Y.call(this,B,V,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}he?R.call(this):E.call(this,ve)},E=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(B,V){this.pdf.internal.out(t(B)+" "+i(V)+" m")},C=function(B){var V;switch(B.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var G=this.pdf.getTextDimensions(B.text),te=H.call(this,B.y),ae=L.call(this,te)-G.h,fe=this.ctx.transform.applyToPoint(new o(B.x,te)),ve=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var ye,Ae,Me,Te=this.ctx.transform.applyToRectangle(new a(B.x,te,G.w,G.h)),De=he.applyToRectangle(new a(B.x,ae,G.w,G.h)),de=S.call(this,De),W=[],_e=0;_e<de.length;_e+=1)W.indexOf(de[_e])===-1&&W.push(de[_e]);if(x(W),this.autoPaging)for(var Ie=W[0],be=W[W.length-1],Le=Ie;Le<be+1;Le++){this.pdf.setPage(Le);var We=Le===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Ye=Ue-this.margin[0],ht=this.pdf.internal.pageSize.width-this.margin[1],it=ht-this.margin[3],ze=Le===1?0:Je+(Le-2)*Ye;if(this.ctx.clip_path.length!==0){var Ge=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ye,this.posX+this.margin[3],-1*ze+We),U.call(this,"fill",!0),this.path=Ge}var qe=P([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-ze+We+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*B.scale),Me=this.lineWidth,this.lineWidth=Me*B.scale);var ot=this.autoPaging!=="text";if(ot||qe.y+qe.h<=Ue){if(ot||qe.y>=We&&qe.x<=ht){var Xe=ot?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||ht-qe.x)[0],Mt=P([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-ze+We+this.ctx.prevPageLastElemOffset)[0],gt=ot&&(Le>Ie||Le<be)&&y.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,Ye,null).clip().discardPath()),this.pdf.text(Xe,Mt.x,Mt.y,{angle:B.angle,align:V,renderingMode:B.renderingMode}),gt&&this.pdf.restoreGraphicsState()}}else qe.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-qe.y);B.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Me)}else B.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*B.scale),Me=this.lineWidth,this.lineWidth=Me*B.scale),this.pdf.text(B.text,fe.x+this.posX,fe.y+this.posY,{angle:B.angle,align:V,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Me)},O=function(B,V,G,te){G=G||0,te=te||0,this.pdf.internal.out(t(B+G)+" "+i(V+te)+" l")},q=function(B,V,G){return this.pdf.lines(B,V,G,null,null)},Y=function(B,V,G,te,ae,fe,ve,he){this.pdf.internal.out([e(s(G+B)),e(r(te+V)),e(s(ae+B)),e(r(fe+V)),e(s(ve+B)),e(r(he+V)),"c"].join(" "))},$=function(B,V,G,te){for(var ae=2*Math.PI,fe=Math.PI/2;V>G;)V-=ae;var ve=Math.abs(G-V);ve<ae&&te&&(ve=ae-ve);for(var he=[],ye=te?-1:1,Ae=V;ve>1e-5;){var Me=Ae+ye*Math.min(ve,fe);he.push(Z.call(this,B,Ae,Me)),ve-=Math.abs(Me-Ae),Ae=Me}return he},Z=function(B,V,G){var te=(G-V)/2,ae=B*Math.cos(te),fe=B*Math.sin(te),ve=ae,he=-fe,ye=ve*ve+he*he,Ae=ye+ve*ae+he*fe,Me=4/3*(Math.sqrt(2*ye*Ae)-Ae)/(ve*fe-he*ae),Te=ve-Me*he,De=he+Me*ve,de=Te,W=-De,_e=te+V,Ie=Math.cos(_e),be=Math.sin(_e);return{x1:B*Math.cos(V),y1:B*Math.sin(V),x2:Te*Ie-De*be,y2:Te*be+De*Ie,x3:de*Ie-W*be,y3:de*be+W*Ie,x4:B*Math.cos(G),y4:B*Math.sin(G)}},X=function(B){return 180*B/Math.PI},Q=function(B,V,G,te,ae,fe){var ve=B+.5*(G-B),he=V+.5*(te-V),ye=ae+.5*(G-ae),Ae=fe+.5*(te-fe),Me=Math.min(B,ae,ve,ye),Te=Math.max(B,ae,ve,ye),De=Math.min(V,fe,he,Ae),de=Math.max(V,fe,he,Ae);return new a(Me,De,Te-Me,de-De)},re=function(B,V,G,te,ae,fe,ve,he){var ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye=G-B,ht=te-V,it=ae-G,ze=fe-te,Ge=ve-ae,qe=he-fe;for(Ae=0;Ae<41;Ae++)Ie=(W=(Me=B+(ye=Ae/40)*Ye)+ye*((De=G+ye*it)-Me))+ye*(De+ye*(ae+ye*Ge-De)-W),be=(_e=(Te=V+ye*ht)+ye*((de=te+ye*ze)-Te))+ye*(de+ye*(fe+ye*qe-de)-_e),Ae==0?(Le=Ie,We=be,Je=Ie,Ue=be):(Le=Math.min(Le,Ie),We=Math.min(We,be),Je=Math.max(Je,Ie),Ue=Math.max(Ue,be));return new a(Math.round(Le),Math.round(We),Math.round(Je-Le),Math.round(Ue-We))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,V,G=(B=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:V}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ut.API),function(n){var e=function(r){var o,a,l,c,h,f,g,p,_,y;for(a=[],l=0,c=(r+=o="\0\0\0\0".slice(r.length%4||4)).length;c>l;l+=4)(h=(r.charCodeAt(l)<<24)+(r.charCodeAt(l+1)<<16)+(r.charCodeAt(l+2)<<8)+r.charCodeAt(l+3))!==0?(f=(h=((h=((h=((h=(h-(y=h%85))/85)-(_=h%85))/85)-(p=h%85))/85)-(g=h%85))/85)%85,a.push(f+33,g+33,p+33,_+33,y+33)):a.push(122);return function(S,w){for(var P=w;P>0;P--)S.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(r){var o,a,l,c,h,f=String,g="length",p=255,_="charCodeAt",y="slice",S="replace";for(r[y](-2),r=r[y](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,h=(r+=o="uuuuu"[y](r[g]%5||5))[g];h>c;c+=5)a=52200625*(r[_](c)-33)+614125*(r[_](c+1)-33)+7225*(r[_](c+2)-33)+85*(r[_](c+3)-33)+(r[_](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(w,P){for(var x=P;x>0;x--)w.pop()}(l,o[g]),f.fromCharCode.apply(f,l)},i=function(r){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),o.test(r)===!1)return"";for(var a="",l=0;l<r.length;l+=2)a+=String.fromCharCode("0x"+(r[l]+r[l+1]));return a},s=function(r){for(var o=new Uint8Array(r.length),a=r.length;a--;)o[a]=r.charCodeAt(a);return r=(o=tf(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(r,o){var a=0,l=r||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Ut.API),function(n){n.loadFile=function(e,t,i){return function(s,r,o){r=r!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var f=new XMLHttpRequest,g=0,p=function(_){var y=_.length,S=[],w=String.fromCharCode;for(g=0;g<y;g+=1)S.push(w(255&_.charCodeAt(g)));return S.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?h(p(this.responseText)):h(void 0)}),f.send(null),c&&f.status===200)return p(f.responseText)}(s,r,o)}catch{}return a}(e,t,i)},n.loadImageFile=n.loadFile}(Ut.API),function(n){function e(){return(Vt.html2canvas?Promise.resolve(Vt.html2canvas):Ec(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Vt.DOMPurify?Promise.resolve(Vt.DOMPurify):Ec(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=Mn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},r=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(o,a){return o.__proto__=a||r.prototype,o},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:s("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},r.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)h!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(l(g,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var g=0;g<c.length;++g){var p=c[g],_=p.src.find(function(y){return y.format==="truetype"});_&&l.addFont(_.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),a(this.prop.container,f)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},r.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},r.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},r.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in r.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},r.prototype.get=function(o,a){return this.then(function(){var l=o in r.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},r.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},r.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},r.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},r.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,c),f}).then(c,h).then(function(f){return l.updateProgress(1),f})})},r.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return r.convert(h,this.__proto__)},r.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},r.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},r.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return r.convert(a,this)},r.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},r.prototype.error=function(o){return this.then(function(){throw new Error(o)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,Ut.getPageSize=function(o,a,l){if(Mn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,f=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var p,_=0,y=0;if(g.hasOwnProperty(f))_=g[f][1]/h,y=g[f][0]/h;else try{_=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",y>_&&(p=y,y=_,_=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>y&&(p=y,y=_,_=p)}return{width:y,height:_,unit:a,k:h,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(lf):null;var l=new r(a);return a.worker?l:l.from(o).doCallback()}}(Ut.API),Ut.API.addJS=function(n){return Mg=n,this.internal.events.subscribe("postPutResources",function(){Cu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Cu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Eg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Mg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Cu!==void 0&&Eg!==void 0&&this.internal.out("/Names <</JavaScript "+Cu+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),r=0;r<s.length;r++){var o=s[r],a=i.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(r=0;r<c;r++){var f=t.internal.newObject();h.push(f);var g=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<h.length;r++)t.internal.write("(page_"+(r+1)+")"+h[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,s,r){var o={title:s,options:r,children:[]};return i==null&&(i=this.root),i.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var o=i.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,s){for(var r=0;r<s.children.length;r++)i.count++,this.count_r(i,s.children[r]);return i.count}}])}(Ut.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,s,r,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(f){for(var g,p=256*f.charCodeAt(4)+f.charCodeAt(5),_=f.length,y={width:0,height:0,numcomponents:1},S=4;S<_;S+=2){if(S+=p,e.indexOf(f.charCodeAt(S+1))!==-1){g=256*f.charCodeAt(S+5)+f.charCodeAt(S+6),y={width:256*f.charCodeAt(S+7)+f.charCodeAt(S+8),height:g,numcomponents:f.charCodeAt(S+9)};break}p=256*f.charCodeAt(S+2)+f.charCodeAt(S+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:s}}return h}}(Ut.API);var gl,Tu,Og,Rg,Fg,YA=function(){var n,e,t;function i(r){var o,a,l,c,h,f,g,p,_,y,S,w,P,x;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),_=(function(){var F,U;for(U=[],F=0;F<4;++F)U.push(String.fromCharCode(this.data[this.pos++]));return U}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*h/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,o-=4),r=(f!=null?f.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(P=0;0<=y?P<y:P>y;0<=y?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(S=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,S.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var o,a;for(a=[],o=0;0<=r?o<r:o>r;0<=r?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function h(f,g,p,_){var y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re=Math.ceil((c.width-f)/p),me=Math.ceil((c.height-g)/_),B=c.width==re&&c.height==me;for(C=o*re,R=B?a:new Uint8Array(C*me),F=r.length,I=0,S=0;I<me&&l<F;){switch(r[l++]){case 0:for(P=Y=0;Y<C;P=Y+=1)R[S++]=r[l++];break;case 1:for(P=$=0;$<C;P=$+=1)y=r[l++],x=P<o?0:R[S-o],R[S++]=(y+x)%256;break;case 2:for(P=Z=0;Z<C;P=Z+=1)y=r[l++],w=(P-P%o)/o,O=I&&R[(I-1)*C+w*o+P%o],R[S++]=(O+y)%256;break;case 3:for(P=X=0;X<C;P=X+=1)y=r[l++],w=(P-P%o)/o,x=P<o?0:R[S-o],O=I&&R[(I-1)*C+w*o+P%o],R[S++]=(y+Math.floor((x+O)/2))%256;break;case 4:for(P=Q=0;Q<C;P=Q+=1)y=r[l++],w=(P-P%o)/o,x=P<o?0:R[S-o],I===0?O=q=0:(O=R[(I-1)*C+w*o+P%o],q=w&&R[(I-1)*C+(w-1)*o+P%o]),U=x+O-q,H=Math.abs(U-x),k=Math.abs(U-O),E=Math.abs(U-q),L=H<=k&&H<=E?x:k<=E?O:q,R[S++]=(y+L)%256;break;default:throw new Error("Invalid filter algorithm: "+r[l-1])}if(!B){var V=((g+I*_)*c.width+f)*o,G=I*C;for(P=0;P<re;P+=1){for(var te=0;te<o;te+=1)a[V++]=R[G++];V+=(p-1)*o}}I++}}return r=kA(r),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},i.prototype.decodePalette=function(){var r,o,a,l,c,h,f,g,p;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,r=0,o=f=0,g=a.length;f<g;o=f+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=h[r++])!=null?p:255;return c},i.prototype.copyToImageData=function(r,o){var a,l,c,h,f,g,p,_,y,S,w;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),_=(c=r.data||r).length,f=y||o,h=g=0,l===1)for(;h<_;)p=y?4*o[h/4]:g,S=f[p++],c[h++]=S,c[h++]=S,c[h++]=S,c[h++]=a?f[p++]:255,g=p;else for(;h<_;)p=y?4*o[h/4]:g,c[h++]=f[p++],c[h++]=f[p++],c[h++]=f[p++],c[h++]=a?f[p++]:255,g=p},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var s=function(){if(Object.prototype.toString.call(Vt)==="[object Window]"){try{e=Vt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(r){var o;if(s()===!0)return t.width=r.width,t.height=r.height,t.clearRect(0,0,r.width,r.height),t.putImageData(r,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var o,a,l,c,h,f,g,p;if(this.animation){for(p=[],a=h=0,f=(g=this.animation.frames).length;h<f;a=++h)o=g[a],l=r.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=n(l));return p}},i.prototype.renderFrame=function(r,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&r.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?r.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&r.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&r.clearRect(a.xOffset,a.yOffset,a.width,a.height),r.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(r){var o,a,l,c,h,f,g=this;return a=0,f=this.animation,c=f.numFrames,l=f.frames,h=f.numPlays,(o=function(){var p,_;if(p=a++%c,_=l[p],g.renderFrame(r,p),c>1&&a/c<h)return g.animation._timeout=setTimeout(o,_.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},i.prototype.render=function(r){var o,a;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,o=r.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function KA(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,i=n[e++]|n[e++]<<8,s=n[e++],r=s>>7,o=1<<(7&s)+1;n[e++],n[e++];var a=null,l=null;r&&(a=e,l=o,e+=3*o);var c=!0,h=[],f=0,g=null,p=0,_=null;for(this.width=t,this.height=i;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];f=n[e++]|n[e++]<<8,g=n[e++],!(1&y)&&(g=null),p=y>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var S=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,F=n[e++],U=F>>6&1,H=1<<(7&F)+1,L=a,k=l,E=!1;F>>7&&(E=!0,L=e,k=H,e+=3*H);var R=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}h.push({x:S,y:w,width:P,height:x,has_local_palette:E,palette_offset:L,palette_size:k,data_offset:R,data_length:e-R,transparent_index:g,interlaced:!!U,delay:f,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return _},this.frameInfo=function(C){if(C<0||C>=h.length)throw new Error("Frame index out of range.");return h[C]},this.decodeAndBlitFrameBGRA=function(C,O){var q=this.frameInfo(C),Y=q.width*q.height,$=new Uint8Array(Y);Bg(n,q.data_offset,$,Y);var Z=q.palette_offset,X=q.transparent_index;X===null&&(X=256);var Q=q.width,re=t-Q,me=Q,B=4*(q.y*t+q.x),V=4*((q.y+q.height)*t+q.x),G=B,te=4*re;q.interlaced===!0&&(te+=4*t*7);for(var ae=8,fe=0,ve=$.length;fe<ve;++fe){var he=$[fe];if(me===0&&(me=Q,(G+=te)>=V&&(te=4*re+4*t*(ae-1),G=B+(Q+re)*(ae<<1),ae>>=1)),he===X)G+=4;else{var ye=n[Z+3*he],Ae=n[Z+3*he+1],Me=n[Z+3*he+2];O[G++]=Me,O[G++]=Ae,O[G++]=ye,O[G++]=255}--me}},this.decodeAndBlitFrameRGBA=function(C,O){var q=this.frameInfo(C),Y=q.width*q.height,$=new Uint8Array(Y);Bg(n,q.data_offset,$,Y);var Z=q.palette_offset,X=q.transparent_index;X===null&&(X=256);var Q=q.width,re=t-Q,me=Q,B=4*(q.y*t+q.x),V=4*((q.y+q.height)*t+q.x),G=B,te=4*re;q.interlaced===!0&&(te+=4*t*7);for(var ae=8,fe=0,ve=$.length;fe<ve;++fe){var he=$[fe];if(me===0&&(me=Q,(G+=te)>=V&&(te=4*re+4*t*(ae-1),G=B+(Q+re)*(ae<<1),ae>>=1)),he===X)G+=4;else{var ye=n[Z+3*he],Ae=n[Z+3*he+1],Me=n[Z+3*he+2];O[G++]=ye,O[G++]=Ae,O[G++]=Me,O[G++]=255}--me}}}function Bg(n,e,t,i){for(var s=n[e++],r=1<<s,o=r+1,a=o+1,l=s+1,c=(1<<l)-1,h=0,f=0,g=0,p=n[e++],_=new Int32Array(4096),y=null;;){for(;h<16&&p!==0;)f|=n[e++]<<h,h+=8,p===1?p=n[e++]:--p;if(h<l)break;var S=f&c;if(f>>=l,h-=l,S!==r){if(S===o)break;for(var w=S<a?S:y,P=0,x=w;x>r;)x=_[x]>>8,++P;var F=x;if(g+P+(w!==S?1:0)>i)return void Un.log("Warning, gif stream longer than expected.");t[g++]=F;var U=g+=P;for(w!==S&&(t[g++]=F),x=w;P--;)x=_[x],t[--U]=255&x,x>>=8;y!==null&&a<4096&&(_[a++]=y<<8|F,a>=c+1&&l<12&&(++l,c=c<<1|1)),y=S}else a=o+1,c=(1<<(l=s+1))-1,y=null}return g!==i&&Un.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sd(n){var e,t,i,s,r,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),f=new Array(65535),g=new Array(65535),p=new Array(64),_=new Array(64),y=[],S=0,w=7,P=new Array(64),x=new Array(64),F=new Array(64),U=new Array(256),H=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(B,V){for(var G=0,te=0,ae=new Array,fe=1;fe<=16;fe++){for(var ve=1;ve<=B[fe];ve++)ae[V[te]]=[],ae[V[te]][0]=G,ae[V[te]][1]=fe,te++,G++;G*=2}return ae}function Z(B){for(var V=B[0],G=B[1]-1;G>=0;)V&1<<G&&(S|=1<<w),G--,--w<0&&(S==255?(X(255),X(0)):X(S),w=7,S=0)}function X(B){y.push(B)}function Q(B){X(B>>8&255),X(255&B)}function re(B,V,G,te,ae){for(var fe,ve=ae[0],he=ae[240],ye=function(be,Le){var We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe=0;for(qe=0;qe<8;++qe){We=be[Xe],Je=be[Xe+1],Ue=be[Xe+2],Ye=be[Xe+3],ht=be[Xe+4],it=be[Xe+5],ze=be[Xe+6];var Mt=We+(Ge=be[Xe+7]),gt=We-Ge,Ft=Je+ze,xt=Je-ze,Qe=Ue+it,vt=Ue-it,pt=Ye+ht,Rt=Ye-ht,ft=Mt+pt,ut=Mt-pt,Lt=Ft+Qe,st=Ft-Qe;be[Xe]=ft+Lt,be[Xe+4]=ft-Lt;var He=.707106781*(st+ut);be[Xe+2]=ut+He,be[Xe+6]=ut-He;var yt=.382683433*((ft=Rt+vt)-(st=xt+gt)),bt=.5411961*ft+yt,Dt=1.306562965*st+yt,Ct=.707106781*(Lt=vt+xt),qt=gt+Ct,wt=gt-Ct;be[Xe+5]=wt+bt,be[Xe+3]=wt-bt,be[Xe+1]=qt+Dt,be[Xe+7]=qt-Dt,Xe+=8}for(Xe=0,qe=0;qe<8;++qe){We=be[Xe],Je=be[Xe+8],Ue=be[Xe+16],Ye=be[Xe+24],ht=be[Xe+32],it=be[Xe+40],ze=be[Xe+48];var en=We+(Ge=be[Xe+56]),Ln=We-Ge,sn=Je+ze,un=Je-ze,rn=Ue+it,Zt=Ue-it,bi=Ye+ht,Qn=Ye-ht,Bn=en+bi,vn=en-bi,si=sn+rn,_n=sn-rn;be[Xe]=Bn+si,be[Xe+32]=Bn-si;var yn=.707106781*(_n+vn);be[Xe+16]=vn+yn,be[Xe+48]=vn-yn;var Yn=.382683433*((Bn=Qn+Zt)-(_n=un+Ln)),ri=.5411961*Bn+Yn,hn=1.306562965*_n+Yn,wi=.707106781*(si=Zt+un),Ai=Ln+wi,Ze=Ln-wi;be[Xe+40]=Ze+ri,be[Xe+24]=Ze-ri,be[Xe+8]=Ai+hn,be[Xe+56]=Ai-hn,Xe++}for(qe=0;qe<64;++qe)ot=be[qe]*Le[qe],p[qe]=ot>0?ot+.5|0:ot-.5|0;return p}(B,V),Ae=0;Ae<64;++Ae)_[L[Ae]]=ye[Ae];var Me=_[0]-G;G=_[0],Me==0?Z(te[0]):(Z(te[g[fe=32767+Me]]),Z(f[fe]));for(var Te=63;Te>0&&_[Te]==0;)Te--;if(Te==0)return Z(ve),G;for(var De,de=1;de<=Te;){for(var W=de;_[de]==0&&de<=Te;)++de;var _e=de-W;if(_e>=16){De=_e>>4;for(var Ie=1;Ie<=De;++Ie)Z(he);_e&=15}fe=32767+_[de],Z(ae[(_e<<4)+g[fe]]),Z(f[fe]),de++}return Te!=63&&Z(ve),G}function me(B){B=Math.min(Math.max(B,1),100),r!=B&&(function(V){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=o((G[te]*V+50)/100);ae=Math.min(Math.max(ae,1),255),a[L[te]]=ae}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var he=o((fe[ve]*V+50)/100);he=Math.min(Math.max(he,1),255),l[L[ve]]=he}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,Me=0;Me<8;Me++)for(var Te=0;Te<8;Te++)c[Ae]=1/(a[L[Ae]]*ye[Me]*ye[Te]*8),h[Ae]=1/(l[L[Ae]]*ye[Me]*ye[Te]*8),Ae++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),r=B)}this.encode=function(B,V){V&&me(V),y=new Array,S=0,w=7,Q(65496),Q(65504),Q(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),Q(1),Q(1),X(0),X(0),function(){Q(65499),Q(132),X(0);for(var Je=0;Je<64;Je++)X(a[Je]);X(1);for(var Ue=0;Ue<64;Ue++)X(l[Ue])}(),function(Je,Ue){Q(65472),Q(17),X(8),Q(Ue),Q(Je),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(B.width,B.height),function(){Q(65476),Q(418),X(0);for(var Je=0;Je<16;Je++)X(k[Je+1]);for(var Ue=0;Ue<=11;Ue++)X(E[Ue]);X(16);for(var Ye=0;Ye<16;Ye++)X(R[Ye+1]);for(var ht=0;ht<=161;ht++)X(I[ht]);X(1);for(var it=0;it<16;it++)X(C[it+1]);for(var ze=0;ze<=11;ze++)X(O[ze]);X(17);for(var Ge=0;Ge<16;Ge++)X(q[Ge+1]);for(var qe=0;qe<=161;qe++)X(Y[qe])}(),Q(65498),Q(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var G=0,te=0,ae=0;S=0,w=7,this.encode.displayName="_encode_";for(var fe,ve,he,ye,Ae,Me,Te,De,de,W=B.data,_e=B.width,Ie=B.height,be=4*_e,Le=0;Le<Ie;){for(fe=0;fe<be;){for(Ae=be*Le+fe,Te=-1,De=0,de=0;de<64;de++)Me=Ae+(De=de>>3)*be+(Te=4*(7&de)),Le+De>=Ie&&(Me-=be*(Le+1+De-Ie)),fe+Te>=be&&(Me-=fe+Te-be+4),ve=W[Me++],he=W[Me++],ye=W[Me++],P[de]=(H[ve]+H[he+256>>0]+H[ye+512>>0]>>16)-128,x[de]=(H[ve+768>>0]+H[he+1024>>0]+H[ye+1280>>0]>>16)-128,F[de]=(H[ve+1280>>0]+H[he+1536>>0]+H[ye+1792>>0]>>16)-128;G=re(P,c,G,e,i),te=re(x,h,te,t,s),ae=re(F,h,ae,t,s),fe+=32}Le+=8}if(w>=0){var We=[];We[1]=w+1,We[0]=(1<<w+1)-1,Z(We)}return Q(65497),new Uint8Array(y)},n=n||50,function(){for(var B=String.fromCharCode,V=0;V<256;V++)U[V]=B(V)}(),e=$(k,E),t=$(C,O),i=$(R,I),s=$(q,Y),function(){for(var B=1,V=2,G=1;G<=15;G++){for(var te=B;te<V;te++)g[32767+te]=G,f[32767+te]=[],f[32767+te][1]=G,f[32767+te][0]=te;for(var ae=-(V-1);ae<=-B;ae++)g[32767+ae]=G,f[32767+ae]=[],f[32767+ae][1]=G,f[32767+ae][0]=V-1+ae;B<<=1,V<<=1}}(),function(){for(var B=0;B<256;B++)H[B]=19595*B,H[B+256>>0]=38470*B,H[B+512>>0]=7471*B+32768,H[B+768>>0]=-11059*B,H[B+1024>>0]=-21709*B,H[B+1280>>0]=32768*B+8421375,H[B+1536>>0]=-27439*B,H[B+1792>>0]=-5329*B}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Bs(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jg(n){function e(k){if(!k)throw Error("assert :P")}function t(k,E,R){for(var I=0;4>I;I++)if(k[E+I]!=R.charCodeAt(I))return!0;return!1}function i(k,E,R,I,C){for(var O=0;O<C;O++)k[E+O]=R[I+O]}function s(k,E,R,I){for(var C=0;C<I;C++)k[E+C]=R}function r(k){return new Int32Array(k)}function o(k,E){for(var R=[],I=0;I<k;I++)R.push(new E);return R}function a(k,E){var R=[];return function I(C,O,q){for(var Y=q[O],$=0;$<Y&&(C.push(q.length>O+1?[]:new E),!(q.length<O+1));$++)I(C[$],O+1,q)}(R,0,k),R}var l=function(){var k=this;function E(b,A){for(var T=1<<A-1>>>0;b&T;)T>>>=1;return T?(b&T-1)+T:b}function R(b,A,T,j,J){e(!(j%T));do b[A+(j-=T)]=J;while(0<j)}function I(b,A,T,j,J){if(e(2328>=J),512>=J)var ee=r(512);else if((ee=r(J))==null)return 0;return function(ne,se,oe,pe,ke,Re){var Fe,xe,nt=se,Ve=1<<oe,Pe=r(16),Ce=r(16);for(e(ke!=0),e(pe!=null),e(ne!=null),e(0<oe),xe=0;xe<ke;++xe){if(15<pe[xe])return 0;++Pe[pe[xe]]}if(Pe[0]==ke)return 0;for(Ce[1]=0,Fe=1;15>Fe;++Fe){if(Pe[Fe]>1<<Fe)return 0;Ce[Fe+1]=Ce[Fe]+Pe[Fe]}for(xe=0;xe<ke;++xe)Fe=pe[xe],0<pe[xe]&&(Re[Ce[Fe]++]=xe);if(Ce[15]==1)return(pe=new C).g=0,pe.value=Re[0],R(ne,nt,1,Ve,pe),Ve;var et,at=-1,tt=Ve-1,It=0,_t=1,jt=1,St=1<<oe;for(xe=0,Fe=1,ke=2;Fe<=oe;++Fe,ke<<=1){if(_t+=jt<<=1,0>(jt-=Pe[Fe]))return 0;for(;0<Pe[Fe];--Pe[Fe])(pe=new C).g=Fe,pe.value=Re[xe++],R(ne,nt+It,ke,St,pe),It=E(It,Fe)}for(Fe=oe+1,ke=2;15>=Fe;++Fe,ke<<=1){if(_t+=jt<<=1,0>(jt-=Pe[Fe]))return 0;for(;0<Pe[Fe];--Pe[Fe]){if(pe=new C,(It&tt)!=at){for(nt+=St,et=1<<(at=Fe)-oe;15>at&&!(0>=(et-=Pe[at]));)++at,et<<=1;Ve+=St=1<<(et=at-oe),ne[se+(at=It&tt)].g=et+oe,ne[se+at].value=nt-se-at}pe.g=Fe-oe,pe.value=Re[xe++],R(ne,nt+(It>>oe),ke,St,pe),It=E(It,Fe)}}return _t!=2*Ce[15]-1?0:Ve}(b,A,T,j,J,ee)}function C(){this.value=this.g=0}function O(){this.value=this.g=0}function q(){this.G=o(5,C),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(xi,O)}function Y(b,A,T,j){e(b!=null),e(A!=null),e(2147483648>j),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=A,b.pa=T,b.Jd=A,b.Yc=T+j,b.Zc=4<=j?T+j-4+1:T,fe(b)}function $(b,A){for(var T=0;0<A--;)T|=he(b,128)<<A;return T}function Z(b,A){var T=$(b,A);return ve(b)?-T:T}function X(b,A,T,j){var J,ee=0;for(e(b!=null),e(A!=null),e(4294967288>j),b.Sb=j,b.Ra=0,b.u=0,b.h=0,4<j&&(j=4),J=0;J<j;++J)ee+=A[T+J]<<8*J;b.Ra=ee,b.bb=j,b.oa=A,b.pa=T}function Q(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<il-8>>>0,++b.bb,b.u-=8;G(b)&&(b.h=1,b.u=0)}function re(b,A){if(e(0<=A),!b.h&&A<=nl){var T=V(b)&tl[A];return b.u+=A,Q(b),T}return b.h=1,b.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(b){return b.Ra>>>(b.u&il-1)>>>0}function G(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>il}function te(b,A){b.u=A,b.h=G(b)}function ae(b){b.u>=Hl&&(e(b.u>=Hl),Q(b))}function fe(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function ve(b){return $(b,1)}function he(b,A){var T=b.Ca;0>b.b&&fe(b);var j=b.b,J=T*A>>>8,ee=(b.I>>>j>J)+0;for(ee?(T-=J,b.I-=J+1<<j>>>0):T=J+1,j=T,J=0;256<=j;)J+=8,j>>=8;return j=7^J+ts[j],b.b-=j,b.Ca=(T<<j)-1,ee}function ye(b,A,T){b[A+0]=T>>24&255,b[A+1]=T>>16&255,b[A+2]=T>>8&255,b[A+3]=T>>0&255}function Ae(b,A){return b[A+0]<<0|b[A+1]<<8}function Me(b,A){return Ae(b,A)|b[A+2]<<16}function Te(b,A){return Ae(b,A)|Ae(b,A+2)<<16}function De(b,A){var T=1<<A;return e(b!=null),e(0<A),b.X=r(T),b.X==null?0:(b.Mb=32-A,b.Xa=A,1)}function de(b,A){e(b!=null),e(A!=null),e(b.Xa==A.Xa),i(A.X,0,b.X,0,1<<A.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function _e(b,A,T,j){e(T!=null),e(j!=null);var J=T[0],ee=j[0];return J==0&&(J=(b*ee+A/2)/A),ee==0&&(ee=(A*J+b/2)/b),0>=J||0>=ee?0:(T[0]=J,j[0]=ee,1)}function Ie(b,A){return b+(1<<A)-1>>>A}function be(b,A){return((4278255360&b)+(4278255360&A)>>>0&4278255360)+((16711935&b)+(16711935&A)>>>0&16711935)>>>0}function Le(b,A){k[A]=function(T,j,J,ee,ne,se,oe){var pe;for(pe=0;pe<ne;++pe){var ke=k[b](se[oe+pe-1],J,ee+pe);se[oe+pe]=be(T[j+pe],ke)}}}function We(){this.ud=this.hd=this.jd=0}function Je(b,A){return((4278124286&(b^A))>>>1)+(b&A)>>>0}function Ue(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function Ye(b,A){return Ue(b+(b-A+.5>>1))}function ht(b,A,T){return Math.abs(A-T)-Math.abs(b-T)}function it(b,A,T,j,J,ee,ne){for(j=ee[ne-1],T=0;T<J;++T)ee[ne+T]=j=be(b[A+T],j)}function ze(b,A,T,j,J){var ee;for(ee=0;ee<T;++ee){var ne=b[A+ee],se=ne>>8&255,oe=16711935&(oe=(oe=16711935&ne)+((se<<16)+se));j[J+ee]=(4278255360&ne)+oe>>>0}}function Ge(b,A){A.jd=b>>0&255,A.hd=b>>8&255,A.ud=b>>16&255}function qe(b,A,T,j,J,ee){var ne;for(ne=0;ne<j;++ne){var se=A[T+ne],oe=se>>>8,pe=se,ke=255&(ke=(ke=se>>>16)+((b.jd<<24>>24)*(oe<<24>>24)>>>5));pe=255&(pe=(pe=pe+((b.hd<<24>>24)*(oe<<24>>24)>>>5))+((b.ud<<24>>24)*(ke<<24>>24)>>>5)),J[ee+ne]=(4278255360&se)+(ke<<16)+pe}}function ot(b,A,T,j,J){k[A]=function(ee,ne,se,oe,pe,ke,Re,Fe,xe){for(oe=Re;oe<Fe;++oe)for(Re=0;Re<xe;++Re)pe[ke++]=J(se[j(ee[ne++])])},k[b]=function(ee,ne,se,oe,pe,ke,Re){var Fe=8>>ee.b,xe=ee.Ea,nt=ee.K[0],Ve=ee.w;if(8>Fe)for(ee=(1<<ee.b)-1,Ve=(1<<Fe)-1;ne<se;++ne){var Pe,Ce=0;for(Pe=0;Pe<xe;++Pe)Pe&ee||(Ce=j(oe[pe++])),ke[Re++]=J(nt[Ce&Ve]),Ce>>=Fe}else k["VP8LMapColor"+T](oe,pe,nt,Ve,ke,Re,ne,se,xe)}}function Xe(b,A,T,j,J){for(T=A+T;A<T;){var ee=b[A++];j[J++]=ee>>16&255,j[J++]=ee>>8&255,j[J++]=ee>>0&255}}function Mt(b,A,T,j,J){for(T=A+T;A<T;){var ee=b[A++];j[J++]=ee>>16&255,j[J++]=ee>>8&255,j[J++]=ee>>0&255,j[J++]=ee>>24&255}}function gt(b,A,T,j,J){for(T=A+T;A<T;){var ee=(ne=b[A++])>>16&240|ne>>12&15,ne=ne>>0&240|ne>>28&15;j[J++]=ee,j[J++]=ne}}function Ft(b,A,T,j,J){for(T=A+T;A<T;){var ee=(ne=b[A++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;j[J++]=ee,j[J++]=ne}}function xt(b,A,T,j,J){for(T=A+T;A<T;){var ee=b[A++];j[J++]=ee>>0&255,j[J++]=ee>>8&255,j[J++]=ee>>16&255}}function Qe(b,A,T,j,J,ee){if(ee==0)for(T=A+T;A<T;)ye(j,((ee=b[A++])[0]>>24|ee[1]>>8&65280|ee[2]<<8&16711680|ee[3]<<24)>>>0),J+=32;else i(j,J,b,A,T)}function vt(b,A){k[A][0]=k[b+"0"],k[A][1]=k[b+"1"],k[A][2]=k[b+"2"],k[A][3]=k[b+"3"],k[A][4]=k[b+"4"],k[A][5]=k[b+"5"],k[A][6]=k[b+"6"],k[A][7]=k[b+"7"],k[A][8]=k[b+"8"],k[A][9]=k[b+"9"],k[A][10]=k[b+"10"],k[A][11]=k[b+"11"],k[A][12]=k[b+"12"],k[A][13]=k[b+"13"],k[A][14]=k[b+"0"],k[A][15]=k[b+"0"]}function pt(b){return b==qh||b==Vh||b==uu||b==Wh}function Rt(){this.eb=[],this.size=this.A=this.fb=0}function ft(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rt,this.f.kb=new ft,this.sd=null}function Lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function st(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function He(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function yt(b,A){var T=b.T,j=A.ba.f.RGBA,J=j.eb,ee=j.fb+b.ka*j.A,ne=ks[A.ba.S],se=b.y,oe=b.O,pe=b.f,ke=b.N,Re=b.ea,Fe=b.W,xe=A.cc,nt=A.dc,Ve=A.Mc,Pe=A.Nc,Ce=b.ka,et=b.ka+b.T,at=b.U,tt=at+1>>1;for(Ce==0?ne(se,oe,null,null,pe,ke,Re,Fe,pe,ke,Re,Fe,J,ee,null,null,at):(ne(A.ec,A.fc,se,oe,xe,nt,Ve,Pe,pe,ke,Re,Fe,J,ee-j.A,J,ee,at),++T);Ce+2<et;Ce+=2)xe=pe,nt=ke,Ve=Re,Pe=Fe,ke+=b.Rc,Fe+=b.Rc,ee+=2*j.A,ne(se,(oe+=2*b.fa)-b.fa,se,oe,xe,nt,Ve,Pe,pe,ke,Re,Fe,J,ee-j.A,J,ee,at);return oe+=b.fa,b.j+et<b.o?(i(A.ec,A.fc,se,oe,at),i(A.cc,A.dc,pe,ke,tt),i(A.Mc,A.Nc,Re,Fe,tt),T--):1&et||ne(se,oe,null,null,pe,ke,Re,Fe,pe,ke,Re,Fe,J,ee+j.A,null,null,at),T}function bt(b,A,T){var j=b.F,J=[b.J];if(j!=null){var ee=b.U,ne=A.ba.S,se=ne==cu||ne==uu;A=A.ba.f.RGBA;var oe=[0],pe=b.ka;oe[0]=b.T,b.Kb&&(pe==0?--oe[0]:(--pe,J[0]-=b.width),b.j+b.ka+b.T==b.o&&(oe[0]=b.o-b.j-pe));var ke=A.eb;pe=A.fb+pe*A.A,b=Vn(j,J[0],b.width,ee,oe,ke,pe+(se?0:3),A.A),e(T==oe),b&&pt(ne)&&As(ke,pe,se,ee,oe,A.A)}return 0}function Dt(b){var A=b.ma,T=A.ba.S,j=11>T,J=T==au||T==lu||T==cu||T==Hh||T==12||pt(T);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!Ul(A.Oa,b,J?11:12))return 0;if(J&&pt(T)&&rt(),b.da)alert("todo:use_scaling");else{if(j){if(A.Ib=He,b.Kb){if(T=b.U+1>>1,A.memory=r(b.U+2*T),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+b.U,A.Mc=A.cc,A.Nc=A.dc+T,A.Ib=yt,rt()}}else alert("todo:EmitYUV");J&&(A.Jb=bt,j&&Oe())}if(j&&!kp){for(b=0;256>b;++b)c_[b]=89858*(b-128)+du>>hu,d_[b]=-22014*(b-128)+du,h_[b]=-45773*(b-128),u_[b]=113618*(b-128)+du>>hu;for(b=Jl;b<Kh;++b)A=76283*(b-16)+du>>hu,f_[b-Jl]=Nn(A,255),p_[b-Jl]=Nn(A+8>>4,15);kp=1}return 1}function Ct(b){var A=b.ma,T=b.U,j=b.T;return e(!(1&b.ka)),0>=T||0>=j?0:(T=A.Ib(b,A),A.Jb!=null&&A.Jb(b,A,T),A.Dc+=T,1)}function qt(b){b.ma.memory=null}function wt(b,A,T,j){return re(b,8)!=47?0:(A[0]=re(b,14)+1,T[0]=re(b,14)+1,j[0]=re(b,1),re(b,3)!=0?0:!b.h)}function en(b,A){if(4>b)return b+1;var T=b-2>>1;return(2+(1&b)<<T)+re(A,T)+1}function Ln(b,A){return 120<A?A-120:1<=(T=((T=Jv[A-1])>>4)*b+(8-(15&T)))?T:1;var T}function sn(b,A,T){var j=V(T),J=b[A+=255&j].g-8;return 0<J&&(te(T,T.u+8),j=V(T),A+=b[A].value,A+=j&(1<<J)-1),te(T,T.u+b[A].g),b[A].value}function un(b,A,T){return T.g+=b.g,T.value+=b.value<<A>>>0,e(8>=T.g),b.g}function rn(b,A,T){var j=b.xc;return e((A=j==0?0:b.vc[b.md*(T>>j)+(A>>j)])<b.Wb),b.Ya[A]}function Zt(b,A,T,j){var J=b.ab,ee=b.c*A,ne=b.C;A=ne+A;var se=T,oe=j;for(j=b.Ta,T=b.Ua;0<J--;){var pe=b.gc[J],ke=ne,Re=A,Fe=se,xe=oe,nt=(oe=j,se=T,pe.Ea);switch(e(ke<Re),e(Re<=pe.nc),pe.hc){case 2:eu(Fe,xe,(Re-ke)*nt,oe,se);break;case 0:var Ve=ke,Pe=Re,Ce=oe,et=se,at=(St=pe).Ea;Ve==0&&(Uh(Fe,xe,null,null,1,Ce,et),it(Fe,xe+1,0,0,at-1,Ce,et+1),xe+=at,et+=at,++Ve);for(var tt=1<<St.b,It=tt-1,_t=Ie(at,St.b),jt=St.K,St=St.w+(Ve>>St.b)*_t;Ve<Pe;){var Pn=jt,Dn=St,wn=1;for(ql(Fe,xe,Ce,et-at,1,Ce,et);wn<at;){var ln=(wn&~It)+tt;ln>at&&(ln=at),(0,ho[Pn[Dn++]>>8&15])(Fe,xe+ +wn,Ce,et+wn-at,ln-wn,Ce,et+wn),wn=ln}xe+=at,et+=at,++Ve&It||(St+=_t)}Re!=pe.nc&&i(oe,se-nt,oe,se+(Re-ke-1)*nt,nt);break;case 1:for(nt=Fe,Pe=xe,at=(Fe=pe.Ea)-(et=Fe&~(Ce=(xe=1<<pe.b)-1)),Ve=Ie(Fe,pe.b),tt=pe.K,pe=pe.w+(ke>>pe.b)*Ve;ke<Re;){for(It=tt,_t=pe,jt=new We,St=Pe+et,Pn=Pe+Fe;Pe<St;)Ge(It[_t++],jt),oa(jt,nt,Pe,xe,oe,se),Pe+=xe,se+=xe;Pe<Pn&&(Ge(It[_t++],jt),oa(jt,nt,Pe,at,oe,se),Pe+=at,se+=at),++ke&Ce||(pe+=Ve)}break;case 3:if(Fe==oe&&xe==se&&0<pe.b){for(Pe=oe,Fe=nt=se+(Re-ke)*nt-(et=(Re-ke)*Ie(pe.Ea,pe.b)),xe=oe,Ce=se,Ve=[],et=(at=et)-1;0<=et;--et)Ve[et]=xe[Ce+et];for(et=at-1;0<=et;--et)Pe[Fe+et]=Ve[et];_s(pe,ke,Re,oe,nt,oe,se)}else _s(pe,ke,Re,Fe,xe,oe,se)}se=j,oe=T}oe!=T&&i(j,T,se,oe,ee)}function bi(b,A){var T=b.V,j=b.Ba+b.c*b.C,J=A-b.C;if(e(A<=b.l.o),e(16>=J),0<J){var ee=b.l,ne=b.Ta,se=b.Ua,oe=ee.width;if(Zt(b,J,T,j),J=se=[se],e((T=b.C)<(j=A)),e(ee.v<ee.va),j>ee.o&&(j=ee.o),T<ee.j){var pe=ee.j-T;T=ee.j,J[0]+=pe*oe}if(T>=j?T=0:(J[0]+=4*ee.v,ee.ka=T-ee.j,ee.U=ee.va-ee.v,ee.T=j-T,T=1),T){if(se=se[0],11>(T=b.ca).S){var ke=T.f.RGBA,Re=(j=T.S,J=ee.U,ee=ee.T,pe=ke.eb,ke.A),Fe=ee;for(ke=ke.fb+b.Ma*ke.A;0<Fe--;){var xe=ne,nt=se,Ve=J,Pe=pe,Ce=ke;switch(j){case ou:ns(xe,nt,Ve,Pe,Ce);break;case au:Ki(xe,nt,Ve,Pe,Ce);break;case qh:Ki(xe,nt,Ve,Pe,Ce),As(Pe,Ce,0,Ve,1,0);break;case mp:Ir(xe,nt,Ve,Pe,Ce);break;case lu:Qe(xe,nt,Ve,Pe,Ce,1);break;case Vh:Qe(xe,nt,Ve,Pe,Ce,1),As(Pe,Ce,0,Ve,1,0);break;case cu:Qe(xe,nt,Ve,Pe,Ce,0);break;case uu:Qe(xe,nt,Ve,Pe,Ce,0),As(Pe,Ce,1,Ve,1,0);break;case Hh:fo(xe,nt,Ve,Pe,Ce);break;case Wh:fo(xe,nt,Ve,Pe,Ce),qn(Pe,Ce,Ve,1,0);break;case gp:Nr(xe,nt,Ve,Pe,Ce);break;default:e(0)}se+=oe,ke+=Re}b.Ma+=ee}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=T.height)}}b.C=A,e(b.C<=b.i)}function Qn(b){var A;if(0<b.ua)return 0;for(A=0;A<b.Wb;++A){var T=b.Ya[A].G,j=b.Ya[A].H;if(0<T[1][j[1]+0].g||0<T[2][j[2]+0].g||0<T[3][j[3]+0].g)return 0}return 1}function Bn(b,A,T,j,J,ee){if(b.Z!=0){var ne=b.qd,se=b.rd;for(e(bo[b.Z]!=null);A<T;++A)bo[b.Z](ne,se,j,J,j,J,ee),ne=j,se=J,J+=ee;b.qd=ne,b.rd=se}}function vn(b,A){var T=b.l.ma,j=T.Z==0||T.Z==1?b.l.j:b.C;if(j=b.C<j?j:b.C,e(A<=b.l.o),A>j){var J=b.l.width,ee=T.ca,ne=T.tb+J*j,se=b.V,oe=b.Ba+b.c*j,pe=b.gc;e(b.ab==1),e(pe[0].hc==3),tu(pe[0],j,A,se,oe,ee,ne),Bn(T,j,A,ee,ne,J)}b.C=b.Ma=A}function si(b,A,T,j,J,ee,ne){var se=b.$/j,oe=b.$%j,pe=b.m,ke=b.s,Re=T+b.$,Fe=Re;J=T+j*J;var xe=T+j*ee,nt=280+ke.ua,Ve=b.Pb?se:16777216,Pe=0<ke.ua?ke.Wa:null,Ce=ke.wc,et=Re<xe?rn(ke,oe,se):null;e(b.C<ee),e(xe<=J);var at=!1;e:for(;;){for(;at||Re<xe;){var tt=0;if(se>=Ve){var It=Re-T;e((Ve=b).Pb),Ve.wd=Ve.m,Ve.xd=It,0<Ve.s.ua&&de(Ve.s.Wa,Ve.s.vb),Ve=se+Zv}if(oe&Ce||(et=rn(ke,oe,se)),e(et!=null),et.Qb&&(A[Re]=et.qb,at=!0),!at)if(ae(pe),et.jc){tt=pe,It=A;var _t=Re,jt=et.pd[V(tt)&xi-1];e(et.jc),256>jt.g?(te(tt,tt.u+jt.g),It[_t]=jt.value,tt=0):(te(tt,tt.u+jt.g-256),e(256<=jt.value),tt=jt.value),tt==0&&(at=!0)}else tt=sn(et.G[0],et.H[0],pe);if(pe.h)break;if(at||256>tt){if(!at)if(et.nd)A[Re]=(et.qb|tt<<8)>>>0;else{if(ae(pe),at=sn(et.G[1],et.H[1],pe),ae(pe),It=sn(et.G[2],et.H[2],pe),_t=sn(et.G[3],et.H[3],pe),pe.h)break;A[Re]=(_t<<24|at<<16|tt<<8|It)>>>0}if(at=!1,++Re,++oe>=j&&(oe=0,++se,ne!=null&&se<=ee&&!(se%16)&&ne(b,se),Pe!=null))for(;Fe<Re;)tt=A[Fe++],Pe.X[(506832829*tt&4294967295)>>>Pe.Mb]=tt}else if(280>tt){if(tt=en(tt-256,pe),It=sn(et.G[4],et.H[4],pe),ae(pe),It=Ln(j,It=en(It,pe)),pe.h)break;if(Re-T<It||J-Re<tt)break e;for(_t=0;_t<tt;++_t)A[Re+_t]=A[Re+_t-It];for(Re+=tt,oe+=tt;oe>=j;)oe-=j,++se,ne!=null&&se<=ee&&!(se%16)&&ne(b,se);if(e(Re<=J),oe&Ce&&(et=rn(ke,oe,se)),Pe!=null)for(;Fe<Re;)tt=A[Fe++],Pe.X[(506832829*tt&4294967295)>>>Pe.Mb]=tt}else{if(!(tt<nt))break e;for(at=tt-280,e(Pe!=null);Fe<Re;)tt=A[Fe++],Pe.X[(506832829*tt&4294967295)>>>Pe.Mb]=tt;tt=Re,e(!(at>>>(It=Pe).Xa)),A[tt]=It.X[at],at=!0}at||e(pe.h==G(pe))}if(b.Pb&&pe.h&&Re<J)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&de(b.s.vb,b.s.Wa);else{if(pe.h)break e;ne!=null&&ne(b,se>ee?ee:se),b.a=0,b.$=Re-T}return 1}return b.a=3,0}function _n(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var A=b.Wa;A!=null&&(A.X=null),b.vb=null,e(b!=null)}function yn(){var b=new Qa;return b==null?null:(b.a=0,b.xb=_p,vt("Predictor","VP8LPredictors"),vt("Predictor","VP8LPredictors_C"),vt("PredictorAdd","VP8LPredictorsAdd"),vt("PredictorAdd","VP8LPredictorsAdd_C"),eu=ze,oa=qe,ns=Xe,Ki=Mt,fo=gt,Nr=Ft,Ir=xt,k.VP8LMapColor32b=sl,k.VP8LMapColor8b=nu,b)}function Yn(b,A,T,j,J){var ee=1,ne=[b],se=[A],oe=j.m,pe=j.s,ke=null,Re=0;e:for(;;){if(T)for(;ee&&re(oe,1);){var Fe=ne,xe=se,nt=j,Ve=1,Pe=nt.m,Ce=nt.gc[nt.ab],et=re(Pe,2);if(nt.Oc&1<<et)ee=0;else{switch(nt.Oc|=1<<et,Ce.hc=et,Ce.Ea=Fe[0],Ce.nc=xe[0],Ce.K=[null],++nt.ab,e(4>=nt.ab),et){case 0:case 1:Ce.b=re(Pe,3)+2,Ve=Yn(Ie(Ce.Ea,Ce.b),Ie(Ce.nc,Ce.b),0,nt,Ce.K),Ce.K=Ce.K[0];break;case 3:var at,tt=re(Pe,8)+1,It=16<tt?0:4<tt?1:2<tt?2:3;if(Fe[0]=Ie(Ce.Ea,It),Ce.b=It,at=Ve=Yn(tt,1,0,nt,Ce.K)){var _t,jt=tt,St=Ce,Pn=1<<(8>>St.b),Dn=r(Pn);if(Dn==null)at=0;else{var wn=St.K[0],ln=St.w;for(Dn[0]=St.K[0][0],_t=1;_t<1*jt;++_t)Dn[_t]=be(wn[ln+_t],Dn[_t-1]);for(;_t<4*Pn;++_t)Dn[_t]=0;St.K[0]=null,St.K[0]=Dn,at=1}}Ve=at;break;case 2:break;default:e(0)}ee=Ve}}if(ne=ne[0],se=se[0],ee&&re(oe,1)&&!(ee=1<=(Re=re(oe,4))&&11>=Re)){j.a=3;break e}var jn;if(jn=ee)t:{var Fn,Qt,vi,is=j,_i=ne,ss=se,xn=Re,fs=T,ps=is.m,Ii=is.s,Ei=[null],Xi=1,Ps=0,ir=Xv[xn];n:for(;;){if(fs&&re(ps,1)){var Li=re(ps,3)+2,Dr=Ie(_i,Li),ha=Ie(ss,Li),cl=Dr*ha;if(!Yn(Dr,ha,0,is,Ei))break n;for(Ei=Ei[0],Ii.xc=Li,Fn=0;Fn<cl;++Fn){var vo=Ei[Fn]>>8&65535;Ei[Fn]=vo,vo>=Xi&&(Xi=vo+1)}}if(ps.h)break n;for(Qt=0;5>Qt;++Qt){var ai=bp[Qt];!Qt&&0<xn&&(ai+=1<<xn),Ps<ai&&(Ps=ai)}var Jh=o(Xi*ir,C),Ip=Xi,Lp=o(Ip,q);if(Lp==null)var pu=null;else e(65536>=Ip),pu=Lp;var Xl=r(Ps);if(pu==null||Xl==null||Jh==null){is.a=1;break n}var mu=Jh;for(Fn=vi=0;Fn<Xi;++Fn){var Rs=pu[Fn],ul=Rs.G,hl=Rs.H,Cp=0,gu=1,Tp=0;for(Qt=0;5>Qt;++Qt){ai=bp[Qt],ul[Qt]=mu,hl[Qt]=vi,!Qt&&0<xn&&(ai+=1<<xn);s:{var bu,Xh=ai,vu=is,Zl=Xl,b_=mu,v_=vi,Zh=0,_o=vu.m,__=re(_o,1);if(s(Zl,0,0,Xh),__){var y_=re(_o,1)+1,w_=re(_o,1),Dp=re(_o,w_==0?1:8);Zl[Dp]=1,y_==2&&(Zl[Dp=re(_o,8)]=1);var _u=1}else{var xp=r(19),Ep=re(_o,4)+4;if(19<Ep){vu.a=3;var yu=0;break s}for(bu=0;bu<Ep;++bu)xp[Kv[bu]]=re(_o,3);var Qh=void 0,Ql=void 0,Mp=vu,A_=xp,wu=Xh,Op=Zl,$h=0,yo=Mp.m,Rp=8,Fp=o(128,C);i:for(;I(Fp,0,7,A_,19);){if(re(yo,1)){var S_=2+2*re(yo,3);if((Qh=2+re(yo,S_))>wu)break i}else Qh=wu;for(Ql=0;Ql<wu&&Qh--;){ae(yo);var Bp=Fp[0+(127&V(yo))];te(yo,yo.u+Bp.g);var dl=Bp.value;if(16>dl)Op[Ql++]=dl,dl!=0&&(Rp=dl);else{var k_=dl==16,jp=dl-16,P_=Gv[jp],Up=re(yo,Wv[jp])+P_;if(Ql+Up>wu)break i;for(var N_=k_?Rp:0;0<Up--;)Op[Ql++]=N_}}$h=1;break i}$h||(Mp.a=3),_u=$h}(_u=_u&&!_o.h)&&(Zh=I(b_,v_,8,Zl,Xh)),_u&&Zh!=0?yu=Zh:(vu.a=3,yu=0)}if(yu==0)break n;if(gu&&Yv[Qt]==1&&(gu=mu[vi].g==0),Cp+=mu[vi].g,vi+=yu,3>=Qt){var $l,ed=Xl[0];for($l=1;$l<ai;++$l)Xl[$l]>ed&&(ed=Xl[$l]);Tp+=ed}}if(Rs.nd=gu,Rs.Qb=0,gu&&(Rs.qb=(ul[3][hl[3]+0].value<<24|ul[1][hl[1]+0].value<<16|ul[2][hl[2]+0].value)>>>0,Cp==0&&256>ul[0][hl[0]+0].value&&(Rs.Qb=1,Rs.qb+=ul[0][hl[0]+0].value<<8)),Rs.jc=!Rs.Qb&&6>Tp,Rs.jc){var Au,xr=Rs;for(Au=0;Au<xi;++Au){var wo=Au,Ao=xr.pd[wo],Su=xr.G[0][xr.H[0]+wo];256<=Su.value?(Ao.g=Su.g+256,Ao.value=Su.value):(Ao.g=0,Ao.value=0,wo>>=un(Su,8,Ao),wo>>=un(xr.G[1][xr.H[1]+wo],16,Ao),wo>>=un(xr.G[2][xr.H[2]+wo],0,Ao),un(xr.G[3][xr.H[3]+wo],24,Ao))}}}Ii.vc=Ei,Ii.Wb=Xi,Ii.Ya=pu,Ii.yc=Jh,jn=1;break t}jn=0}if(!(ee=jn)){j.a=3;break e}if(0<Re){if(pe.ua=1<<Re,!De(pe.Wa,Re)){j.a=1,ee=0;break e}}else pe.ua=0;var td=j,zp=ne,I_=se,nd=td.s,id=nd.xc;if(td.c=zp,td.i=I_,nd.md=Ie(zp,id),nd.wc=id==0?-1:(1<<id)-1,T){j.xb=s_;break e}if((ke=r(ne*se))==null){j.a=1,ee=0;break e}ee=(ee=si(j,ke,0,ne,se,se,null))&&!oe.h;break e}return ee?(J!=null?J[0]=ke:(e(ke==null),e(T)),j.$=0,T||_n(pe)):_n(pe),ee}function ri(b,A){var T=b.c*b.i,j=T+A+16*A;return e(b.c<=A),b.V=r(j),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+T+A,1)}function hn(b,A){var T=b.C,j=A-T,J=b.V,ee=b.Ba+b.c*T;for(e(A<=b.l.o);0<j;){var ne=16<j?16:j,se=b.l.ma,oe=b.l.width,pe=oe*ne,ke=se.ca,Re=se.tb+oe*T,Fe=b.Ta,xe=b.Ua;Zt(b,ne,J,ee),hi(Fe,xe,ke,Re,pe),Bn(se,T,T+ne,ke,Re,oe),j-=ne,J+=ne*b.c,T+=ne}e(T==A),b.C=b.Ma=A}function wi(){this.ub=this.yd=this.td=this.Rb=0}function Ai(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ze(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function lt(){this.Yb=function(){var b=[];return function A(T,j,J){for(var ee=J[j],ne=0;ne<ee&&(T.push(J.length>j+1?[]:0),!(J.length<j+1));ne++)A(T[ne],j+1,J)}(b,0,[3,11]),b}()}function $e(){this.jb=r(3),this.Wc=a([4,8],lt),this.Xc=a([4,17],lt)}function Bt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Yt(){this.ld=this.La=this.dd=this.tc=0}function dn(){this.Na=this.la=0}function tn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function nn(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yt),this.Y=0,this.ya=Array(new nn),this.aa=0,this.l=new kn}function At(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Ht(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new wi,this.Kc=new Ai,this.ed=new Bt,this.Qa=new Ze,this.Ic=this.$c=this.Aa=0,this.D=new Sn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,me),this.ia=0,this.pb=o(4,tn),this.Pa=new $e,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new At),this.Hd=0,this.rb=Array(new dn),this.sb=0,this.wa=Array(new Yt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new nn),this.L=this.aa=0,this.gd=a([4,2],Yt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fn(){var b=new Ht;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Kl||(Kl=Wa)),b}function Nt(b,A,T){return b.a==0&&(b.a=A,b.sc=T,b.cb=0),0}function $t(b,A,T){return 3<=T&&b[A+0]==157&&b[A+1]==1&&b[A+2]==42}function Jo(b,A){if(b==null)return 0;if(b.a=0,b.sc="OK",A==null)return Nt(b,2,"null VP8Io passed to VP8GetHeaders()");var T=A.data,j=A.w,J=A.ha;if(4>J)return Nt(b,7,"Truncated header.");var ee=T[j+0]|T[j+1]<<8|T[j+2]<<16,ne=b.Od;if(ne.Rb=!(1&ee),ne.td=ee>>1&7,ne.yd=ee>>4&1,ne.ub=ee>>5,3<ne.td)return Nt(b,3,"Incorrect keyframe parameters.");if(!ne.yd)return Nt(b,4,"Frame not displayable.");j+=3,J-=3;var se=b.Kc;if(ne.Rb){if(7>J)return Nt(b,7,"cannot parse picture header");if(!$t(T,j,J))return Nt(b,3,"Bad code word");se.c=16383&(T[j+4]<<8|T[j+3]),se.Td=T[j+4]>>6,se.i=16383&(T[j+6]<<8|T[j+5]),se.Ud=T[j+6]>>6,j+=7,J-=7,b.za=se.c+15>>4,b.Ub=se.i+15>>4,A.width=se.c,A.height=se.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,s((ee=b.Pa).jb,0,255,ee.jb.length),e((ee=b.Qa)!=null),ee.Cb=0,ee.Bb=0,ee.Fb=1,s(ee.Zb,0,0,ee.Zb.length),s(ee.Lb,0,0,ee.Lb)}if(ne.ub>J)return Nt(b,7,"bad partition length");Y(ee=b.m,T,j,ne.ub),j+=ne.ub,J-=ne.ub,ne.Rb&&(se.Ld=ve(ee),se.Kd=ve(ee)),se=b.Qa;var oe,pe=b.Pa;if(e(ee!=null),e(se!=null),se.Cb=ve(ee),se.Cb){if(se.Bb=ve(ee),ve(ee)){for(se.Fb=ve(ee),oe=0;4>oe;++oe)se.Zb[oe]=ve(ee)?Z(ee,7):0;for(oe=0;4>oe;++oe)se.Lb[oe]=ve(ee)?Z(ee,6):0}if(se.Bb)for(oe=0;3>oe;++oe)pe.jb[oe]=ve(ee)?$(ee,8):255}else se.Bb=0;if(ee.Ka)return Nt(b,3,"cannot parse segment header");if((se=b.ed).zd=ve(ee),se.Tb=$(ee,6),se.wb=$(ee,3),se.Pc=ve(ee),se.Pc&&ve(ee)){for(pe=0;4>pe;++pe)ve(ee)&&(se.vd[pe]=Z(ee,6));for(pe=0;4>pe;++pe)ve(ee)&&(se.od[pe]=Z(ee,6))}if(b.L=se.Tb==0?0:se.zd?1:2,ee.Ka)return Nt(b,3,"cannot parse filter header");var ke=J;if(J=oe=j,j=oe+ke,se=ke,b.Xb=(1<<$(b.m,2))-1,ke<3*(pe=b.Xb))T=7;else{for(oe+=3*pe,se-=3*pe,ke=0;ke<pe;++ke){var Re=T[J+0]|T[J+1]<<8|T[J+2]<<16;Re>se&&(Re=se),Y(b.Jc[+ke],T,oe,Re),oe+=Re,se-=Re,J+=3}Y(b.Jc[+pe],T,oe,se),T=oe<j?0:5}if(T!=0)return Nt(b,T,"cannot parse partitions");for(T=$(oe=b.m,7),J=ve(oe)?Z(oe,4):0,j=ve(oe)?Z(oe,4):0,se=ve(oe)?Z(oe,4):0,pe=ve(oe)?Z(oe,4):0,oe=ve(oe)?Z(oe,4):0,ke=b.Qa,Re=0;4>Re;++Re){if(ke.Cb){var Fe=ke.Zb[Re];ke.Fb||(Fe+=T)}else{if(0<Re){b.pb[Re]=b.pb[0];continue}Fe=T}var xe=b.pb[Re];xe.Sc[0]=Gh[Nn(Fe+J,127)],xe.Sc[1]=Yh[Nn(Fe+0,127)],xe.Eb[0]=2*Gh[Nn(Fe+j,127)],xe.Eb[1]=101581*Yh[Nn(Fe+se,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=Gh[Nn(Fe+pe,117)],xe.Qc[1]=Yh[Nn(Fe+oe,127)],xe.lc=Fe+oe}if(!ne.Rb)return Nt(b,4,"Not a key frame.");for(ve(ee),ne=b.Pa,T=0;4>T;++T){for(J=0;8>J;++J)for(j=0;3>j;++j)for(se=0;11>se;++se)pe=he(ee,n_[T][J][j][se])?$(ee,8):e_[T][J][j][se],ne.Wc[T][J].Yb[j][se]=pe;for(J=0;17>J;++J)ne.Xc[T][J]=ne.Wc[T][i_[J]]}return b.kc=ve(ee),b.kc&&(b.Bd=$(ee,8)),b.cb=1}function Wa(b,A,T,j,J,ee,ne){var se=A[J].Yb[T];for(T=0;16>J;++J){if(!he(b,se[T+0]))return J;for(;!he(b,se[T+1]);)if(se=A[++J].Yb[0],T=0,J==16)return 16;var oe=A[J+1].Yb;if(he(b,se[T+2])){var pe=b,ke=0;if(he(pe,(Fe=se)[(Re=T)+3]))if(he(pe,Fe[Re+6])){for(se=0,Re=2*(ke=he(pe,Fe[Re+8]))+(Fe=he(pe,Fe[Re+9+ke])),ke=0,Fe=Qv[Re];Fe[se];++se)ke+=ke+he(pe,Fe[se]);ke+=3+(8<<Re)}else he(pe,Fe[Re+7])?(ke=7+2*he(pe,165),ke+=he(pe,145)):ke=5+he(pe,159);else ke=he(pe,Fe[Re+4])?3+he(pe,Fe[Re+5]):2;se=oe[2]}else ke=1,se=oe[1];oe=ne+$v[J],0>(pe=b).b&&fe(pe);var Re,Fe=pe.b,xe=(Re=pe.Ca>>1)-(pe.I>>Fe)>>31;--pe.b,pe.Ca+=xe,pe.Ca|=1,pe.I-=(Re+1&xe)<<Fe,ee[oe]=((ke^xe)-xe)*j[(0<J)+0]}return 16}function Xo(b){var A=b.rb[b.sb-1];A.la=0,A.Na=0,s(b.zc,0,0,b.zc.length),b.ja=0}function Ga(b,A){if(b==null)return 0;if(A==null)return Nt(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Jo(b,A))return 0;if(e(b.cb),A.ac==null||A.ac(A)){A.ob&&(b.L=0);var T=fu[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=A.v-T>>4,b.zb=A.j-T>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=A.o+15+T>>4,b.Hb=A.va+15+T>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var j=b.ed;for(T=0;4>T;++T){var J;if(b.Qa.Cb){var ee=b.Qa.Lb[T];b.Qa.Fb||(ee+=j.Tb)}else ee=j.Tb;for(J=0;1>=J;++J){var ne=b.gd[T][J],se=ee;if(j.Pc&&(se+=j.vd[0],J&&(se+=j.od[0])),0<(se=0>se?0:63<se?63:se)){var oe=se;0<j.wb&&(oe=4<j.wb?oe>>2:oe>>1)>9-j.wb&&(oe=9-j.wb),1>oe&&(oe=1),ne.dd=oe,ne.tc=2*se+oe,ne.ld=40<=se?2:15<=se?1:0}else ne.tc=0;ne.La=J}}}T=0}else Nt(b,6,"Frame setup failed"),T=b.a;if(T=T==0){if(T){b.$c=0,0<b.Aa||(b.Ic=g_);e:{T=b.Ic,j=4*(oe=b.za);var pe=32*oe,ke=oe+1,Re=0<b.L?oe*(0<b.Aa?2:1):0,Fe=(b.Aa==2?2:1)*oe;if((ne=j+832+(J=3*(16*T+fu[b.L])/2*pe)+(ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=ne)T=0;else{if(ne>b.Vb){if(b.Vb=0,b.Ec=r(ne),b.Fc=0,b.Ec==null){T=Nt(b,1,"no memory during frame initialization.");break e}b.Vb=ne}ne=b.Ec,se=b.Fc,b.Ac=ne,b.Bc=se,se+=j,b.Gd=o(pe,At),b.Hd=0,b.rb=o(ke+1,dn),b.sb=1,b.wa=Re?o(Re,Yt):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=oe),e(!0),b.oc=ne,b.pc=se,se+=832,b.ya=o(Fe,nn),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=oe),b.R=16*oe,b.B=8*oe,oe=(pe=fu[b.L])*b.R,pe=pe/2*b.B,b.sa=ne,b.ta=se+oe,b.qa=b.sa,b.ra=b.ta+16*T*b.R+pe,b.Ha=b.qa,b.Ia=b.ra+8*T*b.B+pe,b.$c=0,se+=J,b.mb=ee?ne:null,b.nb=ee?se:null,e(se+ee<=b.Fc+b.Vb),Xo(b),s(b.Ac,b.Bc,0,j),T=1}}if(T){if(A.ka=0,A.y=b.sa,A.O=b.ta,A.f=b.qa,A.N=b.ra,A.ea=b.Ha,A.Vd=b.Ia,A.fa=b.R,A.Rc=b.B,A.F=null,A.J=0,!su){for(T=-255;255>=T;++T)ki[255+T]=0>T?-T:T;for(T=-1020;1020>=T;++T)Cr[1020+T]=-128>T?-128:127<T?127:T;for(T=-112;112>=T;++T)Yl[112+T]=-16>T?-16:15<T?15:T;for(T=-255;510>=T;++T)ll[255+T]=0>T?0:255<T?255:T;su=1}rl=yr,Lr=Xr,Vl=Zo,Ji=Cn,ys=_r,ui=vr,ol=io,iu=Es,Wl=ro,aa=ra,la=so,po=Ar,ca=oo,al=er,ua=wr,mo=hs,Gl=Si,ws=Za,Os[0]=vs,Os[1]=Fl,Os[2]=Qs,Os[3]=jl,Os[4]=Ja,Os[5]=$r,Os[6]=cs,Os[7]=$o,Os[8]=to,Os[9]=eo,go[0]=Zs,go[1]=Bl,go[2]=Ts,go[3]=Zr,go[4]=Kn,go[5]=Ka,go[6]=Qo,Tr[0]=xs,Tr[1]=Ya,Tr[2]=Xa,Tr[3]=Ds,Tr[4]=Tn,Tr[5]=ea,Tr[6]=ta,T=1}else T=0}T&&(T=function(xe,nt){for(xe.M=0;xe.M<xe.Va;++xe.M){var Ve,Pe=xe.Jc[xe.M&xe.Xb],Ce=xe.m,et=xe;for(Ve=0;Ve<et.za;++Ve){var at=Ce,tt=et,It=tt.Ac,_t=tt.Bc+4*Ve,jt=tt.zc,St=tt.ya[tt.aa+Ve];if(tt.Qa.Bb?St.$b=he(at,tt.Pa.jb[0])?2+he(at,tt.Pa.jb[2]):he(at,tt.Pa.jb[1]):St.$b=0,tt.kc&&(St.Ad=he(at,tt.Bd)),St.Za=!he(at,145)+0,St.Za){var Pn=St.Ob,Dn=0;for(tt=0;4>tt;++tt){var wn,ln=jt[0+tt];for(wn=0;4>wn;++wn){ln=t_[It[_t+wn]][ln];for(var jn=vp[he(at,ln[0])];0<jn;)jn=vp[2*jn+he(at,ln[jn])];ln=-jn,It[_t+wn]=ln}i(Pn,Dn,It,_t,4),Dn+=4,jt[0+tt]=ln}}else ln=he(at,156)?he(at,128)?1:3:he(at,163)?2:0,St.Ob[0]=ln,s(It,_t,ln,4),s(jt,0,ln,4);St.Dd=he(at,142)?he(at,114)?he(at,183)?1:3:2:0}if(et.m.Ka)return Nt(xe,7,"Premature end-of-partition0 encountered.");for(;xe.ja<xe.za;++xe.ja){if(et=Pe,at=(Ce=xe).rb[Ce.sb-1],It=Ce.rb[Ce.sb+Ce.ja],Ve=Ce.ya[Ce.aa+Ce.ja],_t=Ce.kc?Ve.Ad:0)at.la=It.la=0,Ve.Za||(at.Na=It.Na=0),Ve.Hc=0,Ve.Gc=0,Ve.ia=0;else{var Fn,Qt;if(at=It,It=et,_t=Ce.Pa.Xc,jt=Ce.ya[Ce.aa+Ce.ja],St=Ce.pb[jt.$b],tt=jt.ad,Pn=0,Dn=Ce.rb[Ce.sb-1],ln=wn=0,s(tt,Pn,0,384),jt.Za)var vi=0,is=_t[3];else{jn=r(16);var _i=at.Na+Dn.Na;if(_i=Kl(It,_t[1],_i,St.Eb,0,jn,0),at.Na=Dn.Na=(0<_i)+0,1<_i)rl(jn,0,tt,Pn);else{var ss=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)tt[Pn+jn]=ss}vi=1,is=_t[0]}var xn=15&at.la,fs=15&Dn.la;for(jn=0;4>jn;++jn){var ps=1&fs;for(ss=Qt=0;4>ss;++ss)xn=xn>>1|(ps=(_i=Kl(It,is,_i=ps+(1&xn),St.Sc,vi,tt,Pn))>vi)<<7,Qt=Qt<<2|(3<_i?3:1<_i?2:tt[Pn+0]!=0),Pn+=16;xn>>=4,fs=fs>>1|ps<<7,wn=(wn<<8|Qt)>>>0}for(is=xn,vi=fs>>4,Fn=0;4>Fn;Fn+=2){for(Qt=0,xn=at.la>>4+Fn,fs=Dn.la>>4+Fn,jn=0;2>jn;++jn){for(ps=1&fs,ss=0;2>ss;++ss)_i=ps+(1&xn),xn=xn>>1|(ps=0<(_i=Kl(It,_t[2],_i,St.Qc,0,tt,Pn)))<<3,Qt=Qt<<2|(3<_i?3:1<_i?2:tt[Pn+0]!=0),Pn+=16;xn>>=2,fs=fs>>1|ps<<5}ln|=Qt<<4*Fn,is|=xn<<4<<Fn,vi|=(240&fs)<<Fn}at.la=is,Dn.la=vi,jt.Hc=wn,jt.Gc=ln,jt.ia=43690&ln?0:St.ia,_t=!(wn|ln)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[Ve.$b][Ve.Za],Ce.wa[Ce.Y+Ce.ja].La|=!_t),et.Ka)return Nt(xe,7,"Premature end-of-file encountered.")}if(Xo(xe),Ce=nt,et=1,Ve=(Pe=xe).D,at=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(Ve.M=Pe.M,Ve.uc=at,Pr(Pe,Ve),et=1,Ve=(Qt=Pe.D).Nb,at=(ln=fu[Pe.L])*Pe.R,It=ln/2*Pe.B,jn=16*Ve*Pe.R,ss=8*Ve*Pe.B,_t=Pe.sa,jt=Pe.ta-at+jn,St=Pe.qa,tt=Pe.ra-It+ss,Pn=Pe.Ha,Dn=Pe.Ia-It+ss,fs=(xn=Qt.M)==0,wn=xn>=Pe.Va-1,Pe.Aa==2&&Pr(Pe,Qt),Qt.uc)for(ps=(_i=Pe).D.M,e(_i.D.uc),Qt=_i.yb;Qt<_i.Hb;++Qt){vi=Qt,is=ps;var Ii=(Ei=(ai=_i).D).Nb;Fn=ai.R;var Ei=Ei.wa[Ei.Y+vi],Xi=ai.sa,Ps=ai.ta+16*Ii*Fn+16*vi,ir=Ei.dd,Li=Ei.tc;if(Li!=0)if(e(3<=Li),ai.L==1)0<vi&&mo(Xi,Ps,Fn,Li+4),Ei.La&&ws(Xi,Ps,Fn,Li),0<is&&ua(Xi,Ps,Fn,Li+4),Ei.La&&Gl(Xi,Ps,Fn,Li);else{var Dr=ai.B,ha=ai.qa,cl=ai.ra+8*Ii*Dr+8*vi,vo=ai.Ha,ai=ai.Ia+8*Ii*Dr+8*vi;Ii=Ei.ld,0<vi&&(iu(Xi,Ps,Fn,Li+4,ir,Ii),aa(ha,cl,vo,ai,Dr,Li+4,ir,Ii)),Ei.La&&(po(Xi,Ps,Fn,Li,ir,Ii),al(ha,cl,vo,ai,Dr,Li,ir,Ii)),0<is&&(ol(Xi,Ps,Fn,Li+4,ir,Ii),Wl(ha,cl,vo,ai,Dr,Li+4,ir,Ii)),Ei.La&&(la(Xi,Ps,Fn,Li,ir,Ii),ca(ha,cl,vo,ai,Dr,Li,ir,Ii))}}if(Pe.ia&&alert("todo:DitherRow"),Ce.put!=null){if(Qt=16*xn,xn=16*(xn+1),fs?(Ce.y=Pe.sa,Ce.O=Pe.ta+jn,Ce.f=Pe.qa,Ce.N=Pe.ra+ss,Ce.ea=Pe.Ha,Ce.W=Pe.Ia+ss):(Qt-=ln,Ce.y=_t,Ce.O=jt,Ce.f=St,Ce.N=tt,Ce.ea=Pn,Ce.W=Dn),wn||(xn-=ln),xn>Ce.o&&(xn=Ce.o),Ce.F=null,Ce.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&Qt<xn&&(Ce.J=uo(Pe,Ce,Qt,xn-Qt),Ce.F=Pe.mb,Ce.F==null&&Ce.F.length==0)){et=Nt(Pe,3,"Could not decode alpha data.");break e}Qt<Ce.j&&(ln=Ce.j-Qt,Qt=Ce.j,e(!(1&ln)),Ce.O+=Pe.R*ln,Ce.N+=Pe.B*(ln>>1),Ce.W+=Pe.B*(ln>>1),Ce.F!=null&&(Ce.J+=Ce.width*ln)),Qt<xn&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=Qt-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=xn-Qt,et=Ce.put(Ce))}Ve+1!=Pe.Ic||wn||(i(Pe.sa,Pe.ta-at,_t,jt+16*Pe.R,at),i(Pe.qa,Pe.ra-It,St,tt+8*Pe.B,It),i(Pe.Ha,Pe.Ia-It,Pn,Dn+8*Pe.B,It))}if(!et)return Nt(xe,6,"Output aborted.")}return 1}(b,A)),A.bc!=null&&A.bc(A),T&=1}return T?(b.cb=0,T):0}function es(b,A,T,j,J){J=b[A+T+32*j]+(J>>3),b[A+T+32*j]=-256&J?0>J?0:255:J}function Jr(b,A,T,j,J,ee){es(b,A,0,T,j+J),es(b,A,1,T,j+ee),es(b,A,2,T,j-ee),es(b,A,3,T,j-J)}function oi(b){return(20091*b>>16)+b}function Yi(b,A,T,j){var J,ee=0,ne=r(16);for(J=0;4>J;++J){var se=b[A+0]+b[A+8],oe=b[A+0]-b[A+8],pe=(35468*b[A+4]>>16)-oi(b[A+12]),ke=oi(b[A+4])+(35468*b[A+12]>>16);ne[ee+0]=se+ke,ne[ee+1]=oe+pe,ne[ee+2]=oe-pe,ne[ee+3]=se-ke,ee+=4,A++}for(J=ee=0;4>J;++J)se=(b=ne[ee+0]+4)+ne[ee+8],oe=b-ne[ee+8],pe=(35468*ne[ee+4]>>16)-oi(ne[ee+12]),es(T,j,0,0,se+(ke=oi(ne[ee+4])+(35468*ne[ee+12]>>16))),es(T,j,1,0,oe+pe),es(T,j,2,0,oe-pe),es(T,j,3,0,se-ke),ee++,j+=32}function vr(b,A,T,j){var J=b[A+0]+4,ee=35468*b[A+4]>>16,ne=oi(b[A+4]),se=35468*b[A+1]>>16;Jr(T,j,0,J+ne,b=oi(b[A+1]),se),Jr(T,j,1,J+ee,b,se),Jr(T,j,2,J-ee,b,se),Jr(T,j,3,J-ne,b,se)}function Xr(b,A,T,j,J){Yi(b,A,T,j),J&&Yi(b,A+16,T,j+4)}function Zo(b,A,T,j){Lr(b,A+0,T,j,1),Lr(b,A+32,T,j+128,1)}function Cn(b,A,T,j){var J;for(b=b[A+0]+4,J=0;4>J;++J)for(A=0;4>A;++A)es(T,j,A,J,b)}function _r(b,A,T,j){b[A+0]&&Ji(b,A+0,T,j),b[A+16]&&Ji(b,A+16,T,j+4),b[A+32]&&Ji(b,A+32,T,j+128),b[A+48]&&Ji(b,A+48,T,j+128+4)}function yr(b,A,T,j){var J,ee=r(16);for(J=0;4>J;++J){var ne=b[A+0+J]+b[A+12+J],se=b[A+4+J]+b[A+8+J],oe=b[A+4+J]-b[A+8+J],pe=b[A+0+J]-b[A+12+J];ee[0+J]=ne+se,ee[8+J]=ne-se,ee[4+J]=pe+oe,ee[12+J]=pe-oe}for(J=0;4>J;++J)ne=(b=ee[0+4*J]+3)+ee[3+4*J],se=ee[1+4*J]+ee[2+4*J],oe=ee[1+4*J]-ee[2+4*J],pe=b-ee[3+4*J],T[j+0]=ne+se>>3,T[j+16]=pe+oe>>3,T[j+32]=ne-se>>3,T[j+48]=pe-oe>>3,j+=64}function Cs(b,A,T){var j,J=A-32,ee=ds,ne=255-b[J-1];for(j=0;j<T;++j){var se,oe=ee,pe=ne+b[A-1];for(se=0;se<T;++se)b[A+se]=oe[pe+b[J+se]];A+=32}}function Fl(b,A){Cs(b,A,4)}function Ya(b,A){Cs(b,A,8)}function Bl(b,A){Cs(b,A,16)}function Ts(b,A){var T;for(T=0;16>T;++T)i(b,A+32*T,b,A-32,16)}function Zr(b,A){var T;for(T=16;0<T;--T)s(b,A,b[A-1],16),A+=32}function Qr(b,A,T){var j;for(j=0;16>j;++j)s(A,T+32*j,b,16)}function Zs(b,A){var T,j=16;for(T=0;16>T;++T)j+=b[A-1+32*T]+b[A+T-32];Qr(j>>5,b,A)}function Kn(b,A){var T,j=8;for(T=0;16>T;++T)j+=b[A-1+32*T];Qr(j>>4,b,A)}function Ka(b,A){var T,j=8;for(T=0;16>T;++T)j+=b[A+T-32];Qr(j>>4,b,A)}function Qo(b,A){Qr(128,b,A)}function Wt(b,A,T){return b+2*A+T+2>>2}function Qs(b,A){var T,j=A-32;for(j=new Uint8Array([Wt(b[j-1],b[j+0],b[j+1]),Wt(b[j+0],b[j+1],b[j+2]),Wt(b[j+1],b[j+2],b[j+3]),Wt(b[j+2],b[j+3],b[j+4])]),T=0;4>T;++T)i(b,A+32*T,j,0,j.length)}function jl(b,A){var T=b[A-1],j=b[A-1+32],J=b[A-1+64],ee=b[A-1+96];ye(b,A+0,16843009*Wt(b[A-1-32],T,j)),ye(b,A+32,16843009*Wt(T,j,J)),ye(b,A+64,16843009*Wt(j,J,ee)),ye(b,A+96,16843009*Wt(J,ee,ee))}function vs(b,A){var T,j=4;for(T=0;4>T;++T)j+=b[A+T-32]+b[A-1+32*T];for(j>>=3,T=0;4>T;++T)s(b,A+32*T,j,4)}function Ja(b,A){var T=b[A-1+0],j=b[A-1+32],J=b[A-1+64],ee=b[A-1-32],ne=b[A+0-32],se=b[A+1-32],oe=b[A+2-32],pe=b[A+3-32];b[A+0+96]=Wt(j,J,b[A-1+96]),b[A+1+96]=b[A+0+64]=Wt(T,j,J),b[A+2+96]=b[A+1+64]=b[A+0+32]=Wt(ee,T,j),b[A+3+96]=b[A+2+64]=b[A+1+32]=b[A+0+0]=Wt(ne,ee,T),b[A+3+64]=b[A+2+32]=b[A+1+0]=Wt(se,ne,ee),b[A+3+32]=b[A+2+0]=Wt(oe,se,ne),b[A+3+0]=Wt(pe,oe,se)}function cs(b,A){var T=b[A+1-32],j=b[A+2-32],J=b[A+3-32],ee=b[A+4-32],ne=b[A+5-32],se=b[A+6-32],oe=b[A+7-32];b[A+0+0]=Wt(b[A+0-32],T,j),b[A+1+0]=b[A+0+32]=Wt(T,j,J),b[A+2+0]=b[A+1+32]=b[A+0+64]=Wt(j,J,ee),b[A+3+0]=b[A+2+32]=b[A+1+64]=b[A+0+96]=Wt(J,ee,ne),b[A+3+32]=b[A+2+64]=b[A+1+96]=Wt(ee,ne,se),b[A+3+64]=b[A+2+96]=Wt(ne,se,oe),b[A+3+96]=Wt(se,oe,oe)}function $r(b,A){var T=b[A-1+0],j=b[A-1+32],J=b[A-1+64],ee=b[A-1-32],ne=b[A+0-32],se=b[A+1-32],oe=b[A+2-32],pe=b[A+3-32];b[A+0+0]=b[A+1+64]=ee+ne+1>>1,b[A+1+0]=b[A+2+64]=ne+se+1>>1,b[A+2+0]=b[A+3+64]=se+oe+1>>1,b[A+3+0]=oe+pe+1>>1,b[A+0+96]=Wt(J,j,T),b[A+0+64]=Wt(j,T,ee),b[A+0+32]=b[A+1+96]=Wt(T,ee,ne),b[A+1+32]=b[A+2+96]=Wt(ee,ne,se),b[A+2+32]=b[A+3+96]=Wt(ne,se,oe),b[A+3+32]=Wt(se,oe,pe)}function $o(b,A){var T=b[A+0-32],j=b[A+1-32],J=b[A+2-32],ee=b[A+3-32],ne=b[A+4-32],se=b[A+5-32],oe=b[A+6-32],pe=b[A+7-32];b[A+0+0]=T+j+1>>1,b[A+1+0]=b[A+0+64]=j+J+1>>1,b[A+2+0]=b[A+1+64]=J+ee+1>>1,b[A+3+0]=b[A+2+64]=ee+ne+1>>1,b[A+0+32]=Wt(T,j,J),b[A+1+32]=b[A+0+96]=Wt(j,J,ee),b[A+2+32]=b[A+1+96]=Wt(J,ee,ne),b[A+3+32]=b[A+2+96]=Wt(ee,ne,se),b[A+3+64]=Wt(ne,se,oe),b[A+3+96]=Wt(se,oe,pe)}function eo(b,A){var T=b[A-1+0],j=b[A-1+32],J=b[A-1+64],ee=b[A-1+96];b[A+0+0]=T+j+1>>1,b[A+2+0]=b[A+0+32]=j+J+1>>1,b[A+2+32]=b[A+0+64]=J+ee+1>>1,b[A+1+0]=Wt(T,j,J),b[A+3+0]=b[A+1+32]=Wt(j,J,ee),b[A+3+32]=b[A+1+64]=Wt(J,ee,ee),b[A+3+64]=b[A+2+64]=b[A+0+96]=b[A+1+96]=b[A+2+96]=b[A+3+96]=ee}function to(b,A){var T=b[A-1+0],j=b[A-1+32],J=b[A-1+64],ee=b[A-1+96],ne=b[A-1-32],se=b[A+0-32],oe=b[A+1-32],pe=b[A+2-32];b[A+0+0]=b[A+2+32]=T+ne+1>>1,b[A+0+32]=b[A+2+64]=j+T+1>>1,b[A+0+64]=b[A+2+96]=J+j+1>>1,b[A+0+96]=ee+J+1>>1,b[A+3+0]=Wt(se,oe,pe),b[A+2+0]=Wt(ne,se,oe),b[A+1+0]=b[A+3+32]=Wt(T,ne,se),b[A+1+32]=b[A+3+64]=Wt(j,T,ne),b[A+1+64]=b[A+3+96]=Wt(J,j,T),b[A+1+96]=Wt(ee,J,j)}function Xa(b,A){var T;for(T=0;8>T;++T)i(b,A+32*T,b,A-32,8)}function Ds(b,A){var T;for(T=0;8>T;++T)s(b,A,b[A-1],8),A+=32}function us(b,A,T){var j;for(j=0;8>j;++j)s(A,T+32*j,b,8)}function xs(b,A){var T,j=8;for(T=0;8>T;++T)j+=b[A+T-32]+b[A-1+32*T];us(j>>4,b,A)}function ea(b,A){var T,j=4;for(T=0;8>T;++T)j+=b[A+T-32];us(j>>3,b,A)}function Tn(b,A){var T,j=4;for(T=0;8>T;++T)j+=b[A-1+32*T];us(j>>3,b,A)}function ta(b,A){us(128,b,A)}function no(b,A,T){var j=b[A-T],J=b[A+0],ee=3*(J-j)+zh[1020+b[A-2*T]-b[A+T]],ne=ru[112+(ee+4>>3)];b[A-T]=ds[255+j+ru[112+(ee+3>>3)]],b[A+0]=ds[255+J-ne]}function na(b,A,T,j){var J=b[A+0],ee=b[A+T];return Ss[255+b[A-2*T]-b[A-T]]>j||Ss[255+ee-J]>j}function ia(b,A,T,j){return 4*Ss[255+b[A-T]-b[A+0]]+Ss[255+b[A-2*T]-b[A+T]]<=j}function sa(b,A,T,j,J){var ee=b[A-3*T],ne=b[A-2*T],se=b[A-T],oe=b[A+0],pe=b[A+T],ke=b[A+2*T],Re=b[A+3*T];return 4*Ss[255+se-oe]+Ss[255+ne-pe]>j?0:Ss[255+b[A-4*T]-ee]<=J&&Ss[255+ee-ne]<=J&&Ss[255+ne-se]<=J&&Ss[255+Re-ke]<=J&&Ss[255+ke-pe]<=J&&Ss[255+pe-oe]<=J}function wr(b,A,T,j){var J=2*j+1;for(j=0;16>j;++j)ia(b,A+j,T,J)&&no(b,A+j,T)}function hs(b,A,T,j){var J=2*j+1;for(j=0;16>j;++j)ia(b,A+j*T,1,J)&&no(b,A+j*T,1)}function Si(b,A,T,j){var J;for(J=3;0<J;--J)wr(b,A+=4*T,T,j)}function Za(b,A,T,j){var J;for(J=3;0<J;--J)hs(b,A+=4,T,j)}function $s(b,A,T,j,J,ee,ne,se){for(ee=2*ee+1;0<J--;){if(sa(b,A,T,ee,ne))if(na(b,A,T,se))no(b,A,T);else{var oe=b,pe=A,ke=T,Re=oe[pe-2*ke],Fe=oe[pe-ke],xe=oe[pe+0],nt=oe[pe+ke],Ve=oe[pe+2*ke],Pe=27*(et=zh[1020+3*(xe-Fe)+zh[1020+Re-nt]])+63>>7,Ce=18*et+63>>7,et=9*et+63>>7;oe[pe-3*ke]=ds[255+oe[pe-3*ke]+et],oe[pe-2*ke]=ds[255+Re+Ce],oe[pe-ke]=ds[255+Fe+Pe],oe[pe+0]=ds[255+xe-Pe],oe[pe+ke]=ds[255+nt-Ce],oe[pe+2*ke]=ds[255+Ve-et]}A+=j}}function Ti(b,A,T,j,J,ee,ne,se){for(ee=2*ee+1;0<J--;){if(sa(b,A,T,ee,ne))if(na(b,A,T,se))no(b,A,T);else{var oe=b,pe=A,ke=T,Re=oe[pe-ke],Fe=oe[pe+0],xe=oe[pe+ke],nt=ru[112+((Ve=3*(Fe-Re))+4>>3)],Ve=ru[112+(Ve+3>>3)],Pe=nt+1>>1;oe[pe-2*ke]=ds[255+oe[pe-2*ke]+Pe],oe[pe-ke]=ds[255+Re+Ve],oe[pe+0]=ds[255+Fe-nt],oe[pe+ke]=ds[255+xe-Pe]}A+=j}}function io(b,A,T,j,J,ee){$s(b,A,T,1,16,j,J,ee)}function Es(b,A,T,j,J,ee){$s(b,A,1,T,16,j,J,ee)}function so(b,A,T,j,J,ee){var ne;for(ne=3;0<ne;--ne)Ti(b,A+=4*T,T,1,16,j,J,ee)}function Ar(b,A,T,j,J,ee){var ne;for(ne=3;0<ne;--ne)Ti(b,A+=4,1,T,16,j,J,ee)}function ro(b,A,T,j,J,ee,ne,se){$s(b,A,J,1,8,ee,ne,se),$s(T,j,J,1,8,ee,ne,se)}function ra(b,A,T,j,J,ee,ne,se){$s(b,A,1,J,8,ee,ne,se),$s(T,j,1,J,8,ee,ne,se)}function oo(b,A,T,j,J,ee,ne,se){Ti(b,A+4*J,J,1,8,ee,ne,se),Ti(T,j+4*J,J,1,8,ee,ne,se)}function er(b,A,T,j,J,ee,ne,se){Ti(b,A+4,1,J,8,ee,ne,se),Ti(T,j+4,1,J,8,ee,ne,se)}function Sr(){this.ba=new ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new st,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ao(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lo(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new C}function Qa(){this.xb=this.a=0,this.l=new kn,this.ca=new ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lo,this.ab=0,this.gc=o(4,kr),this.Oc=0}function Ms(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function tr(b,A,T,j,J,ee,ne){for(b=b==null?0:b[A+0],A=0;A<ne;++A)J[ee+A]=b+T[j+A]&255,b=J[ee+A]}function co(b,A,T,j,J,ee,ne){var se;if(b==null)tr(null,null,T,j,J,ee,ne);else for(se=0;se<ne;++se)J[ee+se]=b[A+se]+T[j+se]&255}function Ri(b,A,T,j,J,ee,ne){if(b==null)tr(null,null,T,j,J,ee,ne);else{var se,oe=b[A+0],pe=oe,ke=oe;for(se=0;se<ne;++se)pe=ke+(oe=b[A+se])-pe,ke=T[j+se]+(-256&pe?0>pe?0:255:pe)&255,pe=oe,J[ee+se]=ke}}function uo(b,A,T,j){var J=A.width,ee=A.o;if(e(b!=null&&A!=null),0>T||0>=j||T+j>ee)return null;if(!b.Cc){if(b.ga==null){var ne;if(b.ga=new Ms,(ne=b.ga==null)||(ne=A.width*A.o,e(b.Gb.length==0),b.Gb=r(ne),b.Uc=0,b.Gb==null?ne=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,ne=1),ne=!ne),!ne){ne=b.ga;var se=b.Fa,oe=b.P,pe=b.qc,ke=b.mb,Re=b.nb,Fe=oe+1,xe=pe-1,nt=ne.l;if(e(se!=null&&ke!=null&&A!=null),bo[0]=null,bo[1]=tr,bo[2]=co,bo[3]=Ri,ne.ca=ke,ne.tb=Re,ne.c=A.width,ne.i=A.height,e(0<ne.c&&0<ne.i),1>=pe)A=0;else if(ne.$a=se[oe+0]>>0&3,ne.Z=se[oe+0]>>2&3,ne.Lc=se[oe+0]>>4&3,oe=se[oe+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||oe)A=0;else if(nt.put=Ct,nt.ac=Dt,nt.bc=qt,nt.ma=ne,nt.width=A.width,nt.height=A.height,nt.Da=A.Da,nt.v=A.v,nt.va=A.va,nt.j=A.j,nt.o=A.o,ne.$a)e:{e(ne.$a==1),A=yn();t:for(;;){if(A==null){A=0;break e}if(e(ne!=null),ne.mc=A,A.c=ne.c,A.i=ne.i,A.l=ne.l,A.l.ma=ne,A.l.width=ne.c,A.l.height=ne.i,A.a=0,X(A.m,se,Fe,xe),!Yn(ne.c,ne.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Qn(A.s)?(ne.ic=1,se=A.c*A.i,A.Ta=null,A.Ua=0,A.V=r(se),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(ne.ic=0,A=ri(A,ne.c)),!A))break t;A=1;break e}ne.mc=null,A=0}else A=xe>=ne.c*ne.i;ne=!A}if(ne)return null;b.ga.Lc!=1?b.Ga=0:j=ee-T}e(b.ga!=null),e(T+j<=ee);e:{if(A=(se=b.ga).c,ee=se.l.o,se.$a==0){if(Fe=b.rc,xe=b.Vc,nt=b.Fa,oe=b.P+1+T*A,pe=b.mb,ke=b.nb+T*A,e(oe<=b.P+b.qc),se.Z!=0)for(e(bo[se.Z]!=null),ne=0;ne<j;++ne)bo[se.Z](Fe,xe,nt,oe,pe,ke,A),Fe=pe,xe=ke,ke+=A,oe+=A;else for(ne=0;ne<j;++ne)i(pe,ke,nt,oe,A),Fe=pe,xe=ke,ke+=A,oe+=A;b.rc=Fe,b.Vc=xe}else{if(e(se.mc!=null),A=T+j,e((ne=se.mc)!=null),e(A<=ne.i),ne.C>=A)A=1;else if(se.ic||Oe(),se.ic){se=ne.V,Fe=ne.Ba,xe=ne.c;var Ve=ne.i,Pe=(nt=1,oe=ne.$/xe,pe=ne.$%xe,ke=ne.m,Re=ne.s,ne.$),Ce=xe*Ve,et=xe*A,at=Re.wc,tt=Pe<et?rn(Re,pe,oe):null;e(Pe<=Ce),e(A<=Ve),e(Qn(Re));t:for(;;){for(;!ke.h&&Pe<et;){if(pe&at||(tt=rn(Re,pe,oe)),e(tt!=null),ae(ke),256>(Ve=sn(tt.G[0],tt.H[0],ke)))se[Fe+Pe]=Ve,++Pe,++pe>=xe&&(pe=0,++oe<=A&&!(oe%16)&&vn(ne,oe));else{if(!(280>Ve)){nt=0;break t}Ve=en(Ve-256,ke);var It,_t=sn(tt.G[4],tt.H[4],ke);if(ae(ke),!(Pe>=(_t=Ln(xe,_t=en(_t,ke)))&&Ce-Pe>=Ve)){nt=0;break t}for(It=0;It<Ve;++It)se[Fe+Pe+It]=se[Fe+Pe+It-_t];for(Pe+=Ve,pe+=Ve;pe>=xe;)pe-=xe,++oe<=A&&!(oe%16)&&vn(ne,oe);Pe<et&&pe&at&&(tt=rn(Re,pe,oe))}e(ke.h==G(ke))}vn(ne,oe>A?A:oe);break t}!nt||ke.h&&Pe<Ce?(nt=0,ne.a=ke.h?5:3):ne.$=Pe,A=nt}else A=si(ne,ne.V,ne.Ba,ne.c,ne.i,A,hn);if(!A){j=0;break e}}T+j>=ee&&(b.Cc=1),j=1}if(!j)return null;if(b.Cc&&((j=b.ga)!=null&&(j.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+T*J}function N(b,A,T,j,J,ee){for(;0<J--;){var ne,se=b,oe=A+(T?1:0),pe=b,ke=A+(T?0:3);for(ne=0;ne<j;++ne){var Re=pe[ke+4*ne];Re!=255&&(Re*=32897,se[oe+4*ne+0]=se[oe+4*ne+0]*Re>>23,se[oe+4*ne+1]=se[oe+4*ne+1]*Re>>23,se[oe+4*ne+2]=se[oe+4*ne+2]*Re>>23)}A+=ee}}function K(b,A,T,j,J){for(;0<j--;){var ee;for(ee=0;ee<T;++ee){var ne=b[A+2*ee+0],se=15&(pe=b[A+2*ee+1]),oe=4369*se,pe=(240&pe|pe>>4)*oe>>16;b[A+2*ee+0]=(240&ne|ne>>4)*oe>>16&240|(15&ne|ne<<4)*oe>>16>>4&15,b[A+2*ee+1]=240&pe|se}A+=J}}function ge(b,A,T,j,J,ee,ne,se){var oe,pe,ke=255;for(pe=0;pe<J;++pe){for(oe=0;oe<j;++oe){var Re=b[A+oe];ee[ne+4*oe]=Re,ke&=Re}A+=T,ne+=se}return ke!=255}function we(b,A,T,j,J){var ee;for(ee=0;ee<J;++ee)T[j+ee]=b[A+ee]>>8}function Oe(){As=N,qn=K,Vn=ge,hi=we}function Ke(b,A,T){k[b]=function(j,J,ee,ne,se,oe,pe,ke,Re,Fe,xe,nt,Ve,Pe,Ce,et,at){var tt,It=at-1>>1,_t=se[oe+0]|pe[ke+0]<<16,jt=Re[Fe+0]|xe[nt+0]<<16;e(j!=null);var St=3*_t+jt+131074>>2;for(A(j[J+0],255&St,St>>16,Ve,Pe),ee!=null&&(St=3*jt+_t+131074>>2,A(ee[ne+0],255&St,St>>16,Ce,et)),tt=1;tt<=It;++tt){var Pn=se[oe+tt]|pe[ke+tt]<<16,Dn=Re[Fe+tt]|xe[nt+tt]<<16,wn=_t+Pn+jt+Dn+524296,ln=wn+2*(Pn+jt)>>3;St=ln+_t>>1,_t=(wn=wn+2*(_t+Dn)>>3)+Pn>>1,A(j[J+2*tt-1],255&St,St>>16,Ve,Pe+(2*tt-1)*T),A(j[J+2*tt-0],255&_t,_t>>16,Ve,Pe+(2*tt-0)*T),ee!=null&&(St=wn+jt>>1,_t=ln+Dn>>1,A(ee[ne+2*tt-1],255&St,St>>16,Ce,et+(2*tt-1)*T),A(ee[ne+2*tt+0],255&_t,_t>>16,Ce,et+(2*tt+0)*T)),_t=Pn,jt=Dn}1&at||(St=3*_t+jt+131074>>2,A(j[J+at-1],255&St,St>>16,Ve,Pe+(at-1)*T),ee!=null&&(St=3*jt+_t+131074>>2,A(ee[ne+at-1],255&St,St>>16,Ce,et+(at-1)*T)))}}function rt(){ks[ou]=r_,ks[au]=yp,ks[mp]=o_,ks[lu]=wp,ks[cu]=Ap,ks[Hh]=Sp,ks[gp]=a_,ks[qh]=yp,ks[Vh]=wp,ks[uu]=Ap,ks[Wh]=Sp}function v(b){return b&-16384?0>b?0:255:b>>l_}function M(b,A){return v((19077*b>>8)+(26149*A>>8)-14234)}function z(b,A,T){return v((19077*b>>8)-(6419*A>>8)-(13320*T>>8)+8708)}function ie(b,A){return v((19077*b>>8)+(33050*A>>8)-17685)}function Ne(b,A,T,j,J){j[J+0]=M(b,T),j[J+1]=z(b,A,T),j[J+2]=ie(b,A)}function Be(b,A,T,j,J){j[J+0]=ie(b,A),j[J+1]=z(b,A,T),j[J+2]=M(b,T)}function ct(b,A,T,j,J){var ee=z(b,A,T);A=ee<<3&224|ie(b,A)>>3,j[J+0]=248&M(b,T)|ee>>5,j[J+1]=A}function Gt(b,A,T,j,J){var ee=240&ie(b,A)|15;j[J+0]=240&M(b,T)|z(b,A,T)>>4,j[J+1]=ee}function pn(b,A,T,j,J){j[J+0]=255,Ne(b,A,T,j,J+1)}function zt(b,A,T,j,J){Be(b,A,T,j,J),j[J+3]=255}function Rn(b,A,T,j,J){Ne(b,A,T,j,J),j[J+3]=255}function Nn(b,A){return 0>b?0:b>A?A:b}function Di(b,A,T){k[b]=function(j,J,ee,ne,se,oe,pe,ke,Re){for(var Fe=ke+(-2&Re)*T;ke!=Fe;)A(j[J+0],ee[ne+0],se[oe+0],pe,ke),A(j[J+1],ee[ne+0],se[oe+0],pe,ke+T),J+=2,++ne,++oe,ke+=2*T;1&Re&&A(j[J+0],ee[ne+0],se[oe+0],pe,ke)}}function Fi(b,A,T){return T==0?b==0?A==0?6:5:A==0?4:0:T}function nr(b,A,T,j,J){switch(b>>>30){case 3:Lr(A,T,j,J,0);break;case 2:ui(A,T,j,J);break;case 1:Ji(A,T,j,J)}}function Pr(b,A){var T,j,J=A.M,ee=A.Nb,ne=b.oc,se=b.pc+40,oe=b.oc,pe=b.pc+584,ke=b.oc,Re=b.pc+600;for(T=0;16>T;++T)ne[se+32*T-1]=129;for(T=0;8>T;++T)oe[pe+32*T-1]=129,ke[Re+32*T-1]=129;for(0<J?ne[se-1-32]=oe[pe-1-32]=ke[Re-1-32]=129:(s(ne,se-32-1,127,21),s(oe,pe-32-1,127,9),s(ke,Re-32-1,127,9)),j=0;j<b.za;++j){var Fe=A.ya[A.aa+j];if(0<j){for(T=-1;16>T;++T)i(ne,se+32*T-4,ne,se+32*T+12,4);for(T=-1;8>T;++T)i(oe,pe+32*T-4,oe,pe+32*T+4,4),i(ke,Re+32*T-4,ke,Re+32*T+4,4)}var xe=b.Gd,nt=b.Hd+j,Ve=Fe.ad,Pe=Fe.Hc;if(0<J&&(i(ne,se-32,xe[nt].y,0,16),i(oe,pe-32,xe[nt].f,0,8),i(ke,Re-32,xe[nt].ea,0,8)),Fe.Za){var Ce=ne,et=se-32+16;for(0<J&&(j>=b.za-1?s(Ce,et,xe[nt].y[15],4):i(Ce,et,xe[nt+1].y,0,4)),T=0;4>T;T++)Ce[et+128+T]=Ce[et+256+T]=Ce[et+384+T]=Ce[et+0+T];for(T=0;16>T;++T,Pe<<=2)Ce=ne,et=se+Pp[T],Os[Fe.Ob[T]](Ce,et),nr(Pe,Ve,16*+T,Ce,et)}else if(Ce=Fi(j,J,Fe.Ob[0]),go[Ce](ne,se),Pe!=0)for(T=0;16>T;++T,Pe<<=2)nr(Pe,Ve,16*+T,ne,se+Pp[T]);for(T=Fe.Gc,Ce=Fi(j,J,Fe.Dd),Tr[Ce](oe,pe),Tr[Ce](ke,Re),Pe=Ve,Ce=oe,et=pe,255&(Fe=T>>0)&&(170&Fe?Vl(Pe,256,Ce,et):ys(Pe,256,Ce,et)),Fe=ke,Pe=Re,255&(T>>=8)&&(170&T?Vl(Ve,320,Fe,Pe):ys(Ve,320,Fe,Pe)),J<b.Ub-1&&(i(xe[nt].y,0,ne,se+480,16),i(xe[nt].f,0,oe,pe+224,8),i(xe[nt].ea,0,ke,Re+224,8)),T=8*ee*b.B,xe=b.sa,nt=b.ta+16*j+16*ee*b.R,Ve=b.qa,Fe=b.ra+8*j+T,Pe=b.Ha,Ce=b.Ia+8*j+T,T=0;16>T;++T)i(xe,nt+T*b.R,ne,se+32*T,16);for(T=0;8>T;++T)i(Ve,Fe+T*b.B,oe,pe+32*T,8),i(Pe,Ce+T*b.B,ke,Re+32*T,8)}}function $a(b,A,T,j,J,ee,ne,se,oe){var pe=[0],ke=[0],Re=0,Fe=oe!=null?oe.kd:0,xe=oe??new ao;if(b==null||12>T)return 7;xe.data=b,xe.w=A,xe.ha=T,A=[A],T=[T],xe.gb=[xe.gb];e:{var nt=A,Ve=T,Pe=xe.gb;if(e(b!=null),e(Ve!=null),e(Pe!=null),Pe[0]=0,12<=Ve[0]&&!t(b,nt[0],"RIFF")){if(t(b,nt[0]+8,"WEBP")){Pe=3;break e}var Ce=Te(b,nt[0]+4);if(12>Ce||4294967286<Ce){Pe=3;break e}if(Fe&&Ce>Ve[0]-8){Pe=7;break e}Pe[0]=Ce,nt[0]+=12,Ve[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Ce=0<xe.gb[0],T=T[0];;){e:{var et=b;Ve=A,Pe=T;var at=pe,tt=ke,It=nt=[0];if((St=Re=[Re])[0]=0,8>Pe[0])Pe=7;else{if(!t(et,Ve[0],"VP8X")){if(Te(et,Ve[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var _t=Te(et,Ve[0]+8),jt=1+Me(et,Ve[0]+12);if(2147483648<=jt*(et=1+Me(et,Ve[0]+15))){Pe=3;break e}It!=null&&(It[0]=_t),at!=null&&(at[0]=jt),tt!=null&&(tt[0]=et),Ve[0]+=18,Pe[0]-=18,St[0]=1}Pe=0}}if(Re=Re[0],nt=nt[0],Pe!=0)return Pe;if(Ve=!!(2&nt),!Ce&&Re)return 3;if(ee!=null&&(ee[0]=!!(16&nt)),ne!=null&&(ne[0]=Ve),se!=null&&(se[0]=0),ne=pe[0],nt=ke[0],Re&&Ve&&oe==null){Pe=0;break}if(4>T){Pe=7;break}if(Ce&&Re||!Ce&&!Re&&!t(b,A[0],"ALPH")){T=[T],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{_t=b,Pe=A,Ce=T;var St=xe.gb;at=xe.na,tt=xe.P,It=xe.Sa,jt=22,e(_t!=null),e(Ce!=null),et=Pe[0];var Pn=Ce[0];for(e(at!=null),e(It!=null),at[0]=null,tt[0]=null,It[0]=0;;){if(Pe[0]=et,Ce[0]=Pn,8>Pn){Pe=7;break e}var Dn=Te(_t,et+4);if(4294967286<Dn){Pe=3;break e}var wn=8+Dn+1&-2;if(jt+=wn,0<St&&jt>St){Pe=3;break e}if(!t(_t,et,"VP8 ")||!t(_t,et,"VP8L")){Pe=0;break e}if(Pn[0]<wn){Pe=7;break e}t(_t,et,"ALPH")||(at[0]=_t,tt[0]=et+8,It[0]=Dn),et+=wn,Pn-=wn}}if(T=T[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],Pe!=0)break}T=[T],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(St=b,Pe=A,Ce=T,at=xe.gb[0],tt=xe.Ja,It=xe.xa,_t=Pe[0],et=!t(St,_t,"VP8 "),jt=!t(St,_t,"VP8L"),e(St!=null),e(Ce!=null),e(tt!=null),e(It!=null),8>Ce[0])Pe=7;else{if(et||jt){if(St=Te(St,_t+4),12<=at&&St>at-12){Pe=3;break e}if(Fe&&St>Ce[0]-8){Pe=7;break e}tt[0]=St,Pe[0]+=8,Ce[0]-=8,It[0]=jt}else It[0]=5<=Ce[0]&&St[_t+0]==47&&!(St[_t+4]>>5),tt[0]=Ce[0];Pe=0}if(T=T[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],A=A[0],Pe!=0)break;if(4294967286<xe.Ja)return 3;if(se==null||Ve||(se[0]=xe.xa?2:1),ne=[ne],nt=[nt],xe.xa){if(5>T){Pe=7;break}se=ne,Fe=nt,Ve=ee,b==null||5>T?b=0:5<=T&&b[A+0]==47&&!(b[A+4]>>5)?(Ce=[0],St=[0],at=[0],X(tt=new B,b,A,T),wt(tt,Ce,St,at)?(se!=null&&(se[0]=Ce[0]),Fe!=null&&(Fe[0]=St[0]),Ve!=null&&(Ve[0]=at[0]),b=1):b=0):b=0}else{if(10>T){Pe=7;break}se=nt,b==null||10>T||!$t(b,A+3,T-3)?b=0:(Fe=b[A+0]|b[A+1]<<8|b[A+2]<<16,Ve=16383&(b[A+7]<<8|b[A+6]),b=16383&(b[A+9]<<8|b[A+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=xe.Ja||!Ve||!b?b=0:(ne&&(ne[0]=Ve),se&&(se[0]=b),b=1))}if(!b||(ne=ne[0],nt=nt[0],Re&&(pe[0]!=ne||ke[0]!=nt)))return 3;oe!=null&&(oe[0]=xe,oe.offset=A-oe.w,e(4294967286>A-oe.w),e(oe.offset==oe.ha-T));break}return Pe==0||Pe==7&&Re&&oe==null?(ee!=null&&(ee[0]|=xe.na!=null&&0<xe.na.length),j!=null&&(j[0]=ne),J!=null&&(J[0]=nt),0):Pe}function Ul(b,A,T){var j=A.width,J=A.height,ee=0,ne=0,se=j,oe=J;if(A.Da=b!=null&&0<b.Da,A.Da&&(se=b.cd,oe=b.bd,ee=b.v,ne=b.j,11>T||(ee&=-2,ne&=-2),0>ee||0>ne||0>=se||0>=oe||ee+se>j||ne+oe>J))return 0;if(A.v=ee,A.j=ne,A.va=ee+se,A.o=ne+oe,A.U=se,A.T=oe,A.da=b!=null&&0<b.da,A.da){if(!_e(se,oe,T=[b.ib],ee=[b.hb]))return 0;A.ib=T[0],A.hb=ee[0]}return A.ob=b!=null&&b.ob,A.Kb=b==null||!b.Sd,A.da&&(A.ob=A.ib<3*j/4&&A.hb<3*J/4,A.Kb=0),1}function zl(b){if(b==null)return 2;if(11>b.S){var A=b.f.RGBA;A.fb+=(b.height-1)*A.A,A.A=-A.A}else A=b.f.kb,b=b.height,A.O+=(b-1)*A.fa,A.fa=-A.fa,A.N+=(b-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(b-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(b-1)*A.lb,A.lb=-A.lb);return 0}function el(b,A,T,j){if(j==null||0>=b||0>=A)return 2;if(T!=null){if(T.Da){var J=T.cd,ee=T.bd,ne=-2&T.v,se=-2&T.j;if(0>ne||0>se||0>=J||0>=ee||ne+J>b||se+ee>A)return 2;b=J,A=ee}if(T.da){if(!_e(b,A,J=[T.ib],ee=[T.hb]))return 2;b=J[0],A=ee[0]}}j.width=b,j.height=A;e:{var oe=j.width,pe=j.height;if(b=j.S,0>=oe||0>=pe||!(b>=ou&&13>b))b=2;else{if(0>=j.Rd&&j.sd==null){ne=ee=J=A=0;var ke=(se=oe*Np[b])*pe;if(11>b||(ee=(pe+1)/2*(A=(oe+1)/2),b==12&&(ne=(J=oe)*pe)),(pe=r(ke+2*ee+ne))==null){b=1;break e}j.sd=pe,11>b?((oe=j.f.RGBA).eb=pe,oe.fb=0,oe.A=se,oe.size=ke):((oe=j.f.kb).y=pe,oe.O=0,oe.fa=se,oe.Fd=ke,oe.f=pe,oe.N=0+ke,oe.Ab=A,oe.Cd=ee,oe.ea=pe,oe.W=0+ke+ee,oe.Db=A,oe.Ed=ee,b==12&&(oe.F=pe,oe.J=0+ke+2*ee),oe.Tc=ne,oe.lb=J)}if(A=1,J=j.S,ee=j.width,ne=j.height,J>=ou&&13>J)if(11>J)b=j.f.RGBA,A&=(se=Math.abs(b.A))*(ne-1)+ee<=b.size,A&=se>=ee*Np[J],A&=b.eb!=null;else{b=j.f.kb,se=(ee+1)/2,ke=(ne+1)/2,oe=Math.abs(b.fa),pe=Math.abs(b.Ab);var Re=Math.abs(b.Db),Fe=Math.abs(b.lb),xe=Fe*(ne-1)+ee;A&=oe*(ne-1)+ee<=b.Fd,A&=pe*(ke-1)+se<=b.Cd,A=(A&=Re*(ke-1)+se<=b.Ed)&oe>=ee&pe>=se&Re>=se,A&=b.y!=null,A&=b.f!=null,A&=b.ea!=null,J==12&&(A&=Fe>=ee,A&=xe<=b.Tc,A&=b.F!=null)}else A=0;b=A?0:2}}return b!=0||T!=null&&T.fd&&(b=zl(j)),b}var xi=64,tl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],nl=24,il=32,Hl=8,ts=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Le("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(b){return b},k.Predictor2=function(b,A,T){return A[T+0]},k.Predictor3=function(b,A,T){return A[T+1]},k.Predictor4=function(b,A,T){return A[T-1]},k.Predictor5=function(b,A,T){return Je(Je(b,A[T+1]),A[T+0])},k.Predictor6=function(b,A,T){return Je(b,A[T-1])},k.Predictor7=function(b,A,T){return Je(b,A[T+0])},k.Predictor8=function(b,A,T){return Je(A[T-1],A[T+0])},k.Predictor9=function(b,A,T){return Je(A[T+0],A[T+1])},k.Predictor10=function(b,A,T){return Je(Je(b,A[T-1]),Je(A[T+0],A[T+1]))},k.Predictor11=function(b,A,T){var j=A[T+0];return 0>=ht(j>>24&255,b>>24&255,(A=A[T-1])>>24&255)+ht(j>>16&255,b>>16&255,A>>16&255)+ht(j>>8&255,b>>8&255,A>>8&255)+ht(255&j,255&b,255&A)?j:b},k.Predictor12=function(b,A,T){var j=A[T+0];return(Ue((b>>24&255)+(j>>24&255)-((A=A[T-1])>>24&255))<<24|Ue((b>>16&255)+(j>>16&255)-(A>>16&255))<<16|Ue((b>>8&255)+(j>>8&255)-(A>>8&255))<<8|Ue((255&b)+(255&j)-(255&A)))>>>0},k.Predictor13=function(b,A,T){var j=A[T-1];return(Ye((b=Je(b,A[T+0]))>>24&255,j>>24&255)<<24|Ye(b>>16&255,j>>16&255)<<16|Ye(b>>8&255,j>>8&255)<<8|Ye(b>>0&255,j>>0&255))>>>0};var Uh=k.PredictorAdd0;k.PredictorAdd1=it,Le("Predictor2","PredictorAdd2"),Le("Predictor3","PredictorAdd3"),Le("Predictor4","PredictorAdd4"),Le("Predictor5","PredictorAdd5"),Le("Predictor6","PredictorAdd6"),Le("Predictor7","PredictorAdd7"),Le("Predictor8","PredictorAdd8"),Le("Predictor9","PredictorAdd9"),Le("Predictor10","PredictorAdd10"),Le("Predictor11","PredictorAdd11"),Le("Predictor12","PredictorAdd12"),Le("Predictor13","PredictorAdd13");var ql=k.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var eu,_s=k.ColorIndexInverseTransform,sl=k.MapARGB,tu=k.VP8LColorIndexInverseTransformAlpha,nu=k.MapAlpha,ho=k.VP8LPredictorsAdd=[];ho.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var oa,ns,Ki,fo,Nr,Ir,rl,Lr,ui,Vl,Ji,ys,ol,iu,Wl,aa,la,po,ca,al,ua,mo,Gl,ws,As,qn,Vn,hi,ki=r(511),Cr=r(2041),Yl=r(225),ll=r(767),su=0,zh=Cr,ru=Yl,ds=ll,Ss=ki,ou=0,au=1,mp=2,lu=3,cu=4,Hh=5,gp=6,qh=7,Vh=8,uu=9,Wh=10,Wv=[2,3,7],Gv=[3,3,11],bp=[280,256,256,256,40],Yv=[0,1,1,1,0],Kv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zv=8,Gh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Kl=null,Qv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$v=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],e_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],t_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],n_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],i_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],go=[],Os=[],Tr=[],s_=1,_p=2,bo=[],ks=[];Ke("UpsampleRgbLinePair",Ne,3),Ke("UpsampleBgrLinePair",Be,3),Ke("UpsampleRgbaLinePair",Rn,4),Ke("UpsampleBgraLinePair",zt,4),Ke("UpsampleArgbLinePair",pn,4),Ke("UpsampleRgba4444LinePair",Gt,2),Ke("UpsampleRgb565LinePair",ct,2);var r_=k.UpsampleRgbLinePair,o_=k.UpsampleBgrLinePair,yp=k.UpsampleRgbaLinePair,wp=k.UpsampleBgraLinePair,Ap=k.UpsampleArgbLinePair,Sp=k.UpsampleRgba4444LinePair,a_=k.UpsampleRgb565LinePair,hu=16,du=1<<hu-1,Jl=-227,Kh=482,l_=6,kp=0,c_=r(256),u_=r(256),h_=r(256),d_=r(256),f_=r(Kh-Jl),p_=r(Kh-Jl);Di("YuvToRgbRow",Ne,3),Di("YuvToBgrRow",Be,3),Di("YuvToRgbaRow",Rn,4),Di("YuvToBgraRow",zt,4),Di("YuvToArgbRow",pn,4),Di("YuvToRgba4444Row",Gt,2),Di("YuvToRgb565Row",ct,2);var Pp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fu=[0,2,8],m_=[8,7,6,4,4,2,2,2,1,1,1,1],g_=1;this.WebPDecodeRGBA=function(b,A,T,j,J){var ee=au,ne=new Sr,se=new ut;ne.ba=se,se.S=ee,se.width=[se.width],se.height=[se.height];var oe=se.width,pe=se.height,ke=new Lt;if(ke==null||b==null)var Re=2;else e(ke!=null),Re=$a(b,A,T,ke.width,ke.height,ke.Pd,ke.Qd,ke.format,null);if(Re!=0?oe=0:(oe!=null&&(oe[0]=ke.width[0]),pe!=null&&(pe[0]=ke.height[0]),oe=1),oe){se.width=se.width[0],se.height=se.height[0],j!=null&&(j[0]=se.width),J!=null&&(J[0]=se.height);e:{if(j=new kn,(J=new ao).data=b,J.w=A,J.ha=T,J.kd=1,A=[0],e(J!=null),((b=$a(J.data,J.w,J.ha,null,null,null,A,null,J))==0||b==7)&&A[0]&&(b=4),(A=b)==0){if(e(ne!=null),j.data=J.data,j.w=J.w+J.offset,j.ha=J.ha-J.offset,j.put=Ct,j.ac=Dt,j.bc=qt,j.ma=ne,J.xa){if((b=yn())==null){ne=1;break e}if(function(Fe,xe){var nt=[0],Ve=[0],Pe=[0];t:for(;;){if(Fe==null)return 0;if(xe==null)return Fe.a=2,0;if(Fe.l=xe,Fe.a=0,X(Fe.m,xe.data,xe.w,xe.ha),!wt(Fe.m,nt,Ve,Pe)){Fe.a=3;break t}if(Fe.xb=_p,xe.width=nt[0],xe.height=Ve[0],!Yn(nt[0],Ve[0],1,Fe,null))break t;return 1}return e(Fe.a!=0),0}(b,j)){if(j=(A=el(j.width,j.height,ne.Oa,ne.ba))==0){t:{j=b;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((T=j.l)!=null),e((J=T.ma)!=null),j.xb!=0){if(j.ca=J.ba,j.tb=J.tb,e(j.ca!=null),!Ul(J.Oa,T,lu)){j.a=2;break n}if(!ri(j,T.width)||T.da)break n;if((T.da||pt(j.ca.S))&&Oe(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Oe()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!De(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!si(j,j.V,j.Ba,j.c,j.i,T.o,bi))break n;J.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(A=b.a)}else A=b.a}else{if((b=new fn)==null){ne=1;break e}if(b.Fa=J.na,b.P=J.P,b.qc=J.Sa,Jo(b,j)){if((A=el(j.width,j.height,ne.Oa,ne.ba))==0){if(b.Aa=0,T=ne.Oa,e((J=b)!=null),T!=null){if(0<(oe=0>(oe=T.Md)?0:100<oe?255:255*oe/100)){for(pe=ke=0;4>pe;++pe)12>(Re=J.pb[pe]).lc&&(Re.ia=oe*m_[0>Re.lc?0:Re.lc]>>3),ke|=Re.ia;ke&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=T.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}Ga(b,j)||(A=b.a)}}else A=b.a}A==0&&ne.Oa!=null&&ne.Oa.fd&&(A=zl(ne.ba))}ne=A}ee=ne!=0?null:11>ee?se.f.RGBA.eb:se.f.kb.y}else ee=null;return ee};var Np=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(k,E){for(var R="",I=0;I<4;I++)R+=String.fromCharCode(k[E++]);return R}function h(k,E){return(k[E+0]<<0|k[E+1]<<8|k[E+2]<<16)>>>0}function f(k,E){return(k[E+0]<<0|k[E+1]<<8|k[E+2]<<16|k[E+3]<<24)>>>0}new l;var g=[0],p=[0],_=[],y=new l,S=n,w=function(k,E){var R={},I=0,C=!1,O=0,q=0;if(R.frames=[],!function(V,G,te,ae){for(var fe=0;fe<ae;fe++)if(V[G+fe]!=te.charCodeAt(fe))return!0;return!1}(k,E,"RIFF",4)){var Y,$;for(f(k,E+=4),E+=8;E<k.length;){var Z=c(k,E),X=f(k,E+=4);E+=4;var Q=X+(1&X);switch(Z){case"VP8 ":case"VP8L":R.frames[I]===void 0&&(R.frames[I]={}),(B=R.frames[I]).src_off=C?q:E-8,B.src_size=O+X+8,I++,C&&(C=!1,O=0,q=0);break;case"VP8X":(B=R.header={}).feature_flags=k[E];var re=E+4;B.canvas_width=1+h(k,re),re+=3,B.canvas_height=1+h(k,re),re+=3;break;case"ALPH":C=!0,O=Q+8,q=E-8;break;case"ANIM":(B=R.header).bgcolor=f(k,E),re=E+4,B.loop_count=(Y=k)[($=re)+0]<<0|Y[$+1]<<8,re+=2;break;case"ANMF":var me,B;(B=R.frames[I]={}).offset_x=2*h(k,E),E+=3,B.offset_y=2*h(k,E),E+=3,B.width=1+h(k,E),E+=3,B.height=1+h(k,E),E+=3,B.duration=h(k,E),E+=3,me=k[E++],B.dispose=1&me,B.blend=me>>1&1}Z!="ANMF"&&(E+=Q)}return R}}(S,0);w.response=S,w.rgbaoutput=!0,w.dataurl=!1;var P=w.header?w.header:null,x=w.frames?w.frames:null;if(P){P.loop_counter=P.loop_count,g=[P.canvas_height],p=[P.canvas_width];for(var F=0;F<x.length&&x[F].blend!=0;F++);}var U=x[0],H=y.WebPDecodeRGBA(S,U.src_off,U.src_size,p,g);U.rgba=H,U.imgwidth=p[0],U.imgheight=g[0];for(var L=0;L<p[0]*g[0]*4;L++)_[L]=H[L];return this.width=p,this.height=g,this.data=_,this}(function(n){var e=function(){return typeof tf=="function"},t=function(g,p,_,y){var S=4,w=o;switch(y){case n.image_compression.FAST:S=1,w=r;break;case n.image_compression.MEDIUM:S=6,w=a;break;case n.image_compression.SLOW:S=9,w=l}g=i(g,p,_,w);var P=tf(g,{level:S});return n.__addimage__.arrayBufferToBinaryString(P)},i=function(g,p,_,y){for(var S,w,P,x=g.length/p,F=new Uint8Array(g.length+x),U=h(),H=0;H<x;H+=1){if(P=H*p,S=g.subarray(P,P+p),y)F.set(y(S,_,w),P+H);else{for(var L,k=U.length,E=[];L<k;L+=1)E[L]=U[L](S,_,w);var R=f(E.concat());F.set(E[R],P+H)}w=S}return F},s=function(g){var p=Array.apply([],g);return p.unshift(0),p},r=function(g,p){var _,y=[],S=g.length;y[0]=1;for(var w=0;w<S;w+=1)_=g[w-p]||0,y[w+1]=g[w]-_+256&255;return y},o=function(g,p,_){var y,S=[],w=g.length;S[0]=2;for(var P=0;P<w;P+=1)y=_&&_[P]||0,S[P+1]=g[P]-y+256&255;return S},a=function(g,p,_){var y,S,w=[],P=g.length;w[0]=3;for(var x=0;x<P;x+=1)y=g[x-p]||0,S=_&&_[x]||0,w[x+1]=g[x]+256-(y+S>>>1)&255;return w},l=function(g,p,_){var y,S,w,P,x=[],F=g.length;x[0]=4;for(var U=0;U<F;U+=1)y=g[U-p]||0,S=_&&_[U]||0,w=_&&_[U-p]||0,P=c(y,S,w),x[U+1]=g[U]-P+256&255;return x},c=function(g,p,_){if(g===p&&p===_)return g;var y=Math.abs(p-_),S=Math.abs(g-_),w=Math.abs(g+p-_-_);return y<=S&&y<=w?g:S<=w?p:_},h=function(){return[s,r,o,a,l]},f=function(g){var p=g.map(function(_){return _.reduce(function(y,S){return y+Math.abs(S)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(g,p,_,y){var S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(P=new YA(g)).imgData,w=P.bits,S=P.colorSpace,F=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){k=(L=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,R=new Uint8Array(k*P.colors),E=new Uint8Array(k);var Z,X=P.pixelBitlength-P.bits;for(O=0,q=0;O<k;O++){for(C=L[O],Z=0;Z<X;)R[q++]=C>>>Z&255,Z+=P.bits;E[O]=C>>>Z&255}}if(P.bits===16){k=(L=new Uint32Array(P.decodePixels().buffer)).length,R=new Uint8Array(k*(32/P.pixelBitlength)*P.colors),E=new Uint8Array(k*(32/P.pixelBitlength)),I=P.colors>1,O=0,q=0;for(var Q=0;O<k;)C=L[O++],R[q++]=C>>>0&255,I&&(R[q++]=C>>>16&255,C=L[O++],R[q++]=C>>>0&255),E[Q++]=C>>>16&255;w=8}y!==n.image_compression.NONE&&e()?(g=t(R,P.width*P.colors,P.colors,y),H=t(E,P.width,1,y)):(g=R,H=E,Y=void 0)}if(P.colorType===3&&(S=this.color_spaces.INDEXED,U=P.palette,P.transparency.indexed)){var re=P.transparency.indexed,me=0;for(O=0,k=re.length;O<k;++O)me+=re[O];if((me/=255)===k-1&&re.indexOf(0)!==-1)x=[re.indexOf(0)];else if(me!==k){for(L=P.decodePixels(),E=new Uint8Array(L.length),O=0,k=L.length;O<k;O++)E[O]=re[L[O]];H=t(E,P.width,1)}}var B=function(V){var G;switch(V){case n.image_compression.FAST:G=11;break;case n.image_compression.MEDIUM:G=13;break;case n.image_compression.SLOW:G=14;break;default:G=12}return G}(y);return Y===this.decode.FLATE_DECODE&&($="/Predictor "+B+" "),$+="/Colors "+F+" /BitsPerComponent "+w+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:_,data:g,index:p,filter:Y,decodeParameters:$,transparency:x,palette:U,sMask:H,predictor:B,width:P.width,height:P.height,bitsPerComponent:w,colorSpace:S}}}})(Ut.API),function(n){n.processGIF89A=function(e,t,i,s){var r=new KA(e),o=r.width,a=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new Sd(100).encode(c,100);return n.processJPEG.call(this,h,t,i,s)},n.processGIF87A=n.processGIF89A}(Ut.API),Bs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:i,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Bs.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Un.log("bit decode error:"+t)}},Bs.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var r=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var l=this.palette[r>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Bs.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var r=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*s*4,a=r>>4,l=15&r,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Bs.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*i;if(s<this.palette.length){var o=this.palette[s];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},Bs.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&e)/e*255|0,a=(r>>5&e)/e*255|0,l=(r>>10&e)/e*255|0,c=r>>15?255:0,h=i*this.width*4+4*s;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=n}},Bs.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,c=(o>>11)/e*255|0,h=s*this.width*4+4*r;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},Bs.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=r,this.data[o+1]=s,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},Bs.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=i,this.data[a+3]=o}},Bs.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,i,s){var r=new Bs(e,!1),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new Sd(100).encode(l,100);return n.processJPEG.call(this,c,t,i,s)}}(Ut.API),jg.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,i,s){var r=new jg(e),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new Sd(100).encode(l,100);return n.processJPEG.call(this,c,t,i,s)}}(Ut.API),Ut.API.processRGBA=function(n,e,t){for(var i=n.data,s=i.length,r=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,l=0,c=0;c<s;c+=4){var h=i[c],f=i[c+1],g=i[c+2],p=i[c+3];r[a++]=h,r[a++]=f,r[a++]=g,o[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ut.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gl=Ut.API,Tu=gl.getCharWidthsArray=function(n,e){var t,i,s=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:s.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,h=c.fof?c.fof:1,f=e.doKerning!==!1,g=0,p=n.length,_=0,y=a[0]||l,S=[];for(t=0;t<p;t++)i=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?S.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+o*(1e3/r)||0)/1e3):(g=f&&Mn(c[i])==="object"&&!isNaN(parseInt(c[i][_],10))?c[i][_]/h:0,S.push((a[i]||y)/l+g)),_=i;return S},Og=gl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return gl.processArabic&&(n=gl.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,t,s)/t:Tu.apply(this,arguments).reduce(function(r,o){return r+o},0)},Rg=function(n,e,t,i){for(var s=[],r=0,o=n.length,a=0;r!==o&&a+e[r]<t;)a+=e[r],r++;s.push(n.slice(0,r));var l=r;for(a=0;r!==o;)a+e[r]>i&&(s.push(n.slice(l,r)),a=0,l=r),a+=e[r],r++;return l!==r&&s.push(n.slice(l,r)),s},Fg=function(n,e,t){t||(t={});var i,s,r,o,a,l,c,h=[],f=[h],g=t.textIndent||0,p=0,_=0,y=n.split(" "),S=Tu.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),P=[];y.map(function(F){(F=F.split(/\s*\n/)).length>1?P=P.concat(F.map(function(U,H){return(H&&U.length?`
`:"")+U})):P.push(F[0])}),y=P,l=Og.apply(this,[w,t])}for(r=0,o=y.length;r<o;r++){var x=0;if(i=y[r],l&&i[0]==`
`&&(i=i.substr(1),x=1),g+p+(_=(s=Tu.apply(this,[i,t])).reduce(function(F,U){return F+U},0))>e||x){if(_>e){for(a=Rg.apply(this,[i,s,e-(g+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)f.push([a.shift()]);_=s.slice(i.length-(h[0]?h[0].length:0)).reduce(function(F,U){return F+U},0)}else h=[i];f.push(h),g=_+l,p=S}else h.push(i),g+=p+_,p=S}return c=l?function(F,U){return(U?w:"")+F.join(" ")}:function(F){return F.join(" ")},f.map(c)},gl.splitTextToSize=function(n,e,t){var i,s=(t=t||{}).fontSize||this.internal.getFontSize(),r=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var f=this.internal.getFont(h.fontName,h.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(Fg.apply(this,[i[a],o,r]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=e[s];var r=function(f){return"0x"+parseInt(f,10).toString(16)},o=n.__fontmetrics__.compress=function(f){var g,p,_,y,S=["{"];for(var w in f){if(g=f[w],isNaN(parseInt(w,10))?p="'"+w+"'":(w=parseInt(w,10),p=(p=r(w).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof g=="number")g<0?(_=r(g).slice(3),y="-"):(_=r(g).slice(2),y=""),_=y+_.slice(0,-1)+i[_.slice(-1)];else{if(Mn(g)!=="object")throw new Error("Don't know what to do with value type "+Mn(g)+".");_=o(g)}S.push(p+_)}return S.push("}"),S.join("")},a=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,_,y,S={},w=1,P=S,x=[],F="",U="",H=f.length-1,L=1;L<H;L+=1)(y=f[L])=="'"?g?(_=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(x.push([P,_]),P={},_=void 0):y=="}"?((p=x.pop())[0][p[1]]=P,_=void 0,P=p[0]):y=="-"?w=-1:_===void 0?t.hasOwnProperty(y)?(F+=t[y],_=parseInt(F,16)*w,w=1,F=""):F+=y:t.hasOwnProperty(y)?(U+=t[y],P[_]=parseInt(U,16)*w,w=1,_=void 0,U=""):U+=y;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var g=f.font,p=h.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var _=c.Unicode[g.postScriptName];_&&(g.metadata.Unicode.encoding=_,g.encoding=_.codePages[0])}])}(Ut.API),function(n){var e=function(t){for(var i=t.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=t.charCodeAt(r);return s};n.API.events.push(["addFont",function(t){var i=void 0,s=t.font,r=t.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(_c(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,i)}}])}(Ut),function(n){function e(){return(Vt.canvg?Promise.resolve(Vt.canvg):Ec(()=>import("./index.es-_FiXskFV.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ut.API.addSvgAsImage=function(t,i,s,r,o,a,l,c){if(isNaN(i)||isNaN(s))throw Un.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Un.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=o;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(_){return _.fromString(f,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(g)}).then(function(){p.addImage(h.toDataURL("image/jpeg",1),i,s,r,o,l,c)})}}(),Ut.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(e,t);return this},Ut.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var i,s,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,f=0;function g(_,y){var S,w=!1;for(S=0;S<_.length;S+=1)_[S]===y&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(f=0;f<p;f+=1)t[a[f]].value=t[a[f]].defaultValue,t[a[f]].explicitSet=!1}if(Mn(n)==="object"){for(s in n)if(r=n[s],g(a,s)&&r!==void 0){if(t[s].type==="boolean"&&typeof r=="boolean")t[s].value=r;else if(t[s].type==="name"&&g(t[s].valueSet,r))t[s].value=r;else if(t[s].type==="integer"&&Number.isInteger(r))t[s].value=r;else if(t[s].type==="array"){for(c=0;c<r.length;c+=1)if(i=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(h=0;h<r[c].length;h+=1)typeof r[c][h]!="number"&&(i=!1);i===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}t[s].value="["+l.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,y=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?y.push("/"+_+" /"+t[_].value):y.push("/"+_+" "+t[_].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+o.length+a.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+r+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ut.API),function(n){var e=n.API,t=e.pdfEscape16=function(r,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],f=0,g=r.length;f<g;++f){if(a=o.metadata.characterToGlyph(r.charCodeAt(f)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=r.charCodeAt(f),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},i=function(r){var o,a,l,c,h,f,g;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,g=(a=Object.keys(r).sort(function(p,_){return p-_})).length;f<g;f++)o=a[f],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[o]!==void 0&&r[o]!==null&&typeof r[o].toString=="function"&&(c=("0000"+r[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var f=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",_=0;_<g.length;_++)p+=String.fromCharCode(g[_]);var y=c();h({data:p,addLength1:!0,objectId:y}),l("endobj");var S=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+wl(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var P=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+wl(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+wl(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+P+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var f=a.metadata.rawData,g="",p=0;p<f.length;p++)g+=String.fromCharCode(f[p]);var _=c();h({data:g,addLength1:!0,objectId:_}),l("endobj");var y=c();h({data:i(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var S=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+wl(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+wl(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]);var s=function(r){var o,a=r.text||"",l=r.x,c=r.y,h=r.options||{},f=r.mutex||{},g=f.pdfEscape,p=f.activeFontKey,_=f.fonts,y=p,S="",w=0,P="",x=_[y].encoding;if(_[y].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:f};for(P=a,y=p,Array.isArray(a)&&(P=a[0]),w=0;w<P.length;w+=1)_[y].metadata.hasOwnProperty("cmap")&&(o=_[y].metadata.cmap.unicode.codeMap[P[w].charCodeAt(0)]),o||P[w].charCodeAt(0)<256&&_[y].metadata.hasOwnProperty("Unicode")?S+=P[w]:S+="";var F="";return parseInt(y.slice(1))<14||x==="WinAnsiEncoding"?F=g(S,y).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(F=t(S,_[y])),f.isHex=!0,{text:F,x:l,y:c,options:h,mutex:f}};e.events.push(["postProcessText",function(r){var o=r.text||"",a=[],l={text:o,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([s(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(s(Object.assign({},l,{text:o[c]})).text);r.text=a}else r.text=s(Object.assign({},l,{text:o})).text}])}(Ut),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ut.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var s,r,o,a,l,c,h,f=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,x=0;this.__bidiEngine__={};var F=function(I){var C=I.charCodeAt(),O=C>>8,q=y[O];return q!==void 0?f[256*q+(255&C)]:O===252||O===253?"AL":w.test(O)?"L":O===8?"R":"N"},U=function(I){for(var C,O=0;O<I.length;O++){if((C=F(I.charAt(O)))==="L")return!1;if(C==="R")return!0}return!1},H=function(I,C,O,q){var Y,$,Z,X,Q=C[q];switch(Q){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(Q="AN");break;case"AL":P=!0,Q="R";break;case"WS":Q="N";break;case"CS":q<1||q+1>=C.length||(Y=O[q-1])!=="EN"&&Y!=="AN"||($=C[q+1])!=="EN"&&$!=="AN"?Q="N":P&&($="AN"),Q=$===Y?$:"N";break;case"ES":Q=(Y=q>0?O[q-1]:"B")==="EN"&&q+1<C.length&&C[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&O[q-1]==="EN"){Q="EN";break}if(P){Q="N";break}for(Z=q+1,X=C.length;Z<X&&C[Z]==="ET";)Z++;Q=Z<X&&C[Z]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=C.length,Z=q+1;Z<X&&C[Z]==="NSM";)Z++;if(Z<X){var re=I[q],me=re>=1425&&re<=2303||re===64286;if(Y=C[Z],me&&(Y==="R"||Y==="AL")){Q="R";break}}}Q=q<1||(Y=C[q-1])==="B"?"N":O[q-1];break;case"B":P=!1,s=!0,Q=x;break;case"S":r=!0,Q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":Q="N"}return Q},L=function(I,C,O){var q=I.split("");return O&&k(q,O,{hiLevel:x}),q.reverse(),C&&C.reverse(),q.join("")},k=function(I,C,O){var q,Y,$,Z,X,Q=-1,re=I.length,me=0,B=[],V=x?p:g,G=[];for(P=!1,s=!1,r=!1,Y=0;Y<re;Y++)G[Y]=F(I[Y]);for($=0;$<re;$++){if(X=me,B[$]=H(I,G,B,$),q=240&(me=V[X][_[B[$]]]),me&=15,C[$]=Z=V[me][5],q>0)if(q===16){for(Y=Q;Y<$;Y++)C[Y]=1;Q=-1}else Q=-1;if(V[me][6])Q===-1&&(Q=$);else if(Q>-1){for(Y=Q;Y<$;Y++)C[Y]=Z;Q=-1}G[$]==="B"&&(C[$]=0),O.hiLevel|=Z}r&&function(te,ae,fe){for(var ve=0;ve<fe;ve++)if(te[ve]==="S"){ae[ve]=x;for(var he=ve-1;he>=0&&te[he]==="WS";he--)ae[he]=x}}(G,C,re)},E=function(I,C,O,q,Y){if(!(Y.hiLevel<I)){if(I===1&&x===1&&!s)return C.reverse(),void(O&&O.reverse());for(var $,Z,X,Q,re=C.length,me=0;me<re;){if(q[me]>=I){for(X=me+1;X<re&&q[X]>=I;)X++;for(Q=me,Z=X-1;Q<Z;Q++,Z--)$=C[Q],C[Q]=C[Z],C[Z]=$,O&&($=O[Q],O[Q]=O[Z],O[Z]=$);me=X}me++}}},R=function(I,C,O){var q=I.split(""),Y={hiLevel:x};return O||(O=[]),k(q,O,Y),function($,Z,X){if(X.hiLevel!==0&&h)for(var Q,re=0;re<$.length;re++)Z[re]===1&&(Q=S.indexOf($[re]))>=0&&($[re]=S[Q+1])}(q,O,Y),E(2,q,C,O,Y),E(1,q,C,O,Y),q.join("")};return this.__bidiEngine__.doBidiReorder=function(I,C,O){if(function(Y,$){if($)for(var Z=0;Z<Y.length;Z++)$[Z]=Z;a===void 0&&(a=U(Y)),c===void 0&&(c=U(Y))}(I,C),o||!l||c)if(o&&l&&a^c)x=a?1:0,I=L(I,C,O);else if(!o&&l&&c)x=a?1:0,I=R(I,C,O),I=L(I,C);else if(!o||a||l||c){if(o&&!l&&a^c)I=L(I,C),a?(x=0,I=R(I,C,O)):(x=1,I=R(I,C,O),I=L(I,C));else if(o&&a&&!l&&c)x=1,I=R(I,C,O),I=L(I,C);else if(!o&&!l&&a^c){var q=h;a?(x=1,I=R(I,C,O),x=0,h=!1,I=R(I,C,O),h=q):(x=0,I=R(I,C,O),I=L(I,C),x=1,h=!1,I=R(I,C,O),h=q,I=L(I,C))}}else x=0,I=R(I,C,O);else x=a?1:0,I=R(I,C,O);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,h=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var s=i.text,r=(i.x,i.y,i.options||{}),o=(i.mutex,r.lang,[]);if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,t.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([t.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([t.doBidiReorder(s[a])]);i.text=o}else i.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(Ut),Ut.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new qo(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new cS(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new JA(this.contents),this.head=new ZA(this),this.name=new nS(this),this.cmap=new W5(this),this.toUnicode={},this.hhea=new QA(this),this.maxp=new iS(this),this.hmtx=new sS(this),this.post=new eS(this),this.os2=new $A(this),this.loca=new lS(this),this.glyf=new rS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,i,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,i){var s,r,o,a;for(o=0,r=0,a=(e=""+e).length;0<=a?r<a:r>a;r=0<=a?++r:--r)s=e.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},n}();var Xs,qo=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(e){var t,i,s;for(s=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,i,s,r,o,a,l;return e=this.readByte(),t=this.readByte(),i=this.readByte(),s=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*s+16777216*r+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(e){var t,i,s,r;for(r=[],i=0,s=e.length;i<s;i++)t=e[i],r.push(this.writeByte(t));return r},n}(),JA=function(){var n;function e(t){var i,s,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,s,r,o,a,l,c,h,f,g,p,_,y;for(y in p=Object.keys(t).length,l=Math.log(2),f=16*Math.floor(Math.log(p)/l),o=Math.floor(f/l),h=16*p-f,(s=new qo).writeInt(this.scalarType),s.writeShort(p),s.writeShort(f),s.writeShort(o),s.writeShort(h),r=16*p,c=s.pos+r,a=null,_=[],t)for(g=t[y],s.writeString(y),s.writeInt(n(g)),s.writeInt(c),s.writeInt(g.length),_=_.concat(g),y==="head"&&(a=c),c+=g.length;c%4;)_.push(0),c++;return s.write(_),i=2981146554-n(s.data),s.pos=a+8,s.writeUInt32(i),s.data},n=function(t){var i,s,r,o;for(t=G5.call(t);t.length%4;)t.push(0);for(r=new qo(t),s=0,i=0,o=t.length;i<o;i=i+=4)s+=r.readUInt32();return 4294967295&s},e}(),XA={}.hasOwnProperty,br=function(n,e){for(var t in e)XA.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};Xs=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var ZA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new qo).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),Ug=function(){function n(e,t){var i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,r=function(){var F,U;for(U=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)U.push(e.readUInt16());return U}(),e.pos+=2,y=function(){var F,U;for(U=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)U.push(e.readUInt16());return U}(),c=function(){var F,U;for(U=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)U.push(e.readUInt16());return U}(),h=function(){var F,U;for(U=[],l=F=0;0<=g?F<g:F>g;l=0<=g?++F:--F)U.push(e.readUInt16());return U}(),s=(this.length-e.pos+this.offset)/2,a=function(){var F,U;for(U=[],l=F=0;0<=s?F<s:F>s;l=0<=s?++F:--F)U.push(e.readUInt16());return U}(),l=w=0,x=r.length;w<x;l=++w)for(S=r[l],i=P=_=y[l];_<=S?P<=S:P>=S;i=_<=S?++P:--P)h[l]===0?o=i+c[l]:(o=a[h[l]/2+(i-_)-(g-l)]||0)!==0&&(o+=c[l]),this.codeMap[i]=65535&o}e.pos=f}return n.encode=function(e,t){var i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me;switch(q=new qo,o=Object.keys(e).sort(function(Te,De){return Te-De}),t){case"macroman":for(y=0,S=function(){var Te=[];for(_=0;_<256;++_)Te.push(0);return Te}(),P={0:0},r={},Y=0,Q=o.length;Y<Q;Y++)P[he=e[s=o[Y]]]==null&&(P[he]=++y),r[s]={old:e[s],new:P[e[s]]},S[s]=P[e[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(S),{charMap:r,subtable:q.data,maxGlyphID:y+1};case"unicode":for(C=[],f=[],x=0,P={},i={},w=c=null,$=0,re=o.length;$<re;$++)P[U=e[s=o[$]]]==null&&(P[U]=++x),i[s]={old:U,new:P[U]},a=P[U]-s,w!=null&&a===c||(w&&f.push(w),C.push(s),c=a),w=s;for(w&&f.push(w),f.push(65535),C.push(65535),R=2*(E=C.length),k=2*Math.pow(Math.log(E)/Math.LN2,2),g=Math.log(k/2)/Math.LN2,L=2*E-k,l=[],H=[],p=[],_=Z=0,me=C.length;Z<me;_=++Z){if(I=C[_],h=f[_],I===65535){l.push(0),H.push(0);break}if(I-(O=i[I].new)>=32768)for(l.push(0),H.push(2*(p.length+E-_)),s=X=I;I<=h?X<=h:X>=h;s=I<=h?++X:--X)p.push(i[s].new);else l.push(O-I),H.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*E+2*p.length),q.writeUInt16(0),q.writeUInt16(R),q.writeUInt16(k),q.writeUInt16(g),q.writeUInt16(L),fe=0,B=f.length;fe<B;fe++)s=f[fe],q.writeUInt16(s);for(q.writeUInt16(0),ve=0,V=C.length;ve<V;ve++)s=C[ve],q.writeUInt16(s);for(ye=0,G=l.length;ye<G;ye++)a=l[ye],q.writeUInt16(a);for(Ae=0,te=H.length;Ae<te;Ae++)F=H[Ae],q.writeUInt16(F);for(Me=0,ae=p.length;Me<ae;Me++)y=p[Me],q.writeUInt16(y);return{charMap:i,subtable:q.data,maxGlyphID:x+1}}},n}(),W5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,s,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i=new Ug(t,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(t,i){var s,r;return i==null&&(i="macroman"),s=Ug.encode(t,i),(r=new qo).writeUInt16(0),r.writeUInt16(1),s.table=r.data.concat(s.subtable),s},e}(),QA=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),$A=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(t.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),eS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="post",e.prototype.parse=function(t){var i,s,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(s=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)i=t.readByte(),r.push(this.names.push(t.readString(i)));return r;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(t.readUInt32());return c}).call(this)}},e}(),tS=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},nS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="name",e.prototype.parse=function(t){var i,s,r,o,a,l,c,h,f,g,p;for(t.pos=this.offset,t.readShort(),i=t.readShort(),l=t.readShort(),s=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},o=f=0,g=s.length;f<g;o=++f)r=s[o],t.pos=r.offset,h=t.readString(r.length),a=new tS(h,r),c[p=r.nameID]==null&&(c[p]=[]),c[r.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),iS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),sS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,s,r,o,a,l,c;for(t.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,f;for(f=[],i=h=0;0<=r?h<r:h>r;i=0<=r?++h:--h)f.push(t.readInt16());return f}(),this.widths=(function(){var h,f,g,p;for(p=[],h=0,f=(g=this.metrics).length;h<f;h++)o=g[h],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],c=[],i=a=0;0<=r?a<r:a>r;i=0<=r?++a:--a)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),G5=[].slice,rS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,s,r,o,a,l,c,h,f,g;return t in this.cache?this.cache[t]:(o=this.file.loca,i=this.file.contents,s=o.indexOf(t),(r=o.lengthOf(t))===0?this.cache[t]=null:(i.pos=this.offset+s,a=(l=new qo(i.read(r))).readShort(),h=l.readShort(),g=l.readShort(),c=l.readShort(),f=l.readShort(),this.cache[t]=a===-1?new aS(l,h,g,c,f):new oS(l,a,h,g,c,f),this.cache[t]))},e.prototype.encode=function(t,i,s){var r,o,a,l,c;for(a=[],o=[],l=0,c=i.length;l<c;l++)r=t[i[l]],o.push(a.length),r&&(a=a.concat(r.encode(s)));return o.push(a.length),{table:a,offsets:o}},e}(),oS=function(){function n(e,t,i,s,r,o){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=s,this.xMax=r,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),aS=function(){function n(e,t,i,s,r){var o,a;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,i;for(t=new qo(G5.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),lS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return br(e,Xs),e.prototype.tag="loca",e.prototype.parse=function(t){var i,s;return t.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],s=0,r=this.length;s<r;s+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var s=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<s.length;++a)if(s[a]=r,o<i.length&&i[o]==a){++o,s[a]=r;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(r+=c)}for(var h=new Array(4*s.length),f=0;f<s.length;++f)h[4*f+3]=255&s[f],h[4*f+2]=(65280&s[f])>>8,h[4*f+1]=(16711680&s[f])>>16,h[4*f]=(4278190080&s[f])>>24;return h},e}(),cS=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,s,r;for(t in s=this.font.cmap.tables[0].codeMap,e={},r=this.subset)i=r[t],e[t]=s[i];return e},n.prototype.glyphsFor=function(e){var t,i,s,r,o,a,l;for(s={},o=0,a=e.length;o<a;o++)s[r=e[o]]=this.font.glyf.glyphFor(r);for(r in t=[],s)(i=s[r])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(r in l=this.glyphsFor(t))i=l[r],s[r]=i;return s},n.prototype.encode=function(e,t){var i,s,r,o,a,l,c,h,f,g,p,_,y,S,w;for(s in i=W5.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=i.charMap)p[(l=w[s]).old]=l.new;for(_ in g=i.maxGlyphID,o)_ in p||(p[_]=g++);return h=function(P){var x,F;for(x in F={},P)F[P[x]]=x;return F}(p),f=Object.keys(h).sort(function(P,x){return P-x}),y=function(){var P,x,F;for(F=[],P=0,x=f.length;P<x;P++)a=f[P],F.push(h[a]);return F}(),r=this.font.glyf.encode(o,y,p),c=this.font.loca.encode(r.offsets,y),S={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();Ut.API.PDFObject=function(){var n;function e(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,s,r,o;if(Array.isArray(t))return"["+function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)i=t[a],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in r=["<<"],t)o=t[s],r.push("/"+s+" "+e.convert(o));return r.push(">>"),r.join(`
`)}return""+t},e}();const zg=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:zA,AcroFormAppearance:Tt,AcroFormButton:Pi,AcroFormCheckBox:Ac,AcroFormChoiceField:Ta,AcroFormComboBox:xa,AcroFormEditBox:yc,AcroFormListBox:Da,AcroFormPasswordField:Sc,AcroFormPushButton:wc,AcroFormRadioButton:Ea,AcroFormTextField:Bo,GState:Oc,ShadingPattern:Co,TilingPattern:Pa,default:Ut,jsPDF:Ut},Symbol.toStringTag,{value:"Module"}));function Hg(n,e,t){const i=n.slice();return i[8]=e[t],i}function qg(n,e,t){const i=n.slice();return i[11]=e[t],i}function Vg(n,e,t){const i=n.slice();return i[14]=e[t],i}function Wg(n){let e,t,i,s,r=Et(n[1]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Yg(Vg(n,r,a));return{c(){e=m("div"),t=m("h6"),t.textContent="Current Illnesses",i=D(),s=m("ul");for(let a=0;a<o.length;a+=1)o[a].c();d(s,"class","list-group list-group-flush"),d(e,"class","mt-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l&2){r=Et(a[1]);let c;for(c=0;c<r.length;c+=1){const h=Vg(a,r,c);o[c]?o[c].p(h,l):(o[c]=Yg(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function Gg(n){let e,t,i=n[14].description+"",s;return{c(){e=m("br"),t=m("small"),s=le(i),d(t,"class","text-muted")},m(r,o){ue(r,e,o),ue(r,t,o),u(t,s)},p(r,o){o&2&&i!==(i=r[14].description+"")&&Se(s,i)},d(r){r&&(ce(e),ce(t))}}}function Yg(n){let e,t,i=n[14].name+"",s,r,o=n[14].status+"",a,l,c,h=n[14].description&&Gg(n);return{c(){e=m("li"),t=m("strong"),s=le(i),r=le(" ("),a=le(o),l=le(`)
                  `),h&&h.c(),c=D(),d(e,"class","list-group-item")},m(f,g){ue(f,e,g),u(e,t),u(t,s),u(e,r),u(e,a),u(e,l),h&&h.m(e,null),u(e,c)},p(f,g){g&2&&i!==(i=f[14].name+"")&&Se(s,i),g&2&&o!==(o=f[14].status+"")&&Se(a,o),f[14].description?h?h.p(f,g):(h=Gg(f),h.c(),h.m(e,c)):h&&(h.d(1),h=null)},d(f){f&&ce(e),h&&h.d()}}}function Kg(n){let e,t,i,s,r=Et(n[2]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Xg(qg(n,r,a));return{c(){e=m("div"),t=m("h6"),t.textContent="Prescribed Prescriptions",i=D(),s=m("ul");for(let a=0;a<o.length;a+=1)o[a].c();d(s,"class","list-group list-group-flush"),d(e,"class","mt-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l&4){r=Et(a[2]);let c;for(c=0;c<r.length;c+=1){const h=qg(a,r,c);o[c]?o[c].p(h,l):(o[c]=Xg(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function Jg(n){let e,t,i,s=n[11].instructions+"",r;return{c(){e=m("br"),t=m("small"),i=le("Instructions: "),r=le(s),d(t,"class","text-muted")},m(o,a){ue(o,e,a),ue(o,t,a),u(t,i),u(t,r)},p(o,a){a&4&&s!==(s=o[11].instructions+"")&&Se(r,s)},d(o){o&&(ce(e),ce(t))}}}function Xg(n){let e,t,i=n[11].name+"",s,r,o=n[11].dosage+"",a,l,c,h,f=n[11].frequency+"",g,p,_,y=n[11].instructions&&Jg(n);return{c(){e=m("li"),t=m("strong"),s=le(i),r=le(" - "),a=le(o),l=D(),c=m("br"),h=m("small"),g=le(f),p=D(),y&&y.c(),_=D(),d(h,"class","text-muted"),d(e,"class","list-group-item")},m(S,w){ue(S,e,w),u(e,t),u(t,s),u(e,r),u(e,a),u(e,l),u(e,c),u(e,h),u(h,g),u(e,p),y&&y.m(e,null),u(e,_)},p(S,w){w&4&&i!==(i=S[11].name+"")&&Se(s,i),w&4&&o!==(o=S[11].dosage+"")&&Se(a,o),w&4&&f!==(f=S[11].frequency+"")&&Se(g,f),S[11].instructions?y?y.p(S,w):(y=Jg(S),y.c(),y.m(e,_)):y&&(y.d(1),y=null)},d(S){S&&ce(e),y&&y.d()}}}function Zg(n){let e,t,i,s,r=Et(n[3]),o=[];for(let a=0;a<r.length;a+=1)o[a]=$g(Hg(n,r,a));return{c(){e=m("div"),t=m("h6"),t.textContent="Current Symptoms",i=D(),s=m("ul");for(let a=0;a<o.length;a+=1)o[a].c();d(s,"class","list-group list-group-flush"),d(e,"class","mt-3")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l&8){r=Et(a[3]);let c;for(c=0;c<r.length;c+=1){const h=Hg(a,r,c);o[c]?o[c].p(h,l):(o[c]=$g(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function Qg(n){let e,t,i,s=n[8].duration+"",r;return{c(){e=m("br"),t=m("small"),i=le("Duration: "),r=le(s),d(t,"class","text-muted")},m(o,a){ue(o,e,a),ue(o,t,a),u(t,i),u(t,r)},p(o,a){a&8&&s!==(s=o[8].duration+"")&&Se(r,s)},d(o){o&&(ce(e),ce(t))}}}function $g(n){let e,t,i=n[8].description+"",s,r,o=n[8].severity+"",a,l,c,h=n[8].duration&&Qg(n);return{c(){e=m("li"),t=m("strong"),s=le(i),r=le(" ("),a=le(o),l=le(`)
                  `),h&&h.c(),c=D(),d(e,"class","list-group-item")},m(f,g){ue(f,e,g),u(e,t),u(t,s),u(e,r),u(e,a),u(e,l),h&&h.m(e,null),u(e,c)},p(f,g){g&8&&i!==(i=f[8].description+"")&&Se(s,i),g&8&&o!==(o=f[8].severity+"")&&Se(a,o),f[8].duration?h?h.p(f,g):(h=Qg(f),h.c(),h.m(e,c)):h&&(h.d(1),h=null)},d(f){f&&ce(e),h&&h.d()}}}function e1(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function uS(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w=n[0].firstName+"",P,x,F=n[0].lastName+"",U,H,L,k,E,R=n[0].idNumber+"",I,C,O,q,Y,$=n[0].dateOfBirth+"",Z,X,Q,re,me,B,V,G,te=n[1].length+"",ae,fe,ve,he,ye,Ae=n[2].length+"",Me,Te,De,de,W,_e=n[3].length+"",Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe=n[1].length>0&&Wg(n),vt=n[2].length>0&&Kg(n),pt=n[3].length>0&&Zg(n),Rt=n[4]&&e1();return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML='<i class="fas fa-file-pdf me-2"></i>Generate Prescription PDF',o=D(),a=m("button"),l=D(),c=m("div"),h=m("div"),f=m("div"),g=m("h6"),g.textContent="Patient Information",p=D(),_=m("p"),y=m("strong"),y.textContent="Name:",S=D(),P=le(w),x=D(),U=le(F),H=D(),L=m("p"),k=m("strong"),k.textContent="ID:",E=D(),I=le(R),C=D(),O=m("p"),q=m("strong"),q.textContent="DOB:",Y=D(),Z=le($),X=D(),Q=m("div"),re=m("h6"),re.textContent="Summary",me=D(),B=m("p"),V=m("strong"),V.textContent="Illnesses:",G=D(),ae=le(te),fe=D(),ve=m("p"),he=m("strong"),he.textContent="Prescriptions:",ye=D(),Me=le(Ae),Te=D(),De=m("p"),de=m("strong"),de.textContent="Symptoms:",W=D(),Ie=le(_e),be=D(),Qe&&Qe.c(),Le=D(),vt&&vt.c(),We=D(),pt&&pt.c(),Je=D(),Ue=m("div"),Ye=m("button"),Rt&&Rt.c(),ht=D(),it=m("i"),ze=le("Generate & Download PDF"),Ge=D(),qe=m("button"),ot=m("i"),Xe=le("Cancel"),Mt=D(),gt=m("div"),d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close"),a.disabled=n[4],d(s,"class","modal-header"),d(f,"class","col-md-6"),d(Q,"class","col-md-6"),d(h,"class","row"),d(c,"class","modal-body"),d(it,"class","fas fa-download me-1"),d(Ye,"type","button"),d(Ye,"class","btn btn-primary"),Ye.disabled=n[4],d(ot,"class","fas fa-times me-1"),d(qe,"type","button"),d(qe,"class","btn btn-secondary"),qe.disabled=n[4],d(Ue,"class","modal-footer"),d(i,"class","modal-content"),d(t,"class","modal-dialog modal-lg"),d(t,"role","document"),d(e,"class","modal show d-block"),d(e,"tabindex","-1"),d(e,"role","dialog"),d(gt,"class","modal-backdrop show")},m(ft,ut){ue(ft,e,ut),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),u(c,h),u(h,f),u(f,g),u(f,p),u(f,_),u(_,y),u(_,S),u(_,P),u(_,x),u(_,U),u(f,H),u(f,L),u(L,k),u(L,E),u(L,I),u(f,C),u(f,O),u(O,q),u(O,Y),u(O,Z),u(h,X),u(h,Q),u(Q,re),u(Q,me),u(Q,B),u(B,V),u(B,G),u(B,ae),u(Q,fe),u(Q,ve),u(ve,he),u(ve,ye),u(ve,Me),u(Q,Te),u(Q,De),u(De,de),u(De,W),u(De,Ie),u(c,be),Qe&&Qe.m(c,null),u(c,Le),vt&&vt.m(c,null),u(c,We),pt&&pt.m(c,null),u(i,Je),u(i,Ue),u(Ue,Ye),Rt&&Rt.m(Ye,null),u(Ye,ht),u(Ye,it),u(Ye,ze),u(Ue,Ge),u(Ue,qe),u(qe,ot),u(qe,Xe),ue(ft,Mt,ut),ue(ft,gt,ut),Ft||(xt=[Ee(a,"click",n[6]),Ee(Ye,"click",n[5]),Ee(qe,"click",n[6])],Ft=!0)},p(ft,[ut]){ut&16&&(a.disabled=ft[4]),ut&1&&w!==(w=ft[0].firstName+"")&&Se(P,w),ut&1&&F!==(F=ft[0].lastName+"")&&Se(U,F),ut&1&&R!==(R=ft[0].idNumber+"")&&Se(I,R),ut&1&&$!==($=ft[0].dateOfBirth+"")&&Se(Z,$),ut&2&&te!==(te=ft[1].length+"")&&Se(ae,te),ut&4&&Ae!==(Ae=ft[2].length+"")&&Se(Me,Ae),ut&8&&_e!==(_e=ft[3].length+"")&&Se(Ie,_e),ft[1].length>0?Qe?Qe.p(ft,ut):(Qe=Wg(ft),Qe.c(),Qe.m(c,Le)):Qe&&(Qe.d(1),Qe=null),ft[2].length>0?vt?vt.p(ft,ut):(vt=Kg(ft),vt.c(),vt.m(c,We)):vt&&(vt.d(1),vt=null),ft[3].length>0?pt?pt.p(ft,ut):(pt=Zg(ft),pt.c(),pt.m(c,null)):pt&&(pt.d(1),pt=null),ft[4]?Rt||(Rt=e1(),Rt.c(),Rt.m(Ye,ht)):Rt&&(Rt.d(1),Rt=null),ut&16&&(Ye.disabled=ft[4]),ut&16&&(qe.disabled=ft[4])},i:dt,o:dt,d(ft){ft&&(ce(e),ce(Mt),ce(gt)),Qe&&Qe.d(),vt&&vt.d(),pt&&pt.d(),Rt&&Rt.d(),Ft=!1,an(xt)}}}function hS(n,e,t){const i=$i();let{selectedPatient:s}=e,{illnesses:r}=e,{prescriptions:o}=e,{symptoms:a}=e,l=!1;const c=async()=>{t(4,l=!0);try{const f=new Ut,g=new Date().toLocaleDateString();if(f.setFontSize(20),f.text("PRESCRIPTION",20,30),f.setFontSize(12),f.text("Dr. [Doctor Name]",20,50),f.text("Medical License: [License Number]",20,60),f.text(`Date: ${g}`,20,70),f.text("Patient Information:",20,90),f.text(`Name: ${s.firstName} ${s.lastName}`,20,100),f.text(`ID: ${s.idNumber}`,20,110),f.text(`DOB: ${s.dateOfBirth}`,20,120),r.length>0){f.text("Current Illnesses:",20,140);let y=150;r.forEach((S,w)=>{y>250&&(f.addPage(),y=20),f.text(`${w+1}. ${S.name} (${S.status})`,25,y),S.description?(f.text(`   ${S.description}`,25,y+10),y+=20):y+=15})}a.length>0&&(f.text("Current Symptoms:",20,yPos+10),yPos+=20,a.forEach((y,S)=>{yPos>250&&(f.addPage(),yPos=20),f.text(`${S+1}. ${y.description}`,25,yPos),f.text(`   Severity: ${y.severity}`,25,yPos+10),y.duration?(f.text(`   Duration: ${y.duration}`,25,yPos+20),yPos+=30):yPos+=20})),o.length>0&&(f.text("Prescribed Prescriptions:",20,yPos+10),yPos+=20,o.forEach((y,S)=>{yPos>250&&(f.addPage(),yPos=20),f.text(`${S+1}. ${y.name}`,25,yPos),f.text(`   Dosage: ${y.dosage}`,25,yPos+10),f.text(`   Frequency: ${y.frequency}`,25,yPos+20),y.instructions?(f.text(`   Instructions: ${y.instructions}`,25,yPos+30),yPos+=40):yPos+=30}));const p=f.internal.getNumberOfPages();for(let y=1;y<=p;y++)f.setPage(y),f.setFontSize(10),f.text(`Page ${y} of ${p}`,20,f.internal.pageSize.height-10),f.text("Generated by M-Prescribe Patient Management System",100,f.internal.pageSize.height-10);const _=`Prescription_${s.firstName}_${s.lastName}_${g.replace(/\//g,"-")}.pdf`;f.save(_),console.log("PDF generated successfully")}catch(f){console.error("Error generating PDF:",f)}finally{t(4,l=!1)}},h=()=>{i("close")};return n.$$set=f=>{"selectedPatient"in f&&t(0,s=f.selectedPatient),"illnesses"in f&&t(1,r=f.illnesses),"prescriptions"in f&&t(2,o=f.prescriptions),"symptoms"in f&&t(3,a=f.symptoms)},[s,r,o,a,l,c,h]}class dS extends ii{constructor(e){super(),ni(this,e,hS,uS,Zn,{selectedPatient:0,illnesses:1,prescriptions:2,symptoms:3})}}function t1(n){let e,t,i,s,r,o,a,l,c=n[3]&&n1();return{c(){e=m("div"),t=m("button"),c&&c.c(),i=D(),s=m("i"),r=le(`
        AI-Powered Medical Intelligence`),d(s,"class","fas fa-robot me-2"),d(t,"class","btn btn-outline-danger btn-sm w-100"),t.disabled=o=n[3]||!n[8],d(t,"title","Generate comprehensive AI analysis including medical recommendations and medication suggestions"),d(e,"class","mb-3")},m(h,f){ue(h,e,f),u(e,t),c&&c.m(t,null),u(t,i),u(t,s),u(t,r),a||(l=Ee(t,"click",n[9]),a=!0)},p(h,f){h[3]?c||(c=n1(),c.c(),c.m(t,i)):c&&(c.d(1),c=null),f&264&&o!==(o=h[3]||!h[8])&&(t.disabled=o)},d(h){h&&ce(e),c&&c.d(),a=!1,l()}}}function n1(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function i1(n){let e,t,i,s,r,o,a,l;return{c(){e=m("div"),t=m("i"),i=D(),s=le(n[4]),r=D(),o=m("button"),d(t,"class","fas fa-exclamation-triangle me-2"),d(o,"type","button"),d(o,"class","btn-close"),d(e,"class","alert alert-warning alert-dismissible fade show"),d(e,"role","alert")},m(c,h){ue(c,e,h),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),a||(l=Ee(o,"click",n[17]),a=!0)},p(c,h){h&16&&Se(s,c[4])},d(c){c&&ce(e),a=!1,l()}}}function s1(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-info-circle me-2"></i> <strong>AI Features Disabled:</strong> To enable AI recommendations, please configure your OpenAI API key in the environment variables (VITE_OPENAI_API_KEY).',d(e,"class","alert alert-info"),d(e,"role","alert")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function r1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_=n[1]&&o1(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),s.innerHTML='<i class="fas fa-robot me-2"></i>AI-Powered Medical Intelligence',r=D(),o=m("button"),a=D(),l=m("div"),c=m("div"),c.innerHTML='<i class="fas fa-info-circle me-2"></i> <strong>Disclaimer:</strong> These recommendations are generated by AI and are for informational purposes only. They should not replace professional medical consultation.',h=D(),f=m("div"),_&&_.c(),d(s,"class","mb-0 text-danger"),d(o,"type","button"),d(o,"class","btn-close btn-sm"),d(o,"title","Close recommendations"),d(i,"class","card-header d-flex justify-content-between align-items-center"),d(c,"class","alert alert-info alert-sm mb-3 svelte-185kz0l"),d(c,"role","alert"),d(f,"class","max-height-300 overflow-auto p-3 bg-light rounded border svelte-185kz0l"),d(l,"class","card-body"),d(t,"class","card"),d(e,"class","ai-recommendations-inline mt-3")},m(y,S){ue(y,e,S),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(t,a),u(t,l),u(l,c),u(l,h),u(l,f),_&&_.m(f,null),g||(p=Ee(o,"click",n[10]),g=!0)},p(y,S){y[1]?_?_.p(y,S):(_=o1(y),_.c(),_.m(f,null)):_&&(_.d(1),_=null)},d(y){y&&ce(e),_&&_.d(),g=!1,p()}}}function o1(n){let e,t=n[13](n[1])+"";return{c(){e=m("div"),d(e,"class","recommendations-text svelte-185kz0l")},m(i,s){ue(i,e,s),e.innerHTML=t},p(i,s){s&2&&t!==(t=i[13](i[1])+"")&&(e.innerHTML=t)},d(i){i&&ce(e)}}}function a1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_=n[2]&&l1(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),s.innerHTML='<i class="fas fa-pills me-2 text-success"></i>AI Medication Suggestions',r=D(),o=m("button"),a=D(),l=m("div"),c=m("div"),c.innerHTML='<i class="fas fa-exclamation-triangle me-2"></i> <strong>Important:</strong> These medication suggestions are generated by AI and are for informational purposes only. Always consult with a healthcare professional before taking any medications.',h=D(),f=m("div"),_&&_.c(),d(s,"class","mb-0"),d(o,"type","button"),d(o,"class","btn-close btn-sm"),d(o,"title","Close medication suggestions"),d(i,"class","card-header d-flex justify-content-between align-items-center"),d(c,"class","alert alert-warning alert-sm mb-3 svelte-185kz0l"),d(c,"role","alert"),d(f,"class","max-height-300 overflow-auto p-3 bg-light rounded border svelte-185kz0l"),d(l,"class","card-body"),d(t,"class","card"),d(e,"class","ai-medication-suggestions-inline mt-3")},m(y,S){ue(y,e,S),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(t,a),u(t,l),u(l,c),u(l,h),u(l,f),_&&_.m(f,null),g||(p=Ee(o,"click",n[11]),g=!0)},p(y,S){y[2]?_?_.p(y,S):(_=l1(y),_.c(),_.m(f,null)):_&&(_.d(1),_=null)},d(y){y&&ce(e),_&&_.d(),g=!1,p()}}}function l1(n){let e,t=n[13](n[2])+"";return{c(){e=m("div"),d(e,"class","suggestions-text svelte-185kz0l")},m(i,s){ue(i,e,s),e.innerHTML=t},p(i,s){s&4&&t!==(t=i[13](i[2])+"")&&(e.innerHTML=t)},d(i){i&&ce(e)}}}function c1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p=n[1]&&u1(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),s.innerHTML='<i class="fas fa-robot me-2"></i>AI-Powered Medical Intelligence',r=D(),o=m("button"),a=D(),l=m("div"),c=m("div"),c.innerHTML='<i class="fas fa-info-circle me-2"></i> <strong>Disclaimer:</strong> This analysis is generated by AI and is for informational purposes only. It should not replace professional medical consultation.',h=D(),p&&p.c(),d(s,"class","mb-0 text-danger"),d(o,"type","button"),d(o,"class","btn-close btn-sm"),d(o,"title","Close AI analysis"),d(i,"class","card-header d-flex justify-content-between align-items-center"),d(c,"class","alert alert-info alert-sm mb-3 svelte-185kz0l"),d(c,"role","alert"),d(l,"class","card-body"),d(t,"class","card"),d(e,"class","ai-combined-analysis mt-3")},m(_,y){ue(_,e,y),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(t,a),u(t,l),u(l,c),u(l,h),p&&p.m(l,null),f||(g=Ee(o,"click",n[12]),f=!0)},p(_,y){_[1]?p?p.p(_,y):(p=u1(_),p.c(),p.m(l,null)):p&&(p.d(1),p=null)},d(_){_&&ce(e),p&&p.d(),f=!1,g()}}}function u1(n){let e,t,i,s,r,o=n[13](n[1])+"";return{c(){e=m("div"),t=m("div"),t.innerHTML='<i class="fas fa-info-circle me-2"></i> <strong>Medical Analysis:</strong> This analysis includes recommendations, medication suggestions, and interaction warnings. Always consult with a healthcare professional.',i=D(),s=m("div"),r=m("div"),d(t,"class","alert alert-info alert-sm mb-3 svelte-185kz0l"),d(t,"role","alert"),d(r,"class","analysis-text svelte-185kz0l"),d(s,"class","max-height-300 overflow-auto p-3 bg-light rounded border svelte-185kz0l"),d(e,"class","mb-2")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),u(s,r),r.innerHTML=o},p(a,l){l&2&&o!==(o=a[13](a[1])+"")&&(r.innerHTML=o)},d(a){a&&ce(e)}}}function fS(n){let e,t,i,s,r,o,a=n[0]&&n[0].length>0&&t1(n),l=n[4]&&i1(n),c=!n[8]&&s1(),h=n[5]&&r1(n),f=n[6]&&a1(n),g=n[7]&&c1(n);return{c(){e=m("div"),a&&a.c(),t=D(),l&&l.c(),i=D(),c&&c.c(),s=D(),h&&h.c(),r=D(),f&&f.c(),o=D(),g&&g.c(),d(e,"class","ai-recommendations")},m(p,_){ue(p,e,_),a&&a.m(e,null),u(e,t),l&&l.m(e,null),u(e,i),c&&c.m(e,null),u(e,s),h&&h.m(e,null),u(e,r),f&&f.m(e,null),u(e,o),g&&g.m(e,null)},p(p,[_]){p[0]&&p[0].length>0?a?a.p(p,_):(a=t1(p),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p[4]?l?l.p(p,_):(l=i1(p),l.c(),l.m(e,i)):l&&(l.d(1),l=null),p[8]?c&&(c.d(1),c=null):c||(c=s1(),c.c(),c.m(e,s)),p[5]?h?h.p(p,_):(h=r1(p),h.c(),h.m(e,r)):h&&(h.d(1),h=null),p[6]?f?f.p(p,_):(f=a1(p),f.c(),f.m(e,o)):f&&(f.d(1),f=null),p[7]?g?g.p(p,_):(g=c1(p),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i:dt,o:dt,d(p){p&&ce(e),a&&a.d(),l&&l.d(),c&&c.d(),h&&h.d(),f&&f.d(),g&&g.d()}}}function pS(n,e,t){let i;const s=$i();let{symptoms:r=[]}=e,{currentMedications:o=[]}=e,{patientAge:a=null}=e,{doctorId:l=null}=e,c="",h="",f=!1,g="",p=!1,_=!1,y=!1;const S=async()=>{if(!r||r.length===0){t(4,g="No symptoms available to analyze");return}t(3,f=!0),t(4,g="");try{console.log("🤖 Generating single optimized AI analysis...");const H=await wa.generateCombinedAnalysis(r,o,a,l),L=H.combinedAnalysis||H;t(1,c=L),t(2,h=L),t(7,y=!0),t(5,p=!1),t(6,_=!1),s("ai-usage-updated",{type:"single-panel-analysis",timestamp:new Date().toISOString(),doctorId:l}),console.log("✅ Single optimized AI analysis generated")}catch(H){console.error("❌ Error generating single AI analysis:",H),t(4,g=H.message)}finally{t(3,f=!1)}},w=()=>{t(5,p=!1),t(1,c="")},P=()=>{t(6,_=!1),t(2,h="")},x=()=>{t(7,y=!1),t(1,c=""),t(2,h="")},F=H=>H?H.replace(/(\d+\.\s)/g,"<br><strong>$1</strong>").replace(/^[\s]*[-•]\s/gm,"<br>• ").replace(/^([^:\n]+):$/gm,'<br><h6 class="text-primary mb-2 mt-3">$1:</h6>').replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(<br>){3,}/g,"<br><br>").replace(/(<h6[^>]*>.*?<\/h6>)/g,"$1<br>").replace(/^(<br>)+|(<br>)+$/g,""):"",U=()=>t(4,g="");return n.$$set=H=>{"symptoms"in H&&t(0,r=H.symptoms),"currentMedications"in H&&t(14,o=H.currentMedications),"patientAge"in H&&t(15,a=H.patientAge),"doctorId"in H&&t(16,l=H.doctorId)},t(8,i=wa.isConfigured()),[r,c,h,f,g,p,_,y,i,S,w,P,x,F,o,a,l,U]}class mS extends ii{constructor(e){super(),ni(this,e,pS,fS,Zn,{symptoms:0,currentMedications:14,patientAge:15,doctorId:16})}}function h1(n,e,t){const i=n.slice();return i[103]=e[t],i}function d1(n,e,t){const i=n.slice();return i[106]=e[t],i[108]=t,i}function f1(n,e,t){const i=n.slice();return i[109]=e[t],i[108]=t,i}function p1(n,e,t){const i=n.slice();return i[111]=e[t],i[108]=t,i}function m1(n){let e,t,i,s,r;function o(c,h){return c[20]?bS:gS}let a=o(n),l=a(n);return{c(){e=m("div"),t=m("div"),i=m("div"),i.innerHTML='<h6 class="mb-0"><i class="fas fa-info-circle me-2"></i>Patient Information</h6>',s=D(),r=m("div"),l.c(),d(i,"class","card-header"),d(r,"class","card-body"),d(t,"class","card mb-3"),d(e,"class","tab-pane active")},m(c,h){ue(c,e,h),u(e,t),u(t,i),u(t,s),u(t,r),l.m(r,null)},p(c,h){a===(a=o(c))&&l?l.p(c,h):(l.d(1),l=a(c),l&&(l.c(),l.m(r,null)))},d(c){c&&ce(e),l.d()}}}function gS(n){let e,t,i,s,r,o=n[0].firstName+"",a,l,c=n[0].lastName+"",h,f,g,p,_,y=n[0].email+"",S,w,P,x,F,U=(n[0].phone||"Not provided")+"",H,L,k,E,R,I=n[0].dateOfBirth+"",C,O,q,Y,$,Z=(n[0].age||n[51](n[0].dateOfBirth)||"Not calculated")+"",X,Q,re,me,B,V,G,te,ae=n[0].idNumber+"",fe,ve,he,ye,Ae,Me,Te=n[0].weight&&g1(n),De=n[0].bloodGroup&&b1(n),de=n[0].address&&v1(n),W=n[0].emergencyContact&&_1(n),_e=n[0].emergencyPhone&&y1(n),Ie=n[0].allergies&&w1(n);return{c(){e=m("div"),t=m("div"),i=m("p"),s=m("strong"),s.textContent="Name:",r=D(),a=le(o),l=D(),h=le(c),f=D(),g=m("p"),p=m("strong"),p.textContent="Email:",_=D(),S=le(y),w=D(),P=m("p"),x=m("strong"),x.textContent="Phone:",F=D(),H=le(U),L=D(),k=m("p"),E=m("strong"),E.textContent="Date of Birth:",R=D(),C=le(I),O=D(),q=m("p"),Y=m("strong"),Y.textContent="Age:",$=D(),X=le(Z),Q=D(),Te&&Te.c(),re=D(),De&&De.c(),me=D(),B=m("div"),V=m("p"),G=m("strong"),G.textContent="ID Number:",te=D(),fe=le(ae),ve=D(),de&&de.c(),he=D(),W&&W.c(),ye=D(),_e&&_e.c(),Ae=D(),Ie&&Ie.c(),Me=gi(),d(t,"class","col-md-6"),d(B,"class","col-md-6"),d(e,"class","row")},m(be,Le){ue(be,e,Le),u(e,t),u(t,i),u(i,s),u(i,r),u(i,a),u(i,l),u(i,h),u(t,f),u(t,g),u(g,p),u(g,_),u(g,S),u(t,w),u(t,P),u(P,x),u(P,F),u(P,H),u(t,L),u(t,k),u(k,E),u(k,R),u(k,C),u(t,O),u(t,q),u(q,Y),u(q,$),u(q,X),u(t,Q),Te&&Te.m(t,null),u(t,re),De&&De.m(t,null),u(e,me),u(e,B),u(B,V),u(V,G),u(V,te),u(V,fe),u(B,ve),de&&de.m(B,null),u(B,he),W&&W.m(B,null),u(B,ye),_e&&_e.m(B,null),ue(be,Ae,Le),Ie&&Ie.m(be,Le),ue(be,Me,Le)},p(be,Le){Le[0]&1&&o!==(o=be[0].firstName+"")&&Se(a,o),Le[0]&1&&c!==(c=be[0].lastName+"")&&Se(h,c),Le[0]&1&&y!==(y=be[0].email+"")&&Se(S,y),Le[0]&1&&U!==(U=(be[0].phone||"Not provided")+"")&&Se(H,U),Le[0]&1&&I!==(I=be[0].dateOfBirth+"")&&Se(C,I),Le[0]&1&&Z!==(Z=(be[0].age||be[51](be[0].dateOfBirth)||"Not calculated")+"")&&Se(X,Z),be[0].weight?Te?Te.p(be,Le):(Te=g1(be),Te.c(),Te.m(t,re)):Te&&(Te.d(1),Te=null),be[0].bloodGroup?De?De.p(be,Le):(De=b1(be),De.c(),De.m(t,null)):De&&(De.d(1),De=null),Le[0]&1&&ae!==(ae=be[0].idNumber+"")&&Se(fe,ae),be[0].address?de?de.p(be,Le):(de=v1(be),de.c(),de.m(B,he)):de&&(de.d(1),de=null),be[0].emergencyContact?W?W.p(be,Le):(W=_1(be),W.c(),W.m(B,ye)):W&&(W.d(1),W=null),be[0].emergencyPhone?_e?_e.p(be,Le):(_e=y1(be),_e.c(),_e.m(B,null)):_e&&(_e.d(1),_e=null),be[0].allergies?Ie?Ie.p(be,Le):(Ie=w1(be),Ie.c(),Ie.m(Me.parentNode,Me)):Ie&&(Ie.d(1),Ie=null)},d(be){be&&(ce(e),ce(Ae),ce(Me)),Te&&Te.d(),De&&De.d(),de&&de.d(),W&&W.d(),_e&&_e.d(),Ie&&Ie.d(be)}}}function bS(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt,Rt,ft,ut,Lt,st,He,yt,bt,Dt,Ct,qt,wt,en,Ln,sn,un,rn,Zt,bi,Qn,Bn,vn,si,_n,yn,Yn,ri,hn,wi,Ai,Ze,lt,$e,Bt,Yt,dn,tn,nn=n[22]&&A1(n),Sn=n[23]&&S1();return{c(){e=m("form"),t=m("div"),i=m("div"),s=m("div"),r=m("label"),r.innerHTML='<i class="fas fa-user me-1"></i>First Name <span class="text-danger">*</span>',o=D(),a=m("input"),l=D(),c=m("div"),h=m("div"),f=m("label"),f.textContent="Last Name",g=D(),p=m("input"),_=D(),y=m("div"),S=m("div"),w=m("div"),P=m("label"),P.innerHTML='<i class="fas fa-envelope me-1"></i>Email Address',x=D(),F=m("input"),U=D(),H=m("div"),L=m("div"),k=m("label"),k.textContent="Phone Number",E=D(),R=m("input"),I=D(),C=m("div"),O=m("div"),q=m("div"),Y=m("label"),Y.innerHTML='<i class="fas fa-calendar me-1"></i>Date of Birth',$=D(),Z=m("input"),X=D(),Q=m("div"),re=m("div"),me=m("label"),me.innerHTML='<i class="fas fa-birthday-cake me-1"></i>Age <span class="text-danger">*</span>',B=D(),V=m("input"),G=D(),te=m("small"),te.textContent="Auto-calculated",ae=D(),fe=m("div"),ve=m("div"),he=m("label"),he.innerHTML='<i class="fas fa-weight me-1"></i>Weight',ye=D(),Ae=m("input"),Me=D(),Te=m("small"),Te.textContent="Weight in kilograms",De=D(),de=m("div"),W=m("div"),_e=m("label"),_e.innerHTML='<i class="fas fa-tint me-1"></i>Blood Group',Ie=D(),be=m("select"),Le=m("option"),Le.textContent="Select Blood Group",We=m("option"),We.textContent="A+",Je=m("option"),Je.textContent="A-",Ue=m("option"),Ue.textContent="B+",Ye=m("option"),Ye.textContent="B-",ht=m("option"),ht.textContent="AB+",it=m("option"),it.textContent="AB-",ze=m("option"),ze.textContent="O+",Ge=m("option"),Ge.textContent="O-",qe=D(),ot=m("small"),ot.textContent="Important for medical procedures",Xe=D(),Mt=m("div"),gt=m("div"),Ft=m("div"),xt=m("label"),xt.textContent="ID Number",Qe=D(),vt=m("input"),pt=D(),Rt=m("div"),ft=m("label"),ft.textContent="Address",ut=D(),Lt=m("textarea"),st=D(),He=m("div"),yt=m("label"),yt.innerHTML='<i class="fas fa-exclamation-triangle me-1"></i>Allergies',bt=D(),Dt=m("textarea"),Ct=D(),qt=m("small"),qt.textContent="Important: List all known allergies to medications, foods, or other substances",wt=D(),en=m("div"),Ln=m("div"),sn=m("div"),un=m("label"),un.textContent="Emergency Contact",rn=D(),Zt=m("input"),bi=D(),Qn=m("div"),Bn=m("div"),vn=m("label"),vn.textContent="Emergency Phone",si=D(),_n=m("input"),yn=D(),nn&&nn.c(),Yn=D(),ri=m("div"),hn=m("button"),Sn&&Sn.c(),wi=D(),Ai=m("i"),Ze=le("Save Changes"),lt=D(),$e=m("button"),Bt=m("i"),Yt=le("Cancel"),d(r,"for","editFirstName"),d(r,"class","form-label"),d(a,"type","text"),d(a,"class","form-control"),d(a,"id","editFirstName"),a.required=!0,a.disabled=n[23],d(s,"class","mb-3"),d(i,"class","col-12 col-md-6"),d(f,"for","editLastName"),d(f,"class","form-label"),d(p,"type","text"),d(p,"class","form-control"),d(p,"id","editLastName"),p.disabled=n[23],d(h,"class","mb-3"),d(c,"class","col-12 col-md-6"),d(t,"class","row g-3"),d(P,"for","editEmail"),d(P,"class","form-label"),d(F,"type","email"),d(F,"class","form-control"),d(F,"id","editEmail"),F.disabled=n[23],d(w,"class","mb-3"),d(S,"class","col-12 col-md-6"),d(k,"for","editPhone"),d(k,"class","form-label"),d(R,"type","tel"),d(R,"class","form-control"),d(R,"id","editPhone"),R.disabled=n[23],d(L,"class","mb-3"),d(H,"class","col-12 col-md-6"),d(y,"class","row g-3"),d(Y,"for","editDateOfBirth"),d(Y,"class","form-label"),d(Z,"type","date"),d(Z,"class","form-control"),d(Z,"id","editDateOfBirth"),Z.disabled=n[23],d(q,"class","mb-3"),d(O,"class","col-12 col-md-3"),d(me,"for","editAge"),d(me,"class","form-label"),d(V,"type","number"),d(V,"class","form-control"),d(V,"id","editAge"),d(V,"min","0"),d(V,"max","150"),d(V,"placeholder","Auto-calculated"),V.disabled=n[23],d(te,"class","form-text text-muted"),d(re,"class","mb-3"),d(Q,"class","col-12 col-md-3"),d(he,"for","editWeight"),d(he,"class","form-label"),d(Ae,"type","number"),d(Ae,"class","form-control"),d(Ae,"id","editWeight"),d(Ae,"min","0"),d(Ae,"max","500"),d(Ae,"step","0.1"),d(Ae,"placeholder","kg"),Ae.disabled=n[23],d(Te,"class","form-text text-muted"),d(ve,"class","mb-3"),d(fe,"class","col-12 col-md-3"),d(_e,"for","editBloodGroup"),d(_e,"class","form-label"),Le.__value="",je(Le,Le.__value),We.__value="A+",je(We,We.__value),Je.__value="A-",je(Je,Je.__value),Ue.__value="B+",je(Ue,Ue.__value),Ye.__value="B-",je(Ye,Ye.__value),ht.__value="AB+",je(ht,ht.__value),it.__value="AB-",je(it,it.__value),ze.__value="O+",je(ze,ze.__value),Ge.__value="O-",je(Ge,Ge.__value),d(be,"class","form-control"),d(be,"id","editBloodGroup"),be.disabled=n[23],n[21].bloodGroup===void 0&&mr(()=>n[69].call(be)),d(ot,"class","form-text text-muted"),d(W,"class","mb-3"),d(de,"class","col-12 col-md-3"),d(C,"class","row g-3"),d(xt,"for","editIdNumber"),d(xt,"class","form-label"),d(vt,"type","text"),d(vt,"class","form-control"),d(vt,"id","editIdNumber"),vt.disabled=n[23],d(Ft,"class","mb-3"),d(gt,"class","col-12 col-md-6"),d(Mt,"class","row g-3"),d(ft,"for","editAddress"),d(ft,"class","form-label"),d(Lt,"class","form-control"),d(Lt,"id","editAddress"),d(Lt,"rows","3"),Lt.disabled=n[23],d(Rt,"class","mb-3"),d(yt,"for","editAllergies"),d(yt,"class","form-label"),d(Dt,"class","form-control"),d(Dt,"id","editAllergies"),d(Dt,"rows","3"),d(Dt,"placeholder","List any known allergies (e.g., Penicillin, Shellfish, Latex, etc.)"),Dt.disabled=n[23],d(qt,"class","form-text text-muted"),d(He,"class","mb-3"),d(un,"for","editEmergencyContact"),d(un,"class","form-label"),d(Zt,"type","text"),d(Zt,"class","form-control"),d(Zt,"id","editEmergencyContact"),Zt.disabled=n[23],d(sn,"class","mb-3"),d(Ln,"class","col-12 col-md-6"),d(vn,"for","editEmergencyPhone"),d(vn,"class","form-label"),d(_n,"type","tel"),d(_n,"class","form-control"),d(_n,"id","editEmergencyPhone"),_n.disabled=n[23],d(Bn,"class","mb-3"),d(Qn,"class","col-12 col-md-6"),d(en,"class","row g-3"),d(Ai,"class","fas fa-save me-1"),d(hn,"type","submit"),d(hn,"class","btn btn-primary flex-fill"),hn.disabled=n[23],d(Bt,"class","fas fa-times me-1"),d($e,"type","button"),d($e,"class","btn btn-secondary flex-fill"),$e.disabled=n[23],d(ri,"class","d-flex flex-column flex-sm-row gap-2")},m(At,Ht){ue(At,e,Ht),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),je(a,n[21].firstName),u(t,l),u(t,c),u(c,h),u(h,f),u(h,g),u(h,p),je(p,n[21].lastName),u(e,_),u(e,y),u(y,S),u(S,w),u(w,P),u(w,x),u(w,F),je(F,n[21].email),u(y,U),u(y,H),u(H,L),u(L,k),u(L,E),u(L,R),je(R,n[21].phone),u(e,I),u(e,C),u(C,O),u(O,q),u(q,Y),u(q,$),u(q,Z),je(Z,n[21].dateOfBirth),u(C,X),u(C,Q),u(Q,re),u(re,me),u(re,B),u(re,V),je(V,n[21].age),u(re,G),u(re,te),u(C,ae),u(C,fe),u(fe,ve),u(ve,he),u(ve,ye),u(ve,Ae),je(Ae,n[21].weight),u(ve,Me),u(ve,Te),u(C,De),u(C,de),u(de,W),u(W,_e),u(W,Ie),u(W,be),u(be,Le),u(be,We),u(be,Je),u(be,Ue),u(be,Ye),u(be,ht),u(be,it),u(be,ze),u(be,Ge),as(be,n[21].bloodGroup,!0),u(W,qe),u(W,ot),u(e,Xe),u(e,Mt),u(Mt,gt),u(gt,Ft),u(Ft,xt),u(Ft,Qe),u(Ft,vt),je(vt,n[21].idNumber),u(e,pt),u(e,Rt),u(Rt,ft),u(Rt,ut),u(Rt,Lt),je(Lt,n[21].address),u(e,st),u(e,He),u(He,yt),u(He,bt),u(He,Dt),je(Dt,n[21].allergies),u(He,Ct),u(He,qt),u(e,wt),u(e,en),u(en,Ln),u(Ln,sn),u(sn,un),u(sn,rn),u(sn,Zt),je(Zt,n[21].emergencyContact),u(en,bi),u(en,Qn),u(Qn,Bn),u(Bn,vn),u(Bn,si),u(Bn,_n),je(_n,n[21].emergencyPhone),u(e,yn),nn&&nn.m(e,null),u(e,Yn),u(e,ri),u(ri,hn),Sn&&Sn.m(hn,null),u(hn,wi),u(hn,Ai),u(hn,Ze),u(ri,lt),u(ri,$e),u($e,Bt),u($e,Yt),dn||(tn=[Ee(a,"input",n[62]),Ee(p,"input",n[63]),Ee(F,"input",n[64]),Ee(R,"input",n[65]),Ee(Z,"input",n[66]),Ee(Z,"change",n[52]),Ee(V,"input",n[67]),Ee(Ae,"input",n[68]),Ee(be,"change",n[69]),Ee(vt,"input",n[70]),Ee(Lt,"input",n[71]),Ee(Dt,"input",n[72]),Ee(Zt,"input",n[73]),Ee(_n,"input",n[74]),Ee($e,"click",n[54]),Ee(e,"submit",Pf(n[55]))],dn=!0)},p(At,Ht){Ht[0]&8388608&&(a.disabled=At[23]),Ht[0]&2097152&&a.value!==At[21].firstName&&je(a,At[21].firstName),Ht[0]&8388608&&(p.disabled=At[23]),Ht[0]&2097152&&p.value!==At[21].lastName&&je(p,At[21].lastName),Ht[0]&8388608&&(F.disabled=At[23]),Ht[0]&2097152&&F.value!==At[21].email&&je(F,At[21].email),Ht[0]&8388608&&(R.disabled=At[23]),Ht[0]&2097152&&je(R,At[21].phone),Ht[0]&8388608&&(Z.disabled=At[23]),Ht[0]&2097152&&je(Z,At[21].dateOfBirth),Ht[0]&8388608&&(V.disabled=At[23]),Ht[0]&2097152&&Uo(V.value)!==At[21].age&&je(V,At[21].age),Ht[0]&8388608&&(Ae.disabled=At[23]),Ht[0]&2097152&&Uo(Ae.value)!==At[21].weight&&je(Ae,At[21].weight),Ht[0]&8388608&&(be.disabled=At[23]),Ht[0]&2097152&&as(be,At[21].bloodGroup),Ht[0]&8388608&&(vt.disabled=At[23]),Ht[0]&2097152&&vt.value!==At[21].idNumber&&je(vt,At[21].idNumber),Ht[0]&8388608&&(Lt.disabled=At[23]),Ht[0]&2097152&&je(Lt,At[21].address),Ht[0]&8388608&&(Dt.disabled=At[23]),Ht[0]&2097152&&je(Dt,At[21].allergies),Ht[0]&8388608&&(Zt.disabled=At[23]),Ht[0]&2097152&&Zt.value!==At[21].emergencyContact&&je(Zt,At[21].emergencyContact),Ht[0]&8388608&&(_n.disabled=At[23]),Ht[0]&2097152&&je(_n,At[21].emergencyPhone),At[22]?nn?nn.p(At,Ht):(nn=A1(At),nn.c(),nn.m(e,Yn)):nn&&(nn.d(1),nn=null),At[23]?Sn||(Sn=S1(),Sn.c(),Sn.m(hn,wi)):Sn&&(Sn.d(1),Sn=null),Ht[0]&8388608&&(hn.disabled=At[23]),Ht[0]&8388608&&($e.disabled=At[23])},d(At){At&&ce(e),nn&&nn.d(),Sn&&Sn.d(),dn=!1,an(tn)}}}function g1(n){let e,t,i,s=n[0].weight+"",r,o;return{c(){e=m("p"),t=m("strong"),t.textContent="Weight:",i=D(),r=le(s),o=le(" kg")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,r),u(e,o)},p(a,l){l[0]&1&&s!==(s=a[0].weight+"")&&Se(r,s)},d(a){a&&ce(e)}}}function b1(n){let e,t,i,s,r=n[0].bloodGroup+"",o;return{c(){e=m("p"),t=m("strong"),t.textContent="Blood Group:",i=D(),s=m("span"),o=le(r),d(s,"class","badge bg-danger text-white")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s),u(s,o)},p(a,l){l[0]&1&&r!==(r=a[0].bloodGroup+"")&&Se(o,r)},d(a){a&&ce(e)}}}function v1(n){let e,t,i,s=n[0].address+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Address:",i=D(),r=le(s)},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a[0]&1&&s!==(s=o[0].address+"")&&Se(r,s)},d(o){o&&ce(e)}}}function _1(n){let e,t,i,s=n[0].emergencyContact+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Emergency Contact:",i=D(),r=le(s)},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a[0]&1&&s!==(s=o[0].emergencyContact+"")&&Se(r,s)},d(o){o&&ce(e)}}}function y1(n){let e,t,i,s=n[0].emergencyPhone+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Emergency Phone:",i=D(),r=le(s)},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a[0]&1&&s!==(s=o[0].emergencyPhone+"")&&Se(r,s)},d(o){o&&ce(e)}}}function w1(n){let e,t,i,s,r,o,a=n[0].allergies+"",l;return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),s.innerHTML='<i class="fas fa-exclamation-triangle me-2"></i>Allergies',r=D(),o=m("p"),l=le(a),d(s,"class","alert-heading"),d(o,"class","mb-0"),d(i,"class","alert alert-warning"),d(t,"class","col-12"),d(e,"class","row mt-3")},m(c,h){ue(c,e,h),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(o,l)},p(c,h){h[0]&1&&a!==(a=c[0].allergies+"")&&Se(l,a)},d(c){c&&ce(e)}}}function A1(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[22]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r[0]&4194304&&Se(i,s[22])},d(s){s&&ce(e)}}}function S1(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function k1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p;a=new Jf({props:{showSymptomsForm:n[12],selectedPatient:n[0],onSymptomsAdded:n[39],onCancelSymptoms:n[49]}}),c=new mS({props:{symptoms:n[6],currentMedications:n[8],patientAge:n[0]?n[76]():null,doctorId:n[2]}}),c.$on("ai-usage-updated",n[77]);function _(w,P){return w[6]&&w[6].length>0?_S:vS}let y=_(n),S=y(n);return{c(){e=m("div"),t=m("div"),i=m("h6"),i.innerHTML='<i class="fas fa-thermometer-half me-2"></i>Symptoms',s=D(),r=m("button"),r.innerHTML='<i class="fas fa-plus me-1"></i>Add Symptoms',o=D(),Gn(a.$$.fragment),l=D(),Gn(c.$$.fragment),h=D(),S.c(),d(i,"class","mb-0"),d(r,"class","btn btn-primary btn-sm"),d(t,"class","d-flex justify-content-between align-items-center mb-3"),d(e,"class","tab-pane active")},m(w,P){ue(w,e,P),u(e,t),u(t,i),u(t,s),u(t,r),u(e,o),zn(a,e,null),u(e,l),zn(c,e,null),u(e,h),S.m(e,null),f=!0,g||(p=Ee(r,"click",n[75]),g=!0)},p(w,P){const x={};P[0]&4096&&(x.showSymptomsForm=w[12]),P[0]&1&&(x.selectedPatient=w[0]),a.$set(x);const F={};P[0]&64&&(F.symptoms=w[6]),P[0]&256&&(F.currentMedications=w[8]),P[0]&1&&(F.patientAge=w[0]?w[76]():null),P[0]&4&&(F.doctorId=w[2]),c.$set(F),y===(y=_(w))&&S?S.p(w,P):(S.d(1),S=y(w),S&&(S.c(),S.m(e,null)))},i(w){f||(Pt(a.$$.fragment,w),Pt(c.$$.fragment,w),f=!0)},o(w){Ot(a.$$.fragment,w),Ot(c.$$.fragment,w),f=!1},d(w){w&&ce(e),Hn(a),Hn(c),S.d(),g=!1,p()}}}function vS(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-thermometer-half fa-2x text-muted mb-3"></i> <p class="text-muted">No symptoms recorded for this patient.</p>',d(e,"class","text-center p-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function _S(n){let e,t=Et(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=N1(p1(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","list-group")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r[0]&16448|r[1]&134217728){t=Et(s[6]);let o;for(o=0;o<t.length;o+=1){const a=p1(s,t,o);i[o]?i[o].p(a,r):(i[o]=N1(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function P1(n){let e,t,i,s=n[111].notes+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Notes:",i=D(),r=le(s),d(e,"class","mb-1")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a[0]&64&&s!==(s=o[111].notes+"")&&Se(r,s)},d(o){o&&ce(e)}}}function N1(n){let e,t,i,s,r,o,a=(n[111].description||"Unknown Symptom")+"",l,c,h,f,g,p,_=(n[111].severity||"Unknown")+"",y,S,w,P,x,F,U=(n[111].duration||"Not specified")+"",H,L,k,E,R,I,C=(n[111].createdAt?new Date(n[111].createdAt).toLocaleDateString():"Unknown date")+"",O,q,Y,$,Z,X,Q,re,me=n[111].notes&&P1(n);function B(){return n[78](n[108])}return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),r=m("i"),o=D(),l=le(a),c=D(),h=m("p"),f=m("strong"),f.textContent="Severity:",g=D(),p=m("span"),y=le(_),w=D(),P=m("p"),x=m("strong"),x.textContent="Duration:",F=D(),H=le(U),L=D(),me&&me.c(),k=D(),E=m("small"),R=m("i"),I=le(`
                        Recorded: `),O=le(C),q=D(),Y=m("button"),$=m("i"),X=D(),d(r,"class","fas fa-thermometer-half me-2"),d(s,"class","mb-1"),d(p,"class",S="badge bg-"+(n[111].severity==="mild"?"success":n[111].severity==="moderate"?"warning":n[111].severity==="severe"?"danger":"dark")+" text-capitalize"),d(h,"class","mb-1"),d(P,"class","mb-1"),d(R,"class","fas fa-calendar me-1"),d(E,"class","text-muted"),d(i,"class","flex-grow-1"),d($,"class",Z="fas fa-"+(n[14][n[108]]?"chevron-up":"chevron-down")),d(Y,"class","btn btn-outline-secondary btn-sm"),d(t,"class","d-flex w-100 justify-content-between align-items-start"),d(e,"class","list-group-item")},m(V,G){ue(V,e,G),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,l),u(i,c),u(i,h),u(h,f),u(h,g),u(h,p),u(p,y),u(i,w),u(i,P),u(P,x),u(P,F),u(P,H),u(i,L),me&&me.m(i,null),u(i,k),u(i,E),u(E,R),u(E,I),u(E,O),u(t,q),u(t,Y),u(Y,$),u(e,X),Q||(re=Ee(Y,"click",B),Q=!0)},p(V,G){n=V,G[0]&64&&a!==(a=(n[111].description||"Unknown Symptom")+"")&&Se(l,a),G[0]&64&&_!==(_=(n[111].severity||"Unknown")+"")&&Se(y,_),G[0]&64&&S!==(S="badge bg-"+(n[111].severity==="mild"?"success":n[111].severity==="moderate"?"warning":n[111].severity==="severe"?"danger":"dark")+" text-capitalize")&&d(p,"class",S),G[0]&64&&U!==(U=(n[111].duration||"Not specified")+"")&&Se(H,U),n[111].notes?me?me.p(n,G):(me=P1(n),me.c(),me.m(i,k)):me&&(me.d(1),me=null),G[0]&64&&C!==(C=(n[111].createdAt?new Date(n[111].createdAt).toLocaleDateString():"Unknown date")+"")&&Se(O,C),G[0]&16384&&Z!==(Z="fas fa-"+(n[14][n[108]]?"chevron-up":"chevron-down"))&&d($,"class",Z)},d(V){V&&ce(e),me&&me.d(),Q=!1,re()}}}function I1(n){let e,t,i,s,r,o,a,l,c,h,f;a=new Jf({props:{showIllnessForm:n[10],selectedPatient:n[0],onIllnessAdded:n[38],onCancelIllness:n[41]}});function g(y,S){return y[5]&&y[5].length>0?wS:yS}let p=g(n),_=p(n);return{c(){e=m("div"),t=m("div"),i=m("h6"),i.innerHTML='<i class="fas fa-heartbeat me-2"></i>Illnesses',s=D(),r=m("button"),r.innerHTML='<i class="fas fa-plus me-1"></i>Add Illness',o=D(),Gn(a.$$.fragment),l=D(),_.c(),d(i,"class","mb-0"),d(r,"class","btn btn-primary btn-sm"),d(t,"class","d-flex justify-content-between align-items-center mb-3"),d(e,"class","tab-pane active")},m(y,S){ue(y,e,S),u(e,t),u(t,i),u(t,s),u(t,r),u(e,o),zn(a,e,null),u(e,l),_.m(e,null),c=!0,h||(f=Ee(r,"click",n[79]),h=!0)},p(y,S){const w={};S[0]&1024&&(w.showIllnessForm=y[10]),S[0]&1&&(w.selectedPatient=y[0]),a.$set(w),p===(p=g(y))&&_?_.p(y,S):(_.d(1),_=p(y),_&&(_.c(),_.m(e,null)))},i(y){c||(Pt(a.$$.fragment,y),c=!0)},o(y){Ot(a.$$.fragment,y),c=!1},d(y){y&&ce(e),Hn(a),_.d(),h=!1,f()}}}function yS(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-heartbeat fa-2x text-muted mb-3"></i> <p class="text-muted">No illnesses recorded for this patient.</p>',d(e,"class","text-center p-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function wS(n){let e,t=Et(n[5]),i=[];for(let s=0;s<t.length;s+=1)i[s]=C1(f1(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","list-group")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r[0]&32800|r[1]&134217728){t=Et(s[5]);let o;for(o=0;o<t.length;o+=1){const a=f1(s,t,o);i[o]?i[o].p(a,r):(i[o]=C1(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function L1(n){let e,t,i,s=n[109].notes+"",r;return{c(){e=m("p"),t=m("strong"),t.textContent="Notes:",i=D(),r=le(s),d(e,"class","mb-1")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,r)},p(o,a){a[0]&32&&s!==(s=o[109].notes+"")&&Se(r,s)},d(o){o&&ce(e)}}}function C1(n){let e,t,i,s,r,o,a=(n[109].name||"Unknown Illness")+"",l,c,h,f,g,p,_=(n[109].status||"Unknown")+"",y,S,w,P,x,F,U=(n[109].diagnosisDate||"Not specified")+"",H,L,k,E,R,I,C=(n[109].createdAt?new Date(n[109].createdAt).toLocaleDateString():"Unknown date")+"",O,q,Y,$,Z,X,Q,re,me=n[109].notes&&L1(n);function B(){return n[80](n[108])}return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),r=m("i"),o=D(),l=le(a),c=D(),h=m("p"),f=m("strong"),f.textContent="Status:",g=D(),p=m("span"),y=le(_),w=D(),P=m("p"),x=m("strong"),x.textContent="Diagnosis Date:",F=D(),H=le(U),L=D(),me&&me.c(),k=D(),E=m("small"),R=m("i"),I=le(`
                        Recorded: `),O=le(C),q=D(),Y=m("button"),$=m("i"),X=D(),d(r,"class","fas fa-heartbeat me-2"),d(s,"class","mb-1"),d(p,"class",S="badge bg-"+(n[109].status==="active"?"danger":n[109].status==="chronic"?"warning":n[109].status==="resolved"?"success":"secondary")+" text-capitalize"),d(h,"class","mb-1"),d(P,"class","mb-1"),d(R,"class","fas fa-calendar me-1"),d(E,"class","text-muted"),d(i,"class","flex-grow-1"),d($,"class",Z="fas fa-"+(n[15][n[108]]?"chevron-up":"chevron-down")),d(Y,"class","btn btn-outline-secondary btn-sm"),d(t,"class","d-flex w-100 justify-content-between align-items-start"),d(e,"class","list-group-item")},m(V,G){ue(V,e,G),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,l),u(i,c),u(i,h),u(h,f),u(h,g),u(h,p),u(p,y),u(i,w),u(i,P),u(P,x),u(P,F),u(P,H),u(i,L),me&&me.m(i,null),u(i,k),u(i,E),u(E,R),u(E,I),u(E,O),u(t,q),u(t,Y),u(Y,$),u(e,X),Q||(re=Ee(Y,"click",B),Q=!0)},p(V,G){n=V,G[0]&32&&a!==(a=(n[109].name||"Unknown Illness")+"")&&Se(l,a),G[0]&32&&_!==(_=(n[109].status||"Unknown")+"")&&Se(y,_),G[0]&32&&S!==(S="badge bg-"+(n[109].status==="active"?"danger":n[109].status==="chronic"?"warning":n[109].status==="resolved"?"success":"secondary")+" text-capitalize")&&d(p,"class",S),G[0]&32&&U!==(U=(n[109].diagnosisDate||"Not specified")+"")&&Se(H,U),n[109].notes?me?me.p(n,G):(me=L1(n),me.c(),me.m(i,k)):me&&(me.d(1),me=null),G[0]&32&&C!==(C=(n[109].createdAt?new Date(n[109].createdAt).toLocaleDateString():"Unknown date")+"")&&Se(O,C),G[0]&32768&&Z!==(Z="fas fa-"+(n[15][n[108]]?"chevron-up":"chevron-down"))&&d($,"class",Z)},d(V){V&&ce(e),me&&me.d(),Q=!1,re()}}}function T1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P=n[28]&&D1(n);g=new Jf({props:{showMedicationForm:n[11],selectedPatient:n[0],editingMedication:n[17],doctorId:n[2],onMedicationAdded:n[40],onCancelMedication:n[50]}});let x=n[8]&&n[8].length>=2&&x1(n);function F(L,k){return L[8]&&L[8].length>0?DS:TS}let U=F(n),H=U(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h5"),s.innerHTML='<i class="fas fa-prescription-bottle-alt me-2"></i>Prescription',r=D(),o=m("button"),a=m("i"),l=le("Add Drug"),c=D(),h=m("div"),P&&P.c(),f=D(),Gn(g.$$.fragment),p=D(),x&&x.c(),_=D(),H.c(),d(s,"class","card-title mb-0"),d(a,"class","fas fa-plus me-1"),d(o,"class","btn btn-primary btn-sm"),o.disabled=n[11],d(i,"class","card-header d-flex justify-content-between align-items-center"),d(h,"class","card-body"),d(t,"class","card"),d(e,"class","tab-pane active")},m(L,k){ue(L,e,k),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(o,a),u(o,l),u(t,c),u(t,h),P&&P.m(h,null),u(h,f),zn(g,h,null),u(h,p),x&&x.m(h,null),u(h,_),H.m(h,null),y=!0,S||(w=Ee(o,"click",n[81]),S=!0)},p(L,k){(!y||k[0]&2048)&&(o.disabled=L[11]),L[28]?P?P.p(L,k):(P=D1(L),P.c(),P.m(h,f)):P&&(P.d(1),P=null);const E={};k[0]&2048&&(E.showMedicationForm=L[11]),k[0]&1&&(E.selectedPatient=L[0]),k[0]&131072&&(E.editingMedication=L[17]),k[0]&4&&(E.doctorId=L[2]),g.$set(E),L[8]&&L[8].length>=2?x?x.p(L,k):(x=x1(L),x.c(),x.m(h,_)):x&&(x.d(1),x=null),U===(U=F(L))&&H?H.p(L,k):(H.d(1),H=U(L),H&&(H.c(),H.m(h,null)))},i(L){y||(Pt(g.$$.fragment,L),y=!0)},o(L){Ot(g.$$.fragment,L),y=!1},d(L){L&&ce(e),P&&P.d(),Hn(g),x&&x.d(),H.d(),S=!1,w()}}}function D1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x;return{c(){e=m("div"),t=m("i"),i=D(),s=m("strong"),s.textContent="AI drug interaction test complete",r=D(),o=m("br"),a=D(),l=m("small"),c=le(n[29]),h=D(),f=m("button"),p=D(),_=m("div"),y=m("p"),y.textContent="Need a full AI assisted prescription analysis?",S=D(),w=m("button"),w.innerHTML=`<i class="fas fa-brain me-2"></i>
                Full AI Analysis`,d(t,"class","fas fa-robot me-2"),d(f,"type","button"),d(f,"class","btn-close"),d(f,"data-bs-dismiss","alert"),d(f,"aria-label","Close"),d(e,"class",g="alert "+(n[24]&&n[24].hasInteractions?"alert-danger":"alert-success")+" alert-dismissible fade show mb-3"),d(e,"role","alert"),d(y,"class","text-muted mb-2"),d(w,"class","btn btn-outline-primary btn-sm"),d(w,"title","Get comprehensive AI analysis of prescription"),d(_,"class","text-center mb-3")},m(F,U){ue(F,e,U),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),u(e,a),u(e,l),u(l,c),u(e,h),u(e,f),ue(F,p,U),ue(F,_,U),u(_,y),u(_,S),u(_,w),P||(x=[Ee(f,"click",n[82]),Ee(w,"click",n[83])],P=!0)},p(F,U){U[0]&536870912&&Se(c,F[29]),U[0]&16777216&&g!==(g="alert "+(F[24]&&F[24].hasInteractions?"alert-danger":"alert-success")+" alert-dismissible fade show mb-3")&&d(e,"class",g)},d(F){F&&(ce(e),ce(p),ce(_)),P=!1,an(x)}}}function x1(n){let e;function t(r,o){if(r[25])return PS;if(r[24]&&r[24].hasInteractions)return kS;if(r[24]&&!r[24].hasInteractions)return SS;if(r[26])return AS}let i=t(n),s=i&&i(n);return{c(){e=m("div"),s&&s.c(),d(e,"class","drug-interactions-section mb-3 svelte-bugg66")},m(r,o){ue(r,e,o),s&&s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s&&s.d(1),s=i&&i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&ce(e),s&&s.d()}}}function AS(n){let e,t,i,s,r;return{c(){e=m("div"),t=m("i"),i=D(),s=m("span"),r=le(n[26]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-warning d-flex align-items-center svelte-bugg66")},m(o,a){ue(o,e,a),u(e,t),u(e,i),u(e,s),u(s,r)},p(o,a){a[0]&67108864&&Se(r,o[26])},d(o){o&&ce(e)}}}function SS(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="card-header d-flex justify-content-between align-items-center"><h6 class="mb-0 text-danger"><i class="fas fa-robot me-2"></i>AI-Powered Safety Analysis</h6></div> <div class="card-body"><div class="alert alert-success d-flex align-items-center mb-0 svelte-bugg66"><i class="fas fa-check-circle me-2"></i> <span>No significant drug interactions detected between current medications.</span></div></div>',d(e,"class","card")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function kS(n){let e,t,i,s,r,o=n[24].severity.toUpperCase()+"",a,l,c,h,f,g,p,_,y,S,w=n[27]?"Hide":"View",P,x,F,U,H,L,k,E;function R(X,Q){return X[24].severity==="critical"?IS:NS}let I=R(n),C=I(n),O=n[24].isLocalDetection&&E1();function q(X,Q){return X[24].severity==="critical"?CS:LS}let Y=q(n),$=Y(n),Z=n[27]&&M1(n);return{c(){e=m("div"),t=m("div"),i=m("div"),C.c(),s=D(),r=m("span"),a=le(o),c=D(),O&&O.c(),h=D(),f=m("p"),$.c(),g=D(),p=m("button"),_=m("i"),S=D(),P=le(w),x=le(" Details"),H=D(),Z&&Z.c(),L=gi(),d(r,"class",l="badge bg-"+(n[24].severity==="critical"?"danger":n[24].severity==="high"?"warning":"info")+" ms-2"),d(i,"class","d-flex align-items-center mb-2"),d(f,"class","mb-2"),d(_,"class",y="fas "+(n[27]?"fa-eye-slash":"fa-eye")+" me-1"),d(p,"class",F="btn btn-sm btn-outline-"+(n[24].severity==="critical"?"danger":n[24].severity==="high"?"warning":"info")),d(t,"class","flex-grow-1"),d(e,"class",U="alert alert-"+(n[24].severity==="critical"?"danger":n[24].severity==="high"?"warning":"info")+" d-flex justify-content-between align-items-start "+(n[24].severity==="critical"?"alert-dangerous":"")+" svelte-bugg66")},m(X,Q){ue(X,e,Q),u(e,t),u(t,i),C.m(i,null),u(i,s),u(i,r),u(r,a),u(i,c),O&&O.m(i,null),u(t,h),u(t,f),$.m(f,null),u(t,g),u(t,p),u(p,_),u(p,S),u(p,P),u(p,x),ue(X,H,Q),Z&&Z.m(X,Q),ue(X,L,Q),k||(E=Ee(p,"click",n[35]),k=!0)},p(X,Q){I!==(I=R(X))&&(C.d(1),C=I(X),C&&(C.c(),C.m(i,s))),Q[0]&16777216&&o!==(o=X[24].severity.toUpperCase()+"")&&Se(a,o),Q[0]&16777216&&l!==(l="badge bg-"+(X[24].severity==="critical"?"danger":X[24].severity==="high"?"warning":"info")+" ms-2")&&d(r,"class",l),X[24].isLocalDetection?O||(O=E1(),O.c(),O.m(i,null)):O&&(O.d(1),O=null),Y!==(Y=q(X))&&($.d(1),$=Y(X),$&&($.c(),$.m(f,null))),Q[0]&134217728&&y!==(y="fas "+(X[27]?"fa-eye-slash":"fa-eye")+" me-1")&&d(_,"class",y),Q[0]&134217728&&w!==(w=X[27]?"Hide":"View")&&Se(P,w),Q[0]&16777216&&F!==(F="btn btn-sm btn-outline-"+(X[24].severity==="critical"?"danger":X[24].severity==="high"?"warning":"info"))&&d(p,"class",F),Q[0]&16777216&&U!==(U="alert alert-"+(X[24].severity==="critical"?"danger":X[24].severity==="high"?"warning":"info")+" d-flex justify-content-between align-items-start "+(X[24].severity==="critical"?"alert-dangerous":"")+" svelte-bugg66")&&d(e,"class",U),X[27]?Z?Z.p(X,Q):(Z=M1(X),Z.c(),Z.m(L.parentNode,L)):Z&&(Z.d(1),Z=null)},d(X){X&&(ce(e),ce(H),ce(L)),C.d(),O&&O.d(),$.d(),Z&&Z.d(X),k=!1,E()}}}function PS(n){let e,t,i,s,r,o,a,l,c,h,f,g,p=n[8].length+"",_,y;return{c(){e=m("div"),t=m("span"),i=D(),s=m("i"),r=D(),o=m("div"),a=m("strong"),a.textContent="Checking for drug interactions...",l=D(),c=m("br"),h=D(),f=m("small"),g=le("Analyzing "),_=le(p),y=le(" medications for potential interactions"),d(t,"class","spinner-border spinner-border-sm me-2"),d(t,"role","status"),d(s,"class","fas fa-search me-2"),d(f,"class","text-muted"),d(e,"class","alert alert-info d-flex align-items-center svelte-bugg66")},m(S,w){ue(S,e,w),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),u(o,a),u(o,l),u(o,c),u(o,h),u(o,f),u(f,g),u(f,_),u(f,y)},p(S,w){w[0]&256&&p!==(p=S[8].length+"")&&Se(_,p)},d(S){S&&ce(e)}}}function NS(n){let e,t,i;return{c(){e=m("i"),t=D(),i=m("strong"),i.textContent="Drug Interaction Warning",d(e,"class","fas fa-exclamation-triangle me-2")},m(s,r){ue(s,e,r),ue(s,t,r),ue(s,i,r)},d(s){s&&(ce(e),ce(t),ce(i))}}}function IS(n){let e,t,i;return{c(){e=m("i"),t=D(),i=m("strong"),i.textContent="DANGEROUS INTERACTION DETECTED",d(e,"class","fas fa-exclamation-triangle me-2 text-danger"),d(i,"class","text-danger")},m(s,r){ue(s,e,r),ue(s,t,r),ue(s,i,r)},d(s){s&&(ce(e),ce(t),ce(i))}}}function E1(n){let e;return{c(){e=m("span"),e.textContent="LOCAL SAFETY CHECK",d(e,"class","badge bg-dark ms-2")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function LS(n){let e;return{c(){e=le("Potential drug interactions detected between current medications.")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function CS(n){let e,t;return{c(){e=m("strong"),e.textContent="IMMEDIATE ATTENTION REQUIRED:",t=le(" Dangerous drug interaction detected between current medications."),d(e,"class","text-danger")},m(i,s){ue(i,e,s),ue(i,t,s)},d(i){i&&(ce(e),ce(t))}}}function M1(n){let e,t,i,s,r,o=n[36](n[24].interactions)+"";return{c(){e=m("div"),t=m("div"),i=m("h6"),i.innerHTML='<i class="fas fa-pills me-2"></i>Drug Interaction Analysis',s=D(),r=m("div"),d(i,"class","card-title"),d(r,"class","interaction-content svelte-bugg66"),d(t,"class","card-body"),d(e,"class","card mt-2")},m(a,l){ue(a,e,l),u(e,t),u(t,i),u(t,s),u(t,r),r.innerHTML=o},p(a,l){l[0]&16777216&&o!==(o=a[36](a[24].interactions)+"")&&(r.innerHTML=o)},d(a){a&&ce(e)}}}function TS(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-pills fa-2x mb-2"></i> <p>No current prescriptions for today</p>',d(e,"class","text-center text-muted py-3")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function DS(n){let e,t=[],i=new Map,s,r,o,a,l,c,h,f,g=n[8].length>0||n[18].trim()!=="",p,_,y,S=Et(n[8]);const w=x=>x[106].id;for(let x=0;x<S.length;x+=1){let F=d1(n,S,x),U=w(F);i.set(U,t[x]=R1(U,F))}let P=g&&F1(n);return{c(){e=m("div");for(let x=0;x<t.length;x+=1)t[x].c();s=D(),r=m("div"),o=m("label"),o.innerHTML='<i class="fas fa-sticky-note me-1"></i>Prescription Notes',a=D(),l=m("textarea"),c=D(),h=m("div"),h.innerHTML='<small class="text-muted">Optional notes about the current prescription regimen</small>',f=D(),P&&P.c(),p=gi(),d(e,"class","list-group"),d(o,"for","prescriptionNotes"),d(o,"class","form-label"),d(l,"id","prescriptionNotes"),d(l,"class","form-control"),d(l,"rows","3"),d(l,"placeholder","Add any additional notes about the current prescriptions..."),d(h,"class","form-text"),d(r,"class","mt-3")},m(x,F){ue(x,e,F);for(let U=0;U<t.length;U+=1)t[U]&&t[U].m(e,null);ue(x,s,F),ue(x,r,F),u(r,o),u(r,a),u(r,l),je(l,n[18]),u(r,c),u(r,h),ue(x,f,F),P&&P.m(x,F),ue(x,p,F),_||(y=Ee(l,"input",n[86]),_=!0)},p(x,F){F[0]&524544|F[1]&100663296&&(S=Et(x[8]),t=If(t,F,w,1,x,S,i,e,Pb,R1,null,d1)),F[0]&262144&&je(l,x[18]),F[0]&262400&&(g=x[8].length>0||x[18].trim()!==""),g?P?P.p(x,F):(P=F1(x),P.c(),P.m(p.parentNode,p)):P&&(P.d(1),P=null)},d(x){x&&(ce(e),ce(s),ce(r),ce(f),ce(p));for(let F=0;F<t.length;F+=1)t[F].d();P&&P.d(x),_=!1,y()}}}function O1(n){let e,t,i=n[106].instructions+"",s;return{c(){e=m("div"),t=m("small"),s=le(i),d(t,"class","text-muted"),d(e,"class","mt-1")},m(r,o){ue(r,e,o),u(e,t),u(t,s)},p(r,o){o[0]&256&&i!==(i=r[106].instructions+"")&&Se(s,i)},d(r){r&&ce(e)}}}function xS(n){let e;return{c(){e=m("div"),e.innerHTML='<small><i class="fas fa-check-circle me-1"></i>Finalized</small>',d(e,"class","text-muted")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function ES(n){let e,t,i,s,r,o;function a(){return n[84](n[106],n[108])}function l(){return n[85](n[108])}return{c(){e=m("div"),t=m("button"),t.innerHTML='<i class="fas fa-edit"></i>',i=D(),s=m("button"),s.innerHTML='<i class="fas fa-trash"></i>',d(t,"class","btn btn-outline-primary btn-sm"),d(t,"title","Edit medication"),d(s,"class","btn btn-outline-danger btn-sm"),d(s,"title","Delete medication"),d(e,"class","btn-group btn-group-sm")},m(c,h){ue(c,e,h),u(e,t),u(e,i),u(e,s),r||(o=[Ee(t,"click",a),Ee(s,"click",l)],r=!0)},p(c,h){n=c},d(c){c&&ce(e),r=!1,an(o)}}}function R1(n,e){let t,i,s,r=e[106].name+"",o,a,l,c=e[106].dosage+"",h,f,g=e[106].frequency+"",p,_,y=e[106].duration+"",S,w,P,x,F=e[106].instructions&&O1(e);function U(k,E){return k[19]?xS:ES}let H=U(e),L=H(e);return{key:n,first:null,c(){t=m("div"),i=m("div"),s=m("div"),o=le(r),a=D(),l=m("small"),h=le(c),f=le(" • "),p=le(g),_=le(" • "),S=le(y),w=D(),F&&F.c(),P=D(),L.c(),x=D(),d(s,"class","fw-bold fs-5"),d(l,"class","text-muted"),d(i,"class","ms-2 me-auto"),d(t,"class","list-group-item d-flex justify-content-between align-items-start"),this.first=t},m(k,E){ue(k,t,E),u(t,i),u(i,s),u(s,o),u(i,a),u(i,l),u(l,h),u(l,f),u(l,p),u(l,_),u(l,S),u(i,w),F&&F.m(i,null),u(t,P),L.m(t,null),u(t,x)},p(k,E){e=k,E[0]&256&&r!==(r=e[106].name+"")&&Se(o,r),E[0]&256&&c!==(c=e[106].dosage+"")&&Se(h,c),E[0]&256&&g!==(g=e[106].frequency+"")&&Se(p,g),E[0]&256&&y!==(y=e[106].duration+"")&&Se(S,y),e[106].instructions?F?F.p(e,E):(F=O1(e),F.c(),F.m(i,null)):F&&(F.d(1),F=null),H===(H=U(e))&&L?L.p(e,E):(L.d(1),L=H(e),L&&(L.c(),L.m(t,x)))},d(k){k&&ce(t),F&&F.d(),L.d()}}}function F1(n){let e,t;function i(o,a){return o[30]?MS:OS}let s=i(n),r=s(n);return{c(){e=m("div"),t=m("div"),r.c(),d(t,"class","d-flex gap-2 justify-content-center flex-wrap"),d(e,"class","mt-3 text-center")},m(o,a){ue(o,e,a),u(e,t),r.m(t,null)},p(o,a){s===(s=i(o))&&r?r.p(o,a):(r.d(1),r=s(o),r&&(r.c(),r.m(t,null)))},d(o){o&&ce(e),r.d()}}}function MS(n){let e,t,i,s,r;return{c(){e=m("button"),e.innerHTML=`<i class="fas fa-paper-plane me-2"></i>
                      Send to Pharmacy`,t=D(),i=m("button"),i.innerHTML=`<i class="fas fa-file-pdf me-2"></i>
                      Print`,d(e,"class","btn btn-warning flex-fill"),d(e,"title","Send prescriptions to connected pharmacy"),d(i,"class","btn btn-outline-primary flex-fill"),d(i,"title","Print prescriptions to PDF")},m(o,a){ue(o,e,a),ue(o,t,a),ue(o,i,a),s||(r=[Ee(e,"click",n[44]),Ee(i,"click",n[43])],s=!0)},p:dt,d(o){o&&(ce(e),ce(t),ce(i)),s=!1,an(r)}}}function OS(n){let e,t,i;return{c(){e=m("button"),e.innerHTML=`<i class="fas fa-check-circle me-2"></i>
                      Finish`,d(e,"class","btn btn-success flex-fill"),d(e,"title","Finish current prescriptions")},m(s,r){ue(s,e,r),t||(i=Ee(e,"click",n[42]),t=!0)},p:dt,d(s){s&&ce(e),t=!1,i()}}}function B1(n){let e,t,i,s,r;return s=new hA({props:{prescriptions:n[3]}}),{c(){e=m("div"),t=m("div"),t.innerHTML='<h6 class="mb-0"><i class="fas fa-history me-2"></i>Prescription History</h6>',i=D(),Gn(s.$$.fragment),d(t,"class","d-flex justify-content-between align-items-center mb-3"),d(e,"class","tab-pane active")},m(o,a){ue(o,e,a),u(e,t),u(e,i),zn(s,e,null),r=!0},p(o,a){const l={};a[0]&8&&(l.prescriptions=o[3]),s.$set(l)},i(o){r||(Pt(s.$$.fragment,o),r=!0)},o(o){Ot(s.$$.fragment,o),r=!1},d(o){o&&ce(e),Hn(s)}}}function j1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P=[],x=new Map,F,U,H,L,k,E,R,I,C=n[33].length+"",O,q,Y=n[33].length!==1?"ies":"",$,Z,X,Q,re=Et(n[32]);const me=V=>V[103].id;for(let V=0;V<re.length;V+=1){let G=h1(n,re,V),te=me(G);x.set(te,P[V]=U1(te,G))}let B=n[33].length===0&&z1();return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML=`<i class="fas fa-paper-plane me-2"></i>
            Send to Pharmacy`,o=D(),a=m("button"),l=D(),c=m("div"),h=m("p"),h.textContent="Select which pharmacies should receive this prescription:",f=D(),g=m("div"),p=m("button"),p.innerHTML=`<i class="fas fa-check-square me-1"></i>
              Select All`,_=D(),y=m("button"),y.innerHTML=`<i class="fas fa-square me-1"></i>
              Deselect All`,S=D(),w=m("div");for(let V=0;V<P.length;V+=1)P[V].c();F=D(),B&&B.c(),U=D(),H=m("div"),L=m("button"),L.innerHTML=`<i class="fas fa-times me-2"></i>
            Cancel`,k=D(),E=m("button"),R=m("i"),I=le(`
            Send to `),O=le(C),q=le(" Pharmacy"),$=le(Y),d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close"),d(s,"class","modal-header"),d(h,"class","text-muted mb-3"),d(p,"class","btn btn-outline-primary btn-sm"),d(y,"class","btn btn-outline-secondary btn-sm"),d(g,"class","d-flex gap-2 mb-3"),d(w,"class","list-group"),d(c,"class","modal-body"),d(L,"type","button"),d(L,"class","btn btn-secondary"),d(R,"class","fas fa-paper-plane me-2"),d(E,"type","button"),d(E,"class","btn btn-warning"),E.disabled=Z=n[33].length===0,d(H,"class","modal-footer"),d(i,"class","modal-content"),d(t,"class","modal-dialog modal-dialog-centered"),d(e,"class","modal show d-block"),d(e,"tabindex","-1"),$n(e,"background-color","rgba(0,0,0,0.5)")},m(V,G){ue(V,e,G),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),u(c,h),u(c,f),u(c,g),u(g,p),u(g,_),u(g,y),u(c,S),u(c,w);for(let te=0;te<P.length;te+=1)P[te]&&P[te].m(w,null);u(c,F),B&&B.m(c,null),u(i,U),u(i,H),u(H,L),u(H,k),u(H,E),u(E,R),u(E,I),u(E,O),u(E,q),u(E,$),X||(Q=[Ee(a,"click",n[87]),Ee(p,"click",n[47]),Ee(y,"click",n[48]),Ee(L,"click",n[89]),Ee(E,"click",n[45])],X=!0)},p(V,G){G[1]&32774&&(re=Et(V[32]),P=If(P,G,me,1,V,re,x,w,Pb,U1,null,h1)),V[33].length===0?B||(B=z1(),B.c(),B.m(c,null)):B&&(B.d(1),B=null),G[1]&4&&C!==(C=V[33].length+"")&&Se(O,C),G[1]&4&&Y!==(Y=V[33].length!==1?"ies":"")&&Se($,Y),G[1]&4&&Z!==(Z=V[33].length===0)&&(E.disabled=Z)},d(V){V&&ce(e);for(let G=0;G<P.length;G+=1)P[G].d();B&&B.d(),X=!1,an(Q)}}}function U1(n,e){let t,i,s,r,o,a,l,c,h=e[103].name+"",f,g,p,_,y,S=e[103].email+"",w,P,x,F,U,H,L,k=e[103].address+"",E,R,I,C;function O(){return e[88](e[103])}return{key:n,first:null,c(){t=m("label"),i=m("input"),r=D(),o=m("div"),a=m("div"),l=m("i"),c=D(),f=le(h),g=D(),p=m("small"),_=m("i"),y=D(),w=le(S),P=D(),x=m("br"),F=D(),U=m("small"),H=m("i"),L=D(),E=le(k),R=D(),d(i,"class","form-check-input me-3"),d(i,"type","checkbox"),i.checked=s=e[33].includes(e[103].id),d(l,"class","fas fa-store me-2"),d(a,"class","fw-bold"),d(_,"class","fas fa-envelope me-1"),d(p,"class","text-muted"),d(H,"class","fas fa-map-marker-alt me-1"),d(U,"class","text-muted"),d(o,"class","flex-grow-1"),d(t,"class","list-group-item d-flex align-items-center"),this.first=t},m(q,Y){ue(q,t,Y),u(t,i),u(t,r),u(t,o),u(o,a),u(a,l),u(a,c),u(a,f),u(o,g),u(o,p),u(p,_),u(p,y),u(p,w),u(o,P),u(o,x),u(o,F),u(o,U),u(U,H),u(U,L),u(U,E),u(t,R),I||(C=Ee(i,"change",O),I=!0)},p(q,Y){e=q,Y[1]&6&&s!==(s=e[33].includes(e[103].id))&&(i.checked=s),Y[1]&2&&h!==(h=e[103].name+"")&&Se(f,h),Y[1]&2&&S!==(S=e[103].email+"")&&Se(w,S),Y[1]&2&&k!==(k=e[103].address+"")&&Se(E,k)},d(q){q&&ce(t),I=!1,C()}}}function z1(n){let e;return{c(){e=m("div"),e.innerHTML=`<i class="fas fa-exclamation-triangle me-2"></i>
              Please select at least one pharmacy to send the prescription.`,d(e,"class","alert alert-warning mt-3 mb-0")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function H1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p;return h=new dS({props:{selectedPatient:n[0],prescriptions:n[3]}}),h.$on("close",n[91]),{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML='<i class="fas fa-file-pdf me-2"></i>Prescription PDF',o=D(),a=m("button"),l=D(),c=m("div"),Gn(h.$$.fragment),d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close"),d(s,"class","modal-header"),d(c,"class","modal-body"),d(i,"class","modal-content"),d(t,"class","modal-dialog modal-lg"),d(e,"class","modal show d-block"),d(e,"tabindex","-1"),$n(e,"background-color","rgba(var(--bs-dark-rgb), 0.5)")},m(_,y){ue(_,e,y),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),zn(h,c,null),f=!0,g||(p=Ee(a,"click",n[90]),g=!0)},p(_,y){const S={};y[0]&1&&(S.selectedPatient=_[0]),y[0]&8&&(S.prescriptions=_[3]),h.$set(S)},i(_){f||(Pt(h.$$.fragment,_),f=!0)},o(_){Ot(h.$$.fragment,_),f=!1},d(_){_&&ce(e),Hn(h),g=!1,p()}}}function RS(n){let e,t,i,s,r,o,a=n[0].firstName+"",l,c,h=n[0].lastName+"",f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me;E=new W6({props:{activeTab:n[9],onTabChange:n[37]}});let B=n[9]==="overview"&&m1(n),V=n[9]==="symptoms"&&k1(n),G=n[9]==="illnesses"&&I1(n),te=n[9]==="prescriptions"&&T1(n),ae=n[9]==="history"&&B1(n),fe=n[31]&&j1(n),ve=n[13]&&H1(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h5"),r=m("i"),o=D(),l=le(a),c=D(),f=le(h),g=D(),p=m("div"),_=m("button"),y=m("i"),S=le("New Prescription"),P=D(),x=m("button"),F=m("i"),U=le("Edit"),L=D(),k=m("div"),Gn(E.$$.fragment),R=D(),I=m("div"),B&&B.c(),C=D(),V&&V.c(),O=D(),G&&G.c(),q=D(),te&&te.c(),Y=D(),ae&&ae.c(),$=D(),fe&&fe.c(),Z=D(),ve&&ve.c(),X=gi(),d(r,"class","fas fa-user me-2"),d(s,"class","mb-0"),d(y,"class","fas fa-plus me-1"),d(_,"class","btn btn-success btn-sm me-2"),_.disabled=w=n[16]||n[20],d(_,"title","Add new prescription"),d(F,"class","fas fa-edit me-1"),d(x,"class","btn btn-outline-primary btn-sm"),x.disabled=H=n[16]||n[20],d(p,"class","btn-group"),d(p,"role","group"),d(i,"class","d-flex justify-content-between align-items-center"),d(t,"class","card-header"),d(I,"class","tab-content mt-3"),d(k,"class","card-body"),d(e,"class","card")},m(he,ye){ue(he,e,ye),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,l),u(s,c),u(s,f),u(i,g),u(i,p),u(p,_),u(_,y),u(_,S),u(p,P),u(p,x),u(x,F),u(x,U),u(e,L),u(e,k),zn(E,k,null),u(k,R),u(k,I),B&&B.m(I,null),u(I,C),V&&V.m(I,null),u(I,O),G&&G.m(I,null),u(I,q),te&&te.m(I,null),u(I,Y),ae&&ae.m(I,null),ue(he,$,ye),fe&&fe.m(he,ye),ue(he,Z,ye),ve&&ve.m(he,ye),ue(he,X,ye),Q=!0,re||(me=[Ee(_,"click",n[61]),Ee(x,"click",n[53])],re=!0)},p(he,ye){(!Q||ye[0]&1)&&a!==(a=he[0].firstName+"")&&Se(l,a),(!Q||ye[0]&1)&&h!==(h=he[0].lastName+"")&&Se(f,h),(!Q||ye[0]&1114112&&w!==(w=he[16]||he[20]))&&(_.disabled=w),(!Q||ye[0]&1114112&&H!==(H=he[16]||he[20]))&&(x.disabled=H);const Ae={};ye[0]&512&&(Ae.activeTab=he[9]),E.$set(Ae),he[9]==="overview"?B?B.p(he,ye):(B=m1(he),B.c(),B.m(I,C)):B&&(B.d(1),B=null),he[9]==="symptoms"?V?(V.p(he,ye),ye[0]&512&&Pt(V,1)):(V=k1(he),V.c(),Pt(V,1),V.m(I,O)):V&&(Mi(),Ot(V,1,1,()=>{V=null}),Oi()),he[9]==="illnesses"?G?(G.p(he,ye),ye[0]&512&&Pt(G,1)):(G=I1(he),G.c(),Pt(G,1),G.m(I,q)):G&&(Mi(),Ot(G,1,1,()=>{G=null}),Oi()),he[9]==="prescriptions"?te?(te.p(he,ye),ye[0]&512&&Pt(te,1)):(te=T1(he),te.c(),Pt(te,1),te.m(I,Y)):te&&(Mi(),Ot(te,1,1,()=>{te=null}),Oi()),he[9]==="history"?ae?(ae.p(he,ye),ye[0]&512&&Pt(ae,1)):(ae=B1(he),ae.c(),Pt(ae,1),ae.m(I,null)):ae&&(Mi(),Ot(ae,1,1,()=>{ae=null}),Oi()),he[31]?fe?fe.p(he,ye):(fe=j1(he),fe.c(),fe.m(Z.parentNode,Z)):fe&&(fe.d(1),fe=null),he[13]?ve?(ve.p(he,ye),ye[0]&8192&&Pt(ve,1)):(ve=H1(he),ve.c(),Pt(ve,1),ve.m(X.parentNode,X)):ve&&(Mi(),Ot(ve,1,1,()=>{ve=null}),Oi())},i(he){Q||(Pt(E.$$.fragment,he),Pt(V),Pt(G),Pt(te),Pt(ae),Pt(ve),Q=!0)},o(he){Ot(E.$$.fragment,he),Ot(V),Ot(G),Ot(te),Ot(ae),Ot(ve),Q=!1},d(he){he&&(ce(e),ce($),ce(Z),ce(X)),Hn(E),B&&B.d(),V&&V.d(),G&&G.d(),te&&te.d(),ae&&ae.d(),fe&&fe.d(he),ve&&ve.d(he),re=!1,an(me)}}}function FS(n,e,t){let{selectedPatient:i}=e;const s=null;let{refreshTrigger:r=0}=e,{doctorId:o=null}=e,{currentUser:a=null}=e;const l=$i();let c=[],h=[],f=[],g=null,p=[],_="overview",y=!1,S=!1,w=!1,P=!1,x=!1,F={},U={},H=!0,L=null,k="",E=!1,R=!1,I=!1,C={firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",age:"",weight:"",bloodGroup:"",idNumber:"",address:"",allergies:"",emergencyContact:"",emergencyPhone:""},O="",q=!1,Y=null,$=!1,Z="",X=!1,Q=!1,re="",me=!1,B=[];const V=async()=>{try{console.log("🔄 Loading data for patient:",i.id),t(19,E=!1),t(30,me=!1),R=!1,t(5,c=await kt.getIllnessesByPatientId(i.id)||[]),console.log("✅ Loaded illnesses:",c.length),t(3,h=await kt.getPrescriptionsByPatientId(i.id)||[]),console.log("✅ Loaded prescriptions:",h.length),console.log("📋 Prescriptions data:",h),t(6,f=await kt.getSymptomsByPatientId(i.id)||[]),console.log("✅ Loaded symptoms:",f.length),G()}catch(Ze){console.error("Error loading patient data:",Ze),t(5,c=[]),t(3,h=[]),t(6,f=[])}finally{t(16,H=!1)}},G=()=>{if(console.log("🔧 Setting up current prescription from loaded data..."),g&&y){console.log("🔧 Keeping existing current prescription (new session)");return}const Ze=h.find(lt=>lt.patientId===i.id&&lt.medications&&lt.medications.length>0);if(Ze){console.log("🔧 Found most recent prescription:",Ze.id),t(7,g=Ze);const lt=g.medications||[],$e=lt.filter((Bt,Yt,dn)=>Yt===dn.findIndex(tn=>tn.id===Bt.id));lt.length!==$e.length&&(console.log("🔧 Removed duplicate medications:",lt.length-$e.length),t(7,g.medications=$e,g)),t(8,p=g.medications),console.log("📅 Set current medications:",p.length),console.log("📅 Medication IDs:",p.map(Bt=>Bt.id))}else console.log("🔧 No existing prescriptions found - will create new one when needed"),t(7,g=null),t(8,p=[]);t(24,Y=null),t(27,X=!1)},te=()=>{if(y){console.log("🔍 Skipping filter - in new prescription session");return}console.log("🔍 Showing all medications from",h.length,"total prescriptions"),t(8,p=g?g.medications||[]:[]),console.log("📅 Current medications in prescription:",p.length),t(24,Y=null),t(27,X=!1)},ae=async()=>{if(!wa.isConfigured()){t(26,Z="OpenAI API not configured. Cannot check drug interactions.");return}if(p.length<2){t(24,Y=null);return}const Ze=p.map($e=>$e.name).sort(),lt=B.map($e=>$e.name).sort();if(Ze.length===lt.length&&Ze.every(($e,Bt)=>$e===lt[Bt])){console.log("🔄 Medications unchanged - skipping AI analysis");return}t(25,$=!0),t(26,Z="");try{console.log("🔍 Checking drug interactions for:",p.map($e=>$e.name)),t(24,Y=await wa.checkDrugInteractions(p,o)),console.log("✅ Drug interactions checked:",Y),t(28,Q=!0),Y&&Y.hasInteractions===!1?t(29,re="AI drug interaction test complete - No significant drug interactions detected"):Y&&Y.hasInteractions===!0?t(29,re=`AI drug interaction test complete - ${Y.severity} interactions found`):t(29,re="AI drug interaction test complete"),B=[...p]}catch($e){console.error("❌ Error checking drug interactions:",$e),t(26,Z=$e.message),t(28,Q=!0),t(29,re="AI analysis failed - Please check console for details")}finally{t(25,$=!1)}},fe=()=>{t(27,X=!X)},ve=Ze=>Ze?Ze.replace(/^([^:\n]+):$/gm,'<br><h6 class="text-primary mb-2 mt-3">$1:</h6>').replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(<br>){3,}/g,"<br><br>").replace(/(<h6[^>]*>.*?<\/h6>)/g,"$1<br>").replace(/^(<br>)+|(<br>)+$/g,""):"",he=Ze=>{t(9,_=Ze),t(10,S=!1),t(12,P=!1),t(11,w=!1)},ye=async Ze=>{const lt=Ze.detail;console.log("🦠 Illness added:",lt);try{const $e=await kt.createIllness({...lt,patientId:i.id,doctorId:o});console.log("💾 Illness saved to database:",$e),t(5,c=[...c,$e]),console.log("📋 Updated illnesses array:",c.length),l("dataUpdated",{type:"illness",data:$e})}catch($e){console.error("❌ Error saving illness:",$e),V()}t(10,S=!1)},Ae=async Ze=>{const lt=Ze.detail;console.log("🤒 Symptoms added:",lt);try{const $e=await kt.createSymptoms({...lt,patientId:i.id,doctorId:o});console.log("💾 Symptoms saved to database:",$e),t(6,f=[...f,$e]),console.log("📋 Updated symptoms array:",f.length),l("dataUpdated",{type:"symptoms",data:$e})}catch($e){console.error("❌ Error saving symptoms:",$e),V()}t(12,P=!1)},Me=async Ze=>{var $e,Bt,Yt;const lt=Ze.detail;console.log("💊 Medication added:",lt);try{if(lt.isEdit){const dn=await kt.createMedication({...lt,patientId:i.id,doctorId:o}),tn=h.findIndex(Sn=>Sn.id===lt.id);tn!==-1&&(t(3,h[tn]=dn,h),t(3,h=[...h]));const nn=p.findIndex(Sn=>Sn.id===lt.id);nn!==-1&&(t(8,p[nn]=dn,p),t(8,p=[...p])),t(28,Q=!1),t(29,re=""),B=[]}else{if(!g)throw new Error('No current prescription. Please click "New Prescription" first.');console.log("🔍 Before adding medication - current count:",(($e=g.medications)==null?void 0:$e.length)||0),console.log("🔍 Medication data to add:",lt);const dn=await kt.addMedicationToPrescription(g.id,lt);console.log("💾 Medication added to prescription:",dn),console.log("🔍 After adding medication - database count:",((Yt=(Bt=await kt.getPrescription(g.id))==null?void 0:Bt.medications)==null?void 0:Yt.length)||0);const tn=await kt.getPrescription(g.id);if(tn){t(7,g=tn),t(7,g.updatedAt=new Date().toISOString(),g);const nn=g.medications.filter((At,Ht,kn)=>Ht===kn.findIndex(fn=>fn.id===At.id));t(7,g.medications=nn,g);const Sn=h.findIndex(At=>At.id===g.id);Sn!==-1&&(t(3,h[Sn]=g,h),t(3,h=[...h])),t(8,p=g.medications),console.log("🔍 Removed duplicates - final medication count:",p.length),console.log("🔍 Medication IDs:",p.map(At=>At.id))}console.log("📋 Added medication to current prescription:",dn.name),console.log("📋 Current medications in prescription:",p.length),t(28,Q=!1),t(29,re=""),B=[],l("dataUpdated",{type:"prescription",data:dn})}}catch(dn){console.error("❌ Error saving medication:",dn),V()}t(11,w=!1),t(17,L=null)},Te=()=>{t(10,S=!1)},De=async()=>{try{if(console.log("💾 Saving/updating current prescription..."),!g){console.log("⚠️ No current prescription to save");return}if(h.find(lt=>lt.id===g.id)){const lt={...g,patientId:i.id,doctorId:o};await kt.updatePrescription(g.id,lt),console.log("✅ Updated existing prescription with",g.medications.length,"medications");const $e=h.findIndex(Bt=>Bt.id===g.id);$e!==-1&&t(3,h[$e]=lt,h)}else{const lt=await kt.createPrescription({...g,patientId:i.id,doctorId:o});console.log("✅ Saved new prescription with",g.medications.length,"medications"),t(3,h=[...h,lt])}t(3,h=[...h]),console.log("💾 Current prescription saved/updated successfully")}catch(Ze){console.error("❌ Error saving/updating current prescription:",Ze)}},de=async()=>{try{console.log("✅ Completing current prescriptions"),console.log("🔍 Current medications count:",p.length),console.log("🔍 OpenAI configured:",wa.isConfigured()),console.log("🔍 Current medications:",p.map(lt=>lt.name)),p.length>=2?(console.log("🔍 Checking drug interactions before completing..."),await ae()):console.log("⚠️ Not enough medications for interaction check (need at least 2)"),await De(),t(19,E=!0);const Ze=new Date().toISOString().split("T")[0];if(g&&!g.endDate){const lt={...g,endDate:Ze};await kt.updatePrescription(g.id,lt),console.log("✅ Marked prescription as completed with",g.medications.length,"medications");const $e=h.findIndex(Bt=>Bt.id===g.id);$e!==-1&&t(3,h[$e]=lt,h)}t(3,h=[...h]),t(30,me=!0),console.log("🎉 Current prescriptions completed successfully")}catch(Ze){console.error("❌ Error completing prescriptions:",Ze)}},W=async()=>{try{console.log("🖨️ Printing prescriptions to PDF"),console.log("🔍 Current medications count:",p.length),console.log("🔍 OpenAI configured:",wa.isConfigured()),console.log("🔍 Current medications:",p.map(Ze=>Ze.name)),p.length>=2?(console.log("🔍 Checking drug interactions before printing..."),await ae()):console.log("⚠️ Not enough medications for interaction check (need at least 2)"),await De(),await it(),setTimeout(()=>{console.log("🖨️ Opening print dialog as fallback..."),window.print()},1e3),console.log("🎉 Prescriptions printed successfully")}catch(Ze){console.error("❌ Error printing prescriptions:",Ze)}};let _e=!1,Ie=[],be=[];const Le=async()=>{try{console.log("📤 Opening pharmacy selection modal"),console.log("🔍 Current medications count:",p.length),console.log("🔍 OpenAI configured:",wa.isConfigured()),console.log("🔍 Current medications:",p.map(Bt=>Bt.name)),p.length>=2?(console.log("🔍 Checking drug interactions before sending to pharmacy..."),await ae()):console.log("⚠️ Not enough medications for interaction check (need at least 2)");try{await De(),console.log("✅ Prescriptions saved successfully")}catch(Bt){console.error("❌ Error saving prescriptions:",Bt)}const Ze=a||Is.getCurrentUser();if(console.log("🔍 Firebase user:",Ze),!Ze){console.log("❌ User not found"),alert("User not found. Please log in again.");return}const lt=kt.getDoctorByEmail(Ze.email);if(console.log("🔍 Doctor from storage:",lt),console.log("🔍 Doctor connectedPharmacists:",lt==null?void 0:lt.connectedPharmacists),!lt){console.log("❌ Doctor not found in storage"),alert("Doctor profile not found. Please contact support.");return}if(!lt.connectedPharmacists||lt.connectedPharmacists.length===0){console.log("❌ No connected pharmacists"),alert("No connected pharmacy found. Please connect a pharmacy first.");return}if(!i){console.log("❌ No patient selected"),alert("Please select a patient first.");return}const $e=kt.getPrescriptionsByPatientId(i.id);if(console.log("🔍 Current prescriptions:",$e),!$e||$e.length===0){console.log("❌ No prescriptions to send"),alert("No prescriptions to send.");return}t(32,Ie=[]),console.log("🔍 Loading pharmacists for IDs:",lt.connectedPharmacists);for(const Bt of lt.connectedPharmacists)try{console.log("🔍 Loading pharmacist with ID:",Bt);const Yt=await kt.getPharmacistById(Bt);console.log("🔍 Loaded pharmacist:",Yt),Yt?(Ie.push({id:Yt.id,name:Yt.businessName,email:Yt.email,address:Yt.address||"Address not provided"}),console.log("✅ Added pharmacist to list:",Yt.businessName)):console.log("❌ Pharmacist not found for ID:",Bt)}catch(Yt){console.error("❌ Error loading pharmacist:",Bt,Yt)}if(console.log("🔍 Final available pharmacies:",Ie),Ie.length===0){console.log("❌ No pharmacies found after loading"),alert("No connected pharmacies found. Please connect a pharmacy first.");return}t(33,be=Ie.map(Bt=>Bt.id)),console.log("🔍 Selected pharmacies:",be),t(31,_e=!0),console.log("✅ Modal should be showing now")}catch(Ze){console.error("❌ Error opening pharmacy selection:",Ze),console.error("❌ Error stack:",Ze.stack),alert("Error loading pharmacies. Please try again.")}},We=async()=>{try{console.log("📤 Sending prescriptions to selected pharmacies:",be);const Ze=a||Is.getCurrentUser(),lt=kt.getDoctorByEmail(Ze.email),$e=kt.getPrescriptionsByPatientId(i.id);let Bt=0;for(const Yt of be){const dn=await kt.getPharmacistById(Yt);if(dn){const tn=await kt.getPharmacistPrescriptions(Yt)||[],nn={id:Date.now().toString()+"_"+Yt,doctorId:lt.id,doctorName:`${lt.firstName} ${lt.lastName}`,patientId:i.id,patientName:`${i.firstName} ${i.lastName}`,prescriptions:$e,sentAt:new Date().toISOString(),status:"pending"};tn.push(nn),await kt.savePharmacistPrescriptions(Yt,tn),console.log(`📤 Prescription sent to pharmacist: ${dn.businessName}`),Bt++}}t(31,_e=!1),alert(`Prescriptions sent to ${Bt} pharmacy(ies) successfully!`),console.log("🎉 Prescriptions sent to pharmacies successfully")}catch(Ze){console.error("❌ Error sending prescriptions to pharmacies:",Ze),alert("Error sending prescriptions to pharmacies. Please try again.")}},Je=Ze=>{be.includes(Ze)?t(33,be=be.filter(lt=>lt!==Ze)):be.push(Ze)},Ue=()=>{t(33,be=Ie.map(Ze=>Ze.id))},Ye=()=>{t(33,be=[])},ht=async()=>{try{console.log("🧪 Testing jsPDF...");const{default:Ze}=await Ec(async()=>{const{default:$e}=await Promise.resolve().then(()=>zg);return{default:$e}},void 0),lt=new Ze;return lt.text("Test PDF",20,20),lt.save("test.pdf"),console.log("✅ jsPDF test successful"),!0}catch(Ze){return console.error("❌ jsPDF test failed:",Ze),!1}},it=async()=>{try{if(console.log("🔄 Starting PDF generation..."),!await ht())throw new Error("jsPDF is not working properly");let lt;try{lt=(await Ec(()=>Promise.resolve().then(()=>zg),void 0)).default,console.log("✅ jsPDF imported successfully")}catch(fn){if(console.error("❌ Failed to import jsPDF:",fn),typeof window<"u"&&window.jsPDF)lt=window.jsPDF,console.log("✅ Using window.jsPDF as fallback");else throw new Error("jsPDF is not available. Please check if it is properly installed.")}const $e=new lt,Bt=new Date().toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});console.log("📄 Creating PDF content..."),console.log("Patient:",i.firstName,i.lastName),console.log("Current medications:",p.length),console.log("Prescription notes:",k),$e.setFont("helvetica","bold"),$e.setFontSize(24),$e.text("PRESCRIPTION",105,30,{align:"center"}),$e.setFontSize(12),$e.setFont("helvetica","normal"),$e.text("DOCTOR NAME",20,50),$e.text("Your Medical Clinic",20,60),$e.text(`DATE: ${Bt}`,180,50,{align:"right"}),$e.setFontSize(16),$e.setFont("helvetica","bold"),$e.text("R",20,85),$e.setFontSize(12),$e.setFont("helvetica","normal"),$e.text(`PATIENT NAME: ${i.firstName} ${i.lastName}`,35,85);const Yt=new Date(i.dateOfBirth),dn=new Date,tn=dn.getFullYear()-Yt.getFullYear(),nn=dn.getMonth()-Yt.getMonth(),Sn=nn<0||nn===0&&dn.getDate()<Yt.getDate()?tn-1:tn;$e.text(`AGE: ${Sn}`,150,85),$e.text(`ADDRESS: ${i.address||"Not provided"}`,35,95);let At=120;if(p&&p.length>0&&p.forEach((fn,Nt)=>{At>250&&($e.addPage(),At=30),$e.setFontSize(12),$e.setFont("helvetica","normal"),$e.text(`${fn.name} ${fn.dosage}`,20,At),At+=8,$e.text(`${fn.instructions||`Take ${fn.frequency}`}`,20,At),At+=15}),k&&k.trim()!==""){At>250&&($e.addPage(),At=30),At+=10,$e.text("Additional Notes:",20,At),At+=8;const fn=$e.splitTextToSize(k,170);$e.text(fn,20,At),At+=fn.length*5}const Ht=Math.max(At+30,200);$e.setFontSize(12),$e.setFont("helvetica","normal"),$e.text("Dr. [Doctor Name]",150,Ht),$e.line(140,Ht+5,190,Ht+5),$e.setFontSize(8),$e.text("MEDICAL SEAL",20,Ht),$e.circle(30,Ht-5,8),$e.setFontSize(6),$e.text("⚕",30,Ht-2,{align:"center"});const kn=`Prescription_${i.firstName}_${i.lastName}_${Bt.replace(/\//g,"-")}.pdf`;console.log("💾 Saving PDF with filename:",kn),$e.save(kn),console.log("✅ PDF generated and downloaded successfully:",kn),alert(`PDF generated successfully: ${kn}`)}catch(Ze){console.error("❌ Error generating PDF:",Ze),console.error("Error details:",Ze.message),console.error("Error stack:",Ze.stack),alert(`Error generating PDF: ${Ze.message}`),console.log("🔄 Trying alternative print approach...");try{window.print()}catch(lt){console.error("❌ Print also failed:",lt)}}},ze=()=>{t(12,P=!1)},Ge=()=>{t(11,w=!1),t(17,L=null)},qe=Ze=>{if(!Ze)return"";const lt=new Date,$e=new Date(Ze);let Bt=lt.getFullYear()-$e.getFullYear();const Yt=lt.getMonth()-$e.getMonth();return(Yt<0||Yt===0&&lt.getDate()<$e.getDate())&&Bt--,Bt.toString()},ot=()=>{C.dateOfBirth&&t(21,C.age=qe(C.dateOfBirth),C)},Xe=()=>{t(21,C={firstName:i.firstName||"",lastName:i.lastName||"",email:i.email||"",phone:i.phone||"",dateOfBirth:i.dateOfBirth||"",age:i.age||qe(i.dateOfBirth)||"",weight:i.weight||"",bloodGroup:i.bloodGroup||"",idNumber:i.idNumber||"",address:i.address||"",allergies:i.allergies||"",emergencyContact:i.emergencyContact||"",emergencyPhone:i.emergencyPhone||""}),t(20,I=!0),t(22,O="")},Mt=()=>{t(20,I=!1),t(22,O=""),t(21,C={firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",age:"",weight:"",bloodGroup:"",idNumber:"",address:"",allergies:"",emergencyContact:"",emergencyPhone:""})},gt=async()=>{t(22,O=""),t(23,q=!0);try{if(!C.firstName.trim())throw new Error("First name is required");let Ze=C.age;if(C.dateOfBirth&&!C.age&&(Ze=qe(C.dateOfBirth)),!Ze||Ze==="")throw new Error("Age is required. Please provide either age or date of birth");if(C.email&&C.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C.email))throw new Error("Please enter a valid email address");if(C.dateOfBirth&&new Date(C.dateOfBirth)>=new Date)throw new Error("Date of birth must be in the past");const lt={...i,...C,age:Ze};await kt.updatePatient(i.id,lt),Object.assign(i,lt),l("dataUpdated",{type:"patient",data:lt}),t(20,I=!1),console.log("✅ Patient data updated successfully")}catch(Ze){t(22,O=Ze.message),console.error("❌ Error updating patient:",Ze)}finally{t(23,q=!1)}},Ft=(Ze,lt)=>{t(17,L=Ze),t(11,w=!0),console.log("Editing prescription:",Ze)},xt=async(Ze,lt)=>{try{if(confirm("Are you sure you want to delete this prescription?")){await kt.deletePrescription(Ze),t(3,h=h.filter((Bt,Yt)=>Yt!==lt));const $e=p.findIndex(Bt=>Bt.id===Ze);$e!==-1&&t(8,p=p.filter((Bt,Yt)=>Yt!==$e)),t(28,Q=!1),t(29,re=""),B=[],console.log("🗑️ Deleted prescription:",Ze)}}catch($e){console.error("❌ Error deleting prescription:",$e)}},Qe=(Ze,lt)=>{Ze==="symptoms"?(t(14,F[lt]=!F[lt],F),t(14,F={...F})):Ze==="illnesses"&&(t(15,U[lt]=!U[lt],U),t(15,U={...U}))},vt=()=>{console.log("🔍 Debug Data State:"),console.log("Selected Patient:",i),console.log("Prescriptions Array:",h),console.log("Prescriptions Length:",(h==null?void 0:h.length)||0),console.log("Active Tab:",_),console.log("Loading State:",H)};typeof window<"u"&&(window.debugPrescriptions=vt),Go(()=>{i&&V()});const pt=async()=>{console.log("🆕 New Prescription button clicked"),t(9,_="prescriptions"),t(11,w=!1),t(17,L=null),t(30,me=!1);try{t(7,g=await kt.createPrescription({patientId:i.id,doctorId:o,notes:""})),console.log("📋 Created new prescription:",g.id),t(8,p=g.medications||[]),t(18,k=""),t(4,y=!0),console.log("🆕 Set isNewPrescriptionSession = true, initialized currentMedications"),console.log('✅ New prescription created - ready for "Add Drug" button'),console.log("🔍 After new prescription - activeTab:",_),console.log("🔍 After new prescription - currentPrescription:",g==null?void 0:g.id),console.log("🔍 After new prescription - showMedicationForm:",w)}catch(Ze){console.error("❌ Error creating new prescription:",Ze)}};function Rt(){C.firstName=this.value,t(21,C)}function ft(){C.lastName=this.value,t(21,C)}function ut(){C.email=this.value,t(21,C)}function Lt(){C.phone=this.value,t(21,C)}function st(){C.dateOfBirth=this.value,t(21,C)}function He(){C.age=Uo(this.value),t(21,C)}function yt(){C.weight=Uo(this.value),t(21,C)}function bt(){C.bloodGroup=Ha(this),t(21,C)}function Dt(){C.idNumber=this.value,t(21,C)}function Ct(){C.address=this.value,t(21,C)}function qt(){C.allergies=this.value,t(21,C)}function wt(){C.emergencyContact=this.value,t(21,C)}function en(){C.emergencyPhone=this.value,t(21,C)}const Ln=()=>t(12,P=!0),sn=()=>{const Ze=new Date(i.dateOfBirth),lt=new Date,$e=lt.getFullYear()-Ze.getFullYear(),Bt=lt.getMonth()-Ze.getMonth();return Bt<0||Bt===0&&lt.getDate()<Ze.getDate()?$e-1:$e},un=Ze=>{},rn=Ze=>Qe("symptoms",Ze),Zt=()=>t(10,S=!0),bi=Ze=>Qe("illnesses",Ze),Qn=async()=>{console.log("🔍 Add Drug clicked - currentPrescription:",g),console.log("🔍 showMedicationForm:",w);try{g?Ls("Medication form opened - add drug details"):(console.log("📋 No current prescription - creating new one automatically"),t(7,g=await kt.createPrescription({patientId:i.id,doctorId:o,notes:""})),console.log("📋 Created new prescription automatically:",g.id),t(8,p=g.medications||[]),t(18,k=""),t(4,y=!0),Ls("New prescription created - medication form opened")),t(11,w=!0),t(17,L=null)}catch(Ze){console.error("❌ Error creating prescription:",Ze),cr("Failed to create prescription: "+Ze.message)}},Bn=()=>{t(28,Q=!1),t(29,re="")},vn=()=>{console.log("🤖 Full AI analysis requested"),l("notification",{type:"info",message:"Full AI analysis feature coming soon!"})},si=(Ze,lt)=>Ft(Ze),_n=Ze=>xt(Ze);function yn(){k=this.value,t(18,k)}const Yn=()=>t(31,_e=!1),ri=Ze=>Je(Ze.id),hn=()=>t(31,_e=!1),wi=()=>t(13,x=!1),Ai=()=>t(13,x=!1);return n.$$set=Ze=>{"selectedPatient"in Ze&&t(0,i=Ze.selectedPatient),"refreshTrigger"in Ze&&t(59,r=Ze.refreshTrigger),"doctorId"in Ze&&t(2,o=Ze.doctorId),"currentUser"in Ze&&t(60,a=Ze.currentUser)},n.$$.update=()=>{n.$$.dirty[0]&24&&h&&(console.log("🔄 Reactive statement triggered - prescriptions changed:",h.length),console.log("🔄 isNewPrescriptionSession:",y),te()),n.$$.dirty[1]&268435456&&r>0&&V()},[i,s,o,h,y,c,f,g,p,_,S,w,P,x,F,U,H,L,k,E,I,C,O,q,Y,$,Z,X,Q,re,me,_e,Ie,be,l,fe,ve,he,ye,Ae,Me,Te,de,W,Le,We,Je,Ue,Ye,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,r,a,pt,Rt,ft,ut,Lt,st,He,yt,bt,Dt,Ct,qt,wt,en,Ln,sn,un,rn,Zt,bi,Qn,Bn,vn,si,_n,yn,Yn,ri,hn,wi,Ai]}class BS extends ii{constructor(e){super(),ni(this,e,FS,RS,Zn,{selectedPatient:0,addToPrescription:1,refreshTrigger:59,doctorId:2,currentUser:60},null,[-1,-1,-1,-1])}get addToPrescription(){return this.$$.ctx[1]}}function q1(n,e,t){const i=n.slice();return i[27]=e[t],i}function V1(n,e,t){const i=n.slice();return i[30]=e[t],i}function W1(n,e,t){const i=n.slice();return i[27]=e[t],i}function G1(n,e,t){const i=n.slice();return i[35]=e[t],i}function Y1(n,e,t){const i=n.slice();return i[30]=e[t],i}function K1(n,e,t){const i=n.slice();return i[35]=e[t],i}function J1(n,e,t){const i=n.slice();return i[42]=e[t],i}function X1(n,e,t){const i=n.slice();return i[30]=e[t],i}function Z1(n,e,t){const i=n.slice();return i[42]=e[t],i}function Q1(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V=n[4]==="symptoms"&&$1(n),G=n[4]==="illnesses"&&a2(n),te=n[4]==="prescriptions"&&m2(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),s.innerHTML='<i class="fas fa-chart-pie me-2"></i>Medical Summary',r=D(),o=m("button"),o.innerHTML='<i class="fas fa-arrow-left me-1"></i>Back',a=D(),l=m("div"),c=m("ul"),h=m("li"),f=m("button"),g=m("i"),p=le(`Symptoms
            `),_=m("span"),y=le(n[16]),w=D(),P=m("li"),x=m("button"),F=m("i"),U=le(`Illnesses
            `),H=m("span"),L=le(n[15]),E=D(),R=m("li"),I=m("button"),C=m("i"),O=le(`Prescriptions
            `),q=m("span"),Y=le(n[14]),Z=D(),X=m("div"),V&&V.c(),Q=D(),G&&G.c(),re=D(),te&&te.c(),d(s,"class","mb-0"),d(o,"class","btn btn-outline-secondary btn-sm"),d(o,"title","Back to patient list"),d(i,"class","d-flex justify-content-between align-items-center"),d(t,"class","card-header bg-light"),d(g,"class","fas fa-thermometer-half me-1"),d(_,"class","badge bg-warning text-dark ms-1 small"),d(f,"class",S="nav-link "+(n[4]==="symptoms"?"active":"")),d(f,"role","tab"),d(h,"class","nav-item"),d(h,"role","presentation"),d(F,"class","fas fa-heartbeat me-1"),d(H,"class","badge bg-danger ms-1 small"),d(x,"class",k="nav-link "+(n[4]==="illnesses"?"active":"")),d(x,"role","tab"),d(P,"class","nav-item"),d(P,"role","presentation"),d(C,"class","fas fa-pills me-1"),d(q,"class","badge bg-success ms-1 small"),d(I,"class",$="nav-link "+(n[4]==="prescriptions"?"active":"")),d(I,"role","tab"),d(R,"class","nav-item"),d(R,"role","presentation"),d(c,"class","nav nav-tabs nav-fill"),d(c,"role","tablist"),d(X,"class","tab-content p-3"),d(l,"class","card-body p-0"),d(e,"class","card mt-3")},m(ae,fe){ue(ae,e,fe),u(e,t),u(t,i),u(i,s),u(i,r),u(i,o),u(e,a),u(e,l),u(l,c),u(c,h),u(h,f),u(f,g),u(f,p),u(f,_),u(_,y),u(c,w),u(c,P),u(P,x),u(x,F),u(x,U),u(x,H),u(H,L),u(c,E),u(c,R),u(R,I),u(I,C),u(I,O),u(I,q),u(q,Y),u(l,Z),u(l,X),V&&V.m(X,null),u(X,Q),G&&G.m(X,null),u(X,re),te&&te.m(X,null),me||(B=[Ee(o,"click",n[18]),Ee(f,"click",n[19]),Ee(x,"click",n[20]),Ee(I,"click",n[21])],me=!0)},p(ae,fe){fe[0]&65536&&Se(y,ae[16]),fe[0]&16&&S!==(S="nav-link "+(ae[4]==="symptoms"?"active":""))&&d(f,"class",S),fe[0]&32768&&Se(L,ae[15]),fe[0]&16&&k!==(k="nav-link "+(ae[4]==="illnesses"?"active":""))&&d(x,"class",k),fe[0]&16384&&Se(Y,ae[14]),fe[0]&16&&$!==($="nav-link "+(ae[4]==="prescriptions"?"active":""))&&d(I,"class",$),ae[4]==="symptoms"?V?V.p(ae,fe):(V=$1(ae),V.c(),V.m(X,Q)):V&&(V.d(1),V=null),ae[4]==="illnesses"?G?G.p(ae,fe):(G=a2(ae),G.c(),G.m(X,re)):G&&(G.d(1),G=null),ae[4]==="prescriptions"?te?te.p(ae,fe):(te=m2(ae),te.c(),te.m(X,null)):te&&(te.d(1),te=null)},d(ae){ae&&ce(e),V&&V.d(),G&&G.d(),te&&te.d(),me=!1,an(B)}}}function $1(n){let e;function t(r,o){return r[3]&&r[3].length>0?US:jS}let i=t(n),s=i(n);return{c(){e=m("div"),s.c(),d(e,"class","tab-pane active")},m(r,o){ue(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&ce(e),s.d()}}}function jS(n){let e;return{c(){e=m("p"),e.innerHTML='<i class="fas fa-info-circle me-1"></i>No symptoms',d(e,"class","text-muted mb-0 small")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function US(n){let e,t,i,s,r,o=n[13](n[3]).length>2,a,l=n[9](n[3],"notes"),c,h=n[5]&&n[9](n[3],"notes"),f,g=Et(n[13](n[3]).slice(0,2)),p=[];for(let w=0;w<g.length;w+=1)p[w]=n2(X1(n,g,w));let _=o&&i2(n),y=l&&s2(n),S=h&&r2(n);return{c(){e=m("div"),t=m("small"),t.textContent="Recent:",i=D(),s=m("div");for(let w=0;w<p.length;w+=1)p[w].c();r=D(),_&&_.c(),a=D(),y&&y.c(),c=D(),S&&S.c(),f=gi(),d(t,"class","text-muted"),d(s,"class","mt-2"),d(e,"class","mb-2")},m(w,P){ue(w,e,P),u(e,t),u(e,i),u(e,s);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(s,null);u(s,r),_&&_.m(s,null),ue(w,a,P),y&&y.m(w,P),ue(w,c,P),S&&S.m(w,P),ue(w,f,P)},p(w,P){if(P[0]&8200){g=Et(w[13](w[3]).slice(0,2));let x;for(x=0;x<g.length;x+=1){const F=X1(w,g,x);p[x]?p[x].p(F,P):(p[x]=n2(F),p[x].c(),p[x].m(s,r))}for(;x<p.length;x+=1)p[x].d(1);p.length=g.length}P[0]&8200&&(o=w[13](w[3]).length>2),o?_?_.p(w,P):(_=i2(w),_.c(),_.m(s,null)):_&&(_.d(1),_=null),P[0]&520&&(l=w[9](w[3],"notes")),l?y?y.p(w,P):(y=s2(w),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null),P[0]&552&&(h=w[5]&&w[9](w[3],"notes")),h?S?S.p(w,P):(S=r2(w),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(w){w&&(ce(e),ce(a),ce(c),ce(f)),On(p,w),_&&_.d(),y&&y.d(w),S&&S.d(w)}}}function zS(n){let e;return{c(){e=m("small"),e.textContent="No description",d(e,"class","text-muted")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function HS(n){let e=(n[42].description.length>20?n[42].description.substring(0,20)+"...":n[42].description)+"",t;return{c(){t=le(e)},m(i,s){ue(i,t,s)},p(i,s){s[0]&8200&&e!==(e=(i[42].description.length>20?i[42].description.substring(0,20)+"...":i[42].description)+"")&&Se(t,e)},d(i){i&&ce(t)}}}function e2(n){let e,t,i,s,r,o=(n[42].severity||"unknown")+"",a,l;function c(g,p){return g[42].description?HS:zS}let h=c(n),f=h(n);return{c(){e=m("div"),t=m("div"),i=m("span"),f.c(),s=D(),r=m("span"),a=le(o),d(i,"class","small"),d(t,"class","flex-grow-1"),d(r,"class",l="badge bg-"+(n[42].severity==="mild"?"success":n[42].severity==="moderate"?"warning":n[42].severity==="severe"?"danger":"dark")+" text-capitalize small"),d(e,"class","d-flex justify-content-between align-items-center mb-1 mt-1")},m(g,p){ue(g,e,p),u(e,t),u(t,i),f.m(i,null),u(e,s),u(e,r),u(r,a)},p(g,p){h===(h=c(g))&&f?f.p(g,p):(f.d(1),f=h(g),f&&(f.c(),f.m(i,null))),p[0]&8200&&o!==(o=(g[42].severity||"unknown")+"")&&Se(a,o),p[0]&8200&&l!==(l="badge bg-"+(g[42].severity==="mild"?"success":g[42].severity==="moderate"?"warning":g[42].severity==="severe"?"danger":"dark")+" text-capitalize small")&&d(r,"class",l)},d(g){g&&ce(e),f.d()}}}function t2(n){let e,t,i=n[30].items.length-3+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more on this date"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8200&&i!==(i=o[30].items.length-3+"")&&Se(s,i)},d(o){o&&ce(e)}}}function n2(n){let e,t,i,s=n[30].date+"",r,o,a,l=Et(n[30].items.slice(0,3)),c=[];for(let f=0;f<l.length;f+=1)c[f]=e2(Z1(n,l,f));let h=n[30].items.length>3&&t2(n);return{c(){e=m("div"),t=m("small"),i=m("i"),r=le(s),o=D();for(let f=0;f<c.length;f+=1)c[f].c();a=D(),h&&h.c(),d(i,"class","fas fa-calendar me-1"),d(t,"class","text-muted fw-bold small"),d(e,"class","mb-2")},m(f,g){ue(f,e,g),u(e,t),u(t,i),u(t,r),u(e,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(e,null);u(e,a),h&&h.m(e,null)},p(f,g){if(g[0]&8200&&s!==(s=f[30].date+"")&&Se(r,s),g[0]&8200){l=Et(f[30].items.slice(0,3));let p;for(p=0;p<l.length;p+=1){const _=Z1(f,l,p);c[p]?c[p].p(_,g):(c[p]=e2(_),c[p].c(),c[p].m(e,a))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}f[30].items.length>3?h?h.p(f,g):(h=t2(f),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(f){f&&ce(e),On(c,f),h&&h.d()}}}function i2(n){let e,t,i=n[13](n[3]).length-2+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more days"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8200&&i!==(i=o[13](o[3]).length-2+"")&&Se(s,i)},d(o){o&&ce(e)}}}function s2(n){let e,t,i,s,r=n[5]?"Hide Notes":"Show Notes",o,a,l;return{c(){e=m("div"),t=m("button"),i=m("i"),s=D(),o=le(r),d(i,"class","fas fa-sticky-note me-1"),d(t,"class","btn btn-outline-warning btn-sm small"),d(e,"class","mt-2")},m(c,h){ue(c,e,h),u(e,t),u(t,i),u(t,s),u(t,o),a||(l=Ee(t,"click",function(){Ys(n[10])&&n[10].apply(this,arguments)}),a=!0)},p(c,h){n=c,h[0]&32&&r!==(r=n[5]?"Hide Notes":"Show Notes")&&Se(o,r)},d(c){c&&ce(e),a=!1,l()}}}function r2(n){let e,t,i,s,r=Et(n[3].filter(S2).sort(n[22])),o=[];for(let a=0;a<r.length;a+=1)o[a]=o2(J1(n,r,a));return{c(){e=m("div"),t=m("small"),t.textContent="Notes:",i=D(),s=m("div");for(let a=0;a<o.length;a+=1)o[a].c();d(t,"class","text-muted fw-bold"),d(s,"class","mt-1"),d(e,"class","mt-2")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l[0]&8){r=Et(a[3].filter(S2).sort(a[22]));let c;for(c=0;c<r.length;c+=1){const h=J1(a,r,c);o[c]?o[c].p(h,l):(o[c]=o2(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function o2(n){let e,t,i=(n[42].description||"Symptom")+"",s,r,o,a=n[42].notes+"",l,c,h,f,g=(n[42].createdAt?new Date(n[42].createdAt).toLocaleDateString():"No date")+"",p,_;return{c(){e=m("div"),t=m("div"),s=le(i),r=D(),o=m("div"),l=le(a),c=D(),h=m("small"),f=m("i"),p=le(g),_=D(),d(t,"class","fw-bold"),d(o,"class","text-muted"),d(f,"class","fas fa-calendar me-1"),d(h,"class","text-muted"),d(e,"class","mb-1 p-2 bg-warning bg-opacity-10 rounded small")},m(y,S){ue(y,e,S),u(e,t),u(t,s),u(e,r),u(e,o),u(o,l),u(e,c),u(e,h),u(h,f),u(h,p),u(e,_)},p(y,S){S[0]&8&&i!==(i=(y[42].description||"Symptom")+"")&&Se(s,i),S[0]&8&&a!==(a=y[42].notes+"")&&Se(l,a),S[0]&8&&g!==(g=(y[42].createdAt?new Date(y[42].createdAt).toLocaleDateString():"No date")+"")&&Se(p,g)},d(y){y&&ce(e)}}}function a2(n){let e;function t(r,o){return r[1]&&r[1].length>0?VS:qS}let i=t(n),s=i(n);return{c(){e=m("div"),s.c(),d(e,"class","tab-pane active")},m(r,o){ue(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&ce(e),s.d()}}}function qS(n){let e;return{c(){e=m("p"),e.innerHTML='<i class="fas fa-info-circle me-1"></i>No illnesses',d(e,"class","text-muted mb-0 small")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function VS(n){let e,t,i,s,r,o=n[13](n[1]).length>2,a,l=n[9](n[1],"notes"),c,h=n[6]&&n[9](n[1],"notes"),f,g=Et(n[13](n[1]).slice(0,2)),p=[];for(let w=0;w<g.length;w+=1)p[w]=u2(Y1(n,g,w));let _=o&&h2(n),y=l&&d2(n),S=h&&f2(n);return{c(){e=m("div"),t=m("small"),t.textContent="Recent:",i=D(),s=m("div");for(let w=0;w<p.length;w+=1)p[w].c();r=D(),_&&_.c(),a=D(),y&&y.c(),c=D(),S&&S.c(),f=gi(),d(t,"class","text-muted"),d(s,"class","mt-2"),d(e,"class","mb-2")},m(w,P){ue(w,e,P),u(e,t),u(e,i),u(e,s);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(s,null);u(s,r),_&&_.m(s,null),ue(w,a,P),y&&y.m(w,P),ue(w,c,P),S&&S.m(w,P),ue(w,f,P)},p(w,P){if(P[0]&8194){g=Et(w[13](w[1]).slice(0,2));let x;for(x=0;x<g.length;x+=1){const F=Y1(w,g,x);p[x]?p[x].p(F,P):(p[x]=u2(F),p[x].c(),p[x].m(s,r))}for(;x<p.length;x+=1)p[x].d(1);p.length=g.length}P[0]&8194&&(o=w[13](w[1]).length>2),o?_?_.p(w,P):(_=h2(w),_.c(),_.m(s,null)):_&&(_.d(1),_=null),P[0]&514&&(l=w[9](w[1],"notes")),l?y?y.p(w,P):(y=d2(w),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null),P[0]&578&&(h=w[6]&&w[9](w[1],"notes")),h?S?S.p(w,P):(S=f2(w),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(w){w&&(ce(e),ce(a),ce(c),ce(f)),On(p,w),_&&_.d(),y&&y.d(w),S&&S.d(w)}}}function WS(n){let e;return{c(){e=m("small"),e.textContent="Unknown illness",d(e,"class","text-muted")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function GS(n){let e=(n[35].name.length>20?n[35].name.substring(0,20)+"...":n[35].name)+"",t;return{c(){t=le(e)},m(i,s){ue(i,t,s)},p(i,s){s[0]&8194&&e!==(e=(i[35].name.length>20?i[35].name.substring(0,20)+"...":i[35].name)+"")&&Se(t,e)},d(i){i&&ce(t)}}}function l2(n){let e,t,i,s,r,o=(n[35].status||"unknown")+"",a,l;function c(g,p){return g[35].name?GS:WS}let h=c(n),f=h(n);return{c(){e=m("div"),t=m("div"),i=m("span"),f.c(),s=D(),r=m("span"),a=le(o),d(i,"class","small fw-bold small"),d(t,"class","flex-grow-1"),d(r,"class",l="badge bg-"+(n[35].status==="active"?"danger":n[35].status==="chronic"?"warning":n[35].status==="resolved"?"success":"secondary")+" text-capitalize small"),d(e,"class","d-flex justify-content-between align-items-center mb-1 mt-1")},m(g,p){ue(g,e,p),u(e,t),u(t,i),f.m(i,null),u(e,s),u(e,r),u(r,a)},p(g,p){h===(h=c(g))&&f?f.p(g,p):(f.d(1),f=h(g),f&&(f.c(),f.m(i,null))),p[0]&8194&&o!==(o=(g[35].status||"unknown")+"")&&Se(a,o),p[0]&8194&&l!==(l="badge bg-"+(g[35].status==="active"?"danger":g[35].status==="chronic"?"warning":g[35].status==="resolved"?"success":"secondary")+" text-capitalize small")&&d(r,"class",l)},d(g){g&&ce(e),f.d()}}}function c2(n){let e,t,i=n[30].items.length-3+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more on this date"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8194&&i!==(i=o[30].items.length-3+"")&&Se(s,i)},d(o){o&&ce(e)}}}function u2(n){let e,t,i,s=n[30].date+"",r,o,a,l=Et(n[30].items.slice(0,3)),c=[];for(let f=0;f<l.length;f+=1)c[f]=l2(K1(n,l,f));let h=n[30].items.length>3&&c2(n);return{c(){e=m("div"),t=m("small"),i=m("i"),r=le(s),o=D();for(let f=0;f<c.length;f+=1)c[f].c();a=D(),h&&h.c(),d(i,"class","fas fa-calendar me-1"),d(t,"class","text-muted fw-bold small"),d(e,"class","mb-2")},m(f,g){ue(f,e,g),u(e,t),u(t,i),u(t,r),u(e,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(e,null);u(e,a),h&&h.m(e,null)},p(f,g){if(g[0]&8194&&s!==(s=f[30].date+"")&&Se(r,s),g[0]&8194){l=Et(f[30].items.slice(0,3));let p;for(p=0;p<l.length;p+=1){const _=K1(f,l,p);c[p]?c[p].p(_,g):(c[p]=l2(_),c[p].c(),c[p].m(e,a))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}f[30].items.length>3?h?h.p(f,g):(h=c2(f),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(f){f&&ce(e),On(c,f),h&&h.d()}}}function h2(n){let e,t,i=n[13](n[1]).length-2+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more days"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8194&&i!==(i=o[13](o[1]).length-2+"")&&Se(s,i)},d(o){o&&ce(e)}}}function d2(n){let e,t,i,s,r=n[6]?"Hide Notes":"Show Notes",o,a,l;return{c(){e=m("div"),t=m("button"),i=m("i"),s=D(),o=le(r),d(i,"class","fas fa-sticky-note me-1"),d(t,"class","btn btn-outline-danger btn-sm small"),d(e,"class","mt-2")},m(c,h){ue(c,e,h),u(e,t),u(t,i),u(t,s),u(t,o),a||(l=Ee(t,"click",function(){Ys(n[11])&&n[11].apply(this,arguments)}),a=!0)},p(c,h){n=c,h[0]&64&&r!==(r=n[6]?"Hide Notes":"Show Notes")&&Se(o,r)},d(c){c&&ce(e),a=!1,l()}}}function f2(n){let e,t,i,s,r=Et(n[1].filter(k2).sort(n[23])),o=[];for(let a=0;a<r.length;a+=1)o[a]=p2(G1(n,r,a));return{c(){e=m("div"),t=m("small"),t.textContent="Notes:",i=D(),s=m("div");for(let a=0;a<o.length;a+=1)o[a].c();d(t,"class","text-muted fw-bold"),d(s,"class","mt-1"),d(e,"class","mt-2")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l[0]&2){r=Et(a[1].filter(k2).sort(a[23]));let c;for(c=0;c<r.length;c+=1){const h=G1(a,r,c);o[c]?o[c].p(h,l):(o[c]=p2(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function p2(n){let e,t,i=(n[35].name||"Illness")+"",s,r,o,a=n[35].notes+"",l,c,h,f,g=(n[35].createdAt?new Date(n[35].createdAt).toLocaleDateString():"No date")+"",p,_;return{c(){e=m("div"),t=m("div"),s=le(i),r=D(),o=m("div"),l=le(a),c=D(),h=m("small"),f=m("i"),p=le(g),_=D(),d(t,"class","fw-bold"),d(o,"class","text-muted"),d(f,"class","fas fa-calendar me-1"),d(h,"class","text-muted"),d(e,"class","mb-1 p-2 bg-danger bg-opacity-10 rounded small")},m(y,S){ue(y,e,S),u(e,t),u(t,s),u(e,r),u(e,o),u(o,l),u(e,c),u(e,h),u(h,f),u(h,p),u(e,_)},p(y,S){S[0]&2&&i!==(i=(y[35].name||"Illness")+"")&&Se(s,i),S[0]&2&&a!==(a=y[35].notes+"")&&Se(l,a),S[0]&2&&g!==(g=(y[35].createdAt?new Date(y[35].createdAt).toLocaleDateString():"No date")+"")&&Se(p,g)},d(y){y&&ce(e)}}}function m2(n){let e;function t(r,o){return r[2]&&r[2].length>0?KS:YS}let i=t(n),s=i(n);return{c(){e=m("div"),s.c(),d(e,"class","tab-pane active")},m(r,o){ue(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&ce(e),s.d()}}}function YS(n){let e;return{c(){e=m("p"),e.innerHTML='<i class="fas fa-info-circle me-1"></i>No prescriptions',d(e,"class","text-muted mb-0 small")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function KS(n){let e,t,i,s,r,o=n[13](n[2]).length>2,a,l=n[9](n[2],"notes"),c,h=n[7]&&n[9](n[2],"notes"),f,g=Et(n[13](n[2]).slice(0,2)),p=[];for(let w=0;w<g.length;w+=1)p[w]=v2(V1(n,g,w));let _=o&&_2(n),y=l&&y2(n),S=h&&w2(n);return{c(){e=m("div"),t=m("small"),t.textContent="Recent:",i=D(),s=m("div");for(let w=0;w<p.length;w+=1)p[w].c();r=D(),_&&_.c(),a=D(),y&&y.c(),c=D(),S&&S.c(),f=gi(),d(t,"class","text-muted"),d(s,"class","mt-2"),d(e,"class","mb-2")},m(w,P){ue(w,e,P),u(e,t),u(e,i),u(e,s);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(s,null);u(s,r),_&&_.m(s,null),ue(w,a,P),y&&y.m(w,P),ue(w,c,P),S&&S.m(w,P),ue(w,f,P)},p(w,P){if(P[0]&8452){g=Et(w[13](w[2]).slice(0,2));let x;for(x=0;x<g.length;x+=1){const F=V1(w,g,x);p[x]?p[x].p(F,P):(p[x]=v2(F),p[x].c(),p[x].m(s,r))}for(;x<p.length;x+=1)p[x].d(1);p.length=g.length}P[0]&8196&&(o=w[13](w[2]).length>2),o?_?_.p(w,P):(_=_2(w),_.c(),_.m(s,null)):_&&(_.d(1),_=null),P[0]&516&&(l=w[9](w[2],"notes")),l?y?y.p(w,P):(y=y2(w),y.c(),y.m(c.parentNode,c)):y&&(y.d(1),y=null),P[0]&644&&(h=w[7]&&w[9](w[2],"notes")),h?S?S.p(w,P):(S=w2(w),S.c(),S.m(f.parentNode,f)):S&&(S.d(1),S=null)},d(w){w&&(ce(e),ce(a),ce(c),ce(f)),On(p,w),_&&_.d(),y&&y.d(w),S&&S.d(w)}}}function JS(n){let e;return{c(){e=m("small"),e.textContent="Unknown prescription",d(e,"class","text-muted")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function XS(n){let e=(n[27].name.length>20?n[27].name.substring(0,20)+"...":n[27].name)+"",t;return{c(){t=le(e)},m(i,s){ue(i,t,s)},p(i,s){s[0]&8196&&e!==(e=(i[27].name.length>20?i[27].name.substring(0,20)+"...":i[27].name)+"")&&Se(t,e)},d(i){i&&ce(t)}}}function g2(n){let e,t,i,s,r,o=(n[27].dosage||"No dosage")+"",a,l,c,h,f,g=(n[27].dosage||"No dosage")+"",p,_,y,S=(n[27].duration||"No duration")+"",w,P,x,F,U;function H(R,I){return R[27].name?XS:JS}let L=H(n),k=L(n);function E(){return n[24](n[27])}return{c(){e=m("div"),t=m("div"),i=m("span"),k.c(),s=D(),r=m("span"),a=le(o),l=D(),c=m("div"),h=m("small"),f=m("i"),p=le(g),_=le(` • 
                            `),y=m("i"),w=le(S),P=D(),x=m("button"),x.innerHTML=`<i class="fas fa-plus me-1"></i>
                            Add Today`,d(i,"class","small fw-bold fs-5"),d(t,"class","flex-grow-1"),d(r,"class","badge bg-primary small"),d(e,"class","d-flex justify-content-between align-items-center mb-1 mt-1"),d(f,"class","fas fa-weight me-1"),d(y,"class","fas fa-clock me-1"),d(h,"class","text-muted small"),d(x,"class","btn btn-outline-success btn-sm small"),d(x,"title","Add to today's prescription"),d(c,"class","d-flex justify-content-between align-items-center")},m(R,I){ue(R,e,I),u(e,t),u(t,i),k.m(i,null),u(e,s),u(e,r),u(r,a),ue(R,l,I),ue(R,c,I),u(c,h),u(h,f),u(h,p),u(h,_),u(h,y),u(h,w),u(c,P),u(c,x),F||(U=Ee(x,"click",E),F=!0)},p(R,I){n=R,L===(L=H(n))&&k?k.p(n,I):(k.d(1),k=L(n),k&&(k.c(),k.m(i,null))),I[0]&8196&&o!==(o=(n[27].dosage||"No dosage")+"")&&Se(a,o),I[0]&8196&&g!==(g=(n[27].dosage||"No dosage")+"")&&Se(p,g),I[0]&8196&&S!==(S=(n[27].duration||"No duration")+"")&&Se(w,S)},d(R){R&&(ce(e),ce(l),ce(c)),k.d(),F=!1,U()}}}function b2(n){let e,t,i=n[30].items.length-3+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more on this date"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8196&&i!==(i=o[30].items.length-3+"")&&Se(s,i)},d(o){o&&ce(e)}}}function v2(n){let e,t,i,s=n[30].date+"",r,o,a,l=Et(n[30].items.slice(0,3)),c=[];for(let f=0;f<l.length;f+=1)c[f]=g2(W1(n,l,f));let h=n[30].items.length>3&&b2(n);return{c(){e=m("div"),t=m("small"),i=m("i"),r=le(s),o=D();for(let f=0;f<c.length;f+=1)c[f].c();a=D(),h&&h.c(),d(i,"class","fas fa-calendar me-1"),d(t,"class","text-muted fw-bold small"),d(e,"class","mb-2")},m(f,g){ue(f,e,g),u(e,t),u(t,i),u(t,r),u(e,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(e,null);u(e,a),h&&h.m(e,null)},p(f,g){if(g[0]&8196&&s!==(s=f[30].date+"")&&Se(r,s),g[0]&8452){l=Et(f[30].items.slice(0,3));let p;for(p=0;p<l.length;p+=1){const _=W1(f,l,p);c[p]?c[p].p(_,g):(c[p]=g2(_),c[p].c(),c[p].m(e,a))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}f[30].items.length>3?h?h.p(f,g):(h=b2(f),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(f){f&&ce(e),On(c,f),h&&h.d()}}}function _2(n){let e,t,i=n[13](n[2]).length-2+"",s,r;return{c(){e=m("small"),t=le("+"),s=le(i),r=le(" more days"),d(e,"class","text-muted small")},m(o,a){ue(o,e,a),u(e,t),u(e,s),u(e,r)},p(o,a){a[0]&8196&&i!==(i=o[13](o[2]).length-2+"")&&Se(s,i)},d(o){o&&ce(e)}}}function y2(n){let e,t,i,s,r=n[7]?"Hide Notes":"Show Notes",o,a,l;return{c(){e=m("div"),t=m("button"),i=m("i"),s=D(),o=le(r),d(i,"class","fas fa-sticky-note me-1"),d(t,"class","btn btn-outline-success btn-sm small"),d(e,"class","mt-2")},m(c,h){ue(c,e,h),u(e,t),u(t,i),u(t,s),u(t,o),a||(l=Ee(t,"click",function(){Ys(n[12])&&n[12].apply(this,arguments)}),a=!0)},p(c,h){n=c,h[0]&128&&r!==(r=n[7]?"Hide Notes":"Show Notes")&&Se(o,r)},d(c){c&&ce(e),a=!1,l()}}}function w2(n){let e,t,i,s,r=Et(n[2].filter(P2).sort(n[25])),o=[];for(let a=0;a<r.length;a+=1)o[a]=A2(q1(n,r,a));return{c(){e=m("div"),t=m("small"),t.textContent="Notes:",i=D(),s=m("div");for(let a=0;a<o.length;a+=1)o[a].c();d(t,"class","text-muted fw-bold"),d(s,"class","mt-1"),d(e,"class","mt-2")},m(a,l){ue(a,e,l),u(e,t),u(e,i),u(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(a,l){if(l[0]&4){r=Et(a[2].filter(P2).sort(a[25]));let c;for(c=0;c<r.length;c+=1){const h=q1(a,r,c);o[c]?o[c].p(h,l):(o[c]=A2(h),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(a){a&&ce(e),On(o,a)}}}function A2(n){let e,t,i=(n[27].name||"Prescription")+"",s,r,o,a=n[27].notes+"",l,c,h,f,g=(n[27].createdAt?new Date(n[27].createdAt).toLocaleDateString():"No date")+"",p,_;return{c(){e=m("div"),t=m("div"),s=le(i),r=D(),o=m("div"),l=le(a),c=D(),h=m("small"),f=m("i"),p=le(g),_=D(),d(t,"class","fw-bold fs-5"),d(o,"class","text-muted"),d(f,"class","fas fa-calendar me-1"),d(h,"class","text-muted"),d(e,"class","mb-1 p-2 bg-success bg-opacity-10 rounded small")},m(y,S){ue(y,e,S),u(e,t),u(t,s),u(e,r),u(e,o),u(o,l),u(e,c),u(e,h),u(h,f),u(h,p),u(e,_)},p(y,S){S[0]&4&&i!==(i=(y[27].name||"Prescription")+"")&&Se(s,i),S[0]&4&&a!==(a=y[27].notes+"")&&Se(l,a),S[0]&4&&g!==(g=(y[27].createdAt?new Date(y[27].createdAt).toLocaleDateString():"No date")+"")&&Se(p,g)},d(y){y&&ce(e)}}}function ZS(n){let e,t=n[0]&&Q1(n);return{c(){t&&t.c(),e=gi()},m(i,s){t&&t.m(i,s),ue(i,e,s)},p(i,s){i[0]?t?t.p(i,s):(t=Q1(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:dt,o:dt,d(i){i&&ce(e),t&&t.d(i)}}}const S2=n=>n.notes&&n.notes.trim(),k2=n=>n.notes&&n.notes.trim(),P2=n=>n.notes&&n.notes.trim();function QS(n,e,t){let i,s,r;const o=$i();let{selectedPatient:a}=e,{illnesses:l=[]}=e,{prescriptions:c=[]}=e,{symptoms:h=[]}=e,{activeMedicalTab:f="prescriptions"}=e,{showSymptomsNotes:g=!1}=e,{showIllnessesNotes:p=!1}=e,{showPrescriptionsNotes:_=!1}=e,{addToPrescription:y}=e,{hasNotes:S}=e,{toggleSymptomsNotes:w}=e,{toggleIllnessesNotes:P}=e,{togglePrescriptionsNotes:x}=e,{groupByDate:F}=e;const U=q=>{o("tabChange",{tab:q})},H=()=>t(0,a=null),L=()=>U("symptoms"),k=()=>U("illnesses"),E=()=>U("prescriptions"),R=(q,Y)=>new Date(Y.createdAt||0)-new Date(q.createdAt||0),I=(q,Y)=>new Date(Y.createdAt||0)-new Date(q.createdAt||0),C=q=>y(q),O=(q,Y)=>new Date(Y.createdAt||0)-new Date(q.createdAt||0);return n.$$set=q=>{"selectedPatient"in q&&t(0,a=q.selectedPatient),"illnesses"in q&&t(1,l=q.illnesses),"prescriptions"in q&&t(2,c=q.prescriptions),"symptoms"in q&&t(3,h=q.symptoms),"activeMedicalTab"in q&&t(4,f=q.activeMedicalTab),"showSymptomsNotes"in q&&t(5,g=q.showSymptomsNotes),"showIllnessesNotes"in q&&t(6,p=q.showIllnessesNotes),"showPrescriptionsNotes"in q&&t(7,_=q.showPrescriptionsNotes),"addToPrescription"in q&&t(8,y=q.addToPrescription),"hasNotes"in q&&t(9,S=q.hasNotes),"toggleSymptomsNotes"in q&&t(10,w=q.toggleSymptomsNotes),"toggleIllnessesNotes"in q&&t(11,P=q.toggleIllnessesNotes),"togglePrescriptionsNotes"in q&&t(12,x=q.togglePrescriptionsNotes),"groupByDate"in q&&t(13,F=q.groupByDate)},n.$$.update=()=>{n.$$.dirty[0]&8&&t(16,i=(h==null?void 0:h.length)||0),n.$$.dirty[0]&2&&t(15,s=(l==null?void 0:l.length)||0),n.$$.dirty[0]&4&&t(14,r=(c==null?void 0:c.length)||0)},[a,l,c,h,f,g,p,_,y,S,w,P,x,F,r,s,i,U,H,L,k,E,R,I,C,O]}class $S extends ii{constructor(e){super(),ni(this,e,QS,ZS,Zn,{selectedPatient:0,illnesses:1,prescriptions:2,symptoms:3,activeMedicalTab:4,showSymptomsNotes:5,showIllnessesNotes:6,showPrescriptionsNotes:7,addToPrescription:8,hasNotes:9,toggleSymptomsNotes:10,toggleIllnessesNotes:11,togglePrescriptionsNotes:12,groupByDate:13},null,[-1,-1])}}function N2(n,e,t){const i=n.slice();return i[21]=e[t],i}function I2(n,e,t){const i=n.slice();return i[21]=e[t],i}function L2(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R;return{c(){e=m("div"),t=m("div"),t.innerHTML=`<h6 class="card-title mb-0"><i class="fas fa-link me-2"></i>
          Connect to Pharmacist</h6>`,i=D(),s=m("div"),r=m("div"),o=m("div"),a=m("div"),l=m("label"),l.innerHTML='Pharmacist Number <span class="text-danger">*</span>',c=D(),h=m("div"),f=m("span"),f.innerHTML='<i class="fas fa-hashtag"></i>',g=D(),p=m("input"),_=D(),y=m("div"),y.textContent="Ask the pharmacist for their unique 6-digit number to connect.",S=D(),w=m("div"),P=m("div"),x=m("button"),F=m("i"),U=le(`
                Connect`),L=D(),k=m("button"),k.innerHTML='<i class="fas fa-times"></i>',d(t,"class","card-header bg-primary text-white"),d(l,"for","pharmacistNumber"),d(l,"class","form-label fw-bold"),d(f,"class","input-group-text svelte-s9j58n"),d(p,"type","text"),d(p,"id","pharmacistNumber"),d(p,"class","form-control svelte-s9j58n"),d(p,"placeholder","Enter 6-digit pharmacist number"),d(p,"maxlength","6"),d(p,"pattern","[0-9]6"),d(h,"class","input-group"),d(y,"class","form-text"),d(a,"class","mb-3"),d(o,"class","col-md-8"),d(F,"class","fas fa-link me-1"),d(x,"class","btn btn-success flex-fill svelte-s9j58n"),x.disabled=H=!n[5]||n[5].length!==6,d(k,"class","btn btn-outline-secondary svelte-s9j58n"),d(P,"class","d-flex gap-2 w-100"),d(w,"class","col-md-4 d-flex align-items-end"),d(r,"class","row"),d(s,"class","card-body"),d(e,"class","card border-primary mb-4 svelte-s9j58n")},m(I,C){ue(I,e,C),u(e,t),u(e,i),u(e,s),u(s,r),u(r,o),u(o,a),u(a,l),u(a,c),u(a,h),u(h,f),u(h,g),u(h,p),je(p,n[5]),u(a,_),u(a,y),u(r,S),u(r,w),u(w,P),u(P,x),u(x,F),u(x,U),u(P,L),u(P,k),E||(R=[Ee(p,"input",n[14]),Ee(x,"click",n[8]),Ee(k,"click",n[15])],E=!0)},p(I,C){C&32&&p.value!==I[5]&&je(p,I[5]),C&32&&H!==(H=!I[5]||I[5].length!==6)&&(x.disabled=H)},d(I){I&&ce(e),E=!1,an(R)}}}function ek(n){let e,t=Et(n[1]),i=[];for(let s=0;s<t.length;s+=1)i[s]=C2(I2(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","row")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r&2050){t=Et(s[1]);let o;for(o=0;o<t.length;o+=1){const a=I2(s,t,o);i[o]?i[o].p(a,r):(i[o]=C2(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function tk(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-pills fa-3x text-muted mb-3"></i> <h5 class="text-muted">No Connected Pharmacists</h5> <p class="text-muted">Connect with pharmacists to start sharing prescriptions.</p>',d(e,"class","text-center py-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function C2(n){let e,t,i,s,r,o=n[21].businessName+"",a,l,c,h,f,g,p,_=n[21].email+"",y,S,w,P,x,F=n[21].pharmacistNumber+"",U,H,L,k,E,R=new Date(n[21].createdAt).toLocaleDateString()+"",I,C,O,q;function Y(){return n[16](n[21])}return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h6"),a=le(o),l=D(),c=m("button"),c.innerHTML='<i class="fas fa-unlink"></i>',h=D(),f=m("p"),g=m("i"),p=D(),y=le(_),S=D(),w=m("p"),P=m("i"),x=le(`
                        ID: `),U=le(F),H=D(),L=m("p"),k=m("i"),E=le(`
                        Connected: `),I=le(R),C=D(),d(r,"class","card-title fw-bold text-success mb-0"),d(c,"class","btn btn-outline-danger btn-sm svelte-s9j58n"),d(c,"title","Disconnect"),d(s,"class","d-flex justify-content-between align-items-start mb-2"),d(g,"class","fas fa-envelope me-1"),d(f,"class","text-muted small mb-2"),d(P,"class","fas fa-hashtag me-1"),d(w,"class","text-muted small mb-2"),d(k,"class","fas fa-calendar me-1"),d(L,"class","text-muted small mb-0"),d(i,"class","card-body"),d(t,"class","card border-success h-100 svelte-s9j58n"),d(e,"class","col-md-6 col-lg-4 mb-3")},m($,Z){ue($,e,Z),u(e,t),u(t,i),u(i,s),u(s,r),u(r,a),u(s,l),u(s,c),u(i,h),u(i,f),u(f,g),u(f,p),u(f,y),u(i,S),u(i,w),u(w,P),u(w,x),u(w,U),u(i,H),u(i,L),u(L,k),u(L,E),u(L,I),u(e,C),O||(q=Ee(c,"click",Y),O=!0)},p($,Z){n=$,Z&2&&o!==(o=n[21].businessName+"")&&Se(a,o),Z&2&&_!==(_=n[21].email+"")&&Se(y,_),Z&2&&F!==(F=n[21].pharmacistNumber+"")&&Se(U,F),Z&2&&R!==(R=new Date(n[21].createdAt).toLocaleDateString()+"")&&Se(I,R)},d($){$&&ce(e),O=!1,q()}}}function nk(n){let e,t=Et(n[7]),i=[];for(let s=0;s<t.length;s+=1)i[s]=T2(N2(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","row")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r&128){t=Et(s[7]);let o;for(o=0;o<t.length;o+=1){const a=N2(s,t,o);i[o]?i[o].p(a,r):(i[o]=T2(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function ik(n){let e,t,i,s,r,o,a=n[0]?"No pharmacists match your search.":"No pharmacists are available to connect.",l;return{c(){e=m("div"),t=m("i"),i=D(),s=m("h5"),s.textContent="No Available Pharmacists",r=D(),o=m("p"),l=le(a),d(t,"class","fas fa-pills fa-3x text-muted mb-3"),d(s,"class","text-muted"),d(o,"class","text-muted"),d(e,"class","text-center py-4")},m(c,h){ue(c,e,h),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),u(o,l)},p(c,h){h&1&&a!==(a=c[0]?"No pharmacists match your search.":"No pharmacists are available to connect.")&&Se(l,a)},d(c){c&&ce(e)}}}function sk(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div> <p class="mt-2 text-muted">Loading pharmacists...</p>',d(e,"class","text-center py-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function T2(n){let e,t,i,s,r=n[21].businessName+"",o,a,l,c,h,f=n[21].email+"",g,p,_,y,S,w=n[21].pharmacistNumber+"",P,x,F,U,H,L=new Date(n[21].createdAt).toLocaleDateString()+"",k,E;return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("h6"),o=le(r),a=D(),l=m("p"),c=m("i"),h=D(),g=le(f),p=D(),_=m("p"),y=m("i"),S=le(`
                        ID: `),P=le(w),x=D(),F=m("p"),U=m("i"),H=le(`
                        Registered: `),k=le(L),E=D(),d(s,"class","card-title fw-bold text-info mb-2"),d(c,"class","fas fa-envelope me-1"),d(l,"class","text-muted small mb-2"),d(y,"class","fas fa-hashtag me-1"),d(_,"class","text-muted small mb-2"),d(U,"class","fas fa-calendar me-1"),d(F,"class","text-muted small mb-0"),d(i,"class","card-body"),d(t,"class","card border-info h-100 svelte-s9j58n"),d(e,"class","col-md-6 col-lg-4 mb-3")},m(R,I){ue(R,e,I),u(e,t),u(t,i),u(i,s),u(s,o),u(i,a),u(i,l),u(l,c),u(l,h),u(l,g),u(i,p),u(i,_),u(_,y),u(_,S),u(_,P),u(i,x),u(i,F),u(F,U),u(F,H),u(F,k),u(e,E)},p(R,I){I&128&&r!==(r=R[21].businessName+"")&&Se(o,r),I&128&&f!==(f=R[21].email+"")&&Se(g,f),I&128&&w!==(w=R[21].pharmacistNumber+"")&&Se(P,w),I&128&&L!==(L=new Date(R[21].createdAt).toLocaleDateString()+"")&&Se(k,L)},d(R){R&&ce(e)}}}function D2(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re;return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML=`<i class="fas fa-link me-2"></i>
            Connect to Pharmacist`,o=D(),a=m("button"),l=D(),c=m("div"),h=m("div"),f=m("label"),f.innerHTML='Pharmacist Number <span class="text-danger">*</span>',g=D(),p=m("div"),_=m("span"),_.innerHTML='<i class="fas fa-hashtag"></i>',y=D(),S=m("input"),w=D(),P=m("div"),P.innerHTML=`<i class="fas fa-info-circle me-1"></i>
              Ask the pharmacist for their unique 6-digit number to connect.`,x=D(),F=m("div"),U=m("div"),H=m("input"),L=D(),k=m("label"),k.innerHTML=`<i class="fas fa-home me-2 text-primary"></i>
                This is my own pharmacy`,E=D(),R=m("div"),R.innerHTML=`<i class="fas fa-info-circle me-1"></i>
              Check this if you are connecting to your own pharmacy/pharmacy business.`,I=D(),C=m("div"),O=m("button"),O.innerHTML=`<i class="fas fa-times me-1"></i>
            Cancel`,q=D(),Y=m("button"),$=m("i"),Z=le(`
            Connect`),d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close btn-close-white"),d(s,"class","modal-header bg-primary text-white"),d(f,"for","modalPharmacistNumber"),d(f,"class","form-label fw-bold"),d(_,"class","input-group-text svelte-s9j58n"),d(S,"type","text"),d(S,"id","modalPharmacistNumber"),d(S,"class","form-control svelte-s9j58n"),d(S,"placeholder","Enter 6-digit pharmacist number"),d(S,"maxlength","6"),d(S,"pattern","[0-9]6"),S.autofocus=!0,d(p,"class","input-group"),d(P,"class","form-text"),d(h,"class","mb-3"),d(H,"class","form-check-input"),d(H,"type","checkbox"),d(H,"id","isOwnPharmacy"),d(k,"class","form-check-label fw-semibold"),d(k,"for","isOwnPharmacy"),d(U,"class","form-check"),d(R,"class","form-text"),d(F,"class","mb-3"),d(c,"class","modal-body"),d(O,"type","button"),d(O,"class","btn btn-secondary svelte-s9j58n"),d($,"class","fas fa-link me-1"),d(Y,"type","button"),d(Y,"class","btn btn-primary svelte-s9j58n"),Y.disabled=X=!n[5]||n[5].length!==6,d(C,"class","modal-footer"),d(i,"class","modal-content"),d(t,"class","modal-dialog"),d(e,"class","modal fade show d-block"),$n(e,"background-color","rgba(var(--bs-dark-rgb), 0.5)"),d(e,"tabindex","-1")},m(me,B){ue(me,e,B),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),u(c,h),u(h,f),u(h,g),u(h,p),u(p,_),u(p,y),u(p,S),je(S,n[5]),u(h,w),u(h,P),u(c,x),u(c,F),u(F,U),u(U,H),H.checked=n[6],u(U,L),u(U,k),u(F,E),u(F,R),u(i,I),u(i,C),u(C,O),u(C,q),u(C,Y),u(Y,$),u(Y,Z),S.focus(),Q||(re=[Ee(a,"click",n[10]),Ee(S,"input",n[18]),Ee(H,"change",n[19]),Ee(O,"click",n[10]),Ee(Y,"click",n[8])],Q=!0)},p(me,B){B&32&&S.value!==me[5]&&je(S,me[5]),B&64&&(H.checked=me[6]),B&32&&X!==(X=!me[5]||me[5].length!==6)&&(Y.disabled=X)},d(me){me&&ce(e),Q=!1,an(re)}}}function rk(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y=n[1].length+"",S,w,P,x,F,U,H,L,k,E,R,I,C,O=n[7].length+"",q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve=n[3]&&L2(n);function he(W,_e){return W[1].length===0?tk:ek}let ye=he(n),Ae=ye(n);function Me(W,_e){return W[2]?sk:W[7].length===0?ik:nk}let Te=Me(n),De=Te(n),de=n[4]&&D2(n);return{c(){e=m("div"),t=m("div"),i=m("div"),i.innerHTML=`<h4 class="fw-bold text-dark mb-1"><i class="fas fa-pills me-2 text-primary"></i>
        Pharmacist Management</h4> <p class="text-muted mb-0">Connect with pharmacists to share prescriptions</p>`,s=D(),r=m("button"),r.innerHTML=`<i class="fas fa-plus me-2"></i>
      Connect Pharmacist`,o=D(),ve&&ve.c(),a=D(),l=m("div"),c=m("div"),h=m("div"),f=m("div"),g=m("h6"),p=m("i"),_=le(`
            Connected Pharmacists (`),S=le(y),w=le(")"),P=D(),x=m("div"),Ae.c(),F=D(),U=m("div"),H=m("div"),L=m("div"),k=m("div"),E=m("div"),R=m("h6"),I=m("i"),C=le(`
              Available Pharmacists (`),q=le(O),Y=le(")"),$=D(),Z=m("div"),X=m("div"),Q=m("span"),Q.innerHTML='<i class="fas fa-search"></i>',re=D(),me=m("input"),B=D(),V=m("div"),De.c(),G=D(),de&&de.c(),te=gi(),d(r,"class","btn btn-primary position-relative svelte-s9j58n"),d(r,"type","button"),$n(r,"z-index","1000"),d(t,"class","d-flex justify-content-between align-items-center mb-4"),d(p,"class","fas fa-check-circle me-2"),d(g,"class","card-title mb-0"),d(f,"class","card-header bg-success text-white"),d(x,"class","card-body"),d(h,"class","card border-0 shadow-sm svelte-s9j58n"),d(c,"class","col-12"),d(l,"class","row mb-4"),d(I,"class","fas fa-search me-2"),d(R,"class","card-title mb-0"),d(Q,"class","input-group-text svelte-s9j58n"),d(me,"type","text"),d(me,"class","form-control svelte-s9j58n"),d(me,"placeholder","Search pharmacists..."),d(X,"class","input-group"),$n(X,"width","250px"),d(Z,"class","d-flex align-items-center"),d(E,"class","d-flex justify-content-between align-items-center"),d(k,"class","card-header bg-info text-white"),d(V,"class","card-body"),d(L,"class","card border-0 shadow-sm svelte-s9j58n"),d(H,"class","col-12"),d(U,"class","row"),d(e,"class","container-fluid")},m(W,_e){ue(W,e,_e),u(e,t),u(t,i),u(t,s),u(t,r),u(e,o),ve&&ve.m(e,null),u(e,a),u(e,l),u(l,c),u(c,h),u(h,f),u(f,g),u(g,p),u(g,_),u(g,S),u(g,w),u(h,P),u(h,x),Ae.m(x,null),u(e,F),u(e,U),u(U,H),u(H,L),u(L,k),u(k,E),u(E,R),u(R,I),u(R,C),u(R,q),u(R,Y),u(E,$),u(E,Z),u(Z,X),u(X,Q),u(X,re),u(X,me),je(me,n[0]),u(L,B),u(L,V),De.m(V,null),ue(W,G,_e),de&&de.m(W,_e),ue(W,te,_e),ae||(fe=[Ee(r,"click",n[9]),Ee(me,"input",n[17])],ae=!0)},p(W,[_e]){W[3]?ve?ve.p(W,_e):(ve=L2(W),ve.c(),ve.m(e,a)):ve&&(ve.d(1),ve=null),_e&2&&y!==(y=W[1].length+"")&&Se(S,y),ye===(ye=he(W))&&Ae?Ae.p(W,_e):(Ae.d(1),Ae=ye(W),Ae&&(Ae.c(),Ae.m(x,null))),_e&128&&O!==(O=W[7].length+"")&&Se(q,O),_e&1&&me.value!==W[0]&&je(me,W[0]),Te===(Te=Me(W))&&De?De.p(W,_e):(De.d(1),De=Te(W),De&&(De.c(),De.m(V,null))),W[4]?de?de.p(W,_e):(de=D2(W),de.c(),de.m(te.parentNode,te)):de&&(de.d(1),de=null)},i:dt,o:dt,d(W){W&&(ce(e),ce(G),ce(te)),ve&&ve.d(),Ae.d(),De.d(),de&&de.d(W),ae=!1,an(fe)}}}function ok(n,e,t){let i,{user:s}=e,r=[],o=[],a=!0,l=!1,c=!1,h="",f="",g=!1;const p=async()=>{try{t(2,a=!0);const k=await kt.getAllPharmacists(),E=kt.getDoctorByEmail(s.email),R=E==null?void 0:E.id;t(1,o=k.filter(I=>I.connectedDoctors.includes(R))),t(13,r=k.filter(I=>!I.connectedDoctors.includes(R)))}catch(k){console.error("Error loading pharmacists:",k),cr("Failed to load pharmacists")}finally{t(2,a=!1)}},_=async()=>{if(!h.trim()){cr("Please enter a pharmacist number");return}if(h.length!==6){cr("Pharmacist number must be 6 digits");return}console.log("Connecting to pharmacist:",h,"Is own pharmacy:",g);try{await kt.connectPharmacistToDoctor(h,s.email),Ls(g?"Successfully connected to your own pharmacy!":"Successfully connected to pharmacist!"),t(5,h=""),t(6,g=!1),t(3,l=!1),t(4,c=!1),p()}catch(k){cr(k.message||"Failed to connect to pharmacist")}},y=()=>{t(5,h=""),t(6,g=!1),t(4,c=!0)},S=()=>{t(4,c=!1),t(5,h=""),t(6,g=!1)},w=async k=>{try{const E=await kt.getPharmacistById(k),R=kt.getDoctorByEmail(s.email);E&&R&&(E.connectedDoctors=E.connectedDoctors.filter(I=>I!==R.id),R.connectedPharmacists&&(R.connectedPharmacists=R.connectedPharmacists.filter(I=>I!==k)),await kt.saveData(),Ls("Pharmacist disconnected successfully"),p())}catch{cr("Failed to disconnect pharmacist")}};Go(()=>{p()});function P(){h=this.value,t(5,h)}const x=()=>{t(3,l=!1),t(5,h="")},F=k=>w(k.id);function U(){f=this.value,t(0,f)}function H(){h=this.value,t(5,h)}function L(){g=this.checked,t(6,g)}return n.$$set=k=>{"user"in k&&t(12,s=k.user)},n.$$.update=()=>{n.$$.dirty&8193&&t(7,i=r.filter(k=>k.businessName.toLowerCase().includes(f.toLowerCase())||k.email.toLowerCase().includes(f.toLowerCase())||k.pharmacistNumber.includes(f)))},[f,o,a,l,c,h,g,i,_,y,S,w,s,r,P,x,F,U,H,L]}class ak extends ii{constructor(e){super(),ni(this,e,ok,rk,Zn,{user:12})}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Qc(n){return n+.5|0}const Do=(n,e,t)=>Math.max(Math.min(n,t),e);function ac(n){return Do(Qc(n*2.55),0,255)}function jo(n){return Do(Qc(n*255),0,255)}function Fr(n){return Do(Qc(n/2.55)/100,0,1)}function x2(n){return Do(Qc(n*100),0,100)}const Ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cf=[..."0123456789ABCDEF"],lk=n=>cf[n&15],ck=n=>cf[(n&240)>>4]+cf[n&15],Du=n=>(n&240)>>4===(n&15),uk=n=>Du(n.r)&&Du(n.g)&&Du(n.b)&&Du(n.a);function hk(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ns[n[1]]*17,g:255&Ns[n[2]]*17,b:255&Ns[n[3]]*17,a:e===5?Ns[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ns[n[1]]<<4|Ns[n[2]],g:Ns[n[3]]<<4|Ns[n[4]],b:Ns[n[5]]<<4|Ns[n[6]],a:e===9?Ns[n[7]]<<4|Ns[n[8]]:255})),t}const dk=(n,e)=>n<255?e(n):"";function fk(n){var e=uk(n)?lk:ck;return n?"#"+e(n.r)+e(n.g)+e(n.b)+dk(n.a,e):void 0}const pk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y5(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function mk(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function gk(n,e,t){const i=Y5(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function bk(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function $f(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=bk(t,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function ep(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(jo)}function tp(n,e,t){return ep(Y5,n,e,t)}function vk(n,e,t){return ep(gk,n,e,t)}function _k(n,e,t){return ep(mk,n,e,t)}function K5(n){return(n%360+360)%360}function yk(n){const e=pk.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ac(+e[5]):jo(+e[5]));const s=K5(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=vk(s,r,o):e[1]==="hsv"?i=_k(s,r,o):i=tp(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function wk(n,e){var t=$f(n);t[0]=K5(t[0]+e),t=tp(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Ak(n){if(!n)return;const e=$f(n),t=e[0],i=x2(e[1]),s=x2(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${Fr(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const E2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},M2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sk(){const n={},e=Object.keys(M2),t=Object.keys(E2);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,E2[r]);r=parseInt(M2[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let xu;function kk(n){xu||(xu=Sk(),xu.transparent=[0,0,0,0]);const e=xu[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Pk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Nk(n){const e=Pk.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?ac(o):Do(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?ac(i):Do(i,0,255)),s=255&(e[4]?ac(s):Do(s,0,255)),r=255&(e[6]?ac(r):Do(r,0,255)),{r:i,g:s,b:r,a:t}}}function Ik(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Fr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const kd=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,bl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Lk(n,e,t){const i=bl(Fr(n.r)),s=bl(Fr(n.g)),r=bl(Fr(n.b));return{r:jo(kd(i+t*(bl(Fr(e.r))-i))),g:jo(kd(s+t*(bl(Fr(e.g))-s))),b:jo(kd(r+t*(bl(Fr(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Eu(n,e,t){if(n){let i=$f(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=tp(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function J5(n,e){return n&&Object.assign(e||{},n)}function O2(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=jo(n[3]))):(e=J5(n,{r:0,g:0,b:0,a:1}),e.a=jo(e.a)),e}function Ck(n){return n.charAt(0)==="r"?Nk(n):yk(n)}class Rc{constructor(e){if(e instanceof Rc)return e;const t=typeof e;let i;t==="object"?i=O2(e):t==="string"&&(i=hk(e)||kk(e)||Ck(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=J5(this._rgb);return e&&(e.a=Fr(e.a)),e}set rgb(e){this._rgb=O2(e)}rgbString(){return this._valid?Ik(this._rgb):void 0}hexString(){return this._valid?fk(this._rgb):void 0}hslString(){return this._valid?Ak(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Lk(this._rgb,e._rgb,t)),this}clone(){return new Rc(this.rgb)}alpha(e){return this._rgb.a=jo(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Qc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Eu(this._rgb,2,e),this}darken(e){return Eu(this._rgb,2,-e),this}saturate(e){return Eu(this._rgb,1,e),this}desaturate(e){return Eu(this._rgb,1,-e),this}rotate(e){return wk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Mr(){}const Tk=(()=>{let n=0;return()=>n++})();function on(n){return n==null}function ei(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function cn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ci(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ms(n,e){return ci(n)?n:e}function Xt(n,e){return typeof n>"u"?e:n}const Dk=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,X5=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Wn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function En(n,e,t,i){let s,r,o;if(ei(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(cn(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function _h(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function yh(n){if(ei(n))return n.map(yh);if(cn(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=yh(n[t[s]]);return e}return n}function Z5(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function xk(n,e,t,i){if(!Z5(n))return;const s=e[n],r=t[n];cn(s)&&cn(r)?Fc(s,r,i):e[n]=yh(r)}function Fc(n,e,t){const i=ei(e)?e:[e],s=i.length;if(!cn(n))return n;t=t||{};const r=t.merger||xk;let o;for(let a=0;a<s;++a){if(o=i[a],!cn(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],n,o,t)}return n}function kc(n,e){return Fc(n,e,{merger:Ek})}function Ek(n,e,t){if(!Z5(n))return;const i=e[n],s=t[n];cn(i)&&cn(s)?kc(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=yh(s))}const R2={"":n=>n,x:n=>n.x,y:n=>n.y};function Mk(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Ok(n){const e=Mk(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Vo(n,e){return(R2[e]||(R2[e]=Ok(e)))(n)}function np(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Bc=n=>typeof n<"u",Wo=n=>typeof n=="function",F2=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Rk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const An=Math.PI,Xn=2*An,Fk=Xn+An,wh=Number.POSITIVE_INFINITY,Bk=An/180,mi=An/2,da=An/4,B2=An*2/3,xo=Math.log10,pr=Math.sign;function Pc(n,e,t){return Math.abs(n-e)<t}function j2(n){const e=Math.round(n);n=Pc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(xo(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function jk(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function Uk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function xl(n){return!Uk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function zk(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Q5(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Vs(n){return n*(An/180)}function ip(n){return n*(180/An)}function U2(n){if(!ci(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function $5(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*An&&(r+=Xn),{angle:r,distance:s}}function uf(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Hk(n,e){return(n-e+Fk)%Xn-An}function qi(n){return(n%Xn+Xn)%Xn}function jc(n,e,t,i){const s=qi(n),r=qi(e),o=qi(t),a=qi(r-s),l=qi(o-s),c=qi(s-r),h=qi(s-o);return s===r||s===o||i&&r===o||a>l&&c<h}function Ci(n,e,t){return Math.max(e,Math.min(t,n))}function qk(n){return Ci(n,-32768,32767)}function qr(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function sp(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Vr=(n,e,t,i)=>sp(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),Vk=(n,e,t)=>sp(n,t,i=>n[i][e]>=t);function Wk(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const ev=["push","pop","shift","splice","unshift"];function Gk(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ev.forEach(t=>{const i="_onData"+np(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function z2(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(ev.forEach(r=>{delete n[r]}),delete n._chartjs)}function tv(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const nv=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function iv(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,nv.call(window,()=>{i=!1,n.apply(e,t)}))}}function Yk(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const rp=n=>n==="start"?"left":n==="end"?"right":"center",Hi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,Kk=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function sv(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:f,max:g,minDefined:p,maxDefined:_}=o.getUserBounds();if(p){if(s=Math.min(Vr(l,h,f).lo,t?i:Vr(e,h,o.getPixelForValue(f)).lo),c){const y=l.slice(0,s+1).reverse().findIndex(S=>!on(S[a.axis]));s-=Math.max(0,y)}s=Ci(s,0,i-1)}if(_){let y=Math.max(Vr(l,o.axis,g,!0).hi+1,t?0:Vr(e,h,o.getPixelForValue(g),!0).hi+1);if(c){const S=l.slice(y-1).findIndex(w=>!on(w[a.axis]));y+=Math.max(0,S)}r=Ci(y,s,i)-s}else r=i-s}return{start:s,count:r}}function rv(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const Mu=n=>n===0||n===1,H2=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Xn/t)),q2=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Xn/t)+1,Nc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*mi)+1,easeOutSine:n=>Math.sin(n*mi),easeInOutSine:n=>-.5*(Math.cos(An*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Mu(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Mu(n)?n:H2(n,.075,.3),easeOutElastic:n=>Mu(n)?n:q2(n,.075,.3),easeInOutElastic(n){return Mu(n)?n:n<.5?.5*H2(n*2,.1125,.45):.5+.5*q2(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Nc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Nc.easeInBounce(n*2)*.5:Nc.easeOutBounce(n*2-1)*.5+.5};function op(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function V2(n){return op(n)?n:new Rc(n)}function Pd(n){return op(n)?n:new Rc(n).saturate(.5).darken(.1).hexString()}const Jk=["x","y","borderWidth","radius","tension"],Xk=["color","borderColor","backgroundColor"];function Zk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Xk},numbers:{type:"number",properties:Jk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Qk(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const W2=new Map;function $k(n,e){e=e||{};const t=n+JSON.stringify(e);let i=W2.get(t);return i||(i=new Intl.NumberFormat(n,e),W2.set(t,i)),i}function $c(n,e,t){return $k(e,t).format(n)}const ov={values(n){return ei(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=eP(n,t)}const o=xo(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),$c(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(xo(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?ov.numeric.call(this,n,e,t):""}};function eP(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Eh={formatters:ov};function tP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Eh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ua=Object.create(null),hf=Object.create(null);function Ic(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function Nd(n,e,t){return typeof e=="string"?Fc(Ic(n,e),t):Fc(Ic(n,""),e)}class nP{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Pd(s.backgroundColor),this.hoverBorderColor=(i,s)=>Pd(s.borderColor),this.hoverColor=(i,s)=>Pd(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Nd(this,e,t)}get(e){return Ic(this,e)}describe(e,t){return Nd(hf,e,t)}override(e,t){return Nd(Ua,e,t)}route(e,t,i,s){const r=Ic(this,e),o=Ic(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return cn(l)?Object.assign({},c,l):Xt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var ti=new nP({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zk,Qk,tP]);function iP(n){return!n||on(n.size)||on(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ah(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function sP(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,h,f,g;for(l=0;l<a;l++)if(f=t[l],f!=null&&!ei(f))o=Ah(n,s,r,o,f);else if(ei(f))for(c=0,h=f.length;c<h;c++)g=f[c],g!=null&&!ei(g)&&(o=Ah(n,s,r,o,g));n.restore();const p=r.length/2;if(p>t.length){for(l=0;l<p;l++)delete s[r[l]];r.splice(0,p)}return o}function fa(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function G2(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function df(n,e,t,i){av(n,e,t,i,null)}function av(n,e,t,i,s){let r,o,a,l,c,h,f,g;const p=e.pointStyle,_=e.rotation,y=e.radius;let S=(_||0)*Bk;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(S),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),p){default:s?n.ellipse(t,i,s/2,y,0,0,Xn):n.arc(t,i,y,0,Xn),n.closePath();break;case"triangle":h=s?s/2:y,n.moveTo(t+Math.sin(S)*h,i-Math.cos(S)*y),S+=B2,n.lineTo(t+Math.sin(S)*h,i-Math.cos(S)*y),S+=B2,n.lineTo(t+Math.sin(S)*h,i-Math.cos(S)*y),n.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(S+da)*l,f=Math.cos(S+da)*(s?s/2-c:l),a=Math.sin(S+da)*l,g=Math.sin(S+da)*(s?s/2-c:l),n.arc(t-f,i-a,c,S-An,S-mi),n.arc(t+g,i-o,c,S-mi,S),n.arc(t+f,i+a,c,S,S+mi),n.arc(t-g,i+o,c,S+mi,S+An),n.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*y,h=s?s/2:l,n.rect(t-h,i-l,2*h,2*l);break}S+=da;case"rectRot":f=Math.cos(S)*(s?s/2:y),o=Math.cos(S)*y,a=Math.sin(S)*y,g=Math.sin(S)*(s?s/2:y),n.moveTo(t-f,i-a),n.lineTo(t+g,i-o),n.lineTo(t+f,i+a),n.lineTo(t-g,i+o),n.closePath();break;case"crossRot":S+=da;case"cross":f=Math.cos(S)*(s?s/2:y),o=Math.cos(S)*y,a=Math.sin(S)*y,g=Math.sin(S)*(s?s/2:y),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o);break;case"star":f=Math.cos(S)*(s?s/2:y),o=Math.cos(S)*y,a=Math.sin(S)*y,g=Math.sin(S)*(s?s/2:y),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o),S+=da,f=Math.cos(S)*(s?s/2:y),o=Math.cos(S)*y,a=Math.sin(S)*y,g=Math.sin(S)*(s?s/2:y),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o);break;case"line":o=s?s/2:Math.cos(S)*y,a=Math.sin(S)*y,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(S)*(s?s/2:y),i+Math.sin(S)*y);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Wr(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Mh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Oh(n){n.restore()}function rP(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function oP(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function aP(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),on(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function lP(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function cP(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function za(n,e,t,i,s,r={}){const o=ei(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,aP(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&cP(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),on(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),lP(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function Uc(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*An,An,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,An,mi,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,mi,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-mi,!0),n.lineTo(t+o.topLeft,i)}const uP=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hP=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dP(n,e){const t=(""+n).match(uP);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const fP=n=>+n||0;function ap(n,e){const t={},i=cn(e),s=i?Object.keys(e):e,r=cn(n)?i?o=>Xt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=fP(r(o));return t}function lv(n){return ap(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ma(n){return ap(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Gi(n){const e=lv(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ni(n,e){n=n||{},e=e||ti.font;let t=Xt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Xt(n.style,e.style);i&&!(""+i).match(hP)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Xt(n.family,e.family),lineHeight:dP(Xt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Xt(n.weight,e.weight),string:""};return s.string=iP(s),s}function lc(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function pP(n,e,t){const{min:i,max:s}=n,r=X5(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Ko(n,e){return Object.assign(Object.create(n),e)}function lp(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=dv("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>lp([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return uv(a,l,()=>AP(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return K2(a).includes(l)},ownKeys(a){return K2(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function El(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:cv(n,i),setContext:r=>El(n,r,t,i),override:r=>El(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return uv(r,o,()=>gP(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function cv(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Wo(t)?t:()=>t,isIndexable:Wo(i)?i:()=>i}}const mP=(n,e)=>n?n+np(e):e,cp=(n,e)=>cn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function uv(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function gP(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return Wo(a)&&o.isScriptable(e)&&(a=bP(e,a,n,t)),ei(a)&&a.length&&(a=vP(e,a,n,o.isIndexable)),cp(e,a)&&(a=El(a,s,r&&r[e],o)),a}function bP(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),cp(n,l)&&(l=up(s._scopes,s,n,l)),l}function vP(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(cn(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=up(c,s,n,h);e.push(El(f,r,o&&o[n],a))}}return e}function hv(n,e,t){return Wo(n)?n(e,t):n}const _P=(n,e)=>n===!0?e:typeof n=="string"?Vo(e,n):void 0;function yP(n,e,t,i,s){for(const r of e){const o=_P(t,r);if(o){n.add(o);const a=hv(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function up(n,e,t,i){const s=e._rootScopes,r=hv(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=Y2(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=Y2(a,o,r,l,i),l===null)?!1:lp(Array.from(a),[""],s,r,()=>wP(e,t,i))}function Y2(n,e,t,i,s){for(;t;)t=yP(n,e,t,i,s);return t}function wP(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return ei(s)&&cn(t)?t:s||{}}function AP(n,e,t,i){let s;for(const r of e)if(s=dv(mP(r,n),t),typeof s<"u")return cp(n,s)?up(t,i,n,s):s}function dv(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function K2(n){let e=n._keys;return e||(e=n._keys=SP(n._scopes)),e}function SP(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function fv(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+t,h=e[c],o[a]={r:s.parse(Vo(h,r),c)};return o}const kP=Number.EPSILON||1e-14,Ml=(n,e)=>e<n.length&&!n[e].skip&&n[e],pv=n=>n==="x"?"y":"x";function PP(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=uf(r,s),l=uf(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=i*c,g=i*h;return{previous:{x:r.x-f*(o.x-s.x),y:r.y-f*(o.y-s.y)},next:{x:r.x+g*(o.x-s.x),y:r.y+g*(o.y-s.y)}}}function NP(n,e,t){const i=n.length;let s,r,o,a,l,c=Ml(n,0);for(let h=0;h<i-1;++h)if(l=c,c=Ml(n,h+1),!(!l||!c)){if(Pc(e[h],0,kP)){t[h]=t[h+1]=0;continue}s=t[h]/e[h],r=t[h+1]/e[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=s*o*e[h],t[h+1]=r*o*e[h])}}function IP(n,e,t="x"){const i=pv(t),s=n.length;let r,o,a,l=Ml(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Ml(n,c+1),!a)continue;const h=a[t],f=a[i];o&&(r=(h-o[t])/3,a[`cp1${t}`]=h-r,a[`cp1${i}`]=f-r*e[c]),l&&(r=(l[t]-h)/3,a[`cp2${t}`]=h+r,a[`cp2${i}`]=f+r*e[c])}}function LP(n,e="x"){const t=pv(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Ml(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Ml(n,o+1),!!l){if(c){const h=c[e]-l[e];s[o]=h!==0?(c[t]-l[t])/h:0}r[o]=a?c?pr(s[o-1])!==pr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}NP(n,s,r),IP(n,r,e)}function Ou(n,e,t){return Math.max(Math.min(n,t),e)}function CP(n,e){let t,i,s,r,o,a=Wr(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Wr(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Ou(s.cp1x,e.left,e.right),s.cp1y=Ou(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ou(s.cp2x,e.left,e.right),s.cp2y=Ou(s.cp2y,e.top,e.bottom)))}function TP(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")LP(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=PP(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&CP(n,t)}function hp(){return typeof window<"u"&&typeof document<"u"}function dp(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Sh(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Rh=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function DP(n,e){return Rh(n).getPropertyValue(e)}const xP=["top","right","bottom","left"];function Oa(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=xP[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const EP=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function MP(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(EP(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function va(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Rh(t),r=s.boxSizing==="border-box",o=Oa(s,"padding"),a=Oa(s,"border","width"),{x:l,y:c,box:h}=MP(n,t),f=o.left+(h&&a.left),g=o.top+(h&&a.top);let{width:p,height:_}=e;return r&&(p-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-f)/p*t.width/i),y:Math.round((c-g)/_*t.height/i)}}function OP(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&dp(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Rh(r),l=Oa(a,"border","width"),c=Oa(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=Sh(a.maxWidth,r,"clientWidth"),s=Sh(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||wh,maxHeight:s||wh}}const Ru=n=>Math.round(n*10)/10;function RP(n,e,t,i){const s=Rh(n),r=Oa(s,"margin"),o=Sh(s.maxWidth,n,"clientWidth")||wh,a=Sh(s.maxHeight,n,"clientHeight")||wh,l=OP(n,e,t);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const g=Oa(s,"border","width"),p=Oa(s,"padding");c-=p.width+g.width,h-=p.height+g.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=Ru(Math.min(c,o,l.maxWidth)),h=Ru(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ru(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Ru(Math.floor(h*i))),{width:c,height:h}}function J2(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const FP=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};hp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function X2(n,e){const t=DP(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function _a(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function BP(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function jP(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=_a(n,s,t),a=_a(s,r,t),l=_a(r,e,t),c=_a(o,a,t),h=_a(a,l,t);return _a(c,h,t)}const UP=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},zP=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Il(n,e,t){return n?UP(e,t):zP()}function mv(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function gv(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function bv(n){return n==="angle"?{between:jc,compare:Hk,normalize:qi}:{between:qr,compare:(e,t)=>e-t,normalize:e=>e}}function Z2({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function HP(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=bv(i),l=e.length;let{start:c,end:h,loop:f}=n,g,p;if(f){for(c+=l,h+=l,g=0,p=l;g<p&&o(a(e[c%l][i]),s,r);++g)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:n.style}}function vv(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=bv(i),{start:h,end:f,loop:g,style:p}=HP(n,e,t),_=[];let y=!1,S=null,w,P,x;const F=()=>l(s,x,w)&&a(s,x)!==0,U=()=>a(r,w)===0||l(r,x,w),H=()=>y||F(),L=()=>!y||U();for(let k=h,E=h;k<=f;++k)P=e[k%o],!P.skip&&(w=c(P[i]),w!==x&&(y=l(w,s,r),S===null&&H()&&(S=a(w,s)===0?k:E),S!==null&&L()&&(_.push(Z2({start:S,end:k,loop:g,count:o,style:p})),S=null),E=k,x=w));return S!==null&&_.push(Z2({start:S,end:f,loop:g,count:o,style:p})),_}function _v(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=vv(i[s],n.points,e);r.length&&t.push(...r)}return t}function qP(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function VP(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function WP(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=qP(t,s,r,i);if(i===!0)return Q2(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return Q2(n,VP(t,o,l,c),t,e)}function Q2(n,e,t,i){return!i||!i.setContext||!t?e:GP(n,e,t,i)}function GP(n,e,t,i){const s=n._chart.getContext(),r=$2(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let h=r,f=e[0].start,g=f;function p(_,y,S,w){const P=a?-1:1;if(_!==y){for(_+=l;t[_%l].skip;)_-=P;for(;t[y%l].skip;)y+=P;_%l!==y%l&&(c.push({start:_%l,end:y%l,loop:S,style:w}),h=w,f=y%l)}}for(const _ of e){f=a?f:_.start;let y=t[f%l],S;for(g=f+1;g<=_.end;g++){const w=t[g%l];S=$2(i.setContext(Ko(s,{type:"segment",p0:y,p1:w,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:o}))),YP(S,h)&&p(f,g-1,_.loop,h),y=w,h=S}f<g-1&&p(f,g-1,_.loop,h)}return c}function $2(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function YP(n,e){if(!e)return!1;const t=[],i=function(s,r){return op(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Fu(n,e,t){return n.options.clip?n[t]:e[t]}function KP(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Fu(t,e,"left"),right:Fu(t,e,"right"),top:Fu(i,e,"top"),bottom:Fu(i,e,"bottom")}:e}function yv(n,e){const t=e._clip;if(t.disabled)return!1;const i=KP(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class JP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=nv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Or=new JP;const e0="transparent",XP={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=V2(n||e0),s=i.valid&&V2(e||e0);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class ZP{constructor(e,t,i,s){const r=t[i];s=lc([e.to,s,r,e.from]);const o=lc([e.from,r,s]);this._active=!0,this._fn=e.fn||XP[e.type||typeof o],this._easing=Nc[e.easing]||Nc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=lc([e.to,t,s,e.from]),this._from=lc([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class wv{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!cn(e))return;const t=Object.keys(ti.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!cn(r))return;const o={};for(const a of t)o[a]=r[a];(ei(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=$P(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&QP(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const h=t[c];let f=r[c];const g=i.get(c);if(f)if(g&&f.active()){f.update(g,h,a);continue}else f.cancel();if(!g||!g.duration){e[c]=h;continue}r[c]=f=new ZP(g,e,c,h),s.push(f)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Or.add(this._chart,i),!0}}function QP(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function $P(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function t0(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function eN(n,e,t){if(t===!1)return!1;const i=t0(n,t),s=t0(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function tN(n){let e,t,i,s;return cn(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function Av(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function n0(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(h=!0,i.all)continue;break}c=n.values[l],ci(c)&&(r||e===0||pr(e)===pr(c))&&(e+=c)}return!h&&!i.all?0:e}function nN(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:n[h]};return a}function Id(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function iN(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function sN(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function rN(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function i0(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function s0(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=iN(r,o,i),f=e.length;let g;for(let p=0;p<f;++p){const _=e[p],{[l]:y,[c]:S}=_,w=_._stacks||(_._stacks={});g=w[c]=rN(s,h,y),g[a]=S,g._top=i0(g,o,!0,i.type),g._bottom=i0(g,o,!1,i.type);const P=g._visualValues||(g._visualValues={});P[a]=S}}function Ld(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function oN(n,e){return Ko(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function aN(n,e,t){return Ko(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function nc(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const Cd=n=>n==="reset"||n==="none",r0=(n,e)=>e?n:Object.assign({},n),lN=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Av(t,!0),values:null};class Gs{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Id(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&nc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(f,g,p,_)=>f==="x"?g:f==="r"?_:p,r=t.xAxisID=Xt(i.xAxisID,Ld(e,"x")),o=t.yAxisID=Xt(i.yAxisID,Ld(e,"y")),a=t.rAxisID=Xt(i.rAxisID,Ld(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),h=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&z2(this._data,this),e._stacked&&nc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(cn(t)){const s=this._cachedMeta;this._data=nN(t,s)}else if(i!==t){if(i){z2(i,this);const s=this._cachedMeta;nc(s),s._parsed=[]}t&&Object.isExtensible(t)&&Gk(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Id(t.vScale,t),t.stack!==i.stack&&(s=!0,nc(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(s0(this,t._parsed),t._stacked=Id(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,f,g;if(this._parsing===!1)i._parsed=s,i._sorted=!0,g=s;else{ei(s[e])?g=this.parseArrayData(i,s,e,t):cn(s[e])?g=this.parseObjectData(i,s,e,t):g=this.parsePrimitiveData(i,s,e,t);const p=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<t;++h)i._parsed[h+e]=f=g[h],l&&(p()&&(l=!1),c=f);i._sorted=l}o&&s0(this,g)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,f=new Array(s);let g,p,_;for(g=0,p=s;g<p;++g)_=g+i,f[g]={[a]:h||r.parse(c[_],_),[l]:o.parse(t[_],_)};return f}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,h,f;for(l=0,c=s;l<c;++l)h=l+i,f=t[h],a[l]={x:r.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,f,g,p;for(h=0,f=s;h<f;++h)g=h+i,p=t[g],c[h]={x:r.parse(Vo(p,a),g),y:o.parse(Vo(p,l),g)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:Av(s,!0),values:t._stacks[e.axis]._visualValues};return n0(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=n0(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=lN(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=sN(a);let g,p;function _(){p=s[g];const y=p[a.axis];return!ci(p[e.axis])||h>y||f<y}for(g=0;g<o&&!(!_()&&(this.updateRangeFromParsed(c,e,p,l),r));++g);if(r){for(g=o-1;g>=0;--g)if(!_()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],ci(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=tN(Xt(this.options.clip,eN(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,r,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&c?o.push(f):f.draw(e,r))}for(h=0;h<o.length;++h)o[h].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=aN(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=oN(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Bc(i);if(a)return r0(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],g=c.getOptionScopes(this.getDataset(),h),p=Object.keys(ti.elements[e]),_=()=>this.getContext(i,s,t),y=c.resolveNamedOptions(g,p,_,f);return y.$shared&&(y.$shared=l,r[o]=Object.freeze(r0(y,l))),y}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,t),g=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(g,this.getContext(e,i,t))}const c=new wv(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Cd(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){Cd(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Cd(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&nc(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}mt(Gs,"defaults",{}),mt(Gs,"datasetElementType",null),mt(Gs,"dataElementType",null);function cN(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=tv(i.sort((s,r)=>s-r))}return n._cache.$bar}function uN(n){const e=n.iScale,t=cN(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Bc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function hN(n,e,t,i){const s=t.barThickness;let r,o;return on(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function dN(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function fN(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function Sv(n,e,t,i){return ei(n)?fN(n,e,t,i):e[t.axis]=t.parse(n,i),e}function o0(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,f,g;for(c=t,h=t+i;c<h;++c)g=e[c],f={},f[s.axis]=a||s.parse(o[c],c),l.push(Sv(g,f,r,c));return l}function Td(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function pN(n,e,t){return n!==0?pr(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function mN(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function gN(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=mN(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=h:(r[a0(h,o,a,l)]=!0,s=c)),r[a0(s,o,a,l)]=!0,n.borderSkipped=r}function a0(n,e,t,i){return i?(n=bN(n,e,t),n=l0(n,t,e)):n=l0(n,e,t),n}function bN(n,e,t){return n===e?t:n===t?e:n}function l0(n,e,t){return n==="start"?e:n==="end"?t:n}function vN(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Zu extends Gs{parsePrimitiveData(e,t,i,s){return o0(e,t,i,s)}parseArrayData(e,t,i,s){return o0(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,f=[];let g,p,_,y;for(g=i,p=i+s;g<p;++g)y=t[g],_={},_[r.axis]=r.parse(Vo(y,c),g),f.push(Sv(Vo(y,h),_,o,g));return f}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=Td(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,s);for(let p=t;p<t+i;p++){const _=this.getParsed(p),y=r||on(_[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),S=this._calculateBarIndexPixels(p,h),w=(_._stacks||{})[a.axis],P={horizontal:c,base:y.base,enableBorderRadius:!w||Td(_._custom)||o===w._top||o===w._bottom,x:c?y.head:S.center,y:c?S.center:y.head,height:c?S.size:Math.abs(y.size),width:c?Math.abs(y.size):S.size};g&&(P.options=f||this.resolveDataElementOptions(p,e[p].active?"active":s));const x=P.options||e[p].options;gN(P,x,w,o),vN(P,x,h.ratio),this.updateElement(e[p],p,P,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=h=>{const f=h._parsed.find(p=>p[i.axis]===l),g=f&&f[h.vScale.axis];if(on(g)||isNaN(g))return!0};for(const h of s)if(!(t!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Xt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||uN(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,h=Td(c);let f=l[t.axis],g=0,p=i?this.applyStack(t,l,i):f,_,y;p!==f&&(g=p-f,p=f),h&&(f=c.barStart,p=c.barEnd-c.barStart,f!==0&&pr(f)!==pr(c.barEnd)&&(g=0),g+=f);const S=!on(r)&&!h?r:g;let w=t.getPixelForValue(S);if(this.chart.getDataVisibility(e)?_=t.getPixelForValue(g+p):_=w,y=_-w,Math.abs(y)<o){y=pN(y,t,a)*o,f===a&&(w-=y/2);const P=t.getPixelForDecimal(0),x=t.getPixelForDecimal(1),F=Math.min(P,x),U=Math.max(P,x);w=Math.max(Math.min(w,U),F),_=w+y,i&&!h&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(_)-t.getValueForPixel(w))}if(w===t.getPixelForValue(a)){const P=pr(y)*t.getLineWidthForValue(a)/2;w+=P,y-=P}return{size:y,base:w,head:_,center:_+y/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=Xt(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(t.grouped){const h=r?this._getStackCount(e):t.stackCount,f=s.barThickness==="flex"?dN(e,t,s,h*c):hN(e,t,s,h*c),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(Xt(g,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+p;a=f.start+f.chunk*_+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}mt(Zu,"id","bar"),mt(Zu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),mt(Zu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qu extends Gs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Xt(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=Xt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),h=o.axis,f=a.axis;for(let g=t;g<t+i;g++){const p=e[g],_=!r&&this.getParsed(g),y={},S=y[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(_[h]),w=y[f]=r?a.getBasePixel():a.getPixelForValue(_[f]);y.skip=isNaN(S)||isNaN(w),c&&(y.options=l||this.resolveDataElementOptions(g,p.active?"active":s),r&&(y.options.radius=0)),this.updateElement(p,g,y,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=Xt(i&&i._custom,r),s}}mt(Qu,"id","bubble"),mt(Qu,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),mt(Qu,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function _N(n,e,t){let i=1,s=1,r=0,o=0;if(e<Xn){const a=n,l=a+e,c=Math.cos(a),h=Math.sin(a),f=Math.cos(l),g=Math.sin(l),p=(x,F,U)=>jc(x,a,l,!0)?1:Math.max(F,F*t,U,U*t),_=(x,F,U)=>jc(x,a,l,!0)?-1:Math.min(F,F*t,U,U*t),y=p(0,c,f),S=p(mi,h,g),w=_(An,c,f),P=_(An+mi,h,g);i=(y-w)/2,s=(S-P)/2,r=-(y+w)/2,o=-(S+P)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Na extends Gs{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(cn(i[e])){const{key:l="value"}=this._parsing;r=c=>+Vo(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Vs(this.options.rotation-90)}_getCircumference(){return Vs(this.options.circumference)}_getRotationExtents(){let e=Xn,t=-Xn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Dk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:g,ratioY:p,offsetX:_,offsetY:y}=_N(f,h,l),S=(i.width-o)/g,w=(i.height-o)/p,P=Math.max(Math.min(S,w)/2,0),x=X5(this.options.radius,P),F=Math.max(x*l,0),U=(x-F)/this._getVisibleDatasetWeightTotal();this.offsetX=_*x,this.offsetY=y*x,s.total=this.calculateTotal(),this.outerRadius=x-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/Xn)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,f=(a.top+a.bottom)/2,g=r&&c.animateScale,p=g?0:this.innerRadius,_=g?0:this.outerRadius,{sharedOptions:y,includeOptions:S}=this._getSharedOptions(t,s);let w=this._getRotation(),P;for(P=0;P<t;++P)w+=this._circumference(P,r);for(P=t;P<t+i;++P){const x=this._circumference(P,r),F=e[P],U={x:h+this.offsetX,y:f+this.offsetY,startAngle:w,endAngle:w+x,circumference:x,outerRadius:_,innerRadius:p};S&&(U.options=y||this.resolveDataElementOptions(P,F.active?"active":s)),w+=x,this.updateElement(F,P,U,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Xn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=$c(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Xt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}mt(Na,"id","doughnut"),mt(Na,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),mt(Na,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),mt(Na,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class $u extends Gs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=sv(t,s,o);this._drawStart=a,this._drawCount=l,rv(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,s),g=o.axis,p=a.axis,{spanGaps:_,segment:y}=this.options,S=xl(_)?_:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||s==="none",P=t+i,x=e.length;let F=t>0&&this.getParsed(t-1);for(let U=0;U<x;++U){const H=e[U],L=w?H:{};if(U<t||U>=P){L.skip=!0;continue}const k=this.getParsed(U),E=on(k[p]),R=L[g]=o.getPixelForValue(k[g],U),I=L[p]=r||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[p],U);L.skip=isNaN(R)||isNaN(I)||E,L.stop=U>0&&Math.abs(k[g]-F[g])>S,y&&(L.parsed=k,L.raw=c.data[U]),f&&(L.options=h||this.resolveDataElementOptions(U,H.active?"active":s)),w||this.updateElement(H,U,L,s),F=k}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}mt($u,"id","line"),mt($u,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),mt($u,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Lc extends Gs{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=$c(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return fv.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,f=c.yCenter,g=c.getIndexAngle(0)-.5*An;let p=g,_;const y=360/this.countVisibleElements();for(_=0;_<t;++_)p+=this._computeAngle(_,s,y);for(_=t;_<t+i;_++){const S=e[_];let w=p,P=p+this._computeAngle(_,s,y),x=o.getDataVisibility(_)?c.getDistanceFromCenterForValue(this.getParsed(_).r):0;p=P,r&&(l.animateScale&&(x=0),l.animateRotate&&(w=P=g));const F={x:h,y:f,innerRadius:0,outerRadius:x,startAngle:w,endAngle:P,options:this.resolveDataElementOptions(_,S.active?"active":s)};this.updateElement(S,_,F,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Vs(this.resolveDataElementOptions(e,t).angle||i):0}}mt(Lc,"id","polarArea"),mt(Lc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),mt(Lc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ff extends Na{}mt(ff,"id","pie"),mt(ff,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class eh extends Gs{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return fv.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),f=o?r.xCenter:h.x,g=o?r.yCenter:h.y,p={x:f,y:g,angle:h.angle,skip:isNaN(f)||isNaN(g),options:c};this.updateElement(l,a,p,s)}}}mt(eh,"id","radar"),mt(eh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),mt(eh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class th extends Gs{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=sv(t,i,s);if(this._drawStart=r,this._drawCount=o,rv(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(t,s),f=this.getSharedOptions(h),g=this.includeOptions(s,f),p=o.axis,_=a.axis,{spanGaps:y,segment:S}=this.options,w=xl(y)?y:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||r||s==="none";let x=t>0&&this.getParsed(t-1);for(let F=t;F<t+i;++F){const U=e[F],H=this.getParsed(F),L=P?U:{},k=on(H[_]),E=L[p]=o.getPixelForValue(H[p],F),R=L[_]=r||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,H,l):H[_],F);L.skip=isNaN(E)||isNaN(R)||k,L.stop=F>0&&Math.abs(H[p]-x[p])>w,S&&(L.parsed=H,L.raw=c.data[F]),g&&(L.options=f||this.resolveDataElementOptions(F,U.active?"active":s)),P||this.updateElement(U,F,L,s),x=H}this.updateSharedOptions(f,s,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}mt(th,"id","scatter"),mt(th,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),mt(th,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var yN=Object.freeze({__proto__:null,BarController:Zu,BubbleController:Qu,DoughnutController:Na,LineController:$u,PieController:ff,PolarAreaController:Lc,RadarController:eh,ScatterController:th});function pa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fp{constructor(e){mt(this,"options");this.options=e||{}}static override(e){Object.assign(fp.prototype,e)}init(){}formats(){return pa()}parse(){return pa()}format(){return pa()}add(){return pa()}diff(){return pa()}startOf(){return pa()}endOf(){return pa()}}var wN={_date:fp};function AN(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?Vk:Vr;if(i){if(s._sharedOptions){const h=r[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const g=c(r,e,t-f),p=c(r,e,t+f);return{lo:g.lo,hi:p.hi}}}}else{const h=c(r,e,t);if(l){const{vScale:f}=s._cachedMeta,{_parsed:g}=n,p=g.slice(0,h.lo+1).reverse().findIndex(y=>!on(y[f.axis]));h.lo-=Math.max(0,p);const _=g.slice(h.hi).findIndex(y=>!on(y[f.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function Fh(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:f,hi:g}=AN(r[a],e,o,s);for(let p=f;p<=g;++p){const _=h[p];_.skip||i(_,c,p)}}}function SN(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Dd(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||Fh(n,t,e,function(a,l,c){!s&&!Wr(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function kN(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:f}=$5(o,{x:e.x,y:e.y});jc(f,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Fh(n,t,e,r),s}function PN(n,e,t,i,s,r){let o=[];const a=SN(t);let l=Number.POSITIVE_INFINITY;function c(h,f,g){const p=h.inRange(e.x,e.y,s);if(i&&!p)return;const _=h.getCenterPoint(s);if(!(!!r||n.isPointInArea(_))&&!p)return;const S=a(e,_);S<l?(o=[{element:h,datasetIndex:f,index:g}],l=S):S===l&&o.push({element:h,datasetIndex:f,index:g})}return Fh(n,t,e,c),o}function xd(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?kN(n,e,t,s):PN(n,e,t,i,s,r)}function c0(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Fh(n,t,e,(l,c,h)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var NN={modes:{index(n,e,t,i){const s=va(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Dd(n,s,r,i,o):xd(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(n,e,t,i){const s=va(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Dd(n,s,r,i,o):xd(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,e,t,i){const s=va(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Dd(n,s,r,i,o)},nearest(n,e,t,i){const s=va(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return xd(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=va(e,n);return c0(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=va(e,n);return c0(n,s,"y",t.intersect,i)}}};const kv=["left","top","right","bottom"];function ic(n,e){return n.filter(t=>t.pos===e)}function u0(n,e){return n.filter(t=>kv.indexOf(t.pos)===-1&&t.box.axis===e)}function sc(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function IN(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function LN(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!kv.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function CN(n,e){const t=LN(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&e.availableHeight)}return t}function TN(n){const e=IN(n),t=sc(e.filter(c=>c.box.fullSize),!0),i=sc(ic(e,"left"),!0),s=sc(ic(e,"right")),r=sc(ic(e,"top"),!0),o=sc(ic(e,"bottom")),a=u0(e,"x"),l=u0(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ic(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function h0(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Pv(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function DN(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!cn(s)){t.size&&(n[s]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?r.height:r.width),t.size=f.size/f.count,n[s]+=t.size}r.getPadding&&Pv(o,r.getPadding());const a=Math.max(0,e.outerWidth-h0(o,n,"left","right")),l=Math.max(0,e.outerHeight-h0(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:h}:{same:h,other:c}}function xN(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function EN(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function cc(n,e,t,i){const s=[];let r,o,a,l,c,h;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,EN(a.horizontal,e));const{same:f,other:g}=DN(e,t,a,i);c|=f&&s.length,h=h||g,l.fullSize||s.push(a)}return c&&cc(s,e,t,i)||h}function Bu(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function d0(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*h,g=c.size||l.height;Bc(c.start)&&(o=c.start),l.fullSize?Bu(l,s.left,o,t.outerWidth-s.right-s.left,g):Bu(l,e.left+c.placed,o,f,g),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*h,g=c.size||l.width;Bc(c.start)&&(r=c.start),l.fullSize?Bu(l,r,s.top,g,t.outerHeight-s.bottom-s.top):Bu(l,r,e.top+c.placed,g,f),c.start=r,c.placed+=f,r=l.right}}e.x=r,e.y=o}var Wi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Gi(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=TN(n.boxes),l=a.vertical,c=a.horizontal;En(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const h=l.reduce((y,S)=>S.box.options&&S.box.options.display===!1?y:y+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),g=Object.assign({},s);Pv(g,Gi(i));const p=Object.assign({maxPadding:g,w:r,h:o,x:s.left,y:s.top},s),_=CN(l.concat(c),f);cc(a.fullSize,p,f,_),cc(l,p,f,_),cc(c,p,f,_)&&cc(l,p,f,_),xN(p),d0(a.leftAndTop,p,f,_),p.x+=p.w,p.y+=p.h,d0(a.rightAndBottom,p,f,_),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},En(a.chartArea,y=>{const S=y.box;Object.assign(S,n.chartArea),S.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Nv{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class MN extends Nv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const nh="$chartjs",ON={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},f0=n=>n===null||n==="";function RN(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[nh]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",f0(s)){const r=X2(n,"width");r!==void 0&&(n.width=r)}if(f0(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=X2(n,"height");r!==void 0&&(n.height=r)}return n}const Iv=FP?{passive:!0}:!1;function FN(n,e,t){n&&n.addEventListener(e,t,Iv)}function BN(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Iv)}function jN(n,e){const t=ON[n.type]||n.type,{x:i,y:s}=va(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function kh(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function UN(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||kh(a.addedNodes,i),o=o&&!kh(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function zN(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||kh(a.removedNodes,i),o=o&&!kh(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const zc=new Map;let p0=0;function Lv(){const n=window.devicePixelRatio;n!==p0&&(p0=n,zc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function HN(n,e){zc.size||window.addEventListener("resize",Lv),zc.set(n,e)}function qN(n){zc.delete(n),zc.size||window.removeEventListener("resize",Lv)}function VN(n,e,t){const i=n.canvas,s=i&&dp(i);if(!s)return;const r=iv((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),HN(n,r),o}function Ed(n,e,t){t&&t.disconnect(),e==="resize"&&qN(n)}function WN(n,e,t){const i=n.canvas,s=iv(r=>{n.ctx!==null&&t(jN(r,n))},n);return FN(i,e,s),s}class GN extends Nv{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(RN(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[nh])return!1;const i=t[nh].initial;["height","width"].forEach(r=>{const o=i[r];on(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[nh],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:UN,detach:zN,resize:VN}[t]||WN;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Ed,detach:Ed,resize:Ed}[t]||BN)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return RP(e,t,i,s)}isAttached(e){const t=e&&dp(e);return!!(t&&t.isConnected)}}function YN(n){return!hp()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?MN:GN}class Ks{constructor(){mt(this,"x");mt(this,"y");mt(this,"active",!1);mt(this,"options");mt(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return xl(this.x)&&xl(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}mt(Ks,"defaults",{}),mt(Ks,"defaultRoutes");function KN(n,e){const t=n.options.ticks,i=JN(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?ZN(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return QN(e,c,r,o/s),c;const h=XN(r,e,s);if(o>0){let f,g;const p=o>1?Math.round((l-a)/(o-1)):null;for(ju(e,c,h,on(p)?0:a-p,a),f=0,g=o-1;f<g;f++)ju(e,c,h,r[f],r[f+1]);return ju(e,c,h,l,on(p)?e.length:l+p),c}return ju(e,c,h),c}function JN(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function XN(n,e,t){const i=$N(n),s=e.length/t;if(!i)return Math.max(s,1);const r=jk(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function ZN(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function QN(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function ju(n,e,t,i,s){const r=Xt(i,0),o=Math.min(Xt(s,n.length),n.length);let a=0,l,c,h;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),h=r;h<0;)a++,h=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===h&&(e.push(n[c]),a++,h=Math.round(r+a*t))}function $N(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const eI=n=>n==="left"?"right":n==="right"?"left":n,m0=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,g0=(n,e)=>Math.min(e||n,n);function b0(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function tI(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function nI(n,e){En(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function rc(n){return n.drawTicks?n.tickLength:0}function v0(n,e){if(!n.display)return 0;const t=Ni(n.font,e),i=Gi(n.padding);return(ei(n.text)?n.text.length:1)*t.lineHeight+i.height}function iI(n,e){return Ko(n,{scale:e,type:"scale"})}function sI(n,e,t){return Ko(n,{tick:t,index:e,type:"tick"})}function rI(n,e,t){let i=rp(n);return(t&&e!=="right"||!t&&e==="right")&&(i=eI(i)),i}function oI(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let f=0,g,p,_;const y=o-s,S=a-r;if(n.isHorizontal()){if(p=Hi(i,r,a),cn(t)){const w=Object.keys(t)[0],P=t[w];_=h[w].getPixelForValue(P)+y-e}else t==="center"?_=(c.bottom+c.top)/2+y-e:_=m0(n,t,e);g=a-r}else{if(cn(t)){const w=Object.keys(t)[0],P=t[w];p=h[w].getPixelForValue(P)-S+e}else t==="center"?p=(c.left+c.right)/2-S+e:p=m0(n,t,e);_=Hi(i,o,s),f=t==="left"?-mi:mi}return{titleX:p,titleY:_,maxWidth:g,rotation:f}}class Va extends Ks{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=ms(e,Number.POSITIVE_INFINITY),t=ms(t,Number.NEGATIVE_INFINITY),i=ms(i,Number.POSITIVE_INFINITY),s=ms(s,Number.NEGATIVE_INFINITY),{min:ms(e,i),max:ms(t,s),minDefined:ci(e),maxDefined:ci(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:ms(t,ms(i,t)),max:ms(i,ms(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Wn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pP(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?b0(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Wn(this.options.afterUpdate,[this])}beforeSetDimensions(){Wn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Wn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Wn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Wn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Wn(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Wn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Wn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=g0(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,g=h.highest.height,p=Ci(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),f+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-rc(e.grid)-t.padding-v0(e.title,this.chart.options.font),c=Math.sqrt(f*f+g*g),o=ip(Math.min(Math.asin(Ci((h.highest.height+6)/a,-1,1)),Math.asin(Ci(l/c,-1,1))-Math.asin(Ci(g/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Wn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Wn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=v0(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=rc(r)+l):(e.height=this.maxHeight,e.width=rc(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:g}=this._getLabelSizes(),p=i.padding*2,_=Vs(this.labelRotation),y=Math.cos(_),S=Math.sin(_);if(a){const w=i.mirror?0:S*f.width+y*g.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=i.mirror?0:y*f.width+S*g.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(c,h,S,y)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,p=0;l?c?(g=s*e.width,p=i*t.height):(g=i*e.height,p=s*t.width):r==="start"?p=t.width:r==="end"?g=e.width:r!=="inner"&&(g=e.width/2,p=t.width/2),this.paddingLeft=Math.max((g-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let h=t.height/2,f=e.height/2;r==="start"?(h=0,f=e.height):r==="end"&&(h=t.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Wn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)on(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=b0(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/g0(t,i));let c=0,h=0,f,g,p,_,y,S,w,P,x,F,U;for(f=0;f<t;f+=l){if(_=e[f].label,y=this._resolveTickFontOptions(f),s.font=S=y.string,w=r[S]=r[S]||{data:{},gc:[]},P=y.lineHeight,x=F=0,!on(_)&&!ei(_))x=Ah(s,w.data,w.gc,x,_),F=P;else if(ei(_))for(g=0,p=_.length;g<p;++g)U=_[g],!on(U)&&!ei(U)&&(x=Ah(s,w.data,w.gc,x,U),F+=P);o.push(x),a.push(F),c=Math.max(x,c),h=Math.max(F,h)}nI(r,t);const H=o.indexOf(c),L=a.indexOf(h),k=E=>({width:o[E]||0,height:a[E]||0});return{first:k(0),last:k(t-1),widest:k(H),highest:k(L),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return qk(this._alignToPixels?fa(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=sI(this.getContext(),e,i))}return this.$context||(this.$context=iI(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Vs(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),g=rc(r),p=[],_=a.setContext(this.getContext()),y=_.display?_.width:0,S=y/2,w=function($){return fa(i,$,y)};let P,x,F,U,H,L,k,E,R,I,C,O;if(o==="top")P=w(this.bottom),L=this.bottom-g,E=P-S,I=w(e.top)+S,O=e.bottom;else if(o==="bottom")P=w(this.top),I=e.top,O=w(e.bottom)-S,L=P+S,E=this.top+g;else if(o==="left")P=w(this.right),H=this.right-g,k=P-S,R=w(e.left)+S,C=e.right;else if(o==="right")P=w(this.left),R=e.left,C=w(e.right)-S,H=P+S,k=this.left+g;else if(t==="x"){if(o==="center")P=w((e.top+e.bottom)/2+.5);else if(cn(o)){const $=Object.keys(o)[0],Z=o[$];P=w(this.chart.scales[$].getPixelForValue(Z))}I=e.top,O=e.bottom,L=P+S,E=L+g}else if(t==="y"){if(o==="center")P=w((e.left+e.right)/2);else if(cn(o)){const $=Object.keys(o)[0],Z=o[$];P=w(this.chart.scales[$].getPixelForValue(Z))}H=P-S,k=H-g,R=e.left,C=e.right}const q=Xt(s.ticks.maxTicksLimit,f),Y=Math.max(1,Math.ceil(f/q));for(x=0;x<f;x+=Y){const $=this.getContext(x),Z=r.setContext($),X=a.setContext($),Q=Z.lineWidth,re=Z.color,me=X.dash||[],B=X.dashOffset,V=Z.tickWidth,G=Z.tickColor,te=Z.tickBorderDash||[],ae=Z.tickBorderDashOffset;F=tI(this,x,l),F!==void 0&&(U=fa(i,F,Q),c?H=k=R=C=U:L=E=I=O=U,p.push({tx1:H,ty1:L,tx2:k,ty2:E,x1:R,y1:I,x2:C,y2:O,width:Q,color:re,borderDash:me,borderDashOffset:B,tickWidth:V,tickColor:G,tickBorderDash:te,tickBorderDashOffset:ae}))}return this._ticksLength=f,this._borderValue=P,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=r,g=rc(i.grid),p=g+h,_=f?-h:p,y=-Vs(this.labelRotation),S=[];let w,P,x,F,U,H,L,k,E,R,I,C,O="middle";if(s==="top")H=this.bottom-_,L=this._getXAxisLabelAlignment();else if(s==="bottom")H=this.top+_,L=this._getXAxisLabelAlignment();else if(s==="left"){const Y=this._getYAxisLabelAlignment(g);L=Y.textAlign,U=Y.x}else if(s==="right"){const Y=this._getYAxisLabelAlignment(g);L=Y.textAlign,U=Y.x}else if(t==="x"){if(s==="center")H=(e.top+e.bottom)/2+p;else if(cn(s)){const Y=Object.keys(s)[0],$=s[Y];H=this.chart.scales[Y].getPixelForValue($)+p}L=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")U=(e.left+e.right)/2-p;else if(cn(s)){const Y=Object.keys(s)[0],$=s[Y];U=this.chart.scales[Y].getPixelForValue($)}L=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const q=this._getLabelSizes();for(w=0,P=a.length;w<P;++w){x=a[w],F=x.label;const Y=r.setContext(this.getContext(w));k=this.getPixelForTick(w)+r.labelOffset,E=this._resolveTickFontOptions(w),R=E.lineHeight,I=ei(F)?F.length:1;const $=I/2,Z=Y.color,X=Y.textStrokeColor,Q=Y.textStrokeWidth;let re=L;o?(U=k,L==="inner"&&(w===P-1?re=this.options.reverse?"left":"right":w===0?re=this.options.reverse?"right":"left":re="center"),s==="top"?c==="near"||y!==0?C=-I*R+R/2:c==="center"?C=-q.highest.height/2-$*R+R:C=-q.highest.height+R/2:c==="near"||y!==0?C=R/2:c==="center"?C=q.highest.height/2-$*R:C=q.highest.height-I*R,f&&(C*=-1),y!==0&&!Y.showLabelBackdrop&&(U+=R/2*Math.sin(y))):(H=k,C=(1-I)*R/2);let me;if(Y.showLabelBackdrop){const B=Gi(Y.backdropPadding),V=q.heights[w],G=q.widths[w];let te=C-B.top,ae=0-B.left;switch(O){case"middle":te-=V/2;break;case"bottom":te-=V;break}switch(L){case"center":ae-=G/2;break;case"right":ae-=G;break;case"inner":w===P-1?ae-=G:w>0&&(ae-=G/2);break}me={left:ae,top:te,width:G+B.width,height:V+B.height,color:Y.backdropColor}}S.push({label:F,font:E,textOffset:C,options:{rotation:y,color:Z,strokeColor:X,strokeWidth:Q,textAlign:re,textBaseline:O,translation:[U,H],backdrop:me}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Vs(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,h;return t==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):t==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,g;this.isHorizontal()?(c=fa(e,this.left,o)-o/2,h=fa(e,this.right,a)+a/2,f=g=l):(f=fa(e,this.top,o)-o/2,g=fa(e,this.bottom,a)+a/2,c=h=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,f),t.lineTo(h,g),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Mh(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;za(i,c,0,h,l,a)}s&&Oh(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=Ni(i.font),o=Gi(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||cn(t)?(l+=o.bottom,ei(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:g}=oI(this,l,t,a);za(e,i.text,0,0,r,{color:i.color,maxWidth:f,rotation:g,textAlign:rI(a,t,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Xt(e.grid&&e.grid.z,-1),s=Xt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Va.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ni(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uu{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;cI(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,aI(e,o,i),this.override&&ti.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in ti[s]&&(delete ti[s][i],this.override&&delete Ua[i])}}function aI(n,e,t){const i=Fc(Object.create(null),[t?ti.get(t):{},ti.get(e),n.defaults]);ti.set(e,i),n.defaultRoutes&&lI(e,n.defaultRoutes),n.descriptors&&ti.describe(e,n.descriptors)}function lI(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");ti.route(r,s,l,a)})}function cI(n){return"id"in n&&"defaults"in n}class uI{constructor(){this.controllers=new Uu(Gs,"datasets",!0),this.elements=new Uu(Ks,"elements"),this.plugins=new Uu(Object,"plugins"),this.scales=new Uu(Va,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):En(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=np(e);Wn(i["before"+s],[],i),t[e](i),Wn(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var or=new uI;class hI{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(Wn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){on(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Xt(i.options&&i.options.plugins,{}),r=dI(i);return s===!1&&!t?[]:pI(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function dI(n){const e={},t=[],i=Object.keys(or.plugins.items);for(let r=0;r<i.length;r++)t.push(or.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function fI(n,e){return!e&&n===!1?null:n===!0?{}:n}function pI(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=fI(i[l],s);c!==null&&r.push({plugin:a,options:mI(n.config,{plugin:a,local:t[l]},c,o)})}return r}function mI(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pf(n,e){const t=ti.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gI(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function bI(n,e){return n===e?"_index_":"_value_"}function _0(n){if(n==="x"||n==="y"||n==="r")return n}function vI(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function mf(n,...e){if(_0(n))return n;for(const t of e){const i=t.axis||vI(t.position)||n.length>1&&_0(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function y0(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function _I(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return y0(n,"x",t[0])||y0(n,"y",t[0])}return{}}function yI(n,e){const t=Ua[n.type]||{scales:{}},i=e.scales||{},s=pf(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!cn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=mf(o,a,_I(o,n),ti.scales[a.type]),c=bI(l,s),h=t.scales||{};r[o]=kc(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||pf(a,e),h=(Ua[a]||{}).scales||{};Object.keys(h).forEach(f=>{const g=gI(f,l),p=o[g+"AxisID"]||g;r[p]=r[p]||Object.create(null),kc(r[p],[{axis:g},i[p],h[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];kc(a,[ti.scales[a.type],ti.scale])}),r}function Cv(n){const e=n.options||(n.options={});e.plugins=Xt(e.plugins,{}),e.scales=yI(n,e)}function Tv(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function wI(n){return n=n||{},n.data=Tv(n.data),Cv(n),n}const w0=new Map,Dv=new Set;function zu(n,e){let t=w0.get(n);return t||(t=e(),w0.set(n,t),Dv.add(t)),t}const oc=(n,e,t)=>{const i=Vo(e,t);i!==void 0&&n.add(i)};class AI{constructor(e){this._config=wI(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Tv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Cv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return zu(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return zu(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return zu(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(f=>oc(l,e,f))),h.forEach(f=>oc(l,s,f)),h.forEach(f=>oc(l,Ua[r]||{},f)),h.forEach(f=>oc(l,ti,f)),h.forEach(f=>oc(l,hf,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Dv.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ua[t]||{},ti.datasets[t]||{},{type:t},ti,hf]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=A0(this._resolverCache,e,s);let l=o;if(kI(o,t)){r.$shared=!1,i=Wo(i)?i():i;const c=this.createResolver(e,i,a);l=El(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=A0(this._resolverCache,e,i);return cn(t)?El(r,t,void 0,s):r}}function A0(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:lp(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const SI=n=>cn(n)&&Object.getOwnPropertyNames(n).some(e=>Wo(n[e]));function kI(n,e){const{isScriptable:t,isIndexable:i}=cv(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(Wo(a)||SI(a))||o&&ei(a))return!0}return!1}var PI="4.5.0";const NI=["top","bottom","left","right","chartArea"];function S0(n,e){return n==="top"||n==="bottom"||NI.indexOf(n)===-1&&e==="x"}function k0(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function P0(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Wn(t&&t.onComplete,[n],e)}function II(n){const e=n.chart,t=e.options.animation;Wn(t&&t.onProgress,[n],e)}function xv(n){return hp()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ih={},N0=n=>{const e=xv(n);return Object.values(ih).filter(t=>t.canvas===e).pop()};function LI(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function CI(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}class Br{static register(...e){or.add(...e),I0()}static unregister(...e){or.remove(...e),I0()}constructor(e,t){const i=this.config=new AI(t),s=xv(e),r=N0(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||YN(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Tk(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new hI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Yk(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ih[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Or.listen(this,"complete",P0),Or.listen(this,"progress",II),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return on(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return or}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return G2(this.canvas,this.ctx),this}stop(){return Or.stop(this),this}resize(e,t){Or.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,J2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Wn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};En(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=mf(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),En(r,o=>{const a=o.options,l=a.id,c=mf(l,a),h=Xt(a.type,o.dtype);(a.position===void 0||S0(a.position,c)!==S0(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{const g=or.getScale(h);f=new g({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,e)}),En(s,(o,a)=>{o||delete i[a]}),En(i,o=>{Wi.configure(this,o,o.options),Wi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(k0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||pf(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=or.getController(a),{datasetElementType:c,dataElementType:h}=ti.datasets[a];Object.assign(l,{dataElementType:or.getElement(h),datasetElementType:c&&or.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){En(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),g=!s&&r.indexOf(f)===-1;f.buildOrUpdateElements(g),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||En(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(k0("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){En(this.scales,e=>{Wi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!F2(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;LI(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!F2(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wi.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],En(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Wo(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Or.has(this)?this.attached&&!Or.running(this)&&Or.start(this):(this.draw(),P0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=yv(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Mh(t,s),e.controller.draw(),s&&Oh(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Wr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=NN.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Bc(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Or.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),G2(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ih[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};En(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){En(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},En(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!_h(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=Rk(e),c=CI(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Wn(r.onHover,[e,a,this],this),l&&Wn(r.onClick,[e,a,this],this));const h=!_h(a,s);return(h||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,h}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}mt(Br,"defaults",ti),mt(Br,"instances",ih),mt(Br,"overrides",Ua),mt(Br,"registry",or),mt(Br,"version",PI),mt(Br,"getChart",N0);function I0(){return En(Br.instances,n=>n._plugins.invalidate())}function TI(n,e,t){const{startAngle:i,x:s,y:r,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,f=Math.min(c/o,qi(i-t));if(n.beginPath(),n.arc(s,r,o-c/2,i+f/2,t-f/2),a>0){const g=Math.min(c/a,qi(i-t));n.arc(s,r,a+c/2,t-g/2,i+g/2,!0)}else{const g=Math.min(c/2,o*qi(i-t));if(h==="round")n.arc(s,r,g,t-An/2,i+An/2,!0);else if(h==="bevel"){const p=2*g*g,_=-p*Math.cos(t+An/2)+s,y=-p*Math.sin(t+An/2)+r,S=p*Math.cos(i+An/2)+s,w=p*Math.sin(i+An/2)+r;n.lineTo(_,y),n.lineTo(S,w)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function DI(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+mi,i-mi),n.closePath(),n.clip()}function xI(n){return ap(n,["outerStart","outerEnd","innerStart","innerEnd"])}function EI(n,e,t,i){const s=xI(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return Ci(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ci(s.innerStart,0,o),innerEnd:Ci(s.innerEnd,0,o)}}function vl(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Ph(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,f=Math.max(e.outerRadius+i+t-c,0),g=h>0?h+i+t+c:0;let p=0;const _=s-l;if(i){const Y=h>0?h-i:0,$=f>0?f-i:0,Z=(Y+$)/2,X=Z!==0?_*Z/(Z+i):_;p=(_-X)/2}const y=Math.max(.001,_*f-t/An)/f,S=(_-y)/2,w=l+S+p,P=s-S-p,{outerStart:x,outerEnd:F,innerStart:U,innerEnd:H}=EI(e,g,f,P-w),L=f-x,k=f-F,E=w+x/L,R=P-F/k,I=g+U,C=g+H,O=w+U/I,q=P-H/C;if(n.beginPath(),r){const Y=(E+R)/2;if(n.arc(o,a,f,E,Y),n.arc(o,a,f,Y,R),F>0){const Q=vl(k,R,o,a);n.arc(Q.x,Q.y,F,R,P+mi)}const $=vl(C,P,o,a);if(n.lineTo($.x,$.y),H>0){const Q=vl(C,q,o,a);n.arc(Q.x,Q.y,H,P+mi,q+Math.PI)}const Z=(P-H/g+(w+U/g))/2;if(n.arc(o,a,g,P-H/g,Z,!0),n.arc(o,a,g,Z,w+U/g,!0),U>0){const Q=vl(I,O,o,a);n.arc(Q.x,Q.y,U,O+Math.PI,w-mi)}const X=vl(L,w,o,a);if(n.lineTo(X.x,X.y),x>0){const Q=vl(L,E,o,a);n.arc(Q.x,Q.y,x,w-mi,E)}}else{n.moveTo(o,a);const Y=Math.cos(E)*f+o,$=Math.sin(E)*f+a;n.lineTo(Y,$);const Z=Math.cos(R)*f+o,X=Math.sin(R)*f+a;n.lineTo(Z,X)}n.closePath()}function MI(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){Ph(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%Xn||Xn))}return Ph(n,e,t,i,l,s),n.fill(),l}function OI(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:f,borderDashOffset:g,borderRadius:p}=l,_=l.borderAlign==="inner";if(!c)return;n.setLineDash(f||[]),n.lineDashOffset=g,_?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let y=e.endAngle;if(r){Ph(n,e,t,i,y,s);for(let S=0;S<r;++S)n.stroke();isNaN(a)||(y=o+(a%Xn||Xn))}_&&DI(n,e,y),l.selfJoin&&y-o>=An&&p===0&&h!=="miter"&&TI(n,e,y),r||(Ph(n,e,t,i,y,s),n.stroke())}class uc extends Ks{constructor(t){super();mt(this,"circumference");mt(this,"endAngle");mt(this,"fullCircles");mt(this,"innerRadius");mt(this,"outerRadius");mt(this,"pixelMargin");mt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=$5(r,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,_=Xt(g,c-l),y=jc(o,l,c)&&l!==c,S=_>=Xn||y,w=qr(a,h+p,f+p);return S&&w}getCenterPoint(t){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:h}=this.options,f=(r+o)/2,g=(a+l+h+c)/2;return{x:i+Math.cos(f)*g,y:s+Math.sin(f)*g}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Xn?Math.floor(s/Xn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(An,s||0)),h=r*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,MI(t,this,h,o,a),OI(t,this,h,o,a),t.restore()}}mt(uc,"id","arc"),mt(uc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),mt(uc,"defaultRoutes",{backgroundColor:"backgroundColor"}),mt(uc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function Ev(n,e,t=e){n.lineCap=Xt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Xt(t.borderDash,e.borderDash)),n.lineDashOffset=Xt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Xt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Xt(t.borderWidth,e.borderWidth),n.strokeStyle=Xt(t.borderColor,e.borderColor)}function RI(n,e,t){n.lineTo(t.x,t.y)}function FI(n){return n.stepped?rP:n.tension||n.cubicInterpolationMode==="monotone"?oP:RI}function Mv(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function BI(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=Mv(s,t,i),h=FI(r);let{move:f=!0,reverse:g}=i||{},p,_,y;for(p=0;p<=c;++p)_=s[(a+(g?c-p:p))%o],!_.skip&&(f?(n.moveTo(_.x,_.y),f=!1):h(n,y,_,g,r.stepped),y=_);return l&&(_=s[(a+(g?c:0))%o],h(n,y,_,g,r.stepped)),!!l}function jI(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=Mv(s,t,i),{move:l=!0,reverse:c}=i||{};let h=0,f=0,g,p,_,y,S,w;const P=F=>(o+(c?a-F:F))%r,x=()=>{y!==S&&(n.lineTo(h,S),n.lineTo(h,y),n.lineTo(h,w))};for(l&&(p=s[P(0)],n.moveTo(p.x,p.y)),g=0;g<=a;++g){if(p=s[P(g)],p.skip)continue;const F=p.x,U=p.y,H=F|0;H===_?(U<y?y=U:U>S&&(S=U),h=(f*h+F)/++f):(x(),n.lineTo(F,U),_=H,f=0,y=S=U),w=U}x()}function gf(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?jI:BI}function UI(n){return n.stepped?BP:n.tension||n.cubicInterpolationMode==="monotone"?jP:_a}function zI(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),Ev(n,e.options),n.stroke(s)}function HI(n,e,t,i){const{segments:s,options:r}=e,o=gf(e);for(const a of s)Ev(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const qI=typeof Path2D=="function";function VI(n,e,t,i){qI&&!e.options.segment?zI(n,e,t,i):HI(n,e,t,i)}class Eo extends Ks{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;TP(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=WP(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=_v(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=UI(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:g}=o[c],p=r[f],_=r[g];if(p===_){a.push(p);continue}const y=Math.abs((s-p[t])/(_[t]-p[t])),S=l(p,_,y,i.stepped);S[t]=e[t],a.push(S)}return a.length===1?a[0]:a}pathSegment(e,t,i){return gf(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=gf(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),VI(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}mt(Eo,"id","line"),mt(Eo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),mt(Eo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),mt(Eo,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function L0(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class sh extends Ks{constructor(t){super();mt(this,"parsed");mt(this,"skip");mt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return L0(this,t,"x",i)}inYRange(t,i){return L0(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Wr(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,df(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}mt(sh,"id","point"),mt(sh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),mt(sh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ov(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,h,f;return n.horizontal?(f=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-f,h=i+f):(f=r/2,a=t-f,l=t+f,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function Mo(n,e,t,i){return n?0:Ci(e,t,i)}function WI(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=lv(i);return{t:Mo(s.top,r.top,0,t),r:Mo(s.right,r.right,0,e),b:Mo(s.bottom,r.bottom,0,t),l:Mo(s.left,r.left,0,e)}}function GI(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Ma(s),o=Math.min(e,t),a=n.borderSkipped,l=i||cn(s);return{topLeft:Mo(!l||a.top||a.left,r.topLeft,0,o),topRight:Mo(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Mo(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Mo(!l||a.bottom||a.right,r.bottomRight,0,o)}}function YI(n){const e=Ov(n),t=e.right-e.left,i=e.bottom-e.top,s=WI(n,t/2,i/2),r=GI(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Md(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&Ov(n,i);return a&&(s||qr(e,a.left,a.right))&&(r||qr(t,a.top,a.bottom))}function KI(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function JI(n,e){n.rect(e.x,e.y,e.w,e.h)}function Od(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class rh extends Ks{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=YI(this),a=KI(o.radius)?Uc:JI;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Od(o,t,r)),e.clip(),a(e,Od(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Od(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return Md(this,e,t,i)}inXRange(e,t){return Md(this,e,null,t)}inYRange(e,t){return Md(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}mt(rh,"id","bar"),mt(rh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),mt(rh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var XI=Object.freeze({__proto__:null,ArcElement:uc,BarElement:rh,LineElement:Eo,PointElement:sh});const bf=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],C0=bf.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Rv(n){return bf[n%bf.length]}function Fv(n){return C0[n%C0.length]}function ZI(n,e){return n.borderColor=Rv(e),n.backgroundColor=Fv(e),++e}function QI(n,e){return n.backgroundColor=n.data.map(()=>Rv(e++)),e}function $I(n,e){return n.backgroundColor=n.data.map(()=>Fv(e++)),e}function eL(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof Na?e=QI(t,e):s instanceof Lc?e=$I(t,e):s&&(e=ZI(t,e))}}function T0(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function tL(n){return n&&(n.borderColor||n.backgroundColor)}function nL(){return ti.borderColor!=="rgba(0,0,0,0.1)"||ti.backgroundColor!=="rgba(0,0,0,0.1)"}var iL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=T0(i)||tL(s)||r&&T0(r)||nL();if(!t.forceOverride&&o)return;const a=eL(n);i.forEach(a)}};function sL(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let h=e,f,g,p,_,y;for(o[l++]=n[h],f=0;f<r-2;f++){let S=0,w=0,P;const x=Math.floor((f+1)*a)+1+e,F=Math.min(Math.floor((f+2)*a)+1,t)+e,U=F-x;for(P=x;P<F;P++)S+=n[P].x,w+=n[P].y;S/=U,w/=U;const H=Math.floor(f*a)+1+e,L=Math.min(Math.floor((f+1)*a)+1,t)+e,{x:k,y:E}=n[h];for(p=_=-1,P=H;P<L;P++)_=.5*Math.abs((k-S)*(n[P].y-E)-(k-n[P].x)*(w-E)),_>p&&(p=_,g=n[P],y=P);o[l++]=g,h=y}return o[l++]=n[c],o}function rL(n,e,t,i){let s=0,r=0,o,a,l,c,h,f,g,p,_,y;const S=[],w=e+t-1,P=n[e].x,F=n[w].x-P;for(o=e;o<e+t;++o){a=n[o],l=(a.x-P)/F*i,c=a.y;const U=l|0;if(U===h)c<_?(_=c,f=o):c>y&&(y=c,g=o),s=(r*s+a.x)/++r;else{const H=o-1;if(!on(f)&&!on(g)){const L=Math.min(f,g),k=Math.max(f,g);L!==p&&L!==H&&S.push({...n[L],x:s}),k!==p&&k!==H&&S.push({...n[k],x:s})}o>0&&H!==p&&S.push(n[H]),S.push(a),h=U,r=0,_=y=c,f=g=p=o}}return S}function Bv(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function D0(n){n.data.datasets.forEach(e=>{Bv(e)})}function oL(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Ci(Vr(e,r.axis,o).lo,0,t-1)),c?s=Ci(Vr(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var aL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){D0(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(lc([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:f,count:g}=oL(l,c);const p=t.threshold||4*i;if(g<=p){Bv(s);return}on(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let _;switch(t.algorithm){case"lttb":_=sL(c,f,g,i,t);break;case"min-max":_=rL(c,f,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=_})},destroy(n){D0(n)}};function lL(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Bh(l,c,s);const h=vf(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}const f=_v(e,h);for(const g of f){const p=vf(t,r[g.start],r[g.end],g.loop),_=vv(a,s,p);for(const y of _)o.push({source:y,target:g,start:{[t]:x0(h,p,"start",Math.max)},end:{[t]:x0(h,p,"end",Math.min)}})}}return o}function vf(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=qi(s),r=qi(r)),{property:n,start:s,end:r}}function cL(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Bh(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function Bh(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function x0(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function jv(n,e){let t=[],i=!1;return ei(n)?(i=!0,t=n):t=cL(n,e),t.length?new Eo({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function E0(n){return n&&n.fill!==!1}function uL(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ci(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function hL(n,e,t){const i=mL(n);if(cn(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ci(s)&&Math.floor(s)===s?dL(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function dL(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function fL(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:cn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function pL(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:cn(n)?i=n.value:i=e.getBaseValue(),i}function mL(n){const e=n.options,t=e.fill;let i=Xt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function gL(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=bL(e,t);a.push(jv({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)vL(s,o[h],a)}return new Eo({points:s,options:{}})}function bL(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function vL(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=_L(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function _L(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],f=o[h.start][t],g=o[h.end][t];if(qr(s,f,g)){a=s===f,l=s===g;break}}return{first:a,last:l,point:i}}class Uv{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:Xn},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function yL(n){const{chart:e,fill:t,line:i}=n;if(ci(t))return wL(e,t);if(t==="stack")return gL(n);if(t==="shape")return!0;const s=AL(n);return s instanceof Uv?s:jv(s,i)}function wL(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function AL(n){return(n.scale||{}).getPointPositionForValue?kL(n):SL(n)}function SL(n){const{scale:e={},fill:t}=n,i=fL(t,e);if(ci(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function kL(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=pL(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new Uv({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Rd(n,e,t){const i=yL(e),{chart:s,index:r,line:o,scale:a,axis:l}=e,c=o.options,h=c.fill,f=c.backgroundColor,{above:g=f,below:p=f}=h||{},_=s.getDatasetMeta(r),y=yv(s,_);i&&o.points.length&&(Mh(n,t),PL(n,{line:o,target:i,above:g,below:p,area:t,scale:a,axis:l,clip:y}),Oh(n))}function PL(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a,clip:l}=e,c=t._loop?"angle":e.axis;n.save();let h=r;r!==s&&(c==="x"?(M0(n,i,o.top),Fd(n,{line:t,target:i,color:s,scale:a,property:c,clip:l}),n.restore(),n.save(),M0(n,i,o.bottom)):c==="y"&&(O0(n,i,o.left),Fd(n,{line:t,target:i,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),O0(n,i,o.right),h=s)),Fd(n,{line:t,target:i,color:h,scale:a,property:c,clip:l}),n.restore()}function M0(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=s[l],f=s[Bh(l,c,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function O0(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=s[l],f=s[Bh(l,c,s)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(t,h.y),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(t,f.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Fd(n,e){const{line:t,target:i,property:s,color:r,scale:o,clip:a}=e,l=lL(t,i,s);for(const{source:c,target:h,start:f,end:g}of l){const{style:{backgroundColor:p=r}={}}=c,_=i!==!0;n.save(),n.fillStyle=p,NL(n,o,a,_&&vf(s,f,g)),n.beginPath();const y=!!t.pathSegment(n,c);let S;if(_){y?n.closePath():R0(n,i,g,s);const w=!!i.pathSegment(n,h,{move:y,reverse:!0});S=y&&w,S||R0(n,i,f,s)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function NL(n,e,t,i){const s=e.chart.chartArea,{property:r,start:o,end:a}=i||{};if(r==="x"||r==="y"){let l,c,h,f;r==="x"?(l=o,c=s.top,h=a,f=s.bottom):(l=s.left,c=o,h=s.right,f=a),n.beginPath(),t&&(l=Math.max(l,t.left),h=Math.min(h,t.right),c=Math.max(c,t.top),f=Math.min(f,t.bottom)),n.rect(l,c,h-l,f-c),n.clip()}}function R0(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var IL={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Eo&&(l={visible:n.isDatasetVisible(o),index:o,fill:hL(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=uL(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&Rd(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;E0(r)&&Rd(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!E0(i)||t.drawTime!=="beforeDatasetDraw"||Rd(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const F0=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},LL=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class B0 extends Ks{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Wn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Ni(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=F0(i,r);let c,h;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let f=e;r.textAlign="left",r.textBaseline="middle";let g=-1,p=-h;return this.legendItems.forEach((_,y)=>{const S=i+t/2+r.measureText(_.text).width;(y===0||c[c.length-1]+S+2*a>o)&&(f+=h,c[c.length-(y>0?0:1)]=0,p+=h,g++),l[y]={left:0,top:p,row:g,width:S,height:s},c[c.length-1]+=S+a}),f}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let f=a,g=0,p=0,_=0,y=0;return this.legendItems.forEach((S,w)=>{const{itemWidth:P,itemHeight:x}=CL(i,t,r,S,s);w>0&&p+x+2*a>h&&(f+=g+a,c.push({width:g,height:p}),_+=g+a,y++,g=p=0),l[w]={left:_,top:p,col:y,width:P,height:x},g=Math.max(g,P),p+=x+a}),f+=g,c.push({width:g,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Il(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Hi(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Hi(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Hi(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Hi(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Mh(e,this),this._draw(),Oh(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=ti.color,l=Il(e.rtl,this.left,this.width),c=Ni(o.font),{padding:h}=o,f=c.size,g=f/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:_,boxHeight:y,itemHeight:S}=F0(o,f),w=function(H,L,k){if(isNaN(_)||_<=0||isNaN(y)||y<0)return;s.save();const E=Xt(k.lineWidth,1);if(s.fillStyle=Xt(k.fillStyle,a),s.lineCap=Xt(k.lineCap,"butt"),s.lineDashOffset=Xt(k.lineDashOffset,0),s.lineJoin=Xt(k.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=Xt(k.strokeStyle,a),s.setLineDash(Xt(k.lineDash,[])),o.usePointStyle){const R={radius:y*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:E},I=l.xPlus(H,_/2),C=L+g;av(s,R,I,C,o.pointStyleWidth&&_)}else{const R=L+Math.max((f-y)/2,0),I=l.leftForLtr(H,_),C=Ma(k.borderRadius);s.beginPath(),Object.values(C).some(O=>O!==0)?Uc(s,{x:I,y:R,w:_,h:y,radius:C}):s.rect(I,R,_,y),s.fill(),E!==0&&s.stroke()}s.restore()},P=function(H,L,k){za(s,k.text,H,L+S/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},x=this.isHorizontal(),F=this._computeTitleHeight();x?p={x:Hi(r,this.left+h,this.right-i[0]),y:this.top+h+F,line:0}:p={x:this.left+h,y:Hi(r,this.top+F+h,this.bottom-t[0].height),line:0},mv(this.ctx,e.textDirection);const U=S+h;this.legendItems.forEach((H,L)=>{s.strokeStyle=H.fontColor,s.fillStyle=H.fontColor;const k=s.measureText(H.text).width,E=l.textAlign(H.textAlign||(H.textAlign=o.textAlign)),R=_+g+k;let I=p.x,C=p.y;l.setWidth(this.width),x?L>0&&I+R+h>this.right&&(C=p.y+=U,p.line++,I=p.x=Hi(r,this.left+h,this.right-i[p.line])):L>0&&C+U>this.bottom&&(I=p.x=I+t[p.line].width+h,p.line++,C=p.y=Hi(r,this.top+F+h,this.bottom-t[p.line].height));const O=l.x(I);if(w(O,C,H),I=Kk(E,I+_+g,x?I+R:this.right,e.rtl),P(l.x(I),C,H),x)p.x+=R+h;else if(typeof H.text!="string"){const q=c.lineHeight;p.y+=zv(H,q)+h}else p.y+=U}),gv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Ni(t.font),s=Gi(t.padding);if(!t.display)return;const r=Il(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let h,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),h=this.top+c,f=Hi(e.align,f,this.right-g);else{const _=this.columnSizes.reduce((y,S)=>Math.max(y,S.height),0);h=c+Hi(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const p=Hi(a,f,f+g);o.textAlign=r.textAlign(rp(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,za(o,t.text,p,h,i)}_computeTitleHeight(){const e=this.options.title,t=Ni(e.font),i=Gi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(qr(e,this.left,this.right)&&qr(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],qr(e,s.left,s.left+s.width)&&qr(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!xL(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=LL(s,i);s&&!r&&Wn(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Wn(t.onHover,[e,i,this],this)}else i&&Wn(t.onClick,[e,i,this],this)}}function CL(n,e,t,i,s){const r=TL(i,n,e,t),o=DL(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function TL(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function DL(n,e,t){let i=n;return typeof e.text!="string"&&(i=zv(e,t)),i}function zv(n,e){const t=n.text?n.text.length:0;return e*t}function xL(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var EL={id:"legend",_element:B0,start(n,e,t){const i=n.legend=new B0({ctx:n.ctx,options:t,chart:n});Wi.configure(n,i,t),Wi.addBox(n,i)},stop(n){Wi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Wi.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),h=Gi(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class pp extends Ks{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=ei(i.text)?i.text.length:1;this._padding=Gi(i.padding);const r=s*Ni(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,f;return this.isHorizontal()?(h=Hi(a,i,r),f=t+e,c=r-i):(o.position==="left"?(h=i+e,f=Hi(a,s,t),l=An*-.5):(h=r-e,f=Hi(a,t,s),l=An*.5),c=s-t),{titleX:h,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Ni(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);za(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:rp(t.align),textBaseline:"middle",translation:[o,a]})}}function ML(n,e){const t=new pp({ctx:n.ctx,options:e,chart:n});Wi.configure(n,t,e),Wi.addBox(n,t),n.titleBlock=t}var OL={id:"title",_element:pp,start(n,e,t){ML(n,t)},stop(n){const e=n.titleBlock;Wi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Wi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hu=new WeakMap;var RL={id:"subtitle",start(n,e,t){const i=new pp({ctx:n.ctx,options:t,chart:n});Wi.configure(n,i,t),Wi.addBox(n,i),Hu.set(n,i)},stop(n){Wi.removeBox(n,Hu.get(n)),Hu.delete(n)},beforeUpdate(n,e,t){const i=Hu.get(n);Wi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hc={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=uf(e,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function rr(n,e){return e&&(ei(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Rr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function FL(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function j0(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=Ni(e.bodyFont),c=Ni(e.titleFont),h=Ni(e.footerFont),f=r.length,g=s.length,p=i.length,_=Gi(e.padding);let y=_.height,S=0,w=i.reduce((F,U)=>F+U.before.length+U.lines.length+U.after.length,0);if(w+=n.beforeBody.length+n.afterBody.length,f&&(y+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),w){const F=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=p*F+(w-p)*l.lineHeight+(w-1)*e.bodySpacing}g&&(y+=e.footerMarginTop+g*h.lineHeight+(g-1)*e.footerSpacing);let P=0;const x=function(F){S=Math.max(S,t.measureText(F).width+P)};return t.save(),t.font=c.string,En(n.title,x),t.font=l.string,En(n.beforeBody.concat(n.afterBody),x),P=e.displayColors?o+2+e.boxPadding:0,En(i,F=>{En(F.before,x),En(F.lines,x),En(F.after,x)}),P=0,t.font=h.string,En(n.footer,x),t.restore(),S+=_.width,{width:S,height:y}}function BL(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function jL(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function UL(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),jL(c,n,e,t)&&(c="center"),c}function U0(n,e,t){const i=t.yAlign||e.yAlign||BL(n,t);return{xAlign:t.xAlign||e.xAlign||UL(n,e,t,i),yAlign:i}}function zL(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function HL(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function z0(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:p}=Ma(o);let _=zL(e,a);const y=HL(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,g)+s:a==="right"&&(_+=Math.max(f,p)+s),{x:Ci(_,0,i.width-e.width),y:Ci(y,0,i.height-e.height)}}function qu(n,e,t){const i=Gi(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function H0(n){return rr([],Rr(n))}function qL(n,e,t){return Ko(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function q0(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const Hv={beforeTitle:Mr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Mr,beforeBody:Mr,beforeLabel:Mr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return on(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Mr,afterBody:Mr,beforeFooter:Mr,footer:Mr,afterFooter:Mr};function rs(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?Hv[e].call(t,i):s}class _f extends Ks{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new wv(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=qL(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=rs(i,"beforeTitle",this,e),r=rs(i,"title",this,e),o=rs(i,"afterTitle",this,e);let a=[];return a=rr(a,Rr(s)),a=rr(a,Rr(r)),a=rr(a,Rr(o)),a}getBeforeBody(e,t){return H0(rs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return En(e,r=>{const o={before:[],lines:[],after:[]},a=q0(i,r);rr(o.before,Rr(rs(a,"beforeLabel",this,r))),rr(o.lines,rs(a,"label",this,r)),rr(o.after,Rr(rs(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return H0(rs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=rs(i,"beforeFooter",this,e),r=rs(i,"footer",this,e),o=rs(i,"afterFooter",this,e);let a=[];return a=rr(a,Rr(s)),a=rr(a,Rr(r)),a=rr(a,Rr(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(FL(this.chart,t[l]));return e.filter&&(a=a.filter((h,f,g)=>e.filter(h,f,g,i))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,i))),En(a,h=>{const f=q0(e.callbacks,h);s.push(rs(f,"labelColor",this,h)),r.push(rs(f,"labelPointStyle",this,h)),o.push(rs(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=hc[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=j0(this,i),c=Object.assign({},a,l),h=U0(this.chart,i,c),f=z0(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=Ma(a),{x:g,y:p}=e,{width:_,height:y}=t;let S,w,P,x,F,U;return r==="center"?(F=p+y/2,s==="left"?(S=g,w=S-o,x=F+o,U=F-o):(S=g+_,w=S+o,x=F-o,U=F+o),P=S):(s==="left"?w=g+Math.max(l,h)+o:s==="right"?w=g+_-Math.max(c,f)-o:w=this.caretX,r==="top"?(x=p,F=x-o,S=w-o,P=w+o):(x=p+y,F=x+o,S=w+o,P=w-o),U=x),{x1:S,x2:w,x3:P,y1:x,y2:F,y3:U}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Il(i.rtl,this.x,this.width);for(e.x=qu(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=Ni(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=Ni(r.bodyFont),f=qu(this,"left",r),g=s.x(f),p=l<h.lineHeight?(h.lineHeight-l)/2:0,_=t.y+p;if(r.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=s.leftForLtr(g,c)+c/2,w=_+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,df(e,y,S,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,df(e,y,S,w)}else{e.lineWidth=cn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(g,c),S=s.leftForLtr(s.xPlus(g,1),c-2),w=Ma(o.borderRadius);Object.values(w).some(P=>P!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Uc(e,{x:y,y:_,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Uc(e,{x:S,y:_+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(y,_,c,l),e.strokeRect(y,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(S,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,f=Ni(i.bodyFont);let g=f.lineHeight,p=0;const _=Il(i.rtl,this.x,this.width),y=function(k){t.fillText(k,_.x(e.x+p),e.y+g/2),e.y+=g+r},S=_.textAlign(o);let w,P,x,F,U,H,L;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=qu(this,S,i),t.fillStyle=i.bodyColor,En(this.beforeBody,y),p=a&&S!=="right"?o==="center"?c/2+h:c+2+h:0,F=0,H=s.length;F<H;++F){for(w=s[F],P=this.labelTextColors[F],t.fillStyle=P,En(w.before,y),x=w.lines,a&&x.length&&(this._drawColorBox(t,e,F,_,i),g=Math.max(f.lineHeight,l)),U=0,L=x.length;U<L;++U)y(x[U]),g=f.lineHeight;En(w.after,y)}p=0,g=f.lineHeight,En(this.afterBody,y),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Il(i.rtl,this.x,this.width);for(e.x=qu(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=Ni(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:f,topRight:g,bottomLeft:p,bottomRight:_}=Ma(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+f,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-g,l),t.quadraticCurveTo(a+c,l,a+c,l+g),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+h-_),t.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+p,l+h),t.quadraticCurveTo(a,l+h,a,l+h-p),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+f),t.quadraticCurveTo(a,l,a+f,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=hc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=j0(this,e),l=Object.assign({},o,this._size),c=U0(t,e,l),h=z0(e,l,c,t);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Gi(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),mv(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),gv(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!_h(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!_h(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=hc[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}mt(_f,"positioners",hc);var VL={id:"tooltip",_element:_f,positioners:hc,afterInit(n,e,t){t&&(n.tooltip=new _f({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},WL=Object.freeze({__proto__:null,Colors:iL,Decimation:aL,Filler:IL,Legend:EL,SubTitle:RL,Title:OL,Tooltip:VL});const GL=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function YL(n,e,t,i){const s=n.indexOf(e);if(s===-1)return GL(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const KL=(n,e)=>n===null?null:Ci(Math.round(n),0,e);function V0(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class yf extends Va{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(on(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:YL(i,e,Xt(t,e),this._addedLabels),KL(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return V0.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}mt(yf,"id","category"),mt(yf,"defaults",{ticks:{callback:V0}});function JL(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:g}=n,p=r||1,_=h-1,{min:y,max:S}=e,w=!on(o),P=!on(a),x=!on(c),F=(S-y)/(f+1);let U=j2((S-y)/_/p)*p,H,L,k,E;if(U<1e-14&&!w&&!P)return[{value:y},{value:S}];E=Math.ceil(S/U)-Math.floor(y/U),E>_&&(U=j2(E*U/_/p)*p),on(l)||(H=Math.pow(10,l),U=Math.ceil(U*H)/H),s==="ticks"?(L=Math.floor(y/U)*U,k=Math.ceil(S/U)*U):(L=y,k=S),w&&P&&r&&zk((a-o)/r,U/1e3)?(E=Math.round(Math.min((a-o)/U,h)),U=(a-o)/E,L=o,k=a):x?(L=w?o:L,k=P?a:k,E=c-1,U=(k-L)/E):(E=(k-L)/U,Pc(E,Math.round(E),U/1e3)?E=Math.round(E):E=Math.ceil(E));const R=Math.max(U2(U),U2(L));H=Math.pow(10,on(l)?R:l),L=Math.round(L*H)/H,k=Math.round(k*H)/H;let I=0;for(w&&(g&&L!==o?(t.push({value:o}),L<o&&I++,Pc(Math.round((L+I*U)*H)/H,o,W0(o,F,n))&&I++):L<o&&I++);I<E;++I){const C=Math.round((L+I*U)*H)/H;if(P&&C>a)break;t.push({value:C})}return P&&g&&k!==a?t.length&&Pc(t[t.length-1].value,a,W0(a,F,n))?t[t.length-1].value=a:t.push({value:a}):(!P||k===a)&&t.push({value:k}),t}function W0(n,e,{horizontal:t,minRotation:i}){const s=Vs(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class Nh extends Va{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return on(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=pr(s),c=pr(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=JL(s,r);return e.bounds==="ticks"&&Q5(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return $c(e,this.chart.options.locale,this.options.ticks.format)}}class wf extends Nh{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ci(e)?e:0,this.max=ci(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Vs(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}mt(wf,"id","linear"),mt(wf,"defaults",{ticks:{callback:Eh.formatters.numeric}});const Hc=n=>Math.floor(xo(n)),ma=(n,e)=>Math.pow(10,Hc(n)+e);function G0(n){return n/Math.pow(10,Hc(n))===1}function Y0(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function XL(n,e){const t=e-n;let i=Hc(t);for(;Y0(n,e,i)>10;)i++;for(;Y0(n,e,i)<10;)i--;return Math.min(i,Hc(n))}function ZL(n,{min:e,max:t}){e=ms(n.min,e);const i=[],s=Hc(e);let r=XL(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let f=Math.floor((c-h)/Math.pow(10,r)),g=ms(n.min,Math.round((l+h+f*Math.pow(10,r))*o)/o);for(;g<t;)i.push({value:g,major:G0(g),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,o=r>=0?1:o),g=Math.round((l+h+f*Math.pow(10,r))*o)/o;const p=ms(n.max,g);return i.push({value:p,major:G0(p),significand:f}),i}class Af extends Va{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Nh.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ci(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ci(e)?Math.max(0,e):null,this.max=ci(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ci(this._userMin)&&(this.min=e===ma(this.min,0)?ma(this.min,-1):ma(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(ma(i,-1)),o(ma(s,1)))),i<=0&&r(ma(s,-1)),s<=0&&o(ma(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=ZL(t,this);return e.bounds==="ticks"&&Q5(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":$c(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=xo(e),this._valueRange=xo(this.max)-xo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(xo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}mt(Af,"id","logarithmic"),mt(Af,"defaults",{ticks:{callback:Eh.formatters.logarithmic,major:{enabled:!0}}});function Sf(n){const e=n.ticks;if(e.display&&n.display){const t=Gi(e.backdropPadding);return Xt(e.font&&e.font.size,ti.font.size)+t.height}return 0}function QL(n,e,t){return t=ei(t)?t:[t],{w:sP(n,e.string,t),h:t.length*e.lineHeight}}function K0(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function $L(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?An/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),f=Ni(c.font),g=QL(n.ctx,f,n._pointLabels[l]);i[l]=g;const p=qi(n.getIndexAngle(l)+a),_=Math.round(ip(p)),y=K0(_,h.x,g.w,0,180),S=K0(_,h.y,g.h,90,270);e8(t,e,p,y,S)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=i8(n,i,s)}function e8(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function t8(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(ip(qi(l.angle+mi))),h=o8(l.y,a.h,c),f=s8(c),g=r8(l.x,a.w,f);return{visible:!0,x:l.x,y:h,textAlign:f,left:g,top:h,right:g+a.w,bottom:h+a.h}}function n8(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(Wr({x:t,y:i},e)||Wr({x:t,y:r},e)||Wr({x:s,y:i},e)||Wr({x:s,y:r},e))}function i8(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Sf(r)/2,additionalAngle:o?An/s:0};let c;for(let h=0;h<s;h++){l.padding=t[h],l.size=e[h];const f=t8(n,h,l);i.push(f),a==="auto"&&(f.visible=n8(f,c),f.visible&&(c=f))}return i}function s8(n){return n===0||n===180?"center":n<180?"left":"right"}function r8(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function o8(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function a8(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!on(a)){const l=Ma(e.borderRadius),c=Gi(e.backdropPadding);n.fillStyle=a;const h=i-c.left,f=s-c.top,g=r-i+c.width,p=o-s+c.height;Object.values(l).some(_=>_!==0)?(n.beginPath(),Uc(n,{x:h,y:f,w:g,h:p,radius:l}),n.fill()):n.fillRect(h,f,g,p)}}function l8(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));a8(t,o,r);const a=Ni(o.font),{x:l,y:c,textAlign:h}=r;za(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function qv(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,Xn);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function c8(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),qv(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function u8(n,e,t){return Ko(n,{label:t,index:e,type:"pointLabel"})}class dc extends Nh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Gi(Sf(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ci(e)&&!isNaN(e)?e:0,this.max=ci(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Sf(this.options))}generateTickLabels(e){Nh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=Wn(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?$L(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=Xn/(this._pointLabels.length||1),i=this.options.startAngle||0;return qi(e*t+Vs(i))}getDistanceFromCenterForValue(e){if(on(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(on(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return u8(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-mi+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),qv(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&l8(this,o),s.display&&this.ticks.forEach((h,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const g=this.getContext(f),p=s.setContext(g),_=r.setContext(g);c8(this,p,l,o,_)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:g}=h;!g||!f||(e.lineWidth=g,e.strokeStyle=f,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),h=Ni(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const f=Gi(c.backdropPadding);e.fillRect(-o/2-f.left,-r-h.size/2-f.top,o+f.width,h.size+f.height)}za(e,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}mt(dc,"id","radialLinear"),mt(dc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Eh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),mt(dc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),mt(dc,"descriptors",{angleLines:{_fallback:"grid"}});const jh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},os=Object.keys(jh);function J0(n,e){return n-e}function X0(n,e){if(on(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ci(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(xl(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function Z0(n,e,t,i){const s=os.length;for(let r=os.indexOf(n);r<s-1;++r){const o=jh[os[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return os[r]}return os[s-1]}function h8(n,e,t,i,s){for(let r=os.length-1;r>=os.indexOf(t);r--){const o=os[r];if(jh[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return os[t?os.indexOf(t):0]}function d8(n){for(let e=os.indexOf(n)+1,t=os.length;e<t;++e)if(jh[os[e]].common)return os[e]}function Q0(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=sp(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function f8(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function $0(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:f8(n,i,s,t)}class qc extends Va{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new wN._date(e.adapters.date);s.init(t),kc(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:X0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ci(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=ci(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Wk(s,r,o);return this._unit=t.unit||(i.autoSkip?Z0(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):h8(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:d8(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),$0(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ci(t,0,o),i=Ci(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Z0(r.minUnit,t,i,this._getLabelCapacity(t)),a=Xt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=xl(l)||l===!0,h={};let f=t,g,p;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const _=s.ticks.source==="data"&&this.getDataTimestamps();for(g=f,p=0;g<i;g=+e.add(g,a,o),p++)Q0(h,g,_);return(g===i||s.bounds==="ticks"||p===1)&&Q0(h,g,_),Object.keys(h).sort(J0).map(y=>+y)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return Wn(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],g=i[t],p=c&&f&&g&&g.major;return this._adapter.format(e,s||(p?f:h))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=Vs(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,$0(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(X0(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return tv(e.sort(J0))}}mt(qc,"id","time"),mt(qc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Vu(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Vr(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Vr(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class kf extends qc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Vu(t,this.min),this._tableRange=Vu(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Vu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Vu(this._table,i*this._tableRange+this._minPos,!0)}}mt(kf,"id","timeseries"),mt(kf,"defaults",qc.defaults);var p8=Object.freeze({__proto__:null,CategoryScale:yf,LinearScale:wf,LogarithmicScale:Af,RadialLinearScale:dc,TimeScale:qc,TimeSeriesScale:kf});const m8=[yN,XI,WL,p8];function eb(n,e,t){const i=n.slice();return i[54]=e[t],i}function tb(n,e,t){const i=n.slice();return i[54]=e[t],i}function g8(n){let e,t;return e=new ak({props:{user:n[0]}}),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.user=i[0]),e.$set(r)},i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function b8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R=n[3]&&nb(n),I=n[3]&&ib(n);function C(Q,re){return Q[3]?y8:Q[2]?v8:_8}let O=C(n),q=O(n),Y=n[2]&&ab(n);const $=[C8,L8,I8],Z=[];function X(Q,re){return Q[7]?0:Q[2]?1:2}return U=X(n),H=Z[U]=$[U](n),{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("div"),o=m("h5"),o.innerHTML='<i class="fas fa-users me-1 me-md-2"></i> <span class="d-none d-sm-inline">Patients</span> <span class="d-sm-none">Patients</span>',a=D(),l=m("button"),l.innerHTML='<i class="fas fa-plus me-1"></i> <span class="d-none d-sm-inline">Add Patient</span> <span class="d-sm-none">Add</span>',c=D(),h=m("div"),f=m("span"),f.innerHTML='<i class="fas fa-search"></i>',g=D(),p=m("input"),_=D(),R&&R.c(),y=D(),I&&I.c(),S=D(),w=m("div"),q.c(),P=D(),Y&&Y.c(),x=D(),F=m("div"),H.c(),d(o,"class","mb-0 fs-6 fs-md-5"),d(l,"class","btn btn-primary btn-sm"),d(r,"class","d-flex justify-content-between align-items-center mb-2 mb-md-3"),d(f,"class","input-group-text"),d(p,"type","text"),d(p,"class","form-control"),d(p,"placeholder","Search patients..."),d(h,"class","input-group input-group-sm"),d(s,"class","card-header px-2 px-md-3"),d(w,"class","card-body p-0 overflow-auto"),$n(w,"max-height","300px"),d(i,"class","card mb-3"),d(t,"class","col-12 col-lg-4"),d(F,"class","col-12 col-lg-8"),d(e,"class","row g-3")},m(Q,re){ue(Q,e,re),u(e,t),u(t,i),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),u(s,c),u(s,h),u(h,f),u(h,g),u(h,p),je(p,n[3]),u(h,_),R&&R.m(h,null),u(s,y),I&&I.m(s,null),u(i,S),u(i,w),q.m(w,null),u(t,P),Y&&Y.m(t,null),u(e,x),u(e,F),Z[U].m(F,null),L=!0,k||(E=[Ee(l,"click",n[26]),Ee(p,"input",n[37])],k=!0)},p(Q,re){re[0]&8&&p.value!==Q[3]&&je(p,Q[3]),Q[3]?R?R.p(Q,re):(R=nb(Q),R.c(),R.m(h,null)):R&&(R.d(1),R=null),Q[3]?I?I.p(Q,re):(I=ib(Q),I.c(),I.m(s,null)):I&&(I.d(1),I=null),O===(O=C(Q))&&q?q.p(Q,re):(q.d(1),q=O(Q),q&&(q.c(),q.m(w,null))),Q[2]?Y?(Y.p(Q,re),re[0]&4&&Pt(Y,1)):(Y=ab(Q),Y.c(),Pt(Y,1),Y.m(t,null)):Y&&(Mi(),Ot(Y,1,1,()=>{Y=null}),Oi());let me=U;U=X(Q),U===me?Z[U].p(Q,re):(Mi(),Ot(Z[me],1,1,()=>{Z[me]=null}),Oi(),H=Z[U],H?H.p(Q,re):(H=Z[U]=$[U](Q),H.c()),Pt(H,1),H.m(F,null))},i(Q){L||(Pt(Y),Pt(H),L=!0)},o(Q){Ot(Y),Ot(H),L=!1},d(Q){Q&&ce(e),R&&R.d(),I&&I.d(),q.d(),Y&&Y.d(),Z[U].d(),k=!1,an(E)}}}function nb(n){let e,t,i;return{c(){e=m("button"),e.innerHTML='<i class="fas fa-times"></i>',d(e,"class","btn btn-outline-secondary"),d(e,"type","button"),d(e,"title","Clear search")},m(s,r){ue(s,e,r),t||(i=Ee(e,"click",n[19]),t=!0)},p:dt,d(s){s&&ce(e),t=!1,i()}}}function ib(n){let e,t,i,s,r=n[9].length+"",o,a,l=n[1].filter(n[38]).length+"",c,h,f=n[9].length!==1?"s":"",g,p,_,y,S=n[1].filter(n[34]).length>20,w=S&&sb();return{c(){e=m("div"),t=m("small"),i=m("i"),s=le(`
              Showing `),o=le(r),a=le(" of "),c=le(l),h=le(" patient"),g=le(f),p=le(' matching "'),_=le(n[3]),y=le(`"
              `),w&&w.c(),d(i,"class","fas fa-info-circle me-1"),d(t,"class","text-muted"),d(e,"class","mt-2")},m(P,x){ue(P,e,x),u(e,t),u(t,i),u(t,s),u(t,o),u(t,a),u(t,c),u(t,h),u(t,g),u(t,p),u(t,_),u(t,y),w&&w.m(t,null)},p(P,x){x[0]&512&&r!==(r=P[9].length+"")&&Se(o,r),x[0]&10&&l!==(l=P[1].filter(P[38]).length+"")&&Se(c,l),x[0]&512&&f!==(f=P[9].length!==1?"s":"")&&Se(g,f),x[0]&8&&Se(_,P[3]),x[0]&10&&(S=P[1].filter(P[34]).length>20),S?w||(w=sb(),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(P){P&&ce(e),w&&w.d()}}}function sb(n){let e,t;return{c(){e=m("br"),t=m("small"),t.innerHTML=`<i class="fas fa-exclamation-triangle me-1"></i>
                  Showing first 20 results. Refine your search for more specific results.`,d(t,"class","text-warning")},m(i,s){ue(i,e,s),ue(i,t,s)},d(i){i&&(ce(e),ce(t))}}}function v8(n){return{c:dt,m:dt,p:dt,d:dt}}function _8(n){let e;function t(r,o){return r[8]?S8:r[9].length===0?A8:w8}let i=t(n),s=i(n);return{c(){s.c(),e=gi()},m(r,o){s.m(r,o),ue(r,e,o)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&ce(e),s.d(r)}}}function y8(n){let e;function t(r,o){return r[8]?N8:r[9].length===0?P8:k8}let i=t(n),s=i(n);return{c(){s.c(),e=gi()},m(r,o){s.m(r,o),ue(r,e,o)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&ce(e),s.d(r)}}}function w8(n){let e,t=Et(n[9]),i=[];for(let s=0;s<t.length;s+=1)i[s]=rb(eb(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","list-group list-group-flush")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r[0]&33554948){t=Et(s[9]);let o;for(o=0;o<t.length;o+=1){const a=eb(s,t,o);i[o]?i[o].p(a,r):(i[o]=rb(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function A8(n){let e,t,i,s,r,o,a,l;return{c(){e=m("div"),t=m("i"),i=D(),s=m("p"),s.textContent="No patients yet. Add your first patient!",r=D(),o=m("button"),o.innerHTML='<i class="fas fa-plus me-1"></i>Get Started',d(t,"class","fas fa-user-plus fa-2x mb-2"),d(o,"class","btn btn-primary btn-sm"),d(e,"class","text-center p-3 text-muted")},m(c,h){ue(c,e,h),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),a||(l=Ee(o,"click",n[26]),a=!0)},p:dt,d(c){c&&ce(e),a=!1,l()}}}function S8(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-spinner fa-spin fa-2x text-primary mb-2"></i> <p class="text-muted">Loading patients...</p>',d(e,"class","text-center p-3")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function rb(n){let e,t,i,s,r,o,a,l=n[54].firstName+"",c,h,f=n[54].lastName+"",g,p,_,y=n[54].firstName+"",S,w,P=n[54].lastName+"",x,F,U,H,L,k,E=n[54].email.split("@")[0]+"",R,I,C,O,q=n[54].email+"",Y,$,Z,X,Q,re=n[54].idNumber+"",me,B,V,G,te,ae,fe=n[54].dateOfBirth+"",ve,he,ye,Ae=new Date(n[54].dateOfBirth).getFullYear()+"",Me,Te,De,de,W;function _e(){return n[40](n[54])}return{c(){var Ie;e=m("button"),t=m("div"),i=m("div"),s=m("h6"),r=m("i"),o=D(),a=m("span"),c=le(l),h=D(),g=le(f),p=D(),_=m("span"),S=le(y),w=D(),x=le(P),F=D(),U=m("p"),H=m("i"),L=D(),k=m("span"),R=le(E),I=le("..."),C=D(),O=m("span"),Y=le(q),$=D(),Z=m("small"),X=m("i"),Q=le("ID: "),me=le(re),B=D(),V=m("small"),G=m("i"),te=D(),ae=m("span"),ve=le(fe),he=D(),ye=m("span"),Me=le(Ae),Te=D(),d(r,"class","fas fa-user me-1"),d(a,"class","d-inline d-sm-none"),d(_,"class","d-none d-sm-inline"),d(s,"class","mb-1"),d(H,"class","fas fa-envelope me-1"),d(k,"class","d-inline d-md-none"),d(O,"class","d-none d-md-inline"),d(U,"class","mb-1 text-muted small"),d(X,"class","fas fa-id-card me-1"),d(Z,"class","text-muted"),d(i,"class","flex-grow-1"),d(G,"class","fas fa-calendar me-1"),d(ae,"class","d-none d-lg-inline"),d(ye,"class","d-inline d-lg-none"),d(V,"class","text-muted ms-2"),d(t,"class","d-flex w-100 justify-content-between align-items-start"),d(e,"class",De="list-group-item list-group-item-action "+(((Ie=n[2])==null?void 0:Ie.id)===n[54].id?"active":""))},m(Ie,be){ue(Ie,e,be),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(a,c),u(a,h),u(a,g),u(s,p),u(s,_),u(_,S),u(_,w),u(_,x),u(i,F),u(i,U),u(U,H),u(U,L),u(U,k),u(k,R),u(k,I),u(U,C),u(U,O),u(O,Y),u(i,$),u(i,Z),u(Z,X),u(Z,Q),u(Z,me),u(t,B),u(t,V),u(V,G),u(V,te),u(V,ae),u(ae,ve),u(V,he),u(V,ye),u(ye,Me),u(e,Te),de||(W=Ee(e,"click",_e),de=!0)},p(Ie,be){var Le;n=Ie,be[0]&512&&l!==(l=n[54].firstName+"")&&Se(c,l),be[0]&512&&f!==(f=n[54].lastName+"")&&Se(g,f),be[0]&512&&y!==(y=n[54].firstName+"")&&Se(S,y),be[0]&512&&P!==(P=n[54].lastName+"")&&Se(x,P),be[0]&512&&E!==(E=n[54].email.split("@")[0]+"")&&Se(R,E),be[0]&512&&q!==(q=n[54].email+"")&&Se(Y,q),be[0]&512&&re!==(re=n[54].idNumber+"")&&Se(me,re),be[0]&512&&fe!==(fe=n[54].dateOfBirth+"")&&Se(ve,fe),be[0]&512&&Ae!==(Ae=new Date(n[54].dateOfBirth).getFullYear()+"")&&Se(Me,Ae),be[0]&516&&De!==(De="list-group-item list-group-item-action "+(((Le=n[2])==null?void 0:Le.id)===n[54].id?"active":""))&&d(e,"class",De)},d(Ie){Ie&&ce(e),de=!1,W()}}}function k8(n){let e,t=Et(n[9]),i=[];for(let s=0;s<t.length;s+=1)i[s]=ob(tb(n,t,s));return{c(){e=m("div");for(let s=0;s<i.length;s+=1)i[s].c();d(e,"class","list-group list-group-flush")},m(s,r){ue(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r[0]&33554948){t=Et(s[9]);let o;for(o=0;o<t.length;o+=1){const a=tb(s,t,o);i[o]?i[o].p(a,r):(i[o]=ob(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){s&&ce(e),On(i,s)}}}function P8(n){let e,t,i,s,r,o,a,l,c,h,f;return{c(){e=m("div"),t=m("i"),i=D(),s=m("p"),r=le('No patients found matching "'),o=le(n[3]),a=le('"'),l=D(),c=m("button"),c.innerHTML='<i class="fas fa-times me-1"></i>Clear Search',d(t,"class","fas fa-search fa-2x mb-2"),d(c,"class","btn btn-outline-primary btn-sm"),d(e,"class","text-center p-3 text-muted")},m(g,p){ue(g,e,p),u(e,t),u(e,i),u(e,s),u(s,r),u(s,o),u(s,a),u(e,l),u(e,c),h||(f=Ee(c,"click",n[19]),h=!0)},p(g,p){p[0]&8&&Se(o,g[3])},d(g){g&&ce(e),h=!1,f()}}}function N8(n){let e;return{c(){e=m("div"),e.innerHTML='<i class="fas fa-spinner fa-spin fa-2x text-primary mb-2"></i> <p class="text-muted">Loading patients...</p>',d(e,"class","text-center p-3")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function ob(n){let e,t,i,s,r,o,a,l=n[54].firstName+"",c,h,f=n[54].lastName+"",g,p,_,y=n[54].firstName+"",S,w,P=n[54].lastName+"",x,F,U,H,L,k,E=n[54].email.split("@")[0]+"",R,I,C,O,q=n[54].email+"",Y,$,Z,X,Q,re=n[54].idNumber+"",me,B,V,G,te,ae,fe=n[54].dateOfBirth+"",ve,he,ye,Ae=new Date(n[54].dateOfBirth).getFullYear()+"",Me,Te,De,de,W;function _e(){return n[39](n[54])}return{c(){var Ie;e=m("button"),t=m("div"),i=m("div"),s=m("h6"),r=m("i"),o=D(),a=m("span"),c=le(l),h=D(),g=le(f),p=D(),_=m("span"),S=le(y),w=D(),x=le(P),F=D(),U=m("p"),H=m("i"),L=D(),k=m("span"),R=le(E),I=le("..."),C=D(),O=m("span"),Y=le(q),$=D(),Z=m("small"),X=m("i"),Q=le("ID: "),me=le(re),B=D(),V=m("small"),G=m("i"),te=D(),ae=m("span"),ve=le(fe),he=D(),ye=m("span"),Me=le(Ae),Te=D(),d(r,"class","fas fa-user me-1"),d(a,"class","d-inline d-sm-none"),d(_,"class","d-none d-sm-inline"),d(s,"class","mb-1"),d(H,"class","fas fa-envelope me-1"),d(k,"class","d-inline d-md-none"),d(O,"class","d-none d-md-inline"),d(U,"class","mb-1 text-muted small"),d(X,"class","fas fa-id-card me-1"),d(Z,"class","text-muted"),d(i,"class","flex-grow-1"),d(G,"class","fas fa-calendar me-1"),d(ae,"class","d-none d-lg-inline"),d(ye,"class","d-inline d-lg-none"),d(V,"class","text-muted ms-2"),d(t,"class","d-flex w-100 justify-content-between align-items-start"),d(e,"class",De="list-group-item list-group-item-action "+(((Ie=n[2])==null?void 0:Ie.id)===n[54].id?"active":""))},m(Ie,be){ue(Ie,e,be),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(a,c),u(a,h),u(a,g),u(s,p),u(s,_),u(_,S),u(_,w),u(_,x),u(i,F),u(i,U),u(U,H),u(U,L),u(U,k),u(k,R),u(k,I),u(U,C),u(U,O),u(O,Y),u(i,$),u(i,Z),u(Z,X),u(Z,Q),u(Z,me),u(t,B),u(t,V),u(V,G),u(V,te),u(V,ae),u(ae,ve),u(V,he),u(V,ye),u(ye,Me),u(e,Te),de||(W=Ee(e,"click",_e),de=!0)},p(Ie,be){var Le;n=Ie,be[0]&512&&l!==(l=n[54].firstName+"")&&Se(c,l),be[0]&512&&f!==(f=n[54].lastName+"")&&Se(g,f),be[0]&512&&y!==(y=n[54].firstName+"")&&Se(S,y),be[0]&512&&P!==(P=n[54].lastName+"")&&Se(x,P),be[0]&512&&E!==(E=n[54].email.split("@")[0]+"")&&Se(R,E),be[0]&512&&q!==(q=n[54].email+"")&&Se(Y,q),be[0]&512&&re!==(re=n[54].idNumber+"")&&Se(me,re),be[0]&512&&fe!==(fe=n[54].dateOfBirth+"")&&Se(ve,fe),be[0]&512&&Ae!==(Ae=new Date(n[54].dateOfBirth).getFullYear()+"")&&Se(Me,Ae),be[0]&516&&De!==(De="list-group-item list-group-item-action "+(((Le=n[2])==null?void 0:Le.id)===n[54].id?"active":""))&&d(e,"class",De)},d(Ie){Ie&&ce(e),de=!1,W()}}}function ab(n){let e,t;return e=new $S({props:{selectedPatient:n[2],illnesses:n[4],prescriptions:n[5],symptoms:n[6],activeMedicalTab:n[14],showSymptomsNotes:n[11],showIllnessesNotes:n[12],showPrescriptionsNotes:n[13],addToPrescription:n[31],hasNotes:n[30],toggleSymptomsNotes:n[27],toggleIllnessesNotes:n[28],togglePrescriptionsNotes:n[29],groupByDate:n[32]}}),e.$on("tabChange",n[41]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p(i,s){const r={};s[0]&4&&(r.selectedPatient=i[2]),s[0]&16&&(r.illnesses=i[4]),s[0]&32&&(r.prescriptions=i[5]),s[0]&64&&(r.symptoms=i[6]),s[0]&16384&&(r.activeMedicalTab=i[14]),s[0]&2048&&(r.showSymptomsNotes=i[11]),s[0]&4096&&(r.showIllnessesNotes=i[12]),s[0]&8192&&(r.showPrescriptionsNotes=i[13]),e.$set(r)},i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function I8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x=(n[16]||"Not specified")+"",F,U,H,L,k,E,R,I,C,O,q=n[1].length+"",Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt,Rt,ft;return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("div"),o=m("div"),o.innerHTML='<i class="fas fa-user-md fa-2x text-primary"></i>',a=D(),l=m("div"),c=m("h4"),h=le("Welcome, Dr. "),f=le(n[17]),g=le("!"),p=D(),_=m("p"),_.textContent="Ready to provide excellent patient care with AI-powered assistance",y=D(),S=m("p"),w=m("i"),P=le(`
                             Country: `),F=le(x),U=D(),H=m("div"),L=m("div"),k=m("div"),E=m("div"),R=m("div"),R.innerHTML='<div class="bg-white bg-opacity-25 rounded-circle p-1 p-md-2"><i class="fas fa-users fa-sm fa-md-lg"></i></div>',I=D(),C=m("div"),O=m("h4"),Y=le(q),$=D(),Z=m("small"),Z.textContent="Patients Registered",X=D(),Q=m("small"),Q.textContent="Patients",re=D(),me=m("div"),B=m("div"),V=m("div"),G=m("div"),te=m("div"),te.innerHTML='<div class="bg-white bg-opacity-25 rounded-circle p-1 p-md-2"><i class="fas fa-prescription fa-sm fa-md-lg"></i></div>',ae=D(),fe=m("div"),ve=m("h4"),ve.textContent=`${n[22]()}`,he=D(),ye=m("small"),ye.textContent="Total Prescriptions",Ae=D(),Me=m("small"),Me.textContent="Prescriptions",Te=D(),De=m("div"),de=m("div"),W=m("div"),_e=m("div"),Ie=m("div"),Ie.innerHTML='<div class="bg-white bg-opacity-25 rounded-circle p-1 p-md-2"><i class="fas fa-pills fa-sm fa-md-lg"></i></div>',be=D(),Le=m("div"),We=m("h4"),We.textContent=`${n[23]()}`,Je=D(),Ue=m("small"),Ue.textContent="Total Drugs",Ye=D(),ht=m("small"),ht.textContent="Drugs",it=D(),ze=m("div"),Ge=m("div"),qe=m("div"),ot=m("div"),Xe=m("div"),Xe.innerHTML='<div class="bg-white bg-opacity-25 rounded-circle p-1 p-md-2"><i class="fas fa-store fa-sm fa-md-lg"></i></div>',Mt=D(),gt=m("div"),Ft=m("h4"),Ft.textContent=`${n[24]()}`,xt=D(),Qe=m("small"),Qe.textContent="Connected Pharmacies",vt=D(),pt=m("small"),pt.textContent="Pharmacies",Rt=D(),ft=m("div"),ft.innerHTML='<div class="card border-0 shadow-sm"><div class="card-header bg-light border-0 py-2 py-md-3 px-2 px-md-3"><h6 class="card-title mb-0 fw-bold text-dark fs-6 fs-md-5"><i class="fas fa-chart-line me-1 me-md-2 text-primary"></i> <span class="d-none d-sm-inline">Prescriptions Per Day (Last 30 Days)</span> <span class="d-sm-none">Prescriptions Per Day</span></h6></div> <div class="card-body p-2 p-md-4"><div class="chart-container position-relative w-100" style="height: 250px;"><canvas id="prescriptionsChart" class="rounded"></canvas></div></div></div>',d(o,"class","flex-shrink-0"),d(c,"class","card-title mb-1 fw-bold text-dark"),d(_,"class","card-text mb-0 text-muted"),d(w,"class","fas fa-map-marker-alt me-1"),d(S,"class","card-text mt-2 mb-0 text-muted small"),d(l,"class","flex-grow-1 ms-3"),d(r,"class","d-flex align-items-center"),d(s,"class","card-body bg-transparent text-dark rounded-3"),d(i,"class","card border-primary shadow-sm"),d(t,"class","col-12"),d(t,"key",n[18]),d(R,"class","flex-shrink-0"),d(O,"class","card-title mb-0 fw-bold fs-5 fs-md-4"),d(O,"id","totalPatients"),d(Z,"class","opacity-75 d-none d-sm-block"),d(Q,"class","opacity-75 d-sm-none"),d(C,"class","flex-grow-1 ms-2 ms-md-3"),d(E,"class","d-flex align-items-center"),d(k,"class","card-body bg-info text-white rounded-3 p-2 p-md-3"),d(L,"class","card border-0 shadow-sm h-100"),d(H,"class","col-6 col-md-4"),d(te,"class","flex-shrink-0"),d(ve,"class","card-title mb-0 fw-bold fs-5 fs-md-4"),d(ve,"id","totalPrescriptions"),d(ye,"class","opacity-75 d-none d-sm-block"),d(Me,"class","opacity-75 d-sm-none"),d(fe,"class","flex-grow-1 ms-2 ms-md-3"),d(G,"class","d-flex align-items-center"),d(V,"class","card-body bg-warning text-dark rounded-3 p-2 p-md-3"),d(B,"class","card border-0 shadow-sm h-100"),d(me,"class","col-6 col-md-4"),d(Ie,"class","flex-shrink-0"),d(We,"class","card-title mb-0 fw-bold fs-5 fs-md-4"),d(We,"id","totalDrugs"),d(Ue,"class","opacity-75 d-none d-sm-block"),d(ht,"class","opacity-75 d-sm-none"),d(Le,"class","flex-grow-1 ms-2 ms-md-3"),d(_e,"class","d-flex align-items-center"),d(W,"class","card-body bg-secondary text-white rounded-3 p-2 p-md-3"),d(de,"class","card border-0 shadow-sm h-100"),d(De,"class","col-6 col-md-4"),d(Xe,"class","flex-shrink-0"),d(Ft,"class","card-title mb-0 fw-bold fs-5 fs-md-4"),d(Ft,"id","connectedPharmacies"),d(Qe,"class","opacity-75 d-none d-sm-block"),d(pt,"class","opacity-75 d-sm-none"),d(gt,"class","flex-grow-1 ms-2 ms-md-3"),d(ot,"class","d-flex align-items-center"),d(qe,"class","card-body bg-success text-white rounded-3 p-2 p-md-3"),d(Ge,"class","card border-0 shadow-sm h-100"),d(ze,"class","col-6 col-md-4"),d(ft,"class","col-12"),d(e,"class","row g-3")},m(ut,Lt){ue(ut,e,Lt),u(e,t),u(t,i),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),u(l,c),u(c,h),u(c,f),u(c,g),u(l,p),u(l,_),u(l,y),u(l,S),u(S,w),u(S,P),u(S,F),u(e,U),u(e,H),u(H,L),u(L,k),u(k,E),u(E,R),u(E,I),u(E,C),u(C,O),u(O,Y),u(C,$),u(C,Z),u(C,X),u(C,Q),u(e,re),u(e,me),u(me,B),u(B,V),u(V,G),u(G,te),u(G,ae),u(G,fe),u(fe,ve),u(fe,he),u(fe,ye),u(fe,Ae),u(fe,Me),u(e,Te),u(e,De),u(De,de),u(de,W),u(W,_e),u(_e,Ie),u(_e,be),u(_e,Le),u(Le,We),u(Le,Je),u(Le,Ue),u(Le,Ye),u(Le,ht),u(e,it),u(e,ze),u(ze,Ge),u(Ge,qe),u(qe,ot),u(ot,Xe),u(ot,Mt),u(ot,gt),u(gt,Ft),u(gt,xt),u(gt,Qe),u(gt,vt),u(gt,pt),u(e,Rt),u(e,ft)},p(ut,Lt){Lt[0]&131072&&Se(f,ut[17]),Lt[0]&65536&&x!==(x=(ut[16]||"Not specified")+"")&&Se(F,x),Lt[0]&262144&&d(t,"key",ut[18]),Lt[0]&2&&q!==(q=ut[1].length+"")&&Se(Y,q)},i:dt,o:dt,d(ut){ut&&ce(e)}}}function L8(n){var i,s;let e,t;return e=new BS({props:{selectedPatient:n[2],addToPrescription:n[31],refreshTrigger:n[15],doctorId:((i=n[0])==null?void 0:i.uid)||((s=n[0])==null?void 0:s.id),currentUser:n[0]}}),e.$on("dataUpdated",n[21]),{c(){Gn(e.$$.fragment)},m(r,o){zn(e,r,o),t=!0},p(r,o){var l,c;const a={};o[0]&4&&(a.selectedPatient=r[2]),o[0]&32768&&(a.refreshTrigger=r[15]),o[0]&1&&(a.doctorId=((l=r[0])==null?void 0:l.uid)||((c=r[0])==null?void 0:c.id)),o[0]&1&&(a.currentUser=r[0]),e.$set(a)},i(r){t||(Pt(e.$$.fragment,r),t=!0)},o(r){Ot(e.$$.fragment,r),t=!1},d(r){Hn(e,r)}}}function C8(n){let e,t;return e=new j6({}),e.$on("patient-added",n[20]),e.$on("cancel",n[42]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p:dt,i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function T8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I;const C=[b8,g8],O=[];function q(Y,$){return Y[10]==="patients"?0:1}return H=q(n),L=O[H]=C[H](n),{c(){e=m("div"),t=m("div"),i=m("ul"),s=m("li"),r=m("button"),o=m("i"),a=D(),l=m("span"),l.textContent="Patients",c=D(),h=m("span"),h.textContent="Patients",g=D(),p=m("li"),_=m("button"),y=m("i"),S=D(),w=m("span"),w.textContent="Pharmacists",P=D(),x=m("span"),x.textContent="Pharmacy",U=D(),L.c(),k=gi(),d(o,"class","fas fa-users me-1 me-md-2"),d(l,"class","d-none d-sm-inline"),d(h,"class","d-sm-none"),d(r,"class",f="nav-link "+(n[10]==="patients"?"active":"")+" btn-sm"),d(s,"class","nav-item"),d(y,"class","fas fa-pills me-1 me-md-2"),d(w,"class","d-none d-sm-inline"),d(x,"class","d-sm-none"),d(_,"class",F="nav-link "+(n[10]==="pharmacists"?"active":"")+" btn-sm"),d(p,"class","nav-item"),d(i,"class","nav nav-pills nav-fill"),d(t,"class","card-body py-2 px-2 px-md-3"),d(e,"class","card mb-3")},m(Y,$){ue(Y,e,$),u(e,t),u(t,i),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),u(r,c),u(r,h),u(i,g),u(i,p),u(p,_),u(_,y),u(_,S),u(_,w),u(_,P),u(_,x),ue(Y,U,$),O[H].m(Y,$),ue(Y,k,$),E=!0,R||(I=[Ee(r,"click",n[35]),Ee(_,"click",n[36])],R=!0)},p(Y,$){(!E||$[0]&1024&&f!==(f="nav-link "+(Y[10]==="patients"?"active":"")+" btn-sm"))&&d(r,"class",f),(!E||$[0]&1024&&F!==(F="nav-link "+(Y[10]==="pharmacists"?"active":"")+" btn-sm"))&&d(_,"class",F);let Z=H;H=q(Y),H===Z?O[H].p(Y,$):(Mi(),Ot(O[Z],1,1,()=>{O[Z]=null}),Oi(),L=O[H],L?L.p(Y,$):(L=O[H]=C[H](Y),L.c()),Pt(L,1),L.m(k.parentNode,k))},i(Y){E||(Pt(L),E=!0)},o(Y){Ot(L),E=!1},d(Y){Y&&(ce(e),ce(U),ce(k)),O[H].d(Y),R=!1,an(I)}}}function D8(n,e,t){let i,s,r,o;Br.register(...m8);const a=$i();let{user:l}=e,c=[],h=null,f=!1,g=null,p=!0,_="",y=[],S="patients",w=[],P=[],x=[],F=!1,U=!1,H=!1,L="prescriptions",k=0;const E=async()=>{try{t(8,p=!0),t(1,c=await kt.getPatients()),t(9,y=[...c]),console.log("Loaded patients:",c.length)}catch(W){console.error("Error loading patients:",W),t(1,c=[]),t(9,y=[])}finally{t(8,p=!1)}},R=()=>{if(!_.trim()){t(9,y=[...c]);return}const W=_.toLowerCase().trim();t(9,y=c.filter(_e=>`${_e.firstName} ${_e.lastName}`.toLowerCase().includes(W)||_e.firstName.toLowerCase().includes(W)||_e.lastName.toLowerCase().includes(W)||_e.idNumber.toLowerCase().includes(W)||_e.email.toLowerCase().includes(W)||_e.phone&&_e.phone.toLowerCase().includes(W)||_e.dateOfBirth&&_e.dateOfBirth.includes(W)).slice(0,20))},I=()=>{t(3,_=""),t(9,y=[...c]),h&&(t(2,h=null),t(4,w=[]),t(5,P=[]),t(6,x=[]))},C=async W=>{const _e=W.detail;try{if(!l){console.error("No user found for adding patient");return}const Ie=l.uid||l.id||l.email;if(!Ie){console.error("No valid doctor ID found in user object:",l);return}console.log("Adding patient with doctor ID:",Ie),console.log("Patient data:",_e);const be=await kt.createPatient({..._e,doctorId:Ie});console.log("Patient created successfully:",be),await E(),t(7,f=!1)}catch(Ie){console.error("Error adding patient:",Ie)}},O=async W=>{const{type:_e,data:Ie}=W.detail;console.log("🔄 Data updated in PatientDetails:",_e,Ie),h&&await X(h.id),_e==="ai-usage"&&a("ai-usage-updated")},q=()=>{let W=0;if(console.log("🔍 getTotalPrescriptions: Patients count:",c.length),c.length===0){console.log("🔍 getTotalPrescriptions: No patients found, checking all prescriptions in storage");const _e=kt.data.prescriptions||[];console.log("🔍 getTotalPrescriptions: All prescriptions in storage:",_e),W=_e.length}else c.forEach(_e=>{const Ie=kt.getPrescriptionsByPatientId(_e.id)||[];console.log(`🔍 getTotalPrescriptions: Patient ${_e.firstName} has ${Ie.length} prescriptions`),console.log("🔍 getTotalPrescriptions: Prescription data:",Ie),W+=Ie.length});return console.log("🔍 getTotalPrescriptions: Total prescriptions:",W),W},Y=()=>{let W=0;if(console.log("🔍 getTotalDrugs: Patients count:",c.length),c.length===0){console.log("🔍 getTotalDrugs: No patients found, checking all prescriptions in storage");const _e=kt.data.prescriptions||[];console.log("🔍 getTotalDrugs: All prescriptions in storage:",_e),_e.forEach(Ie=>{console.log("🔍 getTotalDrugs: Prescription structure:",Ie),Ie.medications&&Array.isArray(Ie.medications)?(console.log(`🔍 getTotalDrugs: Prescription has ${Ie.medications.length} medications`),W+=Ie.medications.length):(console.log("🔍 getTotalDrugs: Prescription has no medications array, counting as 1"),W+=1)})}else c.forEach(_e=>{const Ie=kt.getPrescriptionsByPatientId(_e.id)||[];console.log(`🔍 getTotalDrugs: Patient ${_e.firstName} has ${Ie.length} prescriptions`),Ie.forEach(be=>{console.log("🔍 getTotalDrugs: Prescription structure:",be),be.medications&&Array.isArray(be.medications)?(console.log(`🔍 getTotalDrugs: Prescription has ${be.medications.length} medications`),W+=be.medications.length):(console.log("🔍 getTotalDrugs: Prescription has no medications array, counting as 1"),W+=1)})});return console.log("🔍 getTotalDrugs: Total drugs:",W),W},$=()=>{if(!l)return 0;const W=kt.getDoctorByEmail(l.email);return!W||!W.connectedPharmacists?0:W.connectedPharmacists.length},Z=()=>{try{g&&(g.destroy(),g=null);const W=[],_e=[];for(let Ie=29;Ie>=0;Ie--){const be=new Date;be.setDate(be.getDate()-Ie);const Le=be.getFullYear(),We=be.getMonth()+1,Je=be.getDate(),Ue=`${Le}-${String(We).padStart(2,"0")}-${String(Je).padStart(2,"0")}`;W.push(be.toLocaleDateString("en-US",{month:"short",day:"numeric"}));let Ye=0;c.forEach(ht=>{(kt.getMedicationsByPatientId(ht.id)||[]).forEach(ze=>{const Ge=new Date(ze.createdAt||ze.dateCreated),qe=Ge.getFullYear(),ot=Ge.getMonth()+1,Xe=Ge.getDate();`${qe}-${String(ot).padStart(2,"0")}-${String(Xe).padStart(2,"0")}`===Ue&&Ye++})}),_e.push(Ye)}setTimeout(()=>{const Ie=document.getElementById("prescriptionsChart");if(!Ie)return;const be=Ie.getContext("2d");g=new Br(be,{type:"bar",data:{labels:W,datasets:[{label:"Prescriptions",data:_e,backgroundColor:"rgba(var(--bs-primary-rgb), 0.8)",borderColor:"rgba(var(--bs-primary-rgb), 1)",borderWidth:1,borderRadius:4,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(var(--bs-dark-rgb), 0.8)",titleColor:"var(--bs-light)",bodyColor:"var(--bs-light)",borderColor:"rgba(var(--bs-primary-rgb), 1)",borderWidth:1,cornerRadius:6,displayColors:!1,callbacks:{title(Le){return Le[0].label},label(Le){return`${Le.parsed.y} prescription${Le.parsed.y!==1?"s":""}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"var(--bs-secondary)",font:{size:10},maxRotation:45,minRotation:0,maxTicksLimit:15}},y:{beginAtZero:!0,grid:{color:"rgba(var(--bs-dark-rgb), 0.1)",drawBorder:!1},ticks:{color:"var(--bs-secondary)",font:{size:11},stepSize:1,callback(Le){return Number.isInteger(Le)?Le:""}}}},interaction:{intersect:!1,mode:"index"},animation:{duration:750,easing:"easeInOutQuart"}}})},200)}catch(W){console.error("Error creating prescriptions chart:",W)}},X=async W=>{try{console.log("Loading medical data for patient:",W),t(4,w=await kt.getIllnessesByPatientId(W)||[]),console.log("Loaded illnesses:",w.length),t(5,P=await kt.getMedicationsByPatientId(W)||[]),console.log("Loaded prescriptions:",P.length),t(6,x=await kt.getSymptomsByPatientId(W)||[]),console.log("Loaded symptoms:",x.length)}catch(_e){console.error("Error loading medical data:",_e),t(4,w=[]),t(5,P=[]),t(6,x=[])}},Q=W=>{t(2,h=W),W?X(W.id):(t(4,w=[]),t(5,P=[]),t(6,x=[]))},re=()=>{t(7,f=!0),t(2,h=null),t(4,w=[]),t(5,P=[]),t(6,x=[])},me=()=>{t(11,F=!F)},B=()=>{t(12,U=!U)},V=()=>{t(13,H=!H)},G=(W,_e="notes")=>W&&W.some(Ie=>Ie[_e]&&Ie[_e].trim()),te=async W=>{try{const _e={...W,createdAt:new Date().toISOString(),prescriptionDate:new Date().toISOString()},Ie=await kt.createMedication({..._e,patientId:h.id});t(5,P=[...P,Ie]),t(15,k++,k),console.log("Added to prescriptions for today:",W.name)}catch(_e){console.error("Error adding prescription:",_e)}},ae=W=>{if(!W||!Array.isArray(W))return[];const _e=W.reduce((Ie,be)=>{const Le=be.createdAt?new Date(be.createdAt).toLocaleDateString():"No date";return Ie[Le]||(Ie[Le]=[]),Ie[Le].push(be),Ie},{});return Object.entries(_e).map(([Ie,be])=>({date:Ie,items:be})).sort((Ie,be)=>{var Le,We;return new Date(((Le=be.items[0])==null?void 0:Le.createdAt)||0)-new Date(((We=Ie.items[0])==null?void 0:We.createdAt)||0)})};Go(()=>{E(),setTimeout(()=>{Z()},500)}),oh(()=>{g&&(g.destroy(),g=null)});const fe=W=>{const _e=_.toLowerCase().trim();return`${W.firstName} ${W.lastName}`.toLowerCase().includes(_e)||W.firstName.toLowerCase().includes(_e)||W.lastName.toLowerCase().includes(_e)||W.idNumber.toLowerCase().includes(_e)||W.email.toLowerCase().includes(_e)||W.phone&&W.phone.toLowerCase().includes(_e)||W.dateOfBirth&&W.dateOfBirth.includes(_e)},ve=()=>t(10,S="patients"),he=()=>t(10,S="pharmacists");function ye(){_=this.value,t(3,_)}const Ae=W=>{const _e=_.toLowerCase().trim();return`${W.firstName} ${W.lastName}`.toLowerCase().includes(_e)||W.firstName.toLowerCase().includes(_e)||W.lastName.toLowerCase().includes(_e)||W.idNumber.toLowerCase().includes(_e)||W.email.toLowerCase().includes(_e)||W.phone&&W.phone.toLowerCase().includes(_e)||W.dateOfBirth&&W.dateOfBirth.includes(_e)},Me=W=>Q(W),Te=W=>Q(W),De=W=>t(14,L=W.detail.tab),de=()=>t(7,f=!1);return n.$$set=W=>{"user"in W&&t(0,l=W.user)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(18,i=(l==null?void 0:l.id)||(l==null?void 0:l.email)||"default"),n.$$.dirty[0]&1&&l&&(console.log("PatientManagement: User updated:",l),console.log("PatientManagement: User country:",l.country),console.log("PatientManagement: User name:",l.name),console.log("PatientManagement: User firstName:",l.firstName),console.log("PatientManagement: User lastName:",l.lastName),console.log("PatientManagement: User email:",l.email)),n.$$.dirty[0]&1&&t(33,s=l?kt.getDoctorByEmail(l.email):null),n.$$.dirty[0]&1|n.$$.dirty[1]&4&&t(17,r=s?s.displayName||(s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.firstName)||(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Doctor":(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Doctor"),n.$$.dirty[1]&4&&t(16,o=(s==null?void 0:s.country)||"Not specified"),n.$$.dirty[0]&4&&h&&X(h.id),n.$$.dirty[0]&64&&x&&t(6,x=x||[]),n.$$.dirty[0]&16&&w&&t(4,w=w||[]),n.$$.dirty[0]&32&&P&&t(5,P=P||[]),n.$$.dirty[0]&2&&c.length>0&&setTimeout(()=>{Z()},100),n.$$.dirty[0]&64&&x!=null&&x.length,n.$$.dirty[0]&16&&w!=null&&w.length,n.$$.dirty[0]&32&&P!=null&&P.length,n.$$.dirty[0]&8&&_!==void 0&&R()},[l,c,h,_,w,P,x,f,p,y,S,F,U,H,L,k,o,r,i,I,C,O,q,Y,$,Q,re,me,B,V,G,te,ae,s,fe,ve,he,ye,Ae,Me,Te,De,de]}class x8 extends ii{constructor(e){super(),ni(this,e,D8,T8,Zn,{user:0},null,[-1,-1])}}function lb(n){let e,t,i,s,r,o,a,l;return{c(){e=m("div"),t=m("i"),i=D(),s=le(n[3]),r=D(),o=m("button"),d(t,"class","fas fa-exclamation-triangle me-2"),d(o,"type","button"),d(o,"class","btn-close"),d(e,"class","alert alert-danger alert-dismissible fade show"),d(e,"role","alert")},m(c,h){ue(c,e,h),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),a||(l=Ee(o,"click",n[6]),a=!0)},p(c,h){h&8&&Se(s,c[3])},d(c){c&&ce(e),a=!1,l()}}}function E8(n){let e,t;return{c(){e=m("i"),t=le(`
                    Sign In to Admin Panel`),d(e,"class","fas fa-sign-in-alt me-2")},m(i,s){ue(i,e,s),ue(i,t,s)},d(i){i&&(ce(e),ce(t))}}}function M8(n){let e,t;return{c(){e=m("span"),t=le(`
                    Signing In...`),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(i,s){ue(i,e,s),ue(i,t,s)},d(i){i&&(ce(e),ce(t))}}}function O8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$=n[3]&&lb(n);function Z(re,me){return re[2]?M8:E8}let X=Z(n),Q=X(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("div"),o=m("div"),o.innerHTML=`<div class="mb-3"><i class="fas fa-shield-alt fa-3x"></i></div> <h4 class="mb-0"><i class="fas fa-user-shield me-2"></i>
              Admin Panel</h4> <p class="mb-0 mt-2 opacity-75">System Administration</p>`,a=D(),l=m("div"),$&&$.c(),c=D(),h=m("form"),f=m("div"),g=m("label"),g.innerHTML='<i class="fas fa-envelope me-2"></i>Admin Email',p=D(),_=m("input"),y=D(),S=m("div"),w=m("label"),w.innerHTML='<i class="fas fa-lock me-2"></i>Password',P=D(),x=m("input"),F=D(),U=m("div"),H=m("button"),Q.c(),L=D(),k=m("div"),E=m("button"),R=m("i"),I=le(`
                Demo Login`),C=D(),O=m("div"),O.innerHTML=`<small class="text-muted"><i class="fas fa-info-circle me-1"></i>
              Authorized personnel only</small>`,d(o,"class","card-header bg-danger text-white text-center py-4 rounded-top"),d(g,"for","admin-email"),d(g,"class","form-label"),d(_,"type","email"),d(_,"class","form-control form-control-sm"),d(_,"id","admin-email"),d(_,"placeholder","Enter admin email"),_.required=!0,_.disabled=n[2],d(f,"class","mb-3"),d(w,"for","admin-password"),d(w,"class","form-label"),d(x,"type","password"),d(x,"class","form-control form-control-sm"),d(x,"id","admin-password"),d(x,"placeholder","Enter admin password"),x.required=!0,x.disabled=n[2],d(S,"class","mb-4"),d(H,"type","submit"),d(H,"class","btn btn-danger btn-sm"),H.disabled=n[2],d(U,"class","d-grid gap-2"),d(R,"class","fas fa-flask me-2"),d(E,"type","button"),d(E,"class","btn btn-outline-secondary btn-sm"),E.disabled=n[2],d(k,"class","mt-4 text-center"),d(l,"class","card-body p-4"),d(O,"class","card-footer bg-light text-center py-3"),d(r,"class","card shadow-lg border-0 rounded"),d(s,"class","col-12 col-sm-8 col-md-6 col-lg-4"),d(i,"class","row w-100 justify-content-center"),d(t,"class","container-fluid vh-100 d-flex align-items-center justify-content-center bg-light"),d(e,"class","min-vh-100")},m(re,me){ue(re,e,me),u(e,t),u(t,i),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),$&&$.m(l,null),u(l,c),u(l,h),u(h,f),u(f,g),u(f,p),u(f,_),je(_,n[0]),u(h,y),u(h,S),u(S,w),u(S,P),u(S,x),je(x,n[1]),u(h,F),u(h,U),u(U,H),Q.m(H,null),u(l,L),u(l,k),u(k,E),u(E,R),u(E,I),u(r,C),u(r,O),q||(Y=[Ee(_,"input",n[7]),Ee(x,"input",n[8]),Ee(h,"submit",n[4]),Ee(E,"click",n[5])],q=!0)},p(re,[me]){re[3]?$?$.p(re,me):($=lb(re),$.c(),$.m(l,c)):$&&($.d(1),$=null),me&4&&(_.disabled=re[2]),me&1&&_.value!==re[0]&&je(_,re[0]),me&4&&(x.disabled=re[2]),me&2&&x.value!==re[1]&&je(x,re[1]),X!==(X=Z(re))&&(Q.d(1),Q=X(re),Q&&(Q.c(),Q.m(H,null))),me&4&&(H.disabled=re[2]),me&4&&(E.disabled=re[2])},i:dt,o:dt,d(re){re&&ce(e),$&&$.d(),Q.d(),q=!1,an(Y)}}}function R8(n,e,t){const i=$i();let s="",r="",o=!1,a="";const l=async p=>{p.preventDefault(),t(3,a=""),t(2,o=!0);try{if(!s||!s.includes("@"))throw new Error("Please enter a valid email address");if(!r||r.length<6)throw new Error("Password must be at least 6 characters");const _=await Dl.signInAdmin(s,r);console.log("✅ Admin signed in successfully:",_),i("admin-signed-in",_)}catch(_){console.error("❌ Admin sign in error:",_),t(3,a=_.message)}finally{t(2,o=!1)}},c=()=>{t(0,s="senakahks@gmail.com"),t(1,r="admin123")},h=()=>t(3,a="");function f(){s=this.value,t(0,s)}function g(){r=this.value,t(1,r)}return[s,r,o,a,l,c,h,f,g]}class F8 extends ii{constructor(e){super(),ni(this,e,R8,O8,Zn,{})}}function cb(n,e,t){const i=n.slice();return i[27]=e[t],i}function ub(n,e,t){const i=n.slice();return i[30]=e[t],i}function hb(n,e,t){const i=n.slice();return i[24]=e[t],i}function db(n,e,t){const i=n.slice();return i[21]=e[t],i}function B8(n){var ht,it;let e,t,i,s,r,o,a,l,c,h=(((ht=n[0])==null?void 0:ht.name)||"Admin")+"",f,g,p,_,y,S,w,P=((it=n[0])==null?void 0:it.email)+"",x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae,Me,Te,De,de,W,_e,Ie,be,Le,We;function Je(ze,Ge){if(ze[6]==="overview")return V8;if(ze[6]==="doctors")return q8;if(ze[6]==="patients")return H8;if(ze[6]==="ai-usage")return z8;if(ze[6]==="system")return U8}let Ue=Je(n),Ye=Ue&&Ue(n);return{c(){e=m("nav"),t=m("div"),i=m("span"),i.innerHTML=`<i class="fas fa-shield-alt me-2"></i>
          Admin Panel`,s=D(),r=m("div"),o=m("div"),a=m("button"),l=m("i"),c=D(),f=le(h),g=D(),p=m("ul"),_=m("li"),_.innerHTML='<h6 class="dropdown-header">Admin Account</h6>',y=D(),S=m("li"),w=m("span"),x=le(P),F=D(),U=m("li"),U.innerHTML='<hr class="dropdown-divider"/>',H=D(),L=m("li"),k=m("button"),k.innerHTML='<i class="fas fa-sign-out-alt me-2"></i>Sign Out',E=D(),R=m("div"),I=m("div"),C=m("div"),O=m("div"),q=m("button"),Y=m("i"),$=le("Overview"),X=D(),Q=m("button"),re=m("i"),me=le("Doctors"),V=D(),G=m("button"),te=m("i"),ae=le("Patients"),ve=D(),he=m("button"),ye=m("i"),Ae=le("AI Usage"),Te=D(),De=m("button"),de=m("i"),W=le("System"),Ie=D(),be=m("div"),Ye&&Ye.c(),d(i,"class","navbar-brand fs-5 fw-semibold text-white py-1 my-0"),d(l,"class","fas fa-user-shield me-2"),d(a,"class","nav-link dropdown-toggle text-white border-0 bg-transparent py-1 px-2 small"),d(a,"type","button"),d(a,"data-bs-toggle","dropdown"),d(w,"class","dropdown-item-text"),d(k,"class","dropdown-item"),d(p,"class","dropdown-menu dropdown-menu-end"),d(o,"class","nav-item dropdown"),d(r,"class","navbar-nav ms-auto d-flex flex-row align-items-center m-0 p-0"),d(t,"class","container-fluid"),d(e,"class","navbar navbar-expand-lg navbar-dark bg-dark"),$n(e,"height","50px"),$n(e,"min-height","50px"),$n(e,"max-height","50px"),$n(e,"padding","0.25rem 1rem"),d(Y,"class","fas fa-chart-bar me-2"),d(q,"class",Z="list-group-item list-group-item-action "+(n[6]==="overview"?"active":"")),d(re,"class","fas fa-user-md me-2"),d(Q,"class",B="list-group-item list-group-item-action "+(n[6]==="doctors"?"active":"")),d(te,"class","fas fa-users me-2"),d(G,"class",fe="list-group-item list-group-item-action "+(n[6]==="patients"?"active":"")),d(ye,"class","fas fa-robot me-2"),d(he,"class",Me="list-group-item list-group-item-action "+(n[6]==="ai-usage"?"active":"")),d(de,"class","fas fa-cog me-2"),d(De,"class",_e="list-group-item list-group-item-action "+(n[6]==="system"?"active":"")),d(O,"class","list-group"),d(C,"class","col-md-3 col-lg-2"),d(be,"class","col-md-9 col-lg-10"),d(I,"class","row"),d(R,"class","container-fluid mt-4")},m(ze,Ge){ue(ze,e,Ge),u(e,t),u(t,i),u(t,s),u(t,r),u(r,o),u(o,a),u(a,l),u(a,c),u(a,f),u(o,g),u(o,p),u(p,_),u(p,y),u(p,S),u(S,w),u(w,x),u(p,F),u(p,U),u(p,H),u(p,L),u(L,k),ue(ze,E,Ge),ue(ze,R,Ge),u(R,I),u(I,C),u(C,O),u(O,q),u(q,Y),u(q,$),u(O,X),u(O,Q),u(Q,re),u(Q,me),u(O,V),u(O,G),u(G,te),u(G,ae),u(O,ve),u(O,he),u(he,ye),u(he,Ae),u(O,Te),u(O,De),u(De,de),u(De,W),u(I,Ie),u(I,be),Ye&&Ye.m(be,null),Le||(We=[Ee(k,"click",n[8]),Ee(q,"click",n[12]),Ee(Q,"click",n[13]),Ee(G,"click",n[14]),Ee(he,"click",n[15]),Ee(De,"click",n[16])],Le=!0)},p(ze,Ge){var qe,ot;Ge[0]&1&&h!==(h=(((qe=ze[0])==null?void 0:qe.name)||"Admin")+"")&&Se(f,h),Ge[0]&1&&P!==(P=((ot=ze[0])==null?void 0:ot.email)+"")&&Se(x,P),Ge[0]&64&&Z!==(Z="list-group-item list-group-item-action "+(ze[6]==="overview"?"active":""))&&d(q,"class",Z),Ge[0]&64&&B!==(B="list-group-item list-group-item-action "+(ze[6]==="doctors"?"active":""))&&d(Q,"class",B),Ge[0]&64&&fe!==(fe="list-group-item list-group-item-action "+(ze[6]==="patients"?"active":""))&&d(G,"class",fe),Ge[0]&64&&Me!==(Me="list-group-item list-group-item-action "+(ze[6]==="ai-usage"?"active":""))&&d(he,"class",Me),Ge[0]&64&&_e!==(_e="list-group-item list-group-item-action "+(ze[6]==="system"?"active":""))&&d(De,"class",_e),Ue===(Ue=Je(ze))&&Ye?Ye.p(ze,Ge):(Ye&&Ye.d(1),Ye=Ue&&Ue(ze),Ye&&(Ye.c(),Ye.m(be,null)))},d(ze){ze&&(ce(e),ce(E),ce(R)),Ye&&Ye.d(),Le=!1,an(We)}}}function j8(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><div class="spinner-border text-danger mb-3" role="status"><span class="visually-hidden">Loading...</span></div> <p class="text-muted">Loading admin dashboard...</p></div>',d(e,"class","d-flex justify-content-center align-items-center vh-100")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function U8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O;return{c(){e=m("div"),e.innerHTML='<h2><i class="fas fa-cog me-2 text-danger"></i>System Settings</h2>',t=D(),i=m("div"),s=m("div"),r=m("div"),o=m("div"),o.innerHTML='<h5 class="mb-0">System Information</h5>',a=D(),l=m("div"),c=m("dl"),h=m("dt"),h.textContent="Version:",f=m("dd"),f.textContent="1.0.0",g=m("dt"),g.textContent="Last Updated:",p=m("dd"),p.textContent=`${new Date().toLocaleDateString()}`,_=m("dt"),_.textContent="Admin Email:",y=m("dd"),y.textContent="senakahks@gmail.com",S=D(),w=m("div"),P=m("div"),x=m("div"),x.innerHTML='<h5 class="mb-0">Quick Actions</h5>',F=D(),U=m("div"),H=m("div"),L=m("button"),L.innerHTML='<i class="fas fa-download me-2"></i>Export Data',k=D(),E=m("button"),E.innerHTML='<i class="fas fa-backup me-2"></i>Backup System',R=D(),I=m("button"),I.innerHTML='<i class="fas fa-sync-alt me-2"></i>Refresh Data',d(e,"class","d-flex justify-content-between align-items-center mb-4"),d(o,"class","card-header"),d(h,"class","col-sm-4"),d(f,"class","col-sm-8"),d(g,"class","col-sm-4"),d(p,"class","col-sm-8"),d(_,"class","col-sm-4"),d(y,"class","col-sm-8"),d(c,"class","row"),d(l,"class","card-body"),d(r,"class","card"),d(s,"class","col-md-6"),d(x,"class","card-header"),d(L,"class","btn btn-outline-primary btn-sm"),d(E,"class","btn btn-outline-warning btn-sm"),d(I,"class","btn btn-outline-info btn-sm"),d(H,"class","d-grid gap-2"),d(U,"class","card-body"),d(P,"class","card"),d(w,"class","col-md-6"),d(i,"class","row")},m(q,Y){ue(q,e,Y),ue(q,t,Y),ue(q,i,Y),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),u(l,c),u(c,h),u(c,f),u(c,g),u(c,p),u(c,_),u(c,y),u(i,S),u(i,w),u(w,P),u(P,x),u(P,F),u(P,U),u(U,H),u(H,L),u(H,k),u(H,E),u(H,R),u(H,I),C||(O=Ee(I,"click",n[11]),C=!0)},p:dt,d(q){q&&(ce(e),ce(t),ce(i)),C=!1,O()}}}function z8(n){let e,t,i,s,r,o,a,l;function c(g,p){return g[2]?G8:W8}let h=c(n),f=h(n);return{c(){e=m("div"),t=m("h2"),t.innerHTML='<i class="fas fa-robot me-2 text-danger"></i>AI Usage Analytics',i=D(),s=m("button"),s.innerHTML='<i class="fas fa-sync-alt me-1"></i>Refresh',r=D(),f.c(),o=gi(),d(s,"class","btn btn-outline-danger btn-sm"),d(e,"class","d-flex justify-content-between align-items-center mb-4")},m(g,p){ue(g,e,p),u(e,t),u(e,i),u(e,s),ue(g,r,p),f.m(g,p),ue(g,o,p),a||(l=Ee(s,"click",n[7]),a=!0)},p(g,p){h===(h=c(g))&&f?f.p(g,p):(f.d(1),f=h(g),f&&(f.c(),f.m(o.parentNode,o)))},d(g){g&&(ce(e),ce(r),ce(o)),f.d(g),a=!1,l()}}}function H8(n){let e,t,i,s,r=n[4].length+"",o,a,l,c,h,f,g;function p(S,w){return S[4].length>0?K8:Y8}let _=p(n),y=_(n);return{c(){e=m("div"),t=m("h2"),t.innerHTML='<i class="fas fa-users me-2 text-danger"></i>Patients Management',i=D(),s=m("span"),o=le(r),a=le(" Patients"),l=D(),c=m("div"),h=m("div"),h.innerHTML='<h5 class="mb-0">All Patients</h5>',f=D(),g=m("div"),y.c(),d(s,"class","badge bg-success fs-6"),d(e,"class","d-flex justify-content-between align-items-center mb-4"),d(h,"class","card-header"),d(g,"class","card-body"),d(c,"class","card")},m(S,w){ue(S,e,w),u(e,t),u(e,i),u(e,s),u(s,o),u(s,a),ue(S,l,w),ue(S,c,w),u(c,h),u(c,f),u(c,g),y.m(g,null)},p(S,w){w[0]&16&&r!==(r=S[4].length+"")&&Se(o,r),_===(_=p(S))&&y?y.p(S,w):(y.d(1),y=_(S),y&&(y.c(),y.m(g,null)))},d(S){S&&(ce(e),ce(l),ce(c)),y.d()}}}function q8(n){let e,t,i,s,r=n[3].length+"",o,a,l,c,h,f,g;function p(S,w){return S[3].length>0?X8:J8}let _=p(n),y=_(n);return{c(){e=m("div"),t=m("h2"),t.innerHTML='<i class="fas fa-user-md me-2 text-danger"></i>Doctors Management',i=D(),s=m("span"),o=le(r),a=le(" Doctors"),l=D(),c=m("div"),h=m("div"),h.innerHTML='<h5 class="mb-0">All Registered Doctors</h5>',f=D(),g=m("div"),y.c(),d(s,"class","badge bg-primary fs-6"),d(e,"class","d-flex justify-content-between align-items-center mb-4"),d(h,"class","card-header"),d(g,"class","card-body"),d(c,"class","card")},m(S,w){ue(S,e,w),u(e,t),u(e,i),u(e,s),u(s,o),u(s,a),ue(S,l,w),ue(S,c,w),u(c,h),u(c,f),u(c,g),y.m(g,null)},p(S,w){w[0]&8&&r!==(r=S[3].length+"")&&Se(o,r),_===(_=p(S))&&y?y.p(S,w):(y.d(1),y=_(S),y&&(y.c(),y.m(g,null)))},d(S){S&&(ce(e),ce(l),ce(c)),y.d()}}}function V8(n){let e,t,i,s,r,o,a,l,c,h,f,g,p=n[1].totalDoctors+"",_,y,S,w,P,x,F,U,H,L,k=n[1].totalPatients+"",E,R,I,C,O,q,Y,$,Z,X,Q=n[1].totalPrescriptions+"",re,me,B,V,G,te,ae,fe,ve,he,ye=n[1].totalSymptoms+"",Ae,Me,Te,De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it;function ze(ot,Xe){return ot[2]?Q8:Z8}let Ge=ze(n),qe=Ge(n);return{c(){e=m("div"),t=m("h2"),t.innerHTML='<i class="fas fa-chart-bar me-2 text-danger"></i>System Overview',i=D(),s=m("button"),s.innerHTML='<i class="fas fa-sync-alt me-2"></i>Refresh',r=D(),o=m("div"),a=m("div"),l=m("div"),c=m("div"),h=m("i"),f=D(),g=m("h5"),_=le(p),y=D(),S=m("p"),S.textContent="Total Doctors",w=D(),P=m("div"),x=m("div"),F=m("div"),U=m("i"),H=D(),L=m("h5"),E=le(k),R=D(),I=m("p"),I.textContent="Total Patients",C=D(),O=m("div"),q=m("div"),Y=m("div"),$=m("i"),Z=D(),X=m("h5"),re=le(Q),me=D(),B=m("p"),B.textContent="Total Prescriptions",V=D(),G=m("div"),te=m("div"),ae=m("div"),fe=m("i"),ve=D(),he=m("h5"),Ae=le(ye),Me=D(),Te=m("p"),Te.textContent="Total Symptoms",De=D(),de=m("div"),W=m("div"),_e=m("div"),Ie=m("i"),be=D(),Le=m("h5"),qe.c(),We=D(),Je=m("p"),Je.innerHTML="AI Cost <small>(Est.)</small>",Ue=D(),Ye=m("div"),Ye.innerHTML='<div class="card-header"><h5 class="mb-0"><i class="fas fa-clock me-2"></i>Recent Activity</h5></div> <div class="card-body"><p class="text-muted">Recent system activity will be displayed here.</p></div>',d(s,"class","btn btn-outline-primary btn-sm"),d(e,"class","d-flex justify-content-between align-items-center mb-4"),d(h,"class","fas fa-user-md fa-2x text-primary mb-2"),d(g,"class","card-title"),d(S,"class","card-text text-muted"),d(c,"class","card-body text-center"),d(l,"class","card border-primary"),d(a,"class","col-md-6 col-lg-2 mb-3"),d(U,"class","fas fa-users fa-2x text-success mb-2"),d(L,"class","card-title"),d(I,"class","card-text text-muted"),d(F,"class","card-body text-center"),d(x,"class","card border-success"),d(P,"class","col-md-6 col-lg-2 mb-3"),d($,"class","fas fa-pills fa-2x text-warning mb-2"),d(X,"class","card-title"),d(B,"class","card-text text-muted"),d(Y,"class","card-body text-center"),d(q,"class","card border-warning"),d(O,"class","col-md-6 col-lg-2 mb-3"),d(fe,"class","fas fa-heartbeat fa-2x text-info mb-2"),d(he,"class","card-title"),d(Te,"class","card-text text-muted"),d(ae,"class","card-body text-center"),d(te,"class","card border-info"),d(G,"class","col-md-6 col-lg-2 mb-3"),d(Ie,"class","fas fa-robot fa-2x text-danger mb-2"),d(Le,"class","card-title"),d(Je,"class","card-text text-muted"),d(_e,"class","card-body text-center"),d(W,"class","card border-danger"),d(de,"class","col-md-6 col-lg-2 mb-3"),d(o,"class","row mb-4"),d(Ye,"class","card")},m(ot,Xe){ue(ot,e,Xe),u(e,t),u(e,i),u(e,s),ue(ot,r,Xe),ue(ot,o,Xe),u(o,a),u(a,l),u(l,c),u(c,h),u(c,f),u(c,g),u(g,_),u(c,y),u(c,S),u(o,w),u(o,P),u(P,x),u(x,F),u(F,U),u(F,H),u(F,L),u(L,E),u(F,R),u(F,I),u(o,C),u(o,O),u(O,q),u(q,Y),u(Y,$),u(Y,Z),u(Y,X),u(X,re),u(Y,me),u(Y,B),u(o,V),u(o,G),u(G,te),u(te,ae),u(ae,fe),u(ae,ve),u(ae,he),u(he,Ae),u(ae,Me),u(ae,Te),u(o,De),u(o,de),u(de,W),u(W,_e),u(_e,Ie),u(_e,be),u(_e,Le),qe.m(Le,null),u(_e,We),u(_e,Je),ue(ot,Ue,Xe),ue(ot,Ye,Xe),ht||(it=Ee(s,"click",n[11]),ht=!0)},p(ot,Xe){Xe[0]&2&&p!==(p=ot[1].totalDoctors+"")&&Se(_,p),Xe[0]&2&&k!==(k=ot[1].totalPatients+"")&&Se(E,k),Xe[0]&2&&Q!==(Q=ot[1].totalPrescriptions+"")&&Se(re,Q),Xe[0]&2&&ye!==(ye=ot[1].totalSymptoms+"")&&Se(Ae,ye),Ge===(Ge=ze(ot))&&qe?qe.p(ot,Xe):(qe.d(1),qe=Ge(ot),qe&&(qe.c(),qe.m(Le,null)))},d(ot){ot&&(ce(e),ce(r),ce(o),ce(Ue),ce(Ye)),qe.d(),ht=!1,it()}}}function W8(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="card-body text-center py-5"><i class="fas fa-robot fa-3x text-muted mb-3"></i> <h5 class="text-muted">No AI Usage Data Available</h5> <p class="text-muted">AI usage statistics will appear here once AI features are used.</p></div>',d(e,"class","card")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function G8(n){let e,t,i,s,r,o,a,l,c,h,f=n[2].total.cost.toFixed(4)+"",g,p,_,y,S,w,P,x,F,U,H=n[2].total.tokens.toLocaleString()+"",L,k,E,R,I,C,O,q,Y,$,Z=n[2].total.requests+"",X,Q,re,me,B,V,G,te,ae,fe,ve,he=n[2].today.cost.toFixed(4)+"",ye,Ae,Me,Te=n[2].today.requests+"",De,de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe,Mt,gt,Ft,xt,Qe,vt,pt,Rt,ft=Et(gs.getWeeklyUsage()),ut=[];for(let He=0;He<ft.length;He+=1)ut[He]=fb(ub(n,ft,He));let Lt=Et(gs.getRecentRequests(10)),st=[];for(let He=0;He<Lt.length;He+=1)st[He]=pb(cb(n,Lt,He));return{c(){e=m("div"),e.innerHTML=`<i class="fas fa-exclamation-triangle me-2"></i> <strong>Cost Disclaimer:</strong> These cost estimates are approximate and may not reflect actual OpenAI billing. 
                Actual costs may be higher due to taxes, fees, or pricing changes. 
                Check your <a href="https://platform.openai.com/usage" target="_blank" class="alert-link">OpenAI dashboard</a> for exact billing amounts.`,t=D(),i=m("div"),s=m("div"),r=m("div"),o=m("div"),a=m("h5"),a.innerHTML='<i class="fas fa-coins me-2"></i>Total Cost',l=D(),c=m("h3"),h=le("$"),g=le(f),p=D(),_=m("small"),_.textContent="All Time",y=D(),S=m("div"),w=m("div"),P=m("div"),x=m("h5"),x.innerHTML='<i class="fas fa-hashtag me-2"></i>Total Tokens',F=D(),U=m("h3"),L=le(H),k=D(),E=m("small"),E.textContent="All Time",R=D(),I=m("div"),C=m("div"),O=m("div"),q=m("h5"),q.innerHTML='<i class="fas fa-bolt me-2"></i>Total Requests',Y=D(),$=m("h3"),X=le(Z),Q=D(),re=m("small"),re.textContent="All Time",me=D(),B=m("div"),V=m("div"),G=m("div"),te=m("h5"),te.innerHTML='<i class="fas fa-calendar-day me-2"></i>Today',ae=D(),fe=m("h3"),ve=le("$"),ye=le(he),Ae=D(),Me=m("small"),De=le(Te),de=le(" requests"),W=D(),_e=m("div"),Ie=m("div"),be=m("div"),Le=m("div"),Le.innerHTML='<h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Daily Usage (Last 7 Days)</h5>',We=D(),Je=m("div"),Ue=m("div"),Ye=m("table"),ht=m("thead"),ht.innerHTML="<tr><th>Date</th> <th>Requests</th> <th>Tokens</th> <th>Cost</th></tr>",it=D(),ze=m("tbody");for(let He=0;He<ut.length;He+=1)ut[He].c();Ge=D(),qe=m("div"),ot=m("div"),Xe=m("div"),Mt=m("div"),Mt.innerHTML='<h5 class="mb-0"><i class="fas fa-history me-2"></i>Recent AI Requests</h5>',gt=D(),Ft=m("div"),xt=m("div"),Qe=m("table"),vt=m("thead"),vt.innerHTML="<tr><th>Time</th> <th>Type</th> <th>Tokens</th> <th>Cost</th></tr>",pt=D(),Rt=m("tbody");for(let He=0;He<st.length;He+=1)st[He].c();d(e,"class","alert alert-warning mb-4"),d(e,"role","alert"),d(a,"class","card-title text-primary"),d(c,"class","text-primary"),d(_,"class","text-muted"),d(o,"class","card-body"),d(r,"class","card text-center"),d(s,"class","col-md-3"),d(x,"class","card-title text-success"),d(U,"class","text-success"),d(E,"class","text-muted"),d(P,"class","card-body"),d(w,"class","card text-center"),d(S,"class","col-md-3"),d(q,"class","card-title text-info"),d($,"class","text-info"),d(re,"class","text-muted"),d(O,"class","card-body"),d(C,"class","card text-center"),d(I,"class","col-md-3"),d(te,"class","card-title text-warning"),d(fe,"class","text-warning"),d(Me,"class","text-muted"),d(G,"class","card-body"),d(V,"class","card text-center"),d(B,"class","col-md-3"),d(i,"class","row mb-4"),d(Le,"class","card-header"),d(Ye,"class","table table-sm table-hover"),d(Ue,"class","table-responsive"),d(Je,"class","card-body"),d(be,"class","card"),d(Ie,"class","col-12"),d(_e,"class","row mb-4"),d(Mt,"class","card-header"),d(Qe,"class","table table-sm table-hover"),d(xt,"class","table-responsive"),d(Ft,"class","card-body"),d(Xe,"class","card"),d(ot,"class","col-12"),d(qe,"class","row")},m(He,yt){ue(He,e,yt),ue(He,t,yt),ue(He,i,yt),u(i,s),u(s,r),u(r,o),u(o,a),u(o,l),u(o,c),u(c,h),u(c,g),u(o,p),u(o,_),u(i,y),u(i,S),u(S,w),u(w,P),u(P,x),u(P,F),u(P,U),u(U,L),u(P,k),u(P,E),u(i,R),u(i,I),u(I,C),u(C,O),u(O,q),u(O,Y),u(O,$),u($,X),u(O,Q),u(O,re),u(i,me),u(i,B),u(B,V),u(V,G),u(G,te),u(G,ae),u(G,fe),u(fe,ve),u(fe,ye),u(G,Ae),u(G,Me),u(Me,De),u(Me,de),ue(He,W,yt),ue(He,_e,yt),u(_e,Ie),u(Ie,be),u(be,Le),u(be,We),u(be,Je),u(Je,Ue),u(Ue,Ye),u(Ye,ht),u(Ye,it),u(Ye,ze);for(let bt=0;bt<ut.length;bt+=1)ut[bt]&&ut[bt].m(ze,null);ue(He,Ge,yt),ue(He,qe,yt),u(qe,ot),u(ot,Xe),u(Xe,Mt),u(Xe,gt),u(Xe,Ft),u(Ft,xt),u(xt,Qe),u(Qe,vt),u(Qe,pt),u(Qe,Rt);for(let bt=0;bt<st.length;bt+=1)st[bt]&&st[bt].m(Rt,null)},p(He,yt){if(yt[0]&4&&f!==(f=He[2].total.cost.toFixed(4)+"")&&Se(g,f),yt[0]&4&&H!==(H=He[2].total.tokens.toLocaleString()+"")&&Se(L,H),yt[0]&4&&Z!==(Z=He[2].total.requests+"")&&Se(X,Z),yt[0]&4&&he!==(he=He[2].today.cost.toFixed(4)+"")&&Se(ye,he),yt[0]&4&&Te!==(Te=He[2].today.requests+"")&&Se(De,Te),yt&0){ft=Et(gs.getWeeklyUsage());let bt;for(bt=0;bt<ft.length;bt+=1){const Dt=ub(He,ft,bt);ut[bt]?ut[bt].p(Dt,yt):(ut[bt]=fb(Dt),ut[bt].c(),ut[bt].m(ze,null))}for(;bt<ut.length;bt+=1)ut[bt].d(1);ut.length=ft.length}if(yt&0){Lt=Et(gs.getRecentRequests(10));let bt;for(bt=0;bt<Lt.length;bt+=1){const Dt=cb(He,Lt,bt);st[bt]?st[bt].p(Dt,yt):(st[bt]=pb(Dt),st[bt].c(),st[bt].m(Rt,null))}for(;bt<st.length;bt+=1)st[bt].d(1);st.length=Lt.length}},d(He){He&&(ce(e),ce(t),ce(i),ce(W),ce(_e),ce(Ge),ce(qe)),On(ut,He),On(st,He)}}}function fb(n){let e,t,i,s,r,o,a,l,c;return{c(){e=m("tr"),t=m("td"),t.textContent=`${new Date(n[30].date).toLocaleDateString()}`,i=D(),s=m("td"),s.textContent=`${n[30].requests}`,r=D(),o=m("td"),o.textContent=`${n[30].tokens.toLocaleString()}`,a=D(),l=m("td"),l.textContent=`$${n[30].cost.toFixed(4)}`,c=D()},m(h,f){ue(h,e,f),u(e,t),u(e,i),u(e,s),u(e,r),u(e,o),u(e,a),u(e,l),u(e,c)},p:dt,d(h){h&&ce(e)}}}function pb(n){let e,t,i,s,r,o,a,l,c,h;return{c(){e=m("tr"),t=m("td"),t.textContent=`${new Date(n[27].timestamp).toLocaleString()}`,i=D(),s=m("td"),r=m("span"),r.textContent=`${n[27].type.replace("generate","").replace("check","")}`,o=D(),a=m("td"),a.textContent=`${n[27].totalTokens.toLocaleString()}`,l=D(),c=m("td"),c.textContent=`$${n[27].cost.toFixed(4)}`,h=D(),d(r,"class","badge bg-primary")},m(f,g){ue(f,e,g),u(e,t),u(e,i),u(e,s),u(s,r),u(e,o),u(e,a),u(e,l),u(e,c),u(e,h)},p:dt,d(f){f&&ce(e)}}}function Y8(n){let e;return{c(){e=m("p"),e.textContent="No patients registered yet.",d(e,"class","text-muted text-center py-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function K8(n){let e,t,i,s,r,o=Et(n[4]),a=[];for(let l=0;l<o.length;l+=1)a[l]=mb(hb(n,o,l));return{c(){e=m("div"),t=m("table"),i=m("thead"),i.innerHTML="<tr><th>Name</th> <th>Email</th> <th>Phone</th> <th>Doctor</th> <th>Created</th></tr>",s=D(),r=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();d(t,"class","table table-hover"),d(e,"class","table-responsive")},m(l,c){ue(l,e,c),u(e,t),u(t,i),u(t,s),u(t,r);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(r,null)},p(l,c){if(c[0]&1040){o=Et(l[4]);let h;for(h=0;h<o.length;h+=1){const f=hb(l,o,h);a[h]?a[h].p(f,c):(a[h]=mb(f),a[h].c(),a[h].m(r,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},d(l){l&&ce(e),On(a,l)}}}function mb(n){let e,t,i=n[24].firstName+"",s,r,o=n[24].lastName+"",a,l,c,h=(n[24].email||"N/A")+"",f,g,p,_=(n[24].phone||"N/A")+"",y,S,w,P=n[24].doctorEmail+"",x,F,U,H=n[10](n[24].createdAt)+"",L,k;return{c(){e=m("tr"),t=m("td"),s=le(i),r=D(),a=le(o),l=D(),c=m("td"),f=le(h),g=D(),p=m("td"),y=le(_),S=D(),w=m("td"),x=le(P),F=D(),U=m("td"),L=le(H),k=D()},m(E,R){ue(E,e,R),u(e,t),u(t,s),u(t,r),u(t,a),u(e,l),u(e,c),u(c,f),u(e,g),u(e,p),u(p,y),u(e,S),u(e,w),u(w,x),u(e,F),u(e,U),u(U,L),u(e,k)},p(E,R){R[0]&16&&i!==(i=E[24].firstName+"")&&Se(s,i),R[0]&16&&o!==(o=E[24].lastName+"")&&Se(a,o),R[0]&16&&h!==(h=(E[24].email||"N/A")+"")&&Se(f,h),R[0]&16&&_!==(_=(E[24].phone||"N/A")+"")&&Se(y,_),R[0]&16&&P!==(P=E[24].doctorEmail+"")&&Se(x,P),R[0]&16&&H!==(H=E[10](E[24].createdAt)+"")&&Se(L,H)},d(E){E&&ce(e)}}}function J8(n){let e;return{c(){e=m("p"),e.textContent="No doctors registered yet.",d(e,"class","text-muted text-center py-4")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function X8(n){let e,t,i,s,r,o=Et(n[3]),a=[];for(let l=0;l<o.length;l+=1)a[l]=gb(db(n,o,l));return{c(){e=m("div"),t=m("table"),i=m("thead"),i.innerHTML="<tr><th>Email</th> <th>Name</th> <th>Role</th> <th>Created</th> <th>Patients</th></tr>",s=D(),r=m("tbody");for(let l=0;l<a.length;l+=1)a[l].c();d(t,"class","table table-hover"),d(e,"class","table-responsive")},m(l,c){ue(l,e,c),u(e,t),u(t,i),u(t,s),u(t,r);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(r,null)},p(l,c){if(c[0]&1032){o=Et(l[3]);let h;for(h=0;h<o.length;h+=1){const f=db(l,o,h);a[h]?a[h].p(f,c):(a[h]=gb(f),a[h].c(),a[h].m(r,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},d(l){l&&ce(e),On(a,l)}}}function gb(n){let e,t,i=n[21].email+"",s,r,o,a=(n[21].name||"N/A")+"",l,c,h,f,g=n[21].role+"",p,_,y,S=n[10](n[21].createdAt)+"",w,P,x,F=kt.getPatients(n[21].id).length+"",U,H;return{c(){e=m("tr"),t=m("td"),s=le(i),r=D(),o=m("td"),l=le(a),c=D(),h=m("td"),f=m("span"),p=le(g),_=D(),y=m("td"),w=le(S),P=D(),x=m("td"),U=le(F),H=D(),d(f,"class","badge bg-primary")},m(L,k){ue(L,e,k),u(e,t),u(t,s),u(e,r),u(e,o),u(o,l),u(e,c),u(e,h),u(h,f),u(f,p),u(e,_),u(e,y),u(y,w),u(e,P),u(e,x),u(x,U),u(e,H)},p(L,k){k[0]&8&&i!==(i=L[21].email+"")&&Se(s,i),k[0]&8&&a!==(a=(L[21].name||"N/A")+"")&&Se(l,a),k[0]&8&&g!==(g=L[21].role+"")&&Se(p,g),k[0]&8&&S!==(S=L[10](L[21].createdAt)+"")&&Se(w,S),k[0]&8&&F!==(F=kt.getPatients(L[21].id).length+"")&&Se(U,F)},d(L){L&&ce(e)}}}function Z8(n){let e;return{c(){e=le("$0.000")},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function Q8(n){let e,t=n[2].total.cost.toFixed(3)+"",i;return{c(){e=le("$"),i=le(t)},m(s,r){ue(s,e,r),ue(s,i,r)},p(s,r){r[0]&4&&t!==(t=s[2].total.cost.toFixed(3)+"")&&Se(i,t)},d(s){s&&(ce(e),ce(i))}}}function $8(n){let e;function t(r,o){return r[5]?j8:B8}let i=t(n),s=i(n);return{c(){e=m("div"),s.c(),d(e,"class","min-vh-100 bg-light")},m(r,o){ue(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},i:dt,o:dt,d(r){r&&ce(e),s.d()}}}function eC(n,e,t){const i=$i();let s=null,r={totalDoctors:0,totalPatients:0,totalPrescriptions:0,totalSymptoms:0,totalIllnesses:0},o=null,a=[],l=[],c=!0,h="overview";Go(()=>{f()});const f=async()=>{try{if(t(5,c=!0),t(0,s=Dl.getCurrentAdmin()),!s){i("admin-signed-out");return}await g(),p(),await _()}catch(k){console.error("❌ Error loading admin data:",k)}finally{t(5,c=!1)}},g=async()=>{try{const k=kt.getAllDoctors();t(1,r.totalDoctors=k.length,r);let E=0,R=0,I=0,C=0;for(const O of k){const q=kt.getPatients(O.id);E+=q.length;for(const Y of q){const $=kt.getPrescriptions(Y.id,O.id),Z=kt.getSymptoms(Y.id,O.id),X=kt.getIllnesses(Y.id,O.id);R+=$.length,I+=Z.length,C+=X.length}}t(1,r.totalPatients=E,r),t(1,r.totalPrescriptions=R,r),t(1,r.totalSymptoms=I,r),t(1,r.totalIllnesses=C,r)}catch(k){console.error("❌ Error loading statistics:",k)}},p=()=>{try{t(2,o=gs.getUsageStats()),console.log("📊 AI usage stats loaded:",o)}catch(k){console.error("❌ Error loading AI usage stats:",k),t(2,o=null)}},_=async()=>{try{t(3,a=kt.getAllDoctors()),t(4,l=[]);for(const k of a){const E=kt.getPatients(k.id);for(const R of E)l.push({...R,doctorEmail:k.email,doctorName:k.name||"Unknown Doctor"})}}catch(k){console.error("❌ Error loading doctors and patients:",k)}},y=async()=>{try{await Dl.signOut(),i("admin-signed-out")}catch(k){console.error("❌ Error signing out admin:",k)}},S=k=>{t(6,h=k)};return[s,r,o,a,l,c,h,p,y,S,k=>k?new Date(k).toLocaleDateString():"N/A",async()=>{await f()},()=>S("overview"),()=>S("doctors"),()=>S("patients"),()=>S("ai-usage"),()=>S("system")]}class tC extends ii{constructor(e){super(),ni(this,e,eC,$8,Zn,{},null,[-1,-1])}}function nC(n){let e,t;return e=new F8({}),e.$on("admin-signed-in",n[2]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p:dt,i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function iC(n){let e,t;return e=new tC({}),e.$on("admin-signed-out",n[3]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p:dt,i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function sC(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><div class="spinner-border text-danger mb-3" role="status"><span class="visually-hidden">Loading...</span></div> <p class="text-muted">Loading admin panel...</p></div>',d(e,"class","d-flex justify-content-center align-items-center vh-100 bg-light")},m(t,i){ue(t,e,i)},p:dt,i:dt,o:dt,d(t){t&&ce(e)}}}function rC(n){let e,t,i,s;const r=[sC,iC,nC],o=[];function a(l,c){return l[1]?0:l[0]?1:2}return t=a(n),i=o[t]=r[t](n),{c(){e=m("div"),i.c(),d(e,"class","admin-panel")},m(l,c){ue(l,e,c),o[t].m(e,null),s=!0},p(l,[c]){let h=t;t=a(l),t===h?o[t].p(l,c):(Mi(),Ot(o[h],1,1,()=>{o[h]=null}),Oi(),i=o[t],i?i.p(l,c):(i=o[t]=r[t](l),i.c()),Pt(i,1),i.m(e,null))},i(l){s||(Pt(i),s=!0)},o(l){Ot(i),s=!1},d(l){l&&ce(e),o[t].d()}}}function oC(n,e,t){$i();let i=null,s=!0;Go(()=>{r()});const r=()=>{try{t(0,i=Dl.getCurrentAdmin()),console.log("🔍 Current admin state:",i?"Authenticated":"Not authenticated")}catch(l){console.error("❌ Error checking admin auth:",l),t(0,i=null)}finally{t(1,s=!1)}};return[i,s,l=>{t(0,i=l),console.log("✅ Admin signed in successfully:",l.email)},()=>{t(0,i=null),console.log("👋 Admin signed out")}]}class Vv extends ii{constructor(e){super(),ni(this,e,oC,rC,Zn,{})}}function aC(n,e,t){const i=n.slice();return i[13]=e[t],i}function lC(n){let e;return{c(){e=m("option"),e.textContent=`${n[13].name}`,e.__value=n[13].name,je(e,e.__value)},m(t,i){ue(t,e,i)},p:dt,d(t){t&&ce(e)}}}function bb(n){let e,t,i;return{c(){e=m("div"),t=m("i"),i=le(n[4]),d(t,"class","fas fa-exclamation-triangle me-2"),d(e,"class","alert alert-danger"),d(e,"role","alert")},m(s,r){ue(s,e,r),u(e,t),u(e,i)},p(s,r){r&16&&Se(i,s[4])},d(s){s&&ce(e)}}}function vb(n){let e;return{c(){e=m("span"),d(e,"class","spinner-border spinner-border-sm me-2"),d(e,"role","status")},m(t,i){ue(t,e,i)},d(t){t&&ce(e)}}}function cC(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te,ae,fe,ve,he,ye,Ae=Et(P5),Me=[];for(let de=0;de<Ae.length;de+=1)Me[de]=lC(aC(n,Ae,de));let Te=n[4]&&bb(n),De=n[3]&&vb();return{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("h5"),r.innerHTML=`<i class="fas fa-user-edit me-2"></i>
          Edit Profile`,o=D(),a=m("button"),l=D(),c=m("form"),h=m("div"),f=m("div"),g=m("div"),p=m("label"),p.innerHTML='First Name <span class="text-danger">*</span>',_=D(),y=m("input"),S=D(),w=m("div"),P=m("label"),P.innerHTML='Last Name <span class="text-danger">*</span>',x=D(),F=m("input"),U=D(),H=m("div"),L=m("label"),L.textContent="Email Address",k=D(),E=m("input"),R=D(),I=m("div"),I.innerHTML=`<i class="fas fa-info-circle me-1"></i>
              Email cannot be changed for security reasons`,C=D(),O=m("div"),q=m("label"),q.innerHTML='Country <span class="text-danger">*</span>',Y=D(),$=m("select"),Z=m("option"),Z.textContent="Select your country";for(let de=0;de<Me.length;de+=1)Me[de].c();X=D(),Te&&Te.c(),Q=D(),re=m("div"),me=m("button"),B=m("i"),V=le(`
            Cancel`),G=D(),te=m("button"),De&&De.c(),ae=D(),fe=m("i"),ve=le(`
            Save Changes`),d(r,"class","modal-title"),d(a,"type","button"),d(a,"class","btn-close btn-close-white"),d(s,"class","modal-header bg-primary text-white"),d(p,"for","editFirstName"),d(p,"class","form-label"),d(y,"type","text"),d(y,"class","form-control"),d(y,"id","editFirstName"),d(y,"placeholder","Enter your first name"),y.required=!0,y.disabled=n[3],d(g,"class","col-md-6"),d(P,"for","editLastName"),d(P,"class","form-label"),d(F,"type","text"),d(F,"class","form-control"),d(F,"id","editLastName"),d(F,"placeholder","Enter your last name"),F.required=!0,F.disabled=n[3],d(w,"class","col-md-6"),d(f,"class","row mb-3"),d(L,"for","editEmail"),d(L,"class","form-label"),d(E,"type","email"),d(E,"class","form-control"),d(E,"id","editEmail"),E.value=n[5],E.disabled=!0,E.readOnly=!0,d(I,"class","form-text"),d(H,"class","mb-3"),d(q,"for","editCountry"),d(q,"class","form-label"),Z.__value="",je(Z,Z.__value),d($,"class","form-select"),d($,"id","editCountry"),$.required=!0,$.disabled=n[3],n[2]===void 0&&mr(()=>n[11].call($)),d(O,"class","mb-3"),d(h,"class","modal-body"),d(B,"class","fas fa-times me-1"),d(me,"type","button"),d(me,"class","btn btn-secondary"),me.disabled=n[3],d(fe,"class","fas fa-save me-1"),d(te,"type","submit"),d(te,"class","btn btn-primary"),te.disabled=n[3],d(re,"class","modal-footer"),d(i,"class","modal-content"),d(t,"class","modal-dialog"),d(e,"class","modal fade show d-block"),$n(e,"background-color","rgba(var(--bs-dark-rgb), 0.5)"),d(e,"tabindex","-1")},m(de,W){ue(de,e,W),u(e,t),u(t,i),u(i,s),u(s,r),u(s,o),u(s,a),u(i,l),u(i,c),u(c,h),u(h,f),u(f,g),u(g,p),u(g,_),u(g,y),je(y,n[0]),u(f,S),u(f,w),u(w,P),u(w,x),u(w,F),je(F,n[1]),u(h,U),u(h,H),u(H,L),u(H,k),u(H,E),u(H,R),u(H,I),u(h,C),u(h,O),u(O,q),u(O,Y),u(O,$),u($,Z);for(let _e=0;_e<Me.length;_e+=1)Me[_e]&&Me[_e].m($,null);as($,n[2],!0),u(h,X),Te&&Te.m(h,null),u(c,Q),u(c,re),u(re,me),u(me,B),u(me,V),u(re,G),u(re,te),De&&De.m(te,null),u(te,ae),u(te,fe),u(te,ve),he||(ye=[Ee(a,"click",n[7]),Ee(y,"input",n[9]),Ee(F,"input",n[10]),Ee($,"change",n[11]),Ee(me,"click",n[7]),Ee(c,"submit",n[6])],he=!0)},p(de,[W]){W&8&&(y.disabled=de[3]),W&1&&y.value!==de[0]&&je(y,de[0]),W&8&&(F.disabled=de[3]),W&2&&F.value!==de[1]&&je(F,de[1]),W&8&&($.disabled=de[3]),W&4&&as($,de[2]),de[4]?Te?Te.p(de,W):(Te=bb(de),Te.c(),Te.m(h,null)):Te&&(Te.d(1),Te=null),W&8&&(me.disabled=de[3]),de[3]?De||(De=vb(),De.c(),De.m(te,ae)):De&&(De.d(1),De=null),W&8&&(te.disabled=de[3])},i:dt,o:dt,d(de){de&&ce(e),On(Me,de),Te&&Te.d(),De&&De.d(),he=!1,an(ye)}}}function uC(n,e,t){const i=$i();let{user:s}=e,r=(s==null?void 0:s.firstName)||"",o=(s==null?void 0:s.lastName)||"",a=(s==null?void 0:s.email)||"",l=(s==null?void 0:s.country)||"",c=!1,h="";const f=async S=>{S.preventDefault(),t(4,h=""),t(3,c=!0);try{if(!r.trim()||!o.trim())throw new Error("First name and last name are required");if(!l.trim())throw new Error("Country is required");const w={...s,firstName:r.trim(),lastName:o.trim(),country:l.trim(),name:`${r.trim()} ${o.trim()}`};await Is.updateDoctor(w),Ls("Profile updated successfully!"),i("profile-updated",w)}catch(w){t(4,h=w.message),cr(h)}finally{t(3,c=!1)}},g=()=>{i("profile-cancelled")};function p(){r=this.value,t(0,r)}function _(){o=this.value,t(1,o)}function y(){l=Ha(this),t(2,l)}return n.$$set=S=>{"user"in S&&t(8,s=S.user)},[r,o,l,c,h,a,f,g,s,p,_,y]}class hC extends ii{constructor(e){super(),ni(this,e,uC,cC,Zn,{user:8})}}function _b(n){let e,t,i,s,r,o,a=n[2]==="success"?"Success":n[2]==="error"?"Error":n[2]==="warning"?"Warning":"Info",l,c,h,f,g,p,_,y,S;return{c(){e=m("div"),t=m("div"),i=m("i"),r=D(),o=m("strong"),l=le(a),c=D(),h=m("button"),g=D(),p=m("div"),_=le(n[1]),d(i,"class",s="fas fa-"+(n[2]==="success"?"check-circle":n[2]==="error"?"exclamation-circle":n[2]==="warning"?"exclamation-triangle":"info-circle")+" me-2"),d(o,"class","me-auto"),d(h,"type","button"),d(h,"class","btn-close btn-close-white"),d(h,"aria-label","Close"),d(t,"class",f="toast-header bg-"+(n[2]==="success"?"success":n[2]==="error"?"danger":n[2]==="warning"?"warning":"info")+" text-white"),d(p,"class","toast-body bg-white text-dark"),d(e,"class","toast show position-fixed top-0 end-0 m-3"),d(e,"role","alert"),d(e,"aria-live","assertive"),d(e,"aria-atomic","true"),$n(e,"z-index","9999"),$n(e,"min-width","300px")},m(w,P){ue(w,e,P),u(e,t),u(t,i),u(t,r),u(t,o),u(o,l),u(t,c),u(t,h),u(e,g),u(e,p),u(p,_),y||(S=Ee(h,"click",n[3]),y=!0)},p(w,P){P&4&&s!==(s="fas fa-"+(w[2]==="success"?"check-circle":w[2]==="error"?"exclamation-circle":w[2]==="warning"?"exclamation-triangle":"info-circle")+" me-2")&&d(i,"class",s),P&4&&a!==(a=w[2]==="success"?"Success":w[2]==="error"?"Error":w[2]==="warning"?"Warning":"Info")&&Se(l,a),P&4&&f!==(f="toast-header bg-"+(w[2]==="success"?"success":w[2]==="error"?"danger":w[2]==="warning"?"warning":"info")+" text-white")&&d(t,"class",f),P&2&&Se(_,w[1])},d(w){w&&ce(e),y=!1,S()}}}function dC(n){let e,t=n[0]&&_b(n);return{c(){t&&t.c(),e=gi()},m(i,s){t&&t.m(i,s),ue(i,e,s)},p(i,[s]){i[0]?t?t.p(i,s):(t=_b(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:dt,o:dt,d(i){i&&ce(e),t&&t.d(i)}}}function fC(n,e,t){let{message:i=""}=e,{type:s="success"}=e,{duration:r=3e3}=e,{visible:o=!1}=e,a=null;oh(()=>{a&&clearTimeout(a)});const l=()=>{t(0,o=!1),clearTimeout(a)};return n.$$set=c=>{"message"in c&&t(1,i=c.message),"type"in c&&t(2,s=c.type),"duration"in c&&t(4,r=c.duration),"visible"in c&&t(0,o=c.visible)},n.$$.update=()=>{n.$$.dirty&51&&o&&i&&(clearTimeout(a),t(5,a=setTimeout(()=>{t(0,o=!1)},r)))},[o,i,s,l,r,a]}class pC extends ii{constructor(e){super(),ni(this,e,fC,dC,Zn,{message:1,type:2,duration:4,visible:0})}}function yb(n,e,t){const i=n.slice();return i[1]=e[t],i}function wb(n,e){let t,i,s;return i=new pC({props:{message:e[1].message,type:e[1].type,duration:e[1].duration,visible:e[1].visible}}),{key:n,first:null,c(){t=gi(),Gn(i.$$.fragment),this.first=t},m(r,o){ue(r,t,o),zn(i,r,o),s=!0},p(r,o){e=r;const a={};o&1&&(a.message=e[1].message),o&1&&(a.type=e[1].type),o&1&&(a.duration=e[1].duration),o&1&&(a.visible=e[1].visible),i.$set(a)},i(r){s||(Pt(i.$$.fragment,r),s=!0)},o(r){Ot(i.$$.fragment,r),s=!1},d(r){r&&ce(t),Hn(i,r)}}}function mC(n){let e=[],t=new Map,i,s,r=Et(n[0]);const o=a=>a[1].id;for(let a=0;a<r.length;a+=1){let l=yb(n,r,a),c=o(l);t.set(c,e[a]=wb(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=gi()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);ue(a,i,l),s=!0},p(a,[l]){l&1&&(r=Et(a[0]),Mi(),e=If(e,l,o,1,a,r,t,i.parentNode,U_,wb,i,yb),Oi())},i(a){if(!s){for(let l=0;l<r.length;l+=1)Pt(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)Ot(e[l]);s=!1},d(a){a&&ce(i);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function gC(n,e,t){let i;return x_(n,Yf,s=>t(0,i=s)),[i]}class bC extends ii{constructor(e){super(),ni(this,e,gC,mC,Zn,{})}}function vC(n){let e,t,i,s,r,o,a,l,c,h,f,g,p,_,y,S,w,P,x,F,U,H,L,k,E,R,I,C,O,q,Y,$,Z,X;const Q=[SC,AC],re=[];function me(B,V){return B[5]==="doctor"?0:1}return C=me(n),O=re[C]=Q[C](n),{c(){e=m("div"),t=m("div"),i=m("div"),s=m("div"),r=m("div"),o=m("div"),o.innerHTML='<div class="text-center"><div class="mb-2 mb-md-3"><div class="bg-primary bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center svelte-1ithv52" style="width: 60px; height: 60px;"><i class="fas fa-stethoscope fa-lg text-primary svelte-1ithv52"></i></div></div> <h1 class="card-title fw-bold text-dark mb-1 mb-md-2 fs-3 fs-md-2 svelte-1ithv52">M-Prescribe</h1> <p class="text-muted mb-0 small d-none d-sm-block">AI-Powered Medical Prescription System</p> <p class="text-muted mb-0 d-sm-none" style="font-size: 0.75rem;">AI-Powered Medical System</p></div>',a=D(),l=m("div"),c=m("div"),h=m("div"),f=m("button"),g=m("i"),p=D(),_=m("span"),_.textContent="Doctor",y=D(),S=m("span"),S.textContent="Dr.",P=D(),x=m("button"),F=m("i"),U=D(),H=m("span"),H.textContent="Pharmacist",L=D(),k=m("span"),k.textContent="Pharm.",R=D(),I=m("div"),O.c(),q=D(),Y=m("div"),Y.innerHTML='<div class="text-center"><small class="text-muted"><i class="fas fa-shield-alt me-1"></i> <span class="d-none d-sm-inline">Secure • HIPAA Compliant • AI-Enhanced</span> <span class="d-sm-none">Secure • HIPAA • AI</span></small></div>',d(o,"class","card-header bg-white border-0 py-3 py-md-4"),d(g,"class","fas fa-user-md me-1 me-md-2"),d(_,"class","d-none d-sm-inline"),d(S,"class","d-sm-none"),d(f,"type","button"),d(f,"class",w="btn "+(n[5]==="doctor"?"btn-primary":"btn-outline-primary")+" flex-fill btn-sm btn-md svelte-1ithv52"),d(F,"class","fas fa-pills me-1 me-md-2"),d(H,"class","d-none d-sm-inline"),d(k,"class","d-sm-none"),d(x,"type","button"),d(x,"class",E="btn "+(n[5]==="pharmacist"?"btn-primary":"btn-outline-primary")+" flex-fill btn-sm btn-md svelte-1ithv52"),d(h,"class","btn-group w-100 svelte-1ithv52"),d(h,"role","group"),d(h,"aria-label","Authentication mode"),d(c,"class","mb-3 mb-md-4"),d(I,"class","bg-light rounded-2 rounded-md-3 p-3 p-md-4"),d(l,"class","card-body p-3 p-md-4"),d(Y,"class","card-footer bg-light border-0 py-2 py-md-3"),d(r,"class","card shadow-lg border-0 rounded-3 rounded-md-4 overflow-hidden"),d(s,"class","col-12 col-sm-11 col-md-10 col-lg-8 col-xl-6 col-xxl-5"),d(i,"class","row justify-content-center"),d(t,"class","container-fluid"),d(e,"class","min-vh-100 d-flex align-items-center justify-content-center bg-primary bg-gradient px-2 px-sm-3 px-md-4")},m(B,V){ue(B,e,V),u(e,t),u(t,i),u(i,s),u(s,r),u(r,o),u(r,a),u(r,l),u(l,c),u(c,h),u(h,f),u(f,g),u(f,p),u(f,_),u(f,y),u(f,S),u(h,P),u(h,x),u(x,F),u(x,U),u(x,H),u(x,L),u(x,k),u(l,R),u(l,I),re[C].m(I,null),u(r,q),u(r,Y),$=!0,Z||(X=[Ee(f,"click",n[14]),Ee(x,"click",n[15])],Z=!0)},p(B,V){(!$||V&32&&w!==(w="btn "+(B[5]==="doctor"?"btn-primary":"btn-outline-primary")+" flex-fill btn-sm btn-md svelte-1ithv52"))&&d(f,"class",w),(!$||V&32&&E!==(E="btn "+(B[5]==="pharmacist"?"btn-primary":"btn-outline-primary")+" flex-fill btn-sm btn-md svelte-1ithv52"))&&d(x,"class",E);let G=C;C=me(B),C===G?re[C].p(B,V):(Mi(),Ot(re[G],1,1,()=>{re[G]=null}),Oi(),O=re[C],O?O.p(B,V):(O=re[C]=Q[C](B),O.c()),Pt(O,1),O.m(I,null))},i(B){$||(Pt(O),$=!0)},o(B){Ot(O),$=!1},d(B){B&&ce(e),re[C].d(),Z=!1,an(X)}}}function _C(n){let e,t,i,s;const r=[NC,PC,kC],o=[];function a(l,c){return l[0].role==="admin"||l[0].isAdmin?0:l[0].role==="pharmacist"?1:2}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),i=gi()},m(l,c){o[e].m(l,c),ue(l,i,c),s=!0},p(l,c){let h=e;e=a(l),e===h?o[e].p(l,c):(Mi(),Ot(o[h],1,1,()=>{o[h]=null}),Oi(),t=o[e],t?t.p(l,c):(t=o[e]=r[e](l),t.c()),Pt(t,1),t.m(i.parentNode,i))},i(l){s||(Pt(t),s=!0)},o(l){Ot(t),s=!1},d(l){l&&ce(i),o[e].d(l)}}}function yC(n){let e;return{c(){e=m("div"),e.innerHTML='<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x text-primary mb-3 svelte-1ithv52"></i> <p class="text-muted">Loading M-Prescribe...</p></div>',d(e,"class","d-flex justify-content-center align-items-center vh-100")},m(t,i){ue(t,e,i)},p:dt,i:dt,o:dt,d(t){t&&ce(e)}}}function wC(n){let e,t;return e=new Vv({}),e.$on("back-to-app",n[12]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p:dt,i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function AC(n){let e,t,i,s;return i=new L6({}),i.$on("pharmacist-login",n[13]),i.$on("switch-to-doctor",n[14]),{c(){e=m("div"),e.innerHTML='<h4 class="fw-semibold text-dark mb-0 fs-5 fs-md-4"><i class="fas fa-pills text-primary me-1 me-md-2"></i> <span class="d-none d-sm-inline">Pharmacist Portal</span> <span class="d-sm-none">Pharmacist</span></h4>',t=D(),Gn(i.$$.fragment),d(e,"class","text-center mb-3 mb-md-4")},m(r,o){ue(r,e,o),ue(r,t,o),zn(i,r,o),s=!0},p:dt,i(r){s||(Pt(i.$$.fragment,r),s=!0)},o(r){Ot(i.$$.fragment,r),s=!1},d(r){r&&(ce(e),ce(t)),Hn(i,r)}}}function SC(n){let e,t,i,s;return i=new _6({}),i.$on("user-authenticated",n[6]),{c(){e=m("div"),e.innerHTML='<h4 class="fw-semibold text-dark mb-0 fs-5 fs-md-4"><i class="fas fa-user-md text-primary me-1 me-md-2"></i> <span class="d-none d-sm-inline">Doctor Portal</span> <span class="d-sm-none">Doctor</span></h4>',t=D(),Gn(i.$$.fragment),d(e,"class","text-center mb-3 mb-md-4")},m(r,o){ue(r,e,o),ue(r,t,o),zn(i,r,o),s=!0},p:dt,i(r){s||(Pt(i.$$.fragment,r),s=!0)},o(r){Ot(i.$$.fragment,r),s=!1},d(r){r&&(ce(e),ce(t)),Hn(i,r)}}}function kC(n){var Mt,gt,Ft,xt;let e,t,i,s,r,o,a,l,c,h,f,g,p,_=(n[0].name||(n[0].firstName&&n[0].lastName?`${n[0].firstName} ${n[0].lastName}`:n[0].firstName)||n[0].email)+"",y,S,w,P,x,F,U,H,L=Math.round((((gt=(Mt=n[4])==null?void 0:Mt.today)==null?void 0:gt.tokens)||0)/1e5*100)+"",k,E,R,I,C,O,q,Y,$,Z,X,Q,re,me,B,V,G,te=(n[0].firstName||n[0].email)+"",ae,fe,ve,he,ye,Ae,Me,Te,De=Math.round((((xt=(Ft=n[4])==null?void 0:Ft.today)==null?void 0:xt.tokens)||0)/1e5*100)+"",de,W,_e,Ie,be,Le,We,Je,Ue,Ye,ht,it,ze,Ge,qe,ot,Xe;return Ge=new x8({props:{user:n[0]}}),Ge.$on("ai-usage-updated",n[16]),{c(){var Qe,vt,pt,Rt,ft,ut,Lt,st,He,yt,bt,Dt,Ct,qt;e=m("nav"),t=m("div"),i=m("span"),i.innerHTML='<i class="fas fa-user-md me-1 me-md-2"></i> <span class="d-none d-sm-inline">M-Prescribe</span> <span class="d-sm-none">M-P</span>',s=D(),r=m("button"),r.innerHTML='<span class="navbar-toggler-icon"></span>',o=D(),a=m("div"),l=m("div"),c=m("div"),h=m("i"),f=D(),g=m("span"),p=le("Dr. "),y=le(_),S=D(),w=m("div"),P=m("i"),x=D(),F=m("div"),U=m("div"),H=m("span"),k=le(L),E=le("%"),C=D(),O=m("button"),O.innerHTML=`<i class="fas fa-user-edit me-1"></i>
                Edit Profile`,q=D(),Y=m("button"),Y.innerHTML=`<i class="fas fa-shield-alt me-1"></i>
                Admin`,$=D(),Z=m("button"),Z.innerHTML=`<i class="fas fa-sign-out-alt me-1"></i>
                Logout`,X=D(),Q=m("div"),re=m("div"),me=m("i"),B=D(),V=m("span"),G=le("Dr. "),ae=le(te),fe=D(),ve=m("div"),he=m("i"),ye=D(),Ae=m("div"),Me=m("div"),Te=m("span"),de=le(De),W=le("%"),be=D(),Le=m("div"),We=m("button"),We.innerHTML=`<i class="fas fa-user-edit me-1"></i>
                  Edit`,Je=D(),Ue=m("button"),Ue.innerHTML=`<i class="fas fa-shield-alt me-1"></i>
                  Admin`,Ye=D(),ht=m("button"),ht.innerHTML=`<i class="fas fa-sign-out-alt me-1"></i>
                  Exit`,it=D(),ze=m("div"),Gn(Ge.$$.fragment),d(i,"class","navbar-brand svelte-1ithv52"),d(r,"class","navbar-toggler"),d(r,"type","button"),d(r,"data-bs-toggle","collapse"),d(r,"data-bs-target","#navbarNav"),d(r,"aria-controls","navbarNav"),d(r,"aria-expanded","false"),d(r,"aria-label","Toggle navigation"),d(h,"class","fas fa-user me-2"),d(g,"class","me-3"),d(P,"class","fas fa-robot me-2 text-white"),d(H,"class","text-dark fw-bold"),$n(H,"font-size","0.7rem"),d(U,"class","progress-bar bg-white progress-bar-striped progress-bar-animated"),d(U,"role","progressbar"),$n(U,"width",Math.min((((vt=(Qe=n[4])==null?void 0:Qe.today)==null?void 0:vt.tokens)||0)/1e5*100,100)+"%"),d(U,"aria-valuenow",R=((Rt=(pt=n[4])==null?void 0:pt.today)==null?void 0:Rt.tokens)||0),d(U,"aria-valuemin","0"),d(U,"aria-valuemax","100000"),d(F,"class","progress bg-danger border border-light"),$n(F,"width","120px"),$n(F,"height","20px"),d(F,"title",I="AI Token Usage: "+(((Lt=(ut=(ft=n[4])==null?void 0:ft.today)==null?void 0:ut.tokens)==null?void 0:Lt.toLocaleString())||"0")+" / 100,000 tokens"),d(w,"class","d-flex align-items-center me-3"),d(c,"class","navbar-text me-3 d-flex align-items-center svelte-1ithv52"),d(O,"class","btn btn-outline-light btn-sm me-2 svelte-1ithv52"),d(Y,"class","btn btn-outline-light btn-sm me-2 svelte-1ithv52"),d(Z,"class","btn btn-outline-light btn-sm svelte-1ithv52"),d(l,"class","d-none d-lg-flex align-items-center ms-auto"),d(me,"class","fas fa-user me-2"),d(V,"class","text-light"),d(re,"class","d-flex align-items-center mb-2"),d(he,"class","fas fa-robot me-2 text-white"),d(Te,"class","text-dark fw-bold"),$n(Te,"font-size","0.65rem"),d(Me,"class","progress-bar bg-white progress-bar-striped progress-bar-animated"),d(Me,"role","progressbar"),$n(Me,"width",Math.min((((He=(st=n[4])==null?void 0:st.today)==null?void 0:He.tokens)||0)/1e5*100,100)+"%"),d(Me,"aria-valuenow",_e=((bt=(yt=n[4])==null?void 0:yt.today)==null?void 0:bt.tokens)||0),d(Me,"aria-valuemin","0"),d(Me,"aria-valuemax","100000"),d(Ae,"class","progress bg-danger border border-light flex-grow-1"),$n(Ae,"height","18px"),d(Ae,"title",Ie="AI Token Usage: "+(((qt=(Ct=(Dt=n[4])==null?void 0:Dt.today)==null?void 0:Ct.tokens)==null?void 0:qt.toLocaleString())||"0")+" / 100,000 tokens"),d(ve,"class","d-flex align-items-center mb-3"),d(We,"class","btn btn-outline-light btn-sm flex-fill svelte-1ithv52"),d(Ue,"class","btn btn-outline-light btn-sm flex-fill svelte-1ithv52"),d(ht,"class","btn btn-outline-light btn-sm flex-fill svelte-1ithv52"),d(Le,"class","d-flex gap-2"),d(Q,"class","d-lg-none mt-2"),d(a,"class","collapse navbar-collapse"),d(a,"id","navbarNav"),d(t,"class","container-fluid px-2 px-md-3"),d(e,"class","navbar navbar-expand-lg navbar-dark bg-primary svelte-1ithv52"),d(ze,"class","container-fluid mt-3 mt-md-4 px-3 px-md-4")},m(Qe,vt){ue(Qe,e,vt),u(e,t),u(t,i),u(t,s),u(t,r),u(t,o),u(t,a),u(a,l),u(l,c),u(c,h),u(c,f),u(c,g),u(g,p),u(g,y),u(c,S),u(c,w),u(w,P),u(w,x),u(w,F),u(F,U),u(U,H),u(H,k),u(H,E),u(l,C),u(l,O),u(l,q),u(l,Y),u(l,$),u(l,Z),u(a,X),u(a,Q),u(Q,re),u(re,me),u(re,B),u(re,V),u(V,G),u(V,ae),u(Q,fe),u(Q,ve),u(ve,he),u(ve,ye),u(ve,Ae),u(Ae,Me),u(Me,Te),u(Te,de),u(Te,W),u(Q,be),u(Q,Le),u(Le,We),u(Le,Je),u(Le,Ue),u(Le,Ye),u(Le,ht),ue(Qe,it,vt),ue(Qe,ze,vt),zn(Ge,ze,null),qe=!0,ot||(Xe=[Ee(O,"click",n[8]),Ee(Y,"click",n[11]),Ee(Z,"click",n[7]),Ee(We,"click",n[8]),Ee(Ue,"click",n[11]),Ee(ht,"click",n[7])],ot=!0)},p(Qe,vt){var Rt,ft,ut,Lt,st,He,yt,bt,Dt,Ct,qt,wt,en,Ln,sn,un,rn,Zt;(!qe||vt&1)&&_!==(_=(Qe[0].name||(Qe[0].firstName&&Qe[0].lastName?`${Qe[0].firstName} ${Qe[0].lastName}`:Qe[0].firstName)||Qe[0].email)+"")&&Se(y,_),(!qe||vt&16)&&L!==(L=Math.round((((ft=(Rt=Qe[4])==null?void 0:Rt.today)==null?void 0:ft.tokens)||0)/1e5*100)+"")&&Se(k,L),(!qe||vt&16)&&$n(U,"width",Math.min((((Lt=(ut=Qe[4])==null?void 0:ut.today)==null?void 0:Lt.tokens)||0)/1e5*100,100)+"%"),(!qe||vt&16&&R!==(R=((He=(st=Qe[4])==null?void 0:st.today)==null?void 0:He.tokens)||0))&&d(U,"aria-valuenow",R),(!qe||vt&16&&I!==(I="AI Token Usage: "+(((Dt=(bt=(yt=Qe[4])==null?void 0:yt.today)==null?void 0:bt.tokens)==null?void 0:Dt.toLocaleString())||"0")+" / 100,000 tokens"))&&d(F,"title",I),(!qe||vt&1)&&te!==(te=(Qe[0].firstName||Qe[0].email)+"")&&Se(ae,te),(!qe||vt&16)&&De!==(De=Math.round((((qt=(Ct=Qe[4])==null?void 0:Ct.today)==null?void 0:qt.tokens)||0)/1e5*100)+"")&&Se(de,De),(!qe||vt&16)&&$n(Me,"width",Math.min((((en=(wt=Qe[4])==null?void 0:wt.today)==null?void 0:en.tokens)||0)/1e5*100,100)+"%"),(!qe||vt&16&&_e!==(_e=((sn=(Ln=Qe[4])==null?void 0:Ln.today)==null?void 0:sn.tokens)||0))&&d(Me,"aria-valuenow",_e),(!qe||vt&16&&Ie!==(Ie="AI Token Usage: "+(((Zt=(rn=(un=Qe[4])==null?void 0:un.today)==null?void 0:rn.tokens)==null?void 0:Zt.toLocaleString())||"0")+" / 100,000 tokens"))&&d(Ae,"title",Ie);const pt={};vt&1&&(pt.user=Qe[0]),Ge.$set(pt)},i(Qe){qe||(Pt(Ge.$$.fragment,Qe),qe=!0)},o(Qe){Ot(Ge.$$.fragment,Qe),qe=!1},d(Qe){Qe&&(ce(e),ce(it),ce(ze)),Hn(Ge),ot=!1,an(Xe)}}}function PC(n){let e,t;return e=new R6({props:{pharmacist:n[0]}}),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.pharmacist=i[0]),e.$set(r)},i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function NC(n){let e,t;return e=new Vv({}),e.$on("back-to-app",n[12]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p:dt,i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function Ab(n){let e,t;return e=new hC({props:{user:n[0]}}),e.$on("profile-updated",n[10]),e.$on("profile-cancelled",n[9]),{c(){Gn(e.$$.fragment)},m(i,s){zn(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.user=i[0]),e.$set(r)},i(i){t||(Pt(e.$$.fragment,i),t=!0)},o(i){Ot(e.$$.fragment,i),t=!1},d(i){Hn(e,i)}}}function IC(n){let e,t,i,s,r,o,a;const l=[wC,yC,_C,vC],c=[];function h(g,p){return g[2]?0:g[1]?1:g[0]?2:3}t=h(n),i=c[t]=l[t](n);let f=n[3]&&Ab(n);return o=new bC({}),{c(){e=m("main"),i.c(),s=D(),f&&f.c(),r=D(),Gn(o.$$.fragment),d(e,"class","container-fluid")},m(g,p){ue(g,e,p),c[t].m(e,null),u(e,s),f&&f.m(e,null),u(e,r),zn(o,e,null),a=!0},p(g,[p]){let _=t;t=h(g),t===_?c[t].p(g,p):(Mi(),Ot(c[_],1,1,()=>{c[_]=null}),Oi(),i=c[t],i?i.p(g,p):(i=c[t]=l[t](g),i.c()),Pt(i,1),i.m(e,s)),g[3]?f?(f.p(g,p),p&8&&Pt(f,1)):(f=Ab(g),f.c(),Pt(f,1),f.m(e,r)):f&&(Mi(),Ot(f,1,1,()=>{f=null}),Oi())},i(g){a||(Pt(i),Pt(f),Pt(o.$$.fragment,g),a=!0)},o(g){Ot(i),Ot(f),Ot(o.$$.fragment,g),a=!1},d(g){g&&ce(e),c[t].d(),f&&f.d(),Hn(o)}}}function LC(n,e,t){let i=null,s=!0,r=!1,o=!1,a=null,l=null,c="doctor",h=!1;Go(()=>{try{const H=gh.onAuthStateChanged(L=>{if(console.log("Firebase auth state changed:",L),console.log("User just updated flag:",h),h){console.log("Skipping Firebase auth update - user was just updated"),h=!1;return}if(L)if(L.role==="admin"||L.isAdmin){const k=Dl.getCurrentAdmin();k&&k.email===L.email?(t(0,i={...L,...k}),console.log("Merged Firebase admin user:",i)):(t(0,i=L),console.log("Using Firebase admin user:",L)),t(2,r=!0)}else{const k=Is.getCurrentUser();k&&k.email===L.email?(t(0,i={...L,...k}),console.log("Merged Firebase and local user data:",i)):(t(0,i=L),console.log("Using Firebase user:",L))}else i||(t(0,i=Is.getCurrentUser()),console.log("Current user in App:",i),console.log("User ID:",i==null?void 0:i.id),console.log("User UID:",i==null?void 0:i.uid),console.log("User email:",i==null?void 0:i.email),console.log("User role:",i==null?void 0:i.role),console.log("User country:",i==null?void 0:i.country))});window.firebaseUnsubscribe=H,i!=null&&i.id&&(i==null?void 0:i.role)==="doctor"&&t(4,a=gs.getDoctorUsageStats(i.id)),console.log("Setting loading to false"),t(1,s=!1)}catch(H){console.error("Error in onMount:",H),t(1,s=!1)}setTimeout(()=>{s&&(console.log("Fallback: Setting loading to false"),t(1,s=!1))},2e3)}),oh(()=>{window.firebaseUnsubscribe&&(window.firebaseUnsubscribe(),window.firebaseUnsubscribe=null)});const f=H=>{t(0,i=H.detail)},g=async()=>{try{l&&(clearInterval(l),t(17,l=null)),await Is.signOut(),await gh.signOut(),await Dl.signOut(),t(0,i=null),t(4,a=null),t(2,r=!1)}catch(H){console.error("Error signing out:",H)}},p=()=>{t(3,o=!0)},_=()=>{t(3,o=!1)},y=H=>{console.log("App: Profile updated, new user data:",H),t(0,i=H),Is.saveCurrentUser(H),h=!0,t(3,o=!1),console.log("App: Profile update complete, user country:",i.country)},S=()=>{t(2,r=!0)},w=()=>{t(2,r=!1)},P=H=>{console.log("Pharmacist login:",H),t(0,i={...H,role:"pharmacist"}),t(1,s=!1)},x=()=>{t(5,c="doctor")},F=()=>{t(5,c="pharmacist")},U=()=>{i!=null&&i.id&&(t(4,a=gs.getDoctorUsageStats(i.id)),console.log("🔄 Doctor usage stats refreshed:",a))};return oh(()=>{l&&clearInterval(l)}),n.$$.update=()=>{if(n.$$.dirty&131073&&i){const H=(i==null?void 0:i.id)||(i==null?void 0:i.uid)||(i==null?void 0:i.email)||"default-user";t(4,a=gs.getDoctorUsageStats(H)),l&&clearInterval(l),t(17,l=setInterval(()=>{if(i){const L=(i==null?void 0:i.id)||(i==null?void 0:i.uid)||(i==null?void 0:i.email)||"default-user";t(4,a=gs.getDoctorUsageStats(L))}},5e3))}},[i,s,r,o,a,c,f,g,p,_,y,S,w,P,x,F,U,l]}class CC extends ii{constructor(e){super(),ni(this,e,LC,IC,Zn,{})}}new CC({target:document.getElementById("app")});export{Mn as _};
